<!DOCTYPE html>
<html>
<head>
    <title>Map</title>
    <!-- We can include remote script because this page will be loaded in the web context (ms-wwa-web:///map.html)  -->
    <script src="http://ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=7.0" type="text/javascript"></script>
    <script type="text/javascript">
        var map = null;

        function initialize() {
            var mapOptions = {
                credentials: "Aja6radJVcwQXxWiNjdd3fUr5s17eumJbZjmUsK-0R7IeOPALqAFjaJoUECrhqDr",
                mapTypeId: Microsoft.Maps.MapTypeId.road, center: new Microsoft.Maps.Location(31.770087164037285, -9.029029312500025),
                zoom: 1,
                showLogo: false,
                showDashboard: false,
                enableSearchLogo: false,
                inertiaIntensity: 0.85,
                showBreadcrumb: true,
                labelOverlay: Microsoft.Maps.LabelOverlay.hidden,
                showCopyright: false
            };
            map = new Microsoft.Maps.Map(document.getElementById("map"), mapOptions);
        }
        //document.addEventListener("DOMContentLoaded", initialize, false);

        //add event listener for postMessage() messages from container html
        window.addEventListener("message", receiveMessage, false);

        function receiveMessage(event) {
            switch (event.data.method) {
                case 'pan':
                    var dx = event.data.args.x;
                    var dy = event.data.args.y;
                    var pos = map.tryPixelToLocation(new Microsoft.Maps.Point(map.getWidth() / 2 + dx, map.getHeight() / 2 + dy, Microsoft.Maps.PixelReference.viewport));
                    map.setView({ center: pos });
                    break;

                case 'zoomin':
                    var currentZoom = map.getZoom();
                    map.setView({ zoom: currentZoom + 1 });
                    break;

                case 'zoomout':
                    var currentZoom = map.getZoom();
                    map.setView({ zoom: currentZoom - 1 });
                    break;
            }
        }


    </script>
    <style type="text/css">
        body, html
        {
            margin:0;
        }
        
        #map
        {
          position:absolute;
          width:100%;
          height:100%;
        }
    </style>
</head>
<body>
    <div id="map"></div>
</body>
</html>