var TAG=function(container,ip){function json2xml(a,b){var c=function(a,b,d){var e="";if(a instanceof Array)for(var f=0,g=a.length;g>f;f++)e+=d+c(a[f],b,d+"	")+"\n";else if("object"==typeof a){var h=!1;e+=d+"<"+b;for(var i in a)"@"==i.charAt(0)?e+=" "+i.substr(1)+'="'+a[i].toString()+'"':h=!0;if(e+=h?">":"/>",h){for(var i in a)"#text"==i?e+=a[i]:"#cdata"==i?e+="<![CDATA["+a[i]+"]]>":"@"!=i.charAt(0)&&(e+=c(a[i],i,d+"	"));e+=("\n"==e.charAt(e.length-1)?d:"")+"</"+b+">"}}else e+=d+"<"+b+">"+a.toString()+"</"+b+">";return e},d="";for(var e in a)d+=c(a[e],e,"");return b?d.replace(/\t/g,b):d.replace(/\t|\n/g,"")}function AVLTree(a,b){"use strict";this._comparator=a,this._root=null,this._intermediates=[],this._current=null,this._valuation=b}function AVLNode(a,b){"use strict";this._comparator=b,this._left=null,this._right=null,this._value=a,this._height=1}function binaryHeap(a){"use strict";this.content=[],this.scoreFunction=a||function(a){return a}}function DataHolder(){"use strict";this._trackArray=[],this._scoreFunctionMin=function(a){return a.bound},this._selectedTrack,this._leftExternal=new binaryHeap(this._scoreFunctionMin),this._leftInternal=new binaryHeap(this._scoreFunctionMin),this._rightExternal=new binaryHeap(this._scoreFunctionMin),this._rightInternal=new binaryHeap(this._scoreFunctionMin),this._dispComparator=function(a,b){return a.display.getStart()<b.display.getStart()?-1:a.display.getStart()>b.display.getStart()?1:0},this._kfComparator=function(a,b){return a.getTime()<b.getTime()?-1:a.getTime()>b.getTime()?1:0},this._dispValuation=function(a,b){return b?a<b.display.getStart()?-1:a>b.display.getStart()?1:0:!1},this._kfValuation=function(a,b){return b?a<b.getTime()?-1:a>b.getTime()?1:0:!1}}function TwoStageTimer(a,b){this._s1d=a.duration,this._s1p=a.payload,this._s2d=b.duration,this._s2p=b.payload,this._s1TimeoutID=null,this._s2TimeoutID=null,this._started=!1}function DoublyLinkedList(){"use strict";this._head=null,this._tail=null,this._length=0}function HashTable(){this._length=0,this._items={}}var LADS,Worktop;!function(a,b){function c(a){var b,c,d=L[a]={};for(a=a.split(/\s+/),b=0,c=a.length;c>b;b++)d[a[b]]=!0;return d}function d(a,c,d){if(d===b&&1===a.nodeType){var e="data-"+c.replace(O,"-$1").toLowerCase();if(d=a.getAttribute(e),"string"==typeof d){try{d="true"===d?!0:"false"===d?!1:"null"===d?null:K.isNumeric(d)?parseFloat(d):N.test(d)?K.parseJSON(d):d}catch(f){}K.data(a,c,d)}else d=b}return d}function e(a){for(var b in a)if(("data"!==b||!K.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function f(a,b,c){var d=b+"defer",e=b+"queue",f=b+"mark",g=K._data(a,d);!g||"queue"!==c&&K._data(a,e)||"mark"!==c&&K._data(a,f)||setTimeout(function(){K._data(a,e)||K._data(a,f)||(K.removeData(a,d,!0),g.fire())},0)}function g(){return!1}function h(){return!0}function i(a){return!a||!a.parentNode||11===a.parentNode.nodeType}function j(a,b,c){if(b=b||0,K.isFunction(b))return K.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return K.grep(a,function(a){return a===b===c});if("string"==typeof b){var d=K.grep(a,function(a){return 1===a.nodeType});if(lb.test(b))return K.filter(b,d,!c);b=K.filter(b,d)}return K.grep(a,function(a){return K.inArray(a,b)>=0===c})}function k(a){var b=pb.split("|"),c=a.createDocumentFragment();if(c.createElement)for(;b.length;)c.createElement(b.pop());return c}function l(a){return K.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function m(a,b){if(1===b.nodeType&&K.hasData(a)){var c,d,e,f=K._data(a),g=K._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)K.event.add(b,c+(h[c][d].namespace?".":"")+h[c][d].namespace,h[c][d],h[c][d].data)}g.data&&(g.data=K.extend({},g.data))}}function n(a,b){var c;1===b.nodeType&&(b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase(),"object"===c?b.outerHTML=a.outerHTML:"input"!==c||"checkbox"!==a.type&&"radio"!==a.type?"option"===c?b.selected=a.defaultSelected:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue):(a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value)),b.removeAttribute(K.expando))}function o(a){return"undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName("*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll("*"):[]}function p(a){("checkbox"===a.type||"radio"===a.type)&&(a.defaultChecked=a.checked)}function q(a){var b=(a.nodeName||"").toLowerCase();"input"===b?p(a):"script"!==b&&"undefined"!=typeof a.getElementsByTagName&&K.grep(a.getElementsByTagName("input"),p)}function r(a){var b=H.createElement("div");return Db.appendChild(b),b.innerHTML=a.outerHTML,b.firstChild}function s(a,b){b.src?K.ajax({url:b.src,async:!1,dataType:"script"}):K.globalEval((b.text||b.textContent||b.innerHTML||"").replace(Bb,"/*$0*/")),b.parentNode&&b.parentNode.removeChild(b)}function t(a,b,c){var d="width"===b?a.offsetWidth:a.offsetHeight,e="width"===b?Ob:Pb,f=0,g=e.length;if(d>0){if("border"!==c)for(;g>f;f++)c||(d-=parseFloat(K.css(a,"padding"+e[f]))||0),"margin"===c?d+=parseFloat(K.css(a,c+e[f]))||0:d-=parseFloat(K.css(a,"border"+e[f]+"Width"))||0;return d+"px"}if(d=Eb(a,b,b),(0>d||null==d)&&(d=a.style[b]||0),d=parseFloat(d)||0,c)for(;g>f;f++)d+=parseFloat(K.css(a,"padding"+e[f]))||0,"padding"!==c&&(d+=parseFloat(K.css(a,"border"+e[f]+"Width"))||0),"margin"===c&&(d+=parseFloat(K.css(a,c+e[f]))||0);return d+"px"}function u(a){return function(b,c){if("string"!=typeof b&&(c=b,b="*"),K.isFunction(c))for(var d,e,f,g=b.toLowerCase().split(cc),h=0,i=g.length;i>h;h++)d=g[h],f=/^\+/.test(d),f&&(d=d.substr(1)||"*"),e=a[d]=a[d]||[],e[f?"unshift":"push"](c)}}function v(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;for(var h,i=a[f],j=0,k=i?i.length:0,l=a===gc;k>j&&(l||!h);j++)h=i[j](c,d,e),"string"==typeof h&&(!l||g[h]?h=b:(c.dataTypes.unshift(h),h=v(a,c,d,e,h,g)));return!l&&h||g["*"]||(h=v(a,c,d,e,"*",g)),h}function w(a,c){var d,e,f=K.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((f[d]?a:e||(e={}))[d]=c[d]);e&&K.extend(!0,a,e)}function x(a,b,c,d){if(K.isArray(b))K.each(b,function(b,e){c||Tb.test(a)?d(a,e):x(a+"["+("object"==typeof e||K.isArray(e)?b:"")+"]",e,c,d)});else if(c||null==b||"object"!=typeof b)d(a,b);else for(var e in b)x(a+"["+e+"]",b[e],c,d)}function y(a,c,d){var e,f,g,h,i=a.contents,j=a.dataTypes,k=a.responseFields;for(f in k)f in d&&(c[k[f]]=d[f]);for(;"*"===j[0];)j.shift(),e===b&&(e=a.mimeType||c.getResponseHeader("content-type"));if(e)for(f in i)if(i[f]&&i[f].test(e)){j.unshift(f);break}if(j[0]in d)g=j[0];else{for(f in d){if(!j[0]||a.converters[f+" "+j[0]]){g=f;break}h||(h=f)}g=g||h}return g?(g!==j[0]&&j.unshift(g),d[g]):void 0}function z(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var d,e,f,g,h,i,j,k,l=a.dataTypes,m={},n=l.length,o=l[0];for(d=1;n>d;d++){if(1===d)for(e in a.converters)"string"==typeof e&&(m[e.toLowerCase()]=a.converters[e]);if(g=o,o=l[d],"*"===o)o=g;else if("*"!==g&&g!==o){if(h=g+" "+o,i=m[h]||m["* "+o],!i){k=b;for(j in m)if(f=j.split(" "),(f[0]===g||"*"===f[0])&&(k=m[f[1]+" "+o])){j=m[j],j===!0?i=k:k===!0&&(i=j);break}}i||k||K.error("No conversion from "+h.replace(" "," to ")),i!==!0&&(c=i?i(c):k(j(c)))}}return c}function A(){try{return new a.XMLHttpRequest}catch(b){}}function B(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function C(){return setTimeout(D,0),sc=K.now()}function D(){sc=b}function E(a,b){var c={};return K.each(wc.concat.apply([],wc.slice(0,b)),function(){c[this]=a}),c}function F(a){if(!tc[a]){var b=H.body,c=K("<"+a+">").appendTo(b),d=c.css("display");c.remove(),("none"===d||""===d)&&(pc||(pc=H.createElement("iframe"),pc.frameBorder=pc.width=pc.height=0),b.appendChild(pc),qc&&pc.createElement||(qc=(pc.contentWindow||pc.contentDocument).document,qc.write(("CSS1Compat"===H.compatMode?"<!doctype html>":"")+"<html><body>"),qc.close()),c=qc.createElement(a),qc.body.appendChild(c),d=K.css(c,"display"),b.removeChild(pc)),tc[a]=d}return tc[a]}function G(a){return K.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var H=a.document,I=a.navigator,J=a.location,K=function(){function c(){if(!h.isReady){try{H.documentElement.doScroll("left")}catch(a){return void setTimeout(c,1)}h.ready()}}var d,e,f,g,h=function(a,b){return new h.fn.init(a,b,d)},i=a.jQuery,j=a.$,k=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,l=/\S/,m=/^\s+/,n=/\s+$/,o=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,p=/^[\],:{}\s]*$/,q=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,r=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,s=/(?:^|:|,)(?:\s*\[)+/g,t=/(webkit)[ \/]([\w.]+)/,u=/(opera)(?:.*version)?[ \/]([\w.]+)/,v=/(msie) ([\w.]+)/,w=/(mozilla)(?:.*? rv:([\w.]+))?/,x=/-([a-z]|[0-9])/gi,y=/^-ms-/,z=function(a,b){return(b+"").toUpperCase()},A=I.userAgent,B=Object.prototype.toString,C=Object.prototype.hasOwnProperty,D=Array.prototype.push,E=Array.prototype.slice,F=String.prototype.trim,G=Array.prototype.indexOf,J={};return h.fn=h.prototype={constructor:h,init:function(a,c,d){var e,f,g,i;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if("body"===a&&!c&&H.body)return this.context=H,this[0]=H.body,this.selector=a,this.length=1,this;if("string"==typeof a){if(e="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:k.exec(a),!e||!e[1]&&c)return!c||c.jquery?(c||d).find(a):this.constructor(c).find(a);if(e[1])return c=c instanceof h?c[0]:c,i=c?c.ownerDocument||c:H,g=o.exec(a),g?h.isPlainObject(c)?(a=[H.createElement(g[1])],h.fn.attr.call(a,c,!0)):a=[i.createElement(g[1])]:(g=h.buildFragment([e[1]],[i]),a=(g.cacheable?h.clone(g.fragment):g.fragment).childNodes),h.merge(this,a);if(f=H.getElementById(e[2]),f&&f.parentNode){if(f.id!==e[2])return d.find(a);this.length=1,this[0]=f}return this.context=H,this.selector=a,this}return h.isFunction(a)?d.ready(a):(a.selector!==b&&(this.selector=a.selector,this.context=a.context),h.makeArray(a,this))},selector:"",jquery:"1.7.1",length:0,size:function(){return this.length},toArray:function(){return E.call(this,0)},get:function(a){return null==a?this.toArray():0>a?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=this.constructor();return h.isArray(a)?D.apply(d,a):h.merge(d,a),d.prevObject=this,d.context=this.context,"find"===b?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")"),d},each:function(a,b){return h.each(this,a,b)},ready:function(a){return h.bindReady(),f.add(a),this},eq:function(a){return a=+a,-1===a?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(E.apply(this,arguments),"slice",E.call(arguments).join(","))},map:function(a){return this.pushStack(h.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:D,sort:[].sort,splice:[].splice},h.fn.init.prototype=h.fn,h.extend=h.fn.extend=function(){var a,c,d,e,f,g,i=arguments[0]||{},j=1,k=arguments.length,l=!1;for("boolean"==typeof i&&(l=i,i=arguments[1]||{},j=2),"object"==typeof i||h.isFunction(i)||(i={}),k===j&&(i=this,--j);k>j;j++)if(null!=(a=arguments[j]))for(c in a)d=i[c],e=a[c],i!==e&&(l&&e&&(h.isPlainObject(e)||(f=h.isArray(e)))?(f?(f=!1,g=d&&h.isArray(d)?d:[]):g=d&&h.isPlainObject(d)?d:{},i[c]=h.extend(l,g,e)):e!==b&&(i[c]=e));return i},h.extend({noConflict:function(b){return a.$===h&&(a.$=j),b&&a.jQuery===h&&(a.jQuery=i),h},isReady:!1,readyWait:1,holdReady:function(a){a?h.readyWait++:h.ready(!0)},ready:function(a){if(a===!0&&!--h.readyWait||a!==!0&&!h.isReady){if(!H.body)return setTimeout(h.ready,1);if(h.isReady=!0,a!==!0&&--h.readyWait>0)return;f.fireWith(H,[h]),h.fn.trigger&&h(H).trigger("ready").off("ready")}},bindReady:function(){if(!f){if(f=h.Callbacks("once memory"),"complete"===H.readyState)return setTimeout(h.ready,1);if(H.addEventListener)H.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",h.ready,!1);else if(H.attachEvent){H.attachEvent("onreadystatechange",g),a.attachEvent("onload",h.ready);var b=!1;try{b=null==a.frameElement}catch(d){}H.documentElement.doScroll&&b&&c()}}},isFunction:function(a){return"function"===h.type(a)},isArray:Array.isArray||function(a){return"array"===h.type(a)},isWindow:function(a){return a&&"object"==typeof a&&"setInterval"in a},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?String(a):J[B.call(a)]||"object"},isPlainObject:function(a){if(!a||"object"!==h.type(a)||a.nodeType||h.isWindow(a))return!1;try{if(a.constructor&&!C.call(a,"constructor")&&!C.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}var d;for(d in a);return d===b||C.call(a,d)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw new Error(a)},parseJSON:function(b){return"string"==typeof b&&b?(b=h.trim(b),a.JSON&&a.JSON.parse?a.JSON.parse(b):p.test(b.replace(q,"@").replace(r,"]").replace(s,""))?new Function("return "+b)():void h.error("Invalid JSON: "+b)):null},parseXML:function(c){var d,e;try{a.DOMParser?(e=new DOMParser,d=e.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(f){d=b}return d&&d.documentElement&&!d.getElementsByTagName("parsererror").length||h.error("Invalid XML: "+c),d},noop:function(){},globalEval:function(b){b&&l.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(y,"ms-").replace(x,z)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var e,f=0,g=a.length,i=g===b||h.isFunction(a);if(d)if(i){for(e in a)if(c.apply(a[e],d)===!1)break}else for(;g>f&&c.apply(a[f++],d)!==!1;);else if(i){for(e in a)if(c.call(a[e],e,a[e])===!1)break}else for(;g>f&&c.call(a[f],f,a[f++])!==!1;);return a},trim:F?function(a){return null==a?"":F.call(a)}:function(a){return null==a?"":a.toString().replace(m,"").replace(n,"")},makeArray:function(a,b){var c=b||[];if(null!=a){var d=h.type(a);null==a.length||"string"===d||"function"===d||"regexp"===d||h.isWindow(a)?D.call(c,a):h.merge(c,a)}return c},inArray:function(a,b,c){var d;if(b){if(G)return G.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=a.length,e=0;if("number"==typeof c.length)for(var f=c.length;f>e;e++)a[d++]=c[e];else for(;c[e]!==b;)a[d++]=c[e++];return a.length=d,a},grep:function(a,b,c){var d,e=[];c=!!c;for(var f=0,g=a.length;g>f;f++)d=!!b(a[f],f),c!==d&&e.push(a[f]);return e},map:function(a,c,d){var e,f,g=[],i=0,j=a.length,k=a instanceof h||j!==b&&"number"==typeof j&&(j>0&&a[0]&&a[j-1]||0===j||h.isArray(a));if(k)for(;j>i;i++)e=c(a[i],i,d),null!=e&&(g[g.length]=e);else for(f in a)e=c(a[f],f,d),null!=e&&(g[g.length]=e);return g.concat.apply([],g)},guid:1,proxy:function(a,c){if("string"==typeof c){var d=a[c];c=a,a=d}if(!h.isFunction(a))return b;var e=E.call(arguments,2),f=function(){return a.apply(c,e.concat(E.call(arguments)))};return f.guid=a.guid=a.guid||f.guid||h.guid++,f},access:function(a,c,d,e,f,g){var i=a.length;if("object"==typeof c){for(var j in c)h.access(a,j,c[j],e,f,d);return a}if(d!==b){e=!g&&e&&h.isFunction(d);for(var k=0;i>k;k++)f(a[k],c,e?d.call(a[k],k,f(a[k],c)):d,g);return a}return i?f(a[0],c):b},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();var b=t.exec(a)||u.exec(a)||v.exec(a)||a.indexOf("compatible")<0&&w.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}h.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(c,d){return d&&d instanceof h&&!(d instanceof a)&&(d=a(d)),h.fn.init.call(this,c,d,b)},a.fn.init.prototype=a.fn;var b=a(H);return a},browser:{}}),h.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){J["[object "+b+"]"]=b.toLowerCase()}),e=h.uaMatch(A),e.browser&&(h.browser[e.browser]=!0,h.browser.version=e.version),h.browser.webkit&&(h.browser.safari=!0),l.test(" ")&&(m=/^[\s ]+/,n=/[\s ]+$/),d=h(H),H.addEventListener?g=function(){H.removeEventListener("DOMContentLoaded",g,!1),h.ready()}:H.attachEvent&&(g=function(){"complete"===H.readyState&&(H.detachEvent("onreadystatechange",g),h.ready())}),h}(),L={};K.Callbacks=function(a){a=a?L[a]||c(a):{};var d,e,f,g,h,i=[],j=[],k=function(b){var c,d,e,f;for(c=0,d=b.length;d>c;c++)e=b[c],f=K.type(e),"array"===f?k(e):"function"===f&&(a.unique&&m.has(e)||i.push(e))},l=function(b,c){for(c=c||[],d=!a.memory||[b,c],e=!0,h=f||0,f=0,g=i.length;i&&g>h;h++)if(i[h].apply(b,c)===!1&&a.stopOnFalse){d=!0;break}e=!1,i&&(a.once?d===!0?m.disable():i=[]:j&&j.length&&(d=j.shift(),m.fireWith(d[0],d[1])))},m={add:function(){if(i){var a=i.length;k(arguments),e?g=i.length:d&&d!==!0&&(f=a,l(d[0],d[1]))}return this},remove:function(){if(i)for(var b=arguments,c=0,d=b.length;d>c;c++)for(var f=0;f<i.length&&(b[c]!==i[f]||(e&&g>=f&&(g--,h>=f&&h--),i.splice(f--,1),!a.unique));f++);return this},has:function(a){if(i)for(var b=0,c=i.length;c>b;b++)if(a===i[b])return!0;return!1},empty:function(){return i=[],this},disable:function(){return i=j=d=b,this},disabled:function(){return!i},lock:function(){return j=b,d&&d!==!0||m.disable(),this},locked:function(){return!j},fireWith:function(b,c){return j&&(e?a.once||j.push([b,c]):a.once&&d||l(b,c)),this},fire:function(){return m.fireWith(this,arguments),this},fired:function(){return!!d}};return m};var M=[].slice;K.extend({Deferred:function(a){var b,c=K.Callbacks("once memory"),d=K.Callbacks("once memory"),e=K.Callbacks("memory"),f="pending",g={resolve:c,reject:d,notify:e},h={done:c.add,fail:d.add,progress:e.add,state:function(){return f},isResolved:c.fired,isRejected:d.fired,then:function(a,b,c){return i.done(a).fail(b).progress(c),this},always:function(){return i.done.apply(i,arguments).fail.apply(i,arguments),this},pipe:function(a,b,c){return K.Deferred(function(d){K.each({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c,e=b[0],f=b[1];i[a](K.isFunction(e)?function(){c=e.apply(this,arguments),c&&K.isFunction(c.promise)?c.promise().then(d.resolve,d.reject,d.notify):d[f+"With"](this===i?d:this,[c])}:d[f])})}).promise()},promise:function(a){if(null==a)a=h;else for(var b in h)a[b]=h[b];return a}},i=h.promise({});for(b in g)i[b]=g[b].fire,i[b+"With"]=g[b].fireWith;return i.done(function(){f="resolved"},d.disable,e.lock).fail(function(){f="rejected"},c.disable,e.lock),a&&a.call(i,i),i},when:function(a){function b(a){return function(b){d[a]=arguments.length>1?M.call(arguments,0):b,--h||i.resolveWith(i,d)}}function c(a){return function(b){g[a]=arguments.length>1?M.call(arguments,0):b,i.notifyWith(j,g)}}var d=M.call(arguments,0),e=0,f=d.length,g=new Array(f),h=f,i=1>=f&&a&&K.isFunction(a.promise)?a:K.Deferred(),j=i.promise();if(f>1){for(;f>e;e++)d[e]&&d[e].promise&&K.isFunction(d[e].promise)?d[e].promise().then(b(e),i.reject,c(e)):--h;h||i.resolveWith(i,d)}else i!==a&&i.resolveWith(i,f?[a]:[]);return j}}),K.support=function(){{var b,c,d,e,f,g,h,i,j,k,l,m,n=H.createElement("div");H.documentElement}if(n.setAttribute("className","t"),n.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",c=n.getElementsByTagName("*"),d=n.getElementsByTagName("a")[0],!c||!c.length||!d)return{};e=H.createElement("select"),f=e.appendChild(H.createElement("option")),g=n.getElementsByTagName("input")[0],b={leadingWhitespace:3===n.firstChild.nodeType,tbody:!n.getElementsByTagName("tbody").length,htmlSerialize:!!n.getElementsByTagName("link").length,style:/top/.test(d.getAttribute("style")),hrefNormalized:"/a"===d.getAttribute("href"),opacity:/^0.55/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,checkOn:"on"===g.value,optSelected:f.selected,getSetAttribute:"t"!==n.className,enctype:!!H.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==H.createElement("nav").cloneNode(!0).outerHTML,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},g.checked=!0,b.noCloneChecked=g.cloneNode(!0).checked,e.disabled=!0,b.optDisabled=!f.disabled;try{delete n.test}catch(o){b.deleteExpando=!1}if(!n.addEventListener&&n.attachEvent&&n.fireEvent&&(n.attachEvent("onclick",function(){b.noCloneEvent=!1}),n.cloneNode(!0).fireEvent("onclick")),g=H.createElement("input"),g.value="t",g.setAttribute("type","radio"),b.radioValue="t"===g.value,g.setAttribute("checked","checked"),n.appendChild(g),i=H.createDocumentFragment(),i.appendChild(n.lastChild),b.checkClone=i.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=g.checked,i.removeChild(g),i.appendChild(n),n.innerHTML="",a.getComputedStyle&&(h=H.createElement("div"),h.style.width="0",h.style.marginRight="0",n.style.width="2px",n.appendChild(h),b.reliableMarginRight=0===(parseInt((a.getComputedStyle(h,null)||{marginRight:0}).marginRight,10)||0)),n.attachEvent)for(l in{submit:1,change:1,focusin:1})k="on"+l,m=k in n,m||(n.setAttribute(k,"return;"),m="function"==typeof n[k]),b[l+"Bubbles"]=m;return i.removeChild(n),i=e=f=h=n=g=null,K(function(){var a,c,d,e,f,g,h,i,k,l,o=H.getElementsByTagName("body")[0];o&&(g=1,h="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;",i="visibility:hidden;border:0;",k="style='"+h+"border:5px solid #000;padding:0;'",l="<div "+k+"><div></div></div><table "+k+" cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",a=H.createElement("div"),a.style.cssText=i+"width:0;height:0;position:static;top:0;margin-top:"+g+"px",o.insertBefore(a,o.firstChild),n=H.createElement("div"),a.appendChild(n),n.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",j=n.getElementsByTagName("td"),m=0===j[0].offsetHeight,j[0].style.display="",j[1].style.display="none",b.reliableHiddenOffsets=m&&0===j[0].offsetHeight,n.innerHTML="",n.style.width=n.style.paddingLeft="1px",K.boxModel=b.boxModel=2===n.offsetWidth,"undefined"!=typeof n.style.zoom&&(n.style.display="inline",n.style.zoom=1,b.inlineBlockNeedsLayout=2===n.offsetWidth,n.style.display="",n.innerHTML="<div style='width:4px;'></div>",b.shrinkWrapBlocks=2!==n.offsetWidth),n.style.cssText=h+i,n.innerHTML=l,c=n.firstChild,d=c.firstChild,e=c.nextSibling.firstChild.firstChild,f={doesNotAddBorder:5!==d.offsetTop,doesAddBorderForTableAndCells:5===e.offsetTop},d.style.position="fixed",d.style.top="20px",f.fixedPosition=20===d.offsetTop||15===d.offsetTop,d.style.position=d.style.top="",c.style.overflow="hidden",c.style.position="relative",f.subtractsBorderForOverflowNotVisible=-5===d.offsetTop,f.doesNotIncludeMarginInBodyOffset=o.offsetTop!==g,o.removeChild(a),n=a=null,K.extend(b,f))}),b}();var N=/^(?:\{.*\}|\[.*\])$/,O=/([A-Z])/g;K.extend({cache:{},uuid:0,expando:"jQuery"+(K.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){return a=a.nodeType?K.cache[a[K.expando]]:a[K.expando],!!a&&!e(a)},data:function(a,c,d,e){if(K.acceptData(a)){var f,g,h,i=K.expando,j="string"==typeof c,k=a.nodeType,l=k?K.cache:a,m=k?a[i]:a[i]&&i,n="events"===c;if(m&&l[m]&&(n||e||l[m].data)||!j||d!==b)return m||(k?a[i]=m=++K.uuid:m=i),l[m]||(l[m]={},k||(l[m].toJSON=K.noop)),("object"==typeof c||"function"==typeof c)&&(e?l[m]=K.extend(l[m],c):l[m].data=K.extend(l[m].data,c)),f=g=l[m],e||(g.data||(g.data={}),g=g.data),d!==b&&(g[K.camelCase(c)]=d),n&&!g[c]?f.events:(j?(h=g[c],null==h&&(h=g[K.camelCase(c)])):h=g,h)}},removeData:function(a,b,c){if(K.acceptData(a)){var d,f,g,h=K.expando,i=a.nodeType,j=i?K.cache:a,k=i?a[h]:h;if(j[k]){if(b&&(d=c?j[k]:j[k].data)){K.isArray(b)||(b in d?b=[b]:(b=K.camelCase(b),b=b in d?[b]:b.split(" ")));for(f=0,g=b.length;g>f;f++)delete d[b[f]];if(!(c?e:K.isEmptyObject)(d))return}(c||(delete j[k].data,e(j[k])))&&(K.support.deleteExpando||!j.setInterval?delete j[k]:j[k]=null,i&&(K.support.deleteExpando?delete a[h]:a.removeAttribute?a.removeAttribute(h):a[h]=null))}}},_data:function(a,b,c){return K.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=K.noData[a.nodeName.toLowerCase()];if(b)return!(b===!0||a.getAttribute("classid")!==b)}return!0}}),K.fn.extend({data:function(a,c){var e,f,g,h=null;if("undefined"==typeof a){if(this.length&&(h=K.data(this[0]),1===this[0].nodeType&&!K._data(this[0],"parsedAttrs"))){f=this[0].attributes;for(var i=0,j=f.length;j>i;i++)g=f[i].name,0===g.indexOf("data-")&&(g=K.camelCase(g.substring(5)),d(this[0],g,h[g]));K._data(this[0],"parsedAttrs",!0)}return h}return"object"==typeof a?this.each(function(){K.data(this,a)}):(e=a.split("."),e[1]=e[1]?"."+e[1]:"",c===b?(h=this.triggerHandler("getData"+e[1]+"!",[e[0]]),h===b&&this.length&&(h=K.data(this[0],a),h=d(this[0],a,h)),h===b&&e[1]?this.data(e[0]):h):this.each(function(){var b=K(this),d=[e[0],c];b.triggerHandler("setData"+e[1]+"!",d),K.data(this,a,c),b.triggerHandler("changeData"+e[1]+"!",d)}))},removeData:function(a){return this.each(function(){K.removeData(this,a)})}}),K.extend({_mark:function(a,b){a&&(b=(b||"fx")+"mark",K._data(a,b,(K._data(a,b)||0)+1))},_unmark:function(a,b,c){if(a!==!0&&(c=b,b=a,a=!1),b){c=c||"fx";var d=c+"mark",e=a?0:(K._data(b,d)||1)-1;e?K._data(b,d,e):(K.removeData(b,d,!0),f(b,c,"mark"))}},queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=K._data(a,b),c&&(!d||K.isArray(c)?d=K._data(a,b,K.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=K.queue(a,b),d=c.shift(),e={};"inprogress"===d&&(d=c.shift()),d&&("fx"===b&&c.unshift("inprogress"),K._data(a,b+".run",e),d.call(a,function(){K.dequeue(a,b)},e)),c.length||(K.removeData(a,b+"queue "+b+".run",!0),f(a,b,"queue"))}}),K.fn.extend({queue:function(a,c){return"string"!=typeof a&&(c=a,a="fx"),c===b?K.queue(this[0],a):this.each(function(){var b=K.queue(this,a,c);"fx"===a&&"inprogress"!==b[0]&&K.dequeue(this,a)})},dequeue:function(a){return this.each(function(){K.dequeue(this,a)})},delay:function(a,b){return a=K.fx?K.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){function d(){--i||f.resolveWith(g,[g])}"string"!=typeof a&&(c=a,a=b),a=a||"fx";for(var e,f=K.Deferred(),g=this,h=g.length,i=1,j=a+"defer",k=a+"queue",l=a+"mark";h--;)(e=K.data(g[h],j,b,!0)||(K.data(g[h],k,b,!0)||K.data(g[h],l,b,!0))&&K.data(g[h],j,K.Callbacks("once memory"),!0))&&(i++,e.add(d));return d(),f.promise()}});var P,Q,R,S=/[\n\t\r]/g,T=/\s+/,U=/\r/g,V=/^(?:button|input)$/i,W=/^(?:button|input|object|select|textarea)$/i,X=/^a(?:rea)?$/i,Y=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Z=K.support.getSetAttribute;K.fn.extend({attr:function(a,b){return K.access(this,a,b,!0,K.attr)},removeAttr:function(a){return this.each(function(){K.removeAttr(this,a)})},prop:function(a,b){return K.access(this,a,b,!0,K.prop)},removeProp:function(a){return a=K.propFix[a]||a,this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,f,g,h;if(K.isFunction(a))return this.each(function(b){K(this).addClass(a.call(this,b,this.className))});if(a&&"string"==typeof a)for(b=a.split(T),c=0,d=this.length;d>c;c++)if(e=this[c],1===e.nodeType)if(e.className||1!==b.length){for(f=" "+e.className+" ",g=0,h=b.length;h>g;g++)~f.indexOf(" "+b[g]+" ")||(f+=b[g]+" ");e.className=K.trim(f)}else e.className=a;return this},removeClass:function(a){var c,d,e,f,g,h,i;if(K.isFunction(a))return this.each(function(b){K(this).removeClass(a.call(this,b,this.className))});if(a&&"string"==typeof a||a===b)for(c=(a||"").split(T),d=0,e=this.length;e>d;d++)if(f=this[d],1===f.nodeType&&f.className)if(a){for(g=(" "+f.className+" ").replace(S," "),h=0,i=c.length;i>h;h++)g=g.replace(" "+c[h]+" "," ");f.className=K.trim(g)}else f.className="";return this},toggleClass:function(a,b){var c=typeof a,d="boolean"==typeof b;return this.each(K.isFunction(a)?function(c){K(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c)for(var e,f=0,g=K(this),h=b,i=a.split(T);e=i[f++];)h=d?h:!g.hasClass(e),g[h?"addClass":"removeClass"](e);else("undefined"===c||"boolean"===c)&&(this.className&&K._data(this,"__className__",this.className),this.className=this.className||a===!1?"":K._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(S," ").indexOf(b)>-1)return!0;return!1},val:function(a){var c,d,e,f=this[0];{if(arguments.length)return e=K.isFunction(a),this.each(function(d){var f,g=K(this);1===this.nodeType&&(f=e?a.call(this,d,g.val()):a,null==f?f="":"number"==typeof f?f+="":K.isArray(f)&&(f=K.map(f,function(a){return null==a?"":a+""})),c=K.valHooks[this.nodeName.toLowerCase()]||K.valHooks[this.type],c&&"set"in c&&c.set(this,f,"value")!==b||(this.value=f))});if(f)return c=K.valHooks[f.nodeName.toLowerCase()]||K.valHooks[f.type],c&&"get"in c&&(d=c.get(f,"value"))!==b?d:(d=f.value,"string"==typeof d?d.replace(U,""):null==d?"":d)}}}),K.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,f=a.selectedIndex,g=[],h=a.options,i="select-one"===a.type;if(0>f)return null;for(c=i?f:0,d=i?f+1:h.length;d>c;c++)if(e=h[c],!(!e.selected||(K.support.optDisabled?e.disabled:null!==e.getAttribute("disabled"))||e.parentNode.disabled&&K.nodeName(e.parentNode,"optgroup"))){if(b=K(e).val(),i)return b;g.push(b)}return i&&!g.length&&h.length?K(h[f]).val():g},set:function(a,b){var c=K.makeArray(b);return K(a).find("option").each(function(){this.selected=K.inArray(K(this).val(),c)>=0}),c.length||(a.selectedIndex=-1),c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,c,d,e){var f,g,h,i=a.nodeType;if(a&&3!==i&&8!==i&&2!==i)return e&&c in K.attrFn?K(a)[c](d):"undefined"==typeof a.getAttribute?K.prop(a,c,d):(h=1!==i||!K.isXMLDoc(a),h&&(c=c.toLowerCase(),g=K.attrHooks[c]||(Y.test(c)?Q:P)),d!==b?null===d?void K.removeAttr(a,c):g&&"set"in g&&h&&(f=g.set(a,d,c))!==b?f:(a.setAttribute(c,""+d),d):g&&"get"in g&&h&&null!==(f=g.get(a,c))?f:(f=a.getAttribute(c),null===f?b:f))},removeAttr:function(a,b){var c,d,e,f,g=0;if(b&&1===a.nodeType)for(d=b.toLowerCase().split(T),f=d.length;f>g;g++)e=d[g],e&&(c=K.propFix[e]||e,K.attr(a,e,""),a.removeAttribute(Z?e:c),Y.test(e)&&c in a&&(a[c]=!1))},attrHooks:{type:{set:function(a,b){if(V.test(a.nodeName)&&a.parentNode)K.error("type property can't be changed");else if(!K.support.radioValue&&"radio"===b&&K.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}},value:{get:function(a,b){return P&&K.nodeName(a,"button")?P.get(a,b):b in a?a.value:null},set:function(a,b,c){return P&&K.nodeName(a,"button")?P.set(a,b,c):void(a.value=b)}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,f,g,h=a.nodeType;if(a&&3!==h&&8!==h&&2!==h)return g=1!==h||!K.isXMLDoc(a),g&&(c=K.propFix[c]||c,f=K.propHooks[c]),d!==b?f&&"set"in f&&(e=f.set(a,d,c))!==b?e:a[c]=d:f&&"get"in f&&null!==(e=f.get(a,c))?e:a[c]},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):W.test(a.nodeName)||X.test(a.nodeName)&&a.href?0:b}}}}),K.attrHooks.tabindex=K.propHooks.tabIndex,Q={get:function(a,c){var d,e=K.prop(a,c);return e===!0||"boolean"!=typeof e&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;return b===!1?K.removeAttr(a,c):(d=K.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase())),c
}},Z||(R={name:!0,id:!0},P=K.valHooks.button={get:function(a,c){var d;return d=a.getAttributeNode(c),d&&(R[c]?""!==d.nodeValue:d.specified)?d.nodeValue:b},set:function(a,b,c){var d=a.getAttributeNode(c);return d||(d=H.createAttribute(c),a.setAttributeNode(d)),d.nodeValue=b+""}},K.attrHooks.tabindex.set=P.set,K.each(["width","height"],function(a,b){K.attrHooks[b]=K.extend(K.attrHooks[b],{set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}})}),K.attrHooks.contenteditable={get:P.get,set:function(a,b,c){""===b&&(b="false"),P.set(a,b,c)}}),K.support.hrefNormalized||K.each(["href","src","width","height"],function(a,c){K.attrHooks[c]=K.extend(K.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return null===d?b:d}})}),K.support.style||(K.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}}),K.support.optSelected||(K.propHooks.selected=K.extend(K.propHooks.selected,{get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}})),K.support.enctype||(K.propFix.enctype="encoding"),K.support.checkOn||K.each(["radio","checkbox"],function(){K.valHooks[this]={get:function(a){return null===a.getAttribute("value")?"on":a.value}}}),K.each(["radio","checkbox"],function(){K.valHooks[this]=K.extend(K.valHooks[this],{set:function(a,b){return K.isArray(b)?a.checked=K.inArray(K(a).val(),b)>=0:void 0}})});var $=/^(?:textarea|input|select)$/i,_=/^([^\.]*)?(?:\.(.+))?$/,ab=/\bhover(\.\S+)?\b/,bb=/^key/,cb=/^(?:mouse|contextmenu)|click/,db=/^(?:focusinfocus|focusoutblur)$/,eb=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,fb=function(a){var b=eb.exec(a);return b&&(b[1]=(b[1]||"").toLowerCase(),b[3]=b[3]&&new RegExp("(?:^|\\s)"+b[3]+"(?:\\s|$)")),b},gb=function(a,b){var c=a.attributes||{};return!(b[1]&&a.nodeName.toLowerCase()!==b[1]||b[2]&&(c.id||{}).value!==b[2]||b[3]&&!b[3].test((c["class"]||{}).value))},hb=function(a){return K.event.special.hover?a:a.replace(ab,"mouseenter$1 mouseleave$1")};K.event={add:function(a,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q;if(3!==a.nodeType&&8!==a.nodeType&&c&&d&&(g=K._data(a))){for(d.handler&&(o=d,d=o.handler),d.guid||(d.guid=K.guid++),i=g.events,i||(g.events=i={}),h=g.handle,h||(g.handle=h=function(a){return"undefined"==typeof K||a&&K.event.triggered===a.type?b:K.event.dispatch.apply(h.elem,arguments)},h.elem=a),c=K.trim(hb(c)).split(" "),j=0;j<c.length;j++)k=_.exec(c[j])||[],l=k[1],m=(k[2]||"").split(".").sort(),q=K.event.special[l]||{},l=(f?q.delegateType:q.bindType)||l,q=K.event.special[l]||{},n=K.extend({type:l,origType:k[1],data:e,handler:d,guid:d.guid,selector:f,quick:fb(f),namespace:m.join(".")},o),p=i[l],p||(p=i[l]=[],p.delegateCount=0,q.setup&&q.setup.call(a,e,m,h)!==!1||(a.addEventListener?a.addEventListener(l,h,!1):a.attachEvent&&a.attachEvent("on"+l,h))),q.add&&(q.add.call(a,n),n.handler.guid||(n.handler.guid=d.guid)),f?p.splice(p.delegateCount++,0,n):p.push(n),K.event.global[l]=!0;a=null}},global:{},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q,r=K.hasData(a)&&K._data(a);if(r&&(m=r.events)){for(b=K.trim(hb(b||"")).split(" "),f=0;f<b.length;f++)if(g=_.exec(b[f])||[],h=i=g[1],j=g[2],h){for(n=K.event.special[h]||{},h=(d?n.delegateType:n.bindType)||h,p=m[h]||[],k=p.length,j=j?new RegExp("(^|\\.)"+j.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null,l=0;l<p.length;l++)q=p[l],!e&&i!==q.origType||c&&c.guid!==q.guid||j&&!j.test(q.namespace)||d&&d!==q.selector&&("**"!==d||!q.selector)||(p.splice(l--,1),q.selector&&p.delegateCount--,n.remove&&n.remove.call(a,q));0===p.length&&k!==p.length&&(n.teardown&&n.teardown.call(a,j)!==!1||K.removeEvent(a,h,r.handle),delete m[h])}else for(h in m)K.event.remove(a,h+b[f],c,d,!0);K.isEmptyObject(m)&&(o=r.handle,o&&(o.elem=null),K.removeData(a,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,f){if(!e||3!==e.nodeType&&8!==e.nodeType){var g,h,i,j,k,l,m,n,o,p,q=c.type||c,r=[];if(!db.test(q+K.event.triggered)&&(q.indexOf("!")>=0&&(q=q.slice(0,-1),h=!0),q.indexOf(".")>=0&&(r=q.split("."),q=r.shift(),r.sort()),e&&!K.event.customEvent[q]||K.event.global[q]))if(c="object"==typeof c?c[K.expando]?c:new K.Event(q,c):new K.Event(q),c.type=q,c.isTrigger=!0,c.exclusive=h,c.namespace=r.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,l=q.indexOf(":")<0?"on"+q:"",e){if(c.result=b,c.target||(c.target=e),d=null!=d?K.makeArray(d):[],d.unshift(c),m=K.event.special[q]||{},!m.trigger||m.trigger.apply(e,d)!==!1){if(o=[[e,m.bindType||q]],!f&&!m.noBubble&&!K.isWindow(e)){for(p=m.delegateType||q,j=db.test(p+q)?e:e.parentNode,k=null;j;j=j.parentNode)o.push([j,p]),k=j;k&&k===e.ownerDocument&&o.push([k.defaultView||k.parentWindow||a,p])}for(i=0;i<o.length&&!c.isPropagationStopped();i++)j=o[i][0],c.type=o[i][1],n=(K._data(j,"events")||{})[c.type]&&K._data(j,"handle"),n&&n.apply(j,d),n=l&&j[l],n&&K.acceptData(j)&&n.apply(j,d)===!1&&c.preventDefault();return c.type=q,f||c.isDefaultPrevented()||m._default&&m._default.apply(e.ownerDocument,d)!==!1||"click"===q&&K.nodeName(e,"a")||!K.acceptData(e)||l&&e[q]&&("focus"!==q&&"blur"!==q||0!==c.target.offsetWidth)&&!K.isWindow(e)&&(k=e[l],k&&(e[l]=null),K.event.triggered=q,e[q](),K.event.triggered=b,k&&(e[l]=k)),c.result}}else{g=K.cache;for(i in g)g[i].events&&g[i].events[q]&&K.event.trigger(c,d,g[i].handle.elem,!0)}}},dispatch:function(c){c=K.event.fix(c||a.event);var d,e,f,g,h,i,j,k,l,m,n=(K._data(this,"events")||{})[c.type]||[],o=n.delegateCount,p=[].slice.call(arguments,0),q=!c.exclusive&&!c.namespace,r=[];if(p[0]=c,c.delegateTarget=this,o&&!c.target.disabled&&(!c.button||"click"!==c.type))for(g=K(this),g.context=this.ownerDocument||this,f=c.target;f!=this;f=f.parentNode||this){for(i={},k=[],g[0]=f,d=0;o>d;d++)l=n[d],m=l.selector,i[m]===b&&(i[m]=l.quick?gb(f,l.quick):g.is(m)),i[m]&&k.push(l);k.length&&r.push({elem:f,matches:k})}for(n.length>o&&r.push({elem:this,matches:n.slice(o)}),d=0;d<r.length&&!c.isPropagationStopped();d++)for(j=r[d],c.currentTarget=j.elem,e=0;e<j.matches.length&&!c.isImmediatePropagationStopped();e++)l=j.matches[e],(q||!c.namespace&&!l.namespace||c.namespace_re&&c.namespace_re.test(l.namespace))&&(c.data=l.data,c.handleObj=l,h=((K.event.special[l.origType]||{}).handle||l.handler).apply(j.elem,p),h!==b&&(c.result=h,h===!1&&(c.preventDefault(),c.stopPropagation())));return c.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,c){var d,e,f,g=c.button,h=c.fromElement;return null==a.pageX&&null!=c.clientX&&(d=a.target.ownerDocument||H,e=d.documentElement,f=d.body,a.pageX=c.clientX+(e&&e.scrollLeft||f&&f.scrollLeft||0)-(e&&e.clientLeft||f&&f.clientLeft||0),a.pageY=c.clientY+(e&&e.scrollTop||f&&f.scrollTop||0)-(e&&e.clientTop||f&&f.clientTop||0)),!a.relatedTarget&&h&&(a.relatedTarget=h===a.target?c.toElement:h),a.which||g===b||(a.which=1&g?1:2&g?3:4&g?2:0),a}},fix:function(a){if(a[K.expando])return a;var c,d,e=a,f=K.event.fixHooks[a.type]||{},g=f.props?this.props.concat(f.props):this.props;for(a=K.Event(e),c=g.length;c;)d=g[--c],a[d]=e[d];return a.target||(a.target=e.srcElement||H),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey===b&&(a.metaKey=a.ctrlKey),f.filter?f.filter(a,e):a},special:{ready:{setup:K.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){K.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=K.extend(new K.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?K.event.trigger(e,null,b):K.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},K.event.handle=K.event.dispatch,K.removeEvent=H.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},K.Event=function(a,b){return this instanceof K.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?h:g):this.type=a,b&&K.extend(this,b),this.timeStamp=a&&a.timeStamp||K.now(),void(this[K.expando]=!0)):new K.Event(a,b)},K.Event.prototype={preventDefault:function(){this.isDefaultPrevented=h;var a=this.originalEvent;a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=h;var a=this.originalEvent;a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=h,this.stopPropagation()},isDefaultPrevented:g,isPropagationStopped:g,isImmediatePropagationStopped:g},K.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){K.event.special[a]={delegateType:b,bindType:b,handle:function(a){{var c,d=this,e=a.relatedTarget,f=a.handleObj;f.selector}return(!e||e!==d&&!K.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),K.support.submitBubbles||(K.event.special.submit={setup:function(){return K.nodeName(this,"form")?!1:void K.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=K.nodeName(c,"input")||K.nodeName(c,"button")?c.form:b;d&&!d._submit_attached&&(K.event.add(d,"submit._submit",function(a){this.parentNode&&!a.isTrigger&&K.event.simulate("submit",this.parentNode,a,!0)}),d._submit_attached=!0)})},teardown:function(){return K.nodeName(this,"form")?!1:void K.event.remove(this,"._submit")}}),K.support.changeBubbles||(K.event.special.change={setup:function(){return $.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(K.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),K.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1,K.event.simulate("change",this,a,!0))})),!1):void K.event.add(this,"beforeactivate._change",function(a){var b=a.target;$.test(b.nodeName)&&!b._change_attached&&(K.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||K.event.simulate("change",this.parentNode,a,!0)}),b._change_attached=!0)})},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return K.event.remove(this,"._change"),$.test(this.nodeName)}}),K.support.focusinBubbles||K.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){K.event.simulate(b,a.target,K.event.fix(a),!0)};K.event.special[b]={setup:function(){0===c++&&H.addEventListener(a,d,!0)},teardown:function(){0===--c&&H.removeEventListener(a,d,!0)}}}),K.fn.extend({on:function(a,c,d,e,f){var h,i;if("object"==typeof a){"string"!=typeof c&&(d=c,c=b);for(i in a)this.on(i,c,d,a[i],f);return this}if(null==d&&null==e?(e=c,d=c=b):null==e&&("string"==typeof c?(e=d,d=b):(e=d,d=c,c=b)),e===!1)e=g;else if(!e)return this;return 1===f&&(h=e,e=function(a){return K().off(a),h.apply(this,arguments)},e.guid=h.guid||(h.guid=K.guid++)),this.each(function(){K.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on.call(this,a,b,c,d,1)},off:function(a,c,d){if(a&&a.preventDefault&&a.handleObj){var e=a.handleObj;return K(a.delegateTarget).off(e.namespace?e.type+"."+e.namespace:e.type,e.selector,e.handler),this}if("object"==typeof a){for(var f in a)this.off(f,c,a[f]);return this}return(c===!1||"function"==typeof c)&&(d=c,c=b),d===!1&&(d=g),this.each(function(){K.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){return K(this.context).on(a,this.selector,b,c),this},die:function(a,b){return K(this.context).off(a,this.selector||"**",b),this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1==arguments.length?this.off(a,"**"):this.off(b,a,c)},trigger:function(a,b){return this.each(function(){K.event.trigger(a,b,this)})},triggerHandler:function(a,b){return this[0]?K.event.trigger(a,b,this[0],!0):void 0},toggle:function(a){var b=arguments,c=a.guid||K.guid++,d=0,e=function(c){var e=(K._data(this,"lastToggle"+a.guid)||0)%d;return K._data(this,"lastToggle"+a.guid,e+1),c.preventDefault(),b[e].apply(this,arguments)||!1};for(e.guid=c;d<b.length;)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),K.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){K.fn[b]=function(a,c){return null==c&&(c=a,a=null),arguments.length>0?this.on(b,null,a,c):this.trigger(b)},K.attrFn&&(K.attrFn[b]=!0),bb.test(b)&&(K.event.fixHooks[b]=K.event.keyHooks),cb.test(b)&&(K.event.fixHooks[b]=K.event.mouseHooks)}),function(){function a(a,b,c,d,f,g){for(var h=0,i=d.length;i>h;h++){var j=d[h];if(j){var k=!1;for(j=j[a];j;){if(j[e]===c){k=d[j.sizset];break}if(1!==j.nodeType||g||(j[e]=c,j.sizset=h),j.nodeName.toLowerCase()===b){k=j;break}j=j[a]}d[h]=k}}}function c(a,b,c,d,f,g){for(var h=0,i=d.length;i>h;h++){var j=d[h];if(j){var k=!1;for(j=j[a];j;){if(j[e]===c){k=d[j.sizset];break}if(1===j.nodeType)if(g||(j[e]=c,j.sizset=h),"string"!=typeof b){if(j===b){k=!0;break}}else if(m.filter(b,[j]).length>0){k=j;break}j=j[a]}d[h]=k}}}var d=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,e="sizcache"+(Math.random()+"").replace(".",""),f=0,g=Object.prototype.toString,h=!1,i=!0,j=/\\/g,k=/\r\n/g,l=/\W/;[0,0].sort(function(){return i=!1,0});var m=function(a,b,c,e){c=c||[],b=b||H;var f=b;if(1!==b.nodeType&&9!==b.nodeType)return[];if(!a||"string"!=typeof a)return c;var h,i,j,k,l,n,q,r,t=!0,u=m.isXML(b),v=[],x=a;do if(d.exec(""),h=d.exec(x),h&&(x=h[3],v.push(h[1]),h[2])){k=h[3];break}while(h);if(v.length>1&&p.exec(a))if(2===v.length&&o.relative[v[0]])i=w(v[0]+v[1],b,e);else for(i=o.relative[v[0]]?[b]:m(v.shift(),b);v.length;)a=v.shift(),o.relative[a]&&(a+=v.shift()),i=w(a,i,e);else if(!e&&v.length>1&&9===b.nodeType&&!u&&o.match.ID.test(v[0])&&!o.match.ID.test(v[v.length-1])&&(l=m.find(v.shift(),b,u),b=l.expr?m.filter(l.expr,l.set)[0]:l.set[0]),b)for(l=e?{expr:v.pop(),set:s(e)}:m.find(v.pop(),1!==v.length||"~"!==v[0]&&"+"!==v[0]||!b.parentNode?b:b.parentNode,u),i=l.expr?m.filter(l.expr,l.set):l.set,v.length>0?j=s(i):t=!1;v.length;)n=v.pop(),q=n,o.relative[n]?q=v.pop():n="",null==q&&(q=b),o.relative[n](j,q,u);else j=v=[];if(j||(j=i),j||m.error(n||a),"[object Array]"===g.call(j))if(t)if(b&&1===b.nodeType)for(r=0;null!=j[r];r++)j[r]&&(j[r]===!0||1===j[r].nodeType&&m.contains(b,j[r]))&&c.push(i[r]);else for(r=0;null!=j[r];r++)j[r]&&1===j[r].nodeType&&c.push(i[r]);else c.push.apply(c,j);else s(j,c);return k&&(m(k,f,c,e),m.uniqueSort(c)),c};m.uniqueSort=function(a){if(u&&(h=i,a.sort(u),h))for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1);return a},m.matches=function(a,b){return m(a,null,null,b)},m.matchesSelector=function(a,b){return m(b,null,null,[a]).length>0},m.find=function(a,b,c){var d,e,f,g,h,i;if(!a)return[];for(e=0,f=o.order.length;f>e;e++)if(h=o.order[e],(g=o.leftMatch[h].exec(a))&&(i=g[1],g.splice(1,1),"\\"!==i.substr(i.length-1)&&(g[1]=(g[1]||"").replace(j,""),d=o.find[h](g,b,c),null!=d))){a=a.replace(o.match[h],"");break}return d||(d="undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName("*"):[]),{set:d,expr:a}},m.filter=function(a,c,d,e){for(var f,g,h,i,j,k,l,n,p,q=a,r=[],s=c,t=c&&c[0]&&m.isXML(c[0]);a&&c.length;){for(h in o.filter)if(null!=(f=o.leftMatch[h].exec(a))&&f[2]){if(k=o.filter[h],l=f[1],g=!1,f.splice(1,1),"\\"===l.substr(l.length-1))continue;if(s===r&&(r=[]),o.preFilter[h])if(f=o.preFilter[h](f,s,d,r,e,t)){if(f===!0)continue}else g=i=!0;if(f)for(n=0;null!=(j=s[n]);n++)j&&(i=k(j,f,n,s),p=e^i,d&&null!=i?p?g=!0:s[n]=!1:p&&(r.push(j),g=!0));if(i!==b){if(d||(s=r),a=a.replace(o.match[h],""),!g)return[];break}}if(a===q){if(null!=g)break;m.error(a)}q=a}return s},m.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)};var n=m.getText=function(a){var b,c,d=a.nodeType,e="";if(d){if(1===d||9===d){if("string"==typeof a.textContent)return a.textContent;if("string"==typeof a.innerText)return a.innerText.replace(k,"");for(a=a.firstChild;a;a=a.nextSibling)e+=n(a)}else if(3===d||4===d)return a.nodeValue}else for(b=0;c=a[b];b++)8!==c.nodeType&&(e+=n(c));return e},o=m.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\wÀ-￿\-]|\\.)+)/,CLASS:/\.((?:[\wÀ-￿\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\wÀ-￿\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\wÀ-￿\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\wÀ-￿\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\wÀ-￿\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\wÀ-￿\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c="string"==typeof b,d=c&&!l.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f,g=0,h=a.length;h>g;g++)if(f=a[g]){for(;(f=f.previousSibling)&&1!==f.nodeType;);a[g]=e||f&&f.nodeName.toLowerCase()===b?f||!1:f===b}e&&m.filter(b,a,!0)},">":function(a,b){var c,d="string"==typeof b,e=0,f=a.length;if(d&&!l.test(b)){for(b=b.toLowerCase();f>e;e++)if(c=a[e]){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1}}else{for(;f>e;e++)c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b);d&&m.filter(b,a,!0)}},"":function(b,d,e){var g,h=f++,i=c;"string"!=typeof d||l.test(d)||(d=d.toLowerCase(),g=d,i=a),i("parentNode",d,h,b,g,e)},"~":function(b,d,e){var g,h=f++,i=c;"string"!=typeof d||l.test(d)||(d=d.toLowerCase(),g=d,i=a),i("previousSibling",d,h,b,g,e)}},find:{ID:function(a,b,c){if("undefined"!=typeof b.getElementById&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if("undefined"!=typeof b.getElementsByName){for(var c=[],d=b.getElementsByName(a[1]),e=0,f=d.length;f>e;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return 0===c.length?null:c}},TAG:function(a,b){b.Methods,b.getElementsByTagName;return"function"==typeof b.getElementsByTagName?b.getElementsByTagName(a[1]):void 0}},preFilter:{CLASS:function(a,b,c,d,e,f){if(a=" "+a[1].replace(j,"")+" ",f)return a;for(var g,h=0;null!=(g=b[h]);h++)g&&(e^(g.className&&(" "+g.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(g):c&&(b[h]=!1));return!1},ID:function(a){return a[1].replace(j,"")},TAG:function(a){return a[1].replace(j,"").toLowerCase()},CHILD:function(a){if("nth"===a[1]){a[2]||m.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec("even"===a[2]&&"2n"||"odd"===a[2]&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}else a[2]&&m.error(a[0]);return a[0]=f++,a},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(j,"");return!f&&o.attrMap[g]&&(a[1]=o.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(j,""),"~="===a[2]&&(a[4]=" "+a[4]+" "),a},PSEUDO:function(a,b,c,e,f){if("not"===a[1]){if(!((d.exec(a[3])||"").length>1||/^\w/.test(a[3]))){var g=m.filter(a[3],b,c,!0^f);return c||e.push.apply(e,g),!1}a[3]=m(a[3],null,null,b)}else if(o.match.POS.test(a[0])||o.match.CHILD.test(a[0]))return!0;return a},POS:function(a){return a.unshift(!0),a}},filters:{enabled:function(a){return a.disabled===!1&&"hidden"!==a.type},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!m(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return"input"===a.nodeName.toLowerCase()&&"text"===c&&(b===c||null===b)},radio:function(a){return"input"===a.nodeName.toLowerCase()&&"radio"===a.type},checkbox:function(a){return"input"===a.nodeName.toLowerCase()&&"checkbox"===a.type},file:function(a){return"input"===a.nodeName.toLowerCase()&&"file"===a.type},password:function(a){return"input"===a.nodeName.toLowerCase()&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return("input"===b||"button"===b)&&"submit"===a.type},image:function(a){return"input"===a.nodeName.toLowerCase()&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return("input"===b||"button"===b)&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return 0===b},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=o.filters[e];if(f)return f(a,c,b,d);if("contains"===e)return(a.textContent||a.innerText||n([a])||"").indexOf(b[3])>=0;if("not"===e){for(var g=b[3],h=0,i=g.length;i>h;h++)if(g[h]===a)return!1;return!0}m.error(e)},CHILD:function(a,b){var c,d,f,g,h,i,j=b[1],k=a;switch(j){case"only":case"first":for(;k=k.previousSibling;)if(1===k.nodeType)return!1;if("first"===j)return!0;k=a;case"last":for(;k=k.nextSibling;)if(1===k.nodeType)return!1;return!0;case"nth":if(c=b[2],d=b[3],1===c&&0===d)return!0;if(f=b[0],g=a.parentNode,g&&(g[e]!==f||!a.nodeIndex)){for(h=0,k=g.firstChild;k;k=k.nextSibling)1===k.nodeType&&(k.nodeIndex=++h);g[e]=f}return i=a.nodeIndex-d,0===c?0===i:i%c===0&&i/c>=0}},ID:function(a,b){return 1===a.nodeType&&a.getAttribute("id")===b},TAG:function(a,b){return"*"===b&&1===a.nodeType||!!a.nodeName&&a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=m.attr?m.attr(a,c):o.attrHandle[c]?o.attrHandle[c](a):null!=a[c]?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return null==d?"!="===f:!f&&m.attr?null!=d:"="===f?e===g:"*="===f?e.indexOf(g)>=0:"~="===f?(" "+e+" ").indexOf(g)>=0:g?"!="===f?e!==g:"^="===f?0===e.indexOf(g):"$="===f?e.substr(e.length-g.length)===g:"|="===f?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=o.setFilters[e];return f?f(a,c,b,d):void 0}}},p=o.match.POS,q=function(a,b){return"\\"+(b-0+1)};for(var r in o.match)o.match[r]=new RegExp(o.match[r].source+/(?![^\[]*\])(?![^\(]*\))/.source),o.leftMatch[r]=new RegExp(/(^(?:.|\r|\n)*?)/.source+o.match[r].source.replace(/\\(\d+)/g,q));var s=function(a,b){return a=Array.prototype.slice.call(a,0),b?(b.push.apply(b,a),b):a};try{Array.prototype.slice.call(H.documentElement.childNodes,0)[0].nodeType}catch(t){s=function(a,b){var c=0,d=b||[];if("[object Array]"===g.call(a))Array.prototype.push.apply(d,a);else if("number"==typeof a.length)for(var e=a.length;e>c;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);return d}}var u,v;H.documentElement.compareDocumentPosition?u=function(a,b){return a===b?(h=!0,0):a.compareDocumentPosition&&b.compareDocumentPosition?4&a.compareDocumentPosition(b)?-1:1:a.compareDocumentPosition?-1:1}:(u=function(a,b){if(a===b)return h=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[],g=a.parentNode,i=b.parentNode,j=g;if(g===i)return v(a,b);if(!g)return-1;if(!i)return 1;for(;j;)e.unshift(j),j=j.parentNode;for(j=i;j;)f.unshift(j),j=j.parentNode;c=e.length,d=f.length;for(var k=0;c>k&&d>k;k++)if(e[k]!==f[k])return v(e[k],f[k]);return k===c?v(a,f[k],-1):v(e[k],b,1)},v=function(a,b,c){if(a===b)return c;for(var d=a.nextSibling;d;){if(d===b)return-1;d=d.nextSibling}return 1}),function(){var a=H.createElement("div"),c="script"+(new Date).getTime(),d=H.documentElement;a.innerHTML="<a name='"+c+"'/>",d.insertBefore(a,d.firstChild),H.getElementById(c)&&(o.find.ID=function(a,c,d){if("undefined"!=typeof c.getElementById&&!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||"undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[]}},o.filter.ID=function(a,b){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return 1===a.nodeType&&c&&c.nodeValue===b}),d.removeChild(a),d=a=null}(),function(){var a=H.createElement("div");a.appendChild(H.createComment("")),a.getElementsByTagName("*").length>0&&(o.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if("*"===a[1]){for(var d=[],e=0;c[e];e++)1===c[e].nodeType&&d.push(c[e]);c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&"undefined"!=typeof a.firstChild.getAttribute&&"#"!==a.firstChild.getAttribute("href")&&(o.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),H.querySelectorAll&&!function(){var a=m,b=H.createElement("div"),c="__sizzle__";if(b.innerHTML="<p class='TEST'></p>",!b.querySelectorAll||0!==b.querySelectorAll(".TEST").length){m=function(b,d,e,f){if(d=d||H,!f&&!m.isXML(d)){var g=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(g&&(1===d.nodeType||9===d.nodeType)){if(g[1])return s(d.getElementsByTagName(b),e);if(g[2]&&o.find.CLASS&&d.getElementsByClassName)return s(d.getElementsByClassName(g[2]),e)}if(9===d.nodeType){if("body"===b&&d.body)return s([d.body],e);if(g&&g[3]){var h=d.getElementById(g[3]);if(!h||!h.parentNode)return s([],e);if(h.id===g[3])return s([h],e)}try{return s(d.querySelectorAll(b),e)}catch(i){}}else if(1===d.nodeType&&"object"!==d.nodeName.toLowerCase()){var j=d,k=d.getAttribute("id"),l=k||c,n=d.parentNode,p=/^\s*[+~]/.test(b);k?l=l.replace(/'/g,"\\$&"):d.setAttribute("id",l),p&&n&&(d=d.parentNode);try{if(!p||n)return s(d.querySelectorAll("[id='"+l+"'] "+b),e)}catch(q){}finally{k||j.removeAttribute("id")}}}return a(b,d,e,f)};for(var d in a)m[d]=a[d];b=null}}(),function(){var a=H.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var c=!b.call(H.createElement("div"),"div"),d=!1;try{b.call(H.documentElement,"[test!='']:sizzle")}catch(e){d=!0}m.matchesSelector=function(a,e){if(e=e.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']"),!m.isXML(a))try{if(d||!o.match.PSEUDO.test(e)&&!/!=/.test(e)){var f=b.call(a,e);if(f||!c||a.document&&11!==a.document.nodeType)return f}}catch(g){}return m(e,null,null,[a]).length>0}}}(),function(){var a=H.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>",a.getElementsByClassName&&0!==a.getElementsByClassName("e").length&&(a.lastChild.className="e",1!==a.getElementsByClassName("e").length&&(o.order.splice(1,0,"CLASS"),o.find.CLASS=function(a,b,c){return"undefined"==typeof b.getElementsByClassName||c?void 0:b.getElementsByClassName(a[1])},a=null))}(),m.contains=H.documentElement.contains?function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:H.documentElement.compareDocumentPosition?function(a,b){return!!(16&a.compareDocumentPosition(b))}:function(){return!1},m.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?"HTML"!==b.nodeName:!1};var w=function(a,b,c){for(var d,e=[],f="",g=b.nodeType?[b]:b;d=o.match.PSEUDO.exec(a);)f+=d[0],a=a.replace(o.match.PSEUDO,"");a=o.relative[a]?a+"*":a;for(var h=0,i=g.length;i>h;h++)m(a,g[h],e,c);return m.filter(f,e)};m.attr=K.attr,m.selectors.attrMap={},K.find=m,K.expr=m.selectors,K.expr[":"]=K.expr.filters,K.unique=m.uniqueSort,K.text=m.getText,K.isXMLDoc=m.isXML,K.contains=m.contains}();var ib=/Until$/,jb=/^(?:parents|prevUntil|prevAll)/,kb=/,/,lb=/^.[^:#\[\.,]*$/,mb=Array.prototype.slice,nb=K.expr.match.POS,ob={children:!0,contents:!0,next:!0,prev:!0};K.fn.extend({find:function(a){var b,c,d=this;if("string"!=typeof a)return K(a).filter(function(){for(b=0,c=d.length;c>b;b++)if(K.contains(d[b],this))return!0});var e,f,g,h=this.pushStack("","find",a);for(b=0,c=this.length;c>b;b++)if(e=h.length,K.find(a,this[b],h),b>0)for(f=e;f<h.length;f++)for(g=0;e>g;g++)if(h[g]===h[f]){h.splice(f--,1);break}return h},has:function(a){var b=K(a);return this.filter(function(){for(var a=0,c=b.length;c>a;a++)if(K.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(j(this,a,!1),"not",a)},filter:function(a){return this.pushStack(j(this,a,!0),"filter",a)},is:function(a){return!!a&&("string"==typeof a?nb.test(a)?K(a,this.context).index(this[0])>=0:K.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c,d,e=[],f=this[0];if(K.isArray(a)){for(var g=1;f&&f.ownerDocument&&f!==b;){for(c=0;c<a.length;c++)K(f).is(a[c])&&e.push({selector:a[c],elem:f,level:g});f=f.parentNode,g++}return e}var h=nb.test(a)||"string"!=typeof a?K(a,b||this.context):0;for(c=0,d=this.length;d>c;c++)for(f=this[c];f;){if(h?h.index(f)>-1:K.find.matchesSelector(f,a)){e.push(f);break}if(f=f.parentNode,!f||!f.ownerDocument||f===b||11===f.nodeType)break}return e=e.length>1?K.unique(e):e,this.pushStack(e,"closest",a)},index:function(a){return a?"string"==typeof a?K.inArray(this[0],K(a)):K.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(a,b){var c="string"==typeof a?K(a,b):K.makeArray(a&&a.nodeType?[a]:a),d=K.merge(this.get(),c);return this.pushStack(i(c[0])||i(d[0])?d:K.unique(d))},andSelf:function(){return this.add(this.prevObject)}}),K.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return K.dir(a,"parentNode")},parentsUntil:function(a,b,c){return K.dir(a,"parentNode",c)},next:function(a){return K.nth(a,2,"nextSibling")},prev:function(a){return K.nth(a,2,"previousSibling")},nextAll:function(a){return K.dir(a,"nextSibling")},prevAll:function(a){return K.dir(a,"previousSibling")},nextUntil:function(a,b,c){return K.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return K.dir(a,"previousSibling",c)},siblings:function(a){return K.sibling(a.parentNode.firstChild,a)},children:function(a){return K.sibling(a.firstChild)},contents:function(a){return K.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:K.makeArray(a.childNodes)}},function(a,b){K.fn[a]=function(c,d){var e=K.map(this,b,c);return ib.test(a)||(d=c),d&&"string"==typeof d&&(e=K.filter(d,e)),e=this.length>1&&!ob[a]?K.unique(e):e,(this.length>1||kb.test(d))&&jb.test(a)&&(e=e.reverse()),this.pushStack(e,a,mb.call(arguments).join(","))}}),K.extend({filter:function(a,b,c){return c&&(a=":not("+a+")"),1===b.length?K.find.matchesSelector(b[0],a)?[b[0]]:[]:K.find.matches(a,b)},dir:function(a,c,d){for(var e=[],f=a[c];f&&9!==f.nodeType&&(d===b||1!==f.nodeType||!K(f).is(d));)1===f.nodeType&&e.push(f),f=f[c];return e},nth:function(a,b,c){b=b||1;for(var d=0;a&&(1!==a.nodeType||++d!==b);a=a[c]);return a},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});var pb="abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",qb=/ jQuery\d+="(?:\d+|null)"/g,rb=/^\s+/,sb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,tb=/<([\w:]+)/,ub=/<tbody/i,vb=/<|&#?\w+;/,wb=/<(?:script|style)/i,xb=/<(?:script|object|embed|option|style)/i,yb=new RegExp("<(?:"+pb+")","i"),zb=/checked\s*(?:[^=]|=\s*.checked.)/i,Ab=/\/(java|ecma)script/i,Bb=/^\s*<!(?:\[CDATA\[|\-\-)/,Cb={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},Db=k(H);
Cb.optgroup=Cb.option,Cb.tbody=Cb.tfoot=Cb.colgroup=Cb.caption=Cb.thead,Cb.th=Cb.td,K.support.htmlSerialize||(Cb._default=[1,"div<div>","</div>"]),K.fn.extend({text:function(a){return K.isFunction(a)?this.each(function(b){var c=K(this);c.text(a.call(this,b,c.text()))}):"object"!=typeof a&&a!==b?this.empty().append((this[0]&&this[0].ownerDocument||H).createTextNode(a)):K.text(this)},wrapAll:function(a){if(K.isFunction(a))return this.each(function(b){K(this).wrapAll(a.call(this,b))});if(this[0]){var b=K(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return this.each(K.isFunction(a)?function(b){K(this).wrapInner(a.call(this,b))}:function(){var b=K(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=K.isFunction(a);return this.each(function(c){K(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){K.nodeName(this,"body")||K(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){1===this.nodeType&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){1===this.nodeType&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=K.clean(arguments);return a.push.apply(a,this.toArray()),this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);return a.push.apply(a,K.clean(arguments)),a}},remove:function(a,b){for(var c,d=0;null!=(c=this[d]);d++)(!a||K.filter(a,[c]).length)&&(b||1!==c.nodeType||(K.cleanData(c.getElementsByTagName("*")),K.cleanData([c])),c.parentNode&&c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)for(1===a.nodeType&&K.cleanData(a.getElementsByTagName("*"));a.firstChild;)a.removeChild(a.firstChild);return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return K.clone(this,a,b)})},html:function(a){if(a===b)return this[0]&&1===this[0].nodeType?this[0].innerHTML.replace(qb,""):null;if("string"!=typeof a||wb.test(a)||!K.support.leadingWhitespace&&rb.test(a)||Cb[(tb.exec(a)||["",""])[1].toLowerCase()])K.isFunction(a)?this.each(function(b){var c=K(this);c.html(a.call(this,b,c.html()))}):this.empty().append(a);else{a=a.replace(sb,"<$1></$2>");try{for(var c=0,d=this.length;d>c;c++)1===this[c].nodeType&&(K.cleanData(this[c].getElementsByTagName("*")),this[c].innerHTML=a)}catch(e){this.empty().append(a)}}return this},replaceWith:function(a){return this[0]&&this[0].parentNode?K.isFunction(a)?this.each(function(b){var c=K(this),d=c.html();c.replaceWith(a.call(this,b,d))}):("string"!=typeof a&&(a=K(a).detach()),this.each(function(){var b=this.nextSibling,c=this.parentNode;K(this).remove(),b?K(b).before(a):K(c).append(a)})):this.length?this.pushStack(K(K.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,f,g,h,i=a[0],j=[];if(!K.support.checkClone&&3===arguments.length&&"string"==typeof i&&zb.test(i))return this.each(function(){K(this).domManip(a,c,d,!0)});if(K.isFunction(i))return this.each(function(e){var f=K(this);a[0]=i.call(this,e,c?f.html():b),f.domManip(a,c,d)});if(this[0]){if(h=i&&i.parentNode,e=K.support.parentNode&&h&&11===h.nodeType&&h.childNodes.length===this.length?{fragment:h}:K.buildFragment(a,this,j),g=e.fragment,f=1===g.childNodes.length?g=g.firstChild:g.firstChild){c=c&&K.nodeName(f,"tr");for(var k=0,m=this.length,n=m-1;m>k;k++)d.call(c?l(this[k],f):this[k],e.cacheable||m>1&&n>k?K.clone(g,!0,!0):g)}j.length&&K.each(j,s)}return this}}),K.buildFragment=function(a,b,c){var d,e,f,g,h=a[0];return b&&b[0]&&(g=b[0].ownerDocument||b[0]),g.createDocumentFragment||(g=H),!(1===a.length&&"string"==typeof h&&h.length<512&&g===H&&"<"===h.charAt(0))||xb.test(h)||!K.support.checkClone&&zb.test(h)||!K.support.html5Clone&&yb.test(h)||(e=!0,f=K.fragments[h],f&&1!==f&&(d=f)),d||(d=g.createDocumentFragment(),K.clean(a,g,d,c)),e&&(K.fragments[h]=f?d:1),{fragment:d,cacheable:e}},K.fragments={},K.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){K.fn[a]=function(c){var d=[],e=K(c),f=1===this.length&&this[0].parentNode;if(f&&11===f.nodeType&&1===f.childNodes.length&&1===e.length)return e[b](this[0]),this;for(var g=0,h=e.length;h>g;g++){var i=(g>0?this.clone(!0):this).get();K(e[g])[b](i),d=d.concat(i)}return this.pushStack(d,a,e.selector)}}),K.extend({clone:function(a,b,c){var d,e,f,g=K.support.html5Clone||!yb.test("<"+a.nodeName)?a.cloneNode(!0):r(a);if(!(K.support.noCloneEvent&&K.support.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||K.isXMLDoc(a)))for(n(a,g),d=o(a),e=o(g),f=0;d[f];++f)e[f]&&n(d[f],e[f]);if(b&&(m(a,g),c))for(d=o(a),e=o(g),f=0;d[f];++f)m(d[f],e[f]);return d=e=null,g},clean:function(a,b,c,d){var e;b=b||H,"undefined"==typeof b.createElement&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||H);for(var f,g,h=[],i=0;null!=(g=a[i]);i++)if("number"==typeof g&&(g+=""),g){if("string"==typeof g)if(vb.test(g)){g=g.replace(sb,"<$1></$2>");var j=(tb.exec(g)||["",""])[1].toLowerCase(),l=Cb[j]||Cb._default,m=l[0],n=b.createElement("div");for(b===H?Db.appendChild(n):k(b).appendChild(n),n.innerHTML=l[1]+g+l[2];m--;)n=n.lastChild;if(!K.support.tbody){var o=ub.test(g),p="table"!==j||o?"<table>"!==l[1]||o?[]:n.childNodes:n.firstChild&&n.firstChild.childNodes;for(f=p.length-1;f>=0;--f)K.nodeName(p[f],"tbody")&&!p[f].childNodes.length&&p[f].parentNode.removeChild(p[f])}!K.support.leadingWhitespace&&rb.test(g)&&n.insertBefore(b.createTextNode(rb.exec(g)[0]),n.firstChild),g=n.childNodes}else g=b.createTextNode(g);var r;if(!K.support.appendChecked)if(g[0]&&"number"==typeof(r=g.length))for(f=0;r>f;f++)q(g[f]);else q(g);g.nodeType?h.push(g):h=K.merge(h,g)}if(c)for(e=function(a){return!a.type||Ab.test(a.type)},i=0;h[i];i++)if(!d||!K.nodeName(h[i],"script")||h[i].type&&"text/javascript"!==h[i].type.toLowerCase()){if(1===h[i].nodeType){var s=K.grep(h[i].getElementsByTagName("script"),e);h.splice.apply(h,[i+1,0].concat(s))}c.appendChild(h[i])}else d.push(h[i].parentNode?h[i].parentNode.removeChild(h[i]):h[i]);return h},cleanData:function(a){for(var b,c,d,e=K.cache,f=K.event.special,g=K.support.deleteExpando,h=0;null!=(d=a[h]);h++)if((!d.nodeName||!K.noData[d.nodeName.toLowerCase()])&&(c=d[K.expando])){if(b=e[c],b&&b.events){for(var i in b.events)f[i]?K.event.remove(d,i):K.removeEvent(d,i,b.handle);b.handle&&(b.handle.elem=null)}g?delete d[K.expando]:d.removeAttribute&&d.removeAttribute(K.expando),delete e[c]}}});var Eb,Fb,Gb,Hb=/alpha\([^)]*\)/i,Ib=/opacity=([^)]*)/,Jb=/([A-Z]|^ms)/g,Kb=/^-?\d+(?:px)?$/i,Lb=/^-?\d/,Mb=/^([\-+])=([\-+.\de]+)/,Nb={position:"absolute",visibility:"hidden",display:"block"},Ob=["Left","Right"],Pb=["Top","Bottom"];K.fn.css=function(a,c){return 2===arguments.length&&c===b?this:K.access(this,a,c,!0,function(a,c,d){return d!==b?K.style(a,c,d):K.css(a,c)})},K.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Eb(a,"opacity","opacity");return""===c?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":K.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var f,g,h=K.camelCase(c),i=a.style,j=K.cssHooks[h];if(c=K.cssProps[h]||h,d===b)return j&&"get"in j&&(f=j.get(a,!1,e))!==b?f:i[c];if(g=typeof d,"string"===g&&(f=Mb.exec(d))&&(d=+(f[1]+1)*+f[2]+parseFloat(K.css(a,c)),g="number"),!(null==d||"number"===g&&isNaN(d)||("number"!==g||K.cssNumber[h]||(d+="px"),j&&"set"in j&&(d=j.set(a,d))===b)))try{i[c]=d}catch(k){}}},css:function(a,c,d){var e,f;return c=K.camelCase(c),f=K.cssHooks[c],c=K.cssProps[c]||c,"cssFloat"===c&&(c="float"),f&&"get"in f&&(e=f.get(a,!0,d))!==b?e:Eb?Eb(a,c):void 0},swap:function(a,b,c){var d={};for(var e in b)d[e]=a.style[e],a.style[e]=b[e];c.call(a);for(e in b)a.style[e]=d[e]}}),K.curCSS=K.css,K.each(["height","width"],function(a,b){K.cssHooks[b]={get:function(a,c,d){var e;return c?0!==a.offsetWidth?t(a,b,d):(K.swap(a,Nb,function(){e=t(a,b,d)}),e):void 0},set:function(a,b){return Kb.test(b)?(b=parseFloat(b),b>=0?b+"px":void 0):b}}}),K.support.opacity||(K.cssHooks.opacity={get:function(a,b){return Ib.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=K.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,b>=1&&""===K.trim(f.replace(Hb,""))&&(c.removeAttribute("filter"),d&&!d.filter)||(c.filter=Hb.test(f)?f.replace(Hb,e):f+" "+e)}}),K(function(){K.support.reliableMarginRight||(K.cssHooks.marginRight={get:function(a,b){var c;return K.swap(a,{display:"inline-block"},function(){c=b?Eb(a,"margin-right","marginRight"):a.style.marginRight}),c}})}),H.defaultView&&H.defaultView.getComputedStyle&&(Fb=function(a,b){var c,d,e;return b=b.replace(Jb,"-$1").toLowerCase(),(d=a.ownerDocument.defaultView)&&(e=d.getComputedStyle(a,null))&&(c=e.getPropertyValue(b),""!==c||K.contains(a.ownerDocument.documentElement,a)||(c=K.style(a,b))),c}),H.documentElement.currentStyle&&(Gb=function(a,b){var c,d,e,f=a.currentStyle&&a.currentStyle[b],g=a.style;return null===f&&g&&(e=g[b])&&(f=e),!Kb.test(f)&&Lb.test(f)&&(c=g.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),g.left="fontSize"===b?"1em":f||0,f=g.pixelLeft+"px",g.left=c,d&&(a.runtimeStyle.left=d)),""===f?"auto":f}),Eb=Fb||Gb,K.expr&&K.expr.filters&&(K.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;return 0===b&&0===c||!K.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||K.css(a,"display"))},K.expr.filters.visible=function(a){return!K.expr.filters.hidden(a)});var Qb,Rb,Sb=/%20/g,Tb=/\[\]$/,Ub=/\r?\n/g,Vb=/#.*$/,Wb=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Xb=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Yb=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,Zb=/^(?:GET|HEAD)$/,$b=/^\/\//,_b=/\?/,ac=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bc=/^(?:select|textarea)/i,cc=/\s+/,dc=/([?&])_=[^&]*/,ec=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,fc=K.fn.load,gc={},hc={},ic=["*/"]+["*"];try{Qb=J.href}catch(jc){Qb=H.createElement("a"),Qb.href="",Qb=Qb.href}Rb=ec.exec(Qb.toLowerCase())||[],K.fn.extend({load:function(a,c,d){if("string"!=typeof a&&fc)return fc.apply(this,arguments);if(!this.length)return this;var e=a.indexOf(" ");if(e>=0){var f=a.slice(e,a.length);a=a.slice(0,e)}var g="GET";c&&(K.isFunction(c)?(d=c,c=b):"object"==typeof c&&(c=K.param(c,K.ajaxSettings.traditional),g="POST"));var h=this;return K.ajax({url:a,type:g,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a}),h.html(f?K("<div>").append(c.replace(ac,"")).find(f):c)),d&&h.each(d,[c,b,a])}}),this},serialize:function(){return K.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?K.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||bc.test(this.nodeName)||Xb.test(this.type))}).map(function(a,b){var c=K(this).val();return null==c?null:K.isArray(c)?K.map(c,function(a){return{name:b.name,value:a.replace(Ub,"\r\n")}}):{name:b.name,value:c.replace(Ub,"\r\n")}}).get()}}),K.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){K.fn[b]=function(a){return this.on(b,a)}}),K.each(["get","post"],function(a,c){K[c]=function(a,d,e,f){return K.isFunction(d)&&(f=f||e,e=d,d=b),K.ajax({type:c,url:a,data:d,success:e,dataType:f})}}),K.extend({getScript:function(a,c){return K.get(a,b,c,"script")},getJSON:function(a,b,c){return K.get(a,b,c,"json")},ajaxSetup:function(a,b){return b?w(a,K.ajaxSettings):(b=a,a=K.ajaxSettings),w(a,b),a},ajaxSettings:{url:Qb,isLocal:Yb.test(Rb[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":ic},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":K.parseJSON,"text xml":K.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:u(gc),ajaxTransport:u(hc),ajax:function(a,c){function d(a,c,d,g){if(2!==u){u=2,i&&clearTimeout(i),h=b,f=g||"",w.readyState=a>0?4:0;var j,l,s,t,v,x=c,A=d?y(m,w,d):b;if(a>=200&&300>a||304===a)if(m.ifModified&&((t=w.getResponseHeader("Last-Modified"))&&(K.lastModified[e]=t),(v=w.getResponseHeader("Etag"))&&(K.etag[e]=v)),304===a)x="notmodified",j=!0;else try{l=z(m,A),x="success",j=!0}catch(B){x="parsererror",s=B}else s=x,(!x||a)&&(x="error",0>a&&(a=0));w.status=a,w.statusText=""+(c||x),j?p.resolveWith(n,[l,x,w]):p.rejectWith(n,[w,x,s]),w.statusCode(r),r=b,k&&o.trigger("ajax"+(j?"Success":"Error"),[w,m,j?l:s]),q.fireWith(n,[w,x]),k&&(o.trigger("ajaxComplete",[w,m]),--K.active||K.event.trigger("ajaxStop"))}}"object"==typeof a&&(c=a,a=b),c=c||{};var e,f,g,h,i,j,k,l,m=K.ajaxSetup({},c),n=m.context||m,o=n!==m&&(n.nodeType||n instanceof K)?K(n):K.event,p=K.Deferred(),q=K.Callbacks("once memory"),r=m.statusCode||{},s={},t={},u=0,w={readyState:0,setRequestHeader:function(a,b){if(!u){var c=a.toLowerCase();a=t[c]=t[c]||a,s[a]=b}return this},getAllResponseHeaders:function(){return 2===u?f:null},getResponseHeader:function(a){var c;if(2===u){if(!g)for(g={};c=Wb.exec(f);)g[c[1].toLowerCase()]=c[2];c=g[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){return u||(m.mimeType=a),this},abort:function(a){return a=a||"abort",h&&h.abort(a),d(0,a),this}};if(p.promise(w),w.success=w.done,w.error=w.fail,w.complete=q.add,w.statusCode=function(a){if(a){var b;if(2>u)for(b in a)r[b]=[r[b],a[b]];else b=a[w.status],w.then(b,b)}return this},m.url=((a||m.url)+"").replace(Vb,"").replace($b,Rb[1]+"//"),m.dataTypes=K.trim(m.dataType||"*").toLowerCase().split(cc),null==m.crossDomain&&(j=ec.exec(m.url.toLowerCase()),m.crossDomain=!(!j||j[1]==Rb[1]&&j[2]==Rb[2]&&(j[3]||("http:"===j[1]?80:443))==(Rb[3]||("http:"===Rb[1]?80:443)))),m.data&&m.processData&&"string"!=typeof m.data&&(m.data=K.param(m.data,m.traditional)),v(gc,m,c,w),2===u)return!1;if(k=m.global,m.type=m.type.toUpperCase(),m.hasContent=!Zb.test(m.type),k&&0===K.active++&&K.event.trigger("ajaxStart"),!m.hasContent&&(m.data&&(m.url+=(_b.test(m.url)?"&":"?")+m.data,delete m.data),e=m.url,m.cache===!1)){var x=K.now(),A=m.url.replace(dc,"$1_="+x);m.url=A+(A===m.url?(_b.test(m.url)?"&":"?")+"_="+x:"")}(m.data&&m.hasContent&&m.contentType!==!1||c.contentType)&&w.setRequestHeader("Content-Type",m.contentType),m.ifModified&&(e=e||m.url,K.lastModified[e]&&w.setRequestHeader("If-Modified-Since",K.lastModified[e]),K.etag[e]&&w.setRequestHeader("If-None-Match",K.etag[e])),w.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+ic+"; q=0.01":""):m.accepts["*"]);for(l in m.headers)w.setRequestHeader(l,m.headers[l]);if(m.beforeSend&&(m.beforeSend.call(n,w,m)===!1||2===u))return w.abort(),!1;for(l in{success:1,error:1,complete:1})w[l](m[l]);if(h=v(hc,m,c,w)){w.readyState=1,k&&o.trigger("ajaxSend",[w,m]),m.async&&m.timeout>0&&(i=setTimeout(function(){w.abort("timeout")},m.timeout));try{u=1,h.send(s,d)}catch(B){if(!(2>u))throw B;d(-1,B)}}else d(-1,"No Transport");return w},param:function(a,c){var d=[],e=function(a,b){b=K.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(c===b&&(c=K.ajaxSettings.traditional),K.isArray(a)||a.jquery&&!K.isPlainObject(a))K.each(a,function(){e(this.name,this.value)});else for(var f in a)x(f,a[f],c,e);return d.join("&").replace(Sb,"+")}}),K.extend({active:0,lastModified:{},etag:{}});var kc=K.now(),lc=/(\=)\?(&|$)|\?\?/i;K.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return K.expando+"_"+kc++}}),K.ajaxPrefilter("json jsonp",function(b,c,d){var e="application/x-www-form-urlencoded"===b.contentType&&"string"==typeof b.data;if("jsonp"===b.dataTypes[0]||b.jsonp!==!1&&(lc.test(b.url)||e&&lc.test(b.data))){var f,g=b.jsonpCallback=K.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h=a[g],i=b.url,j=b.data,k="$1"+g+"$2";return b.jsonp!==!1&&(i=i.replace(lc,k),b.url===i&&(e&&(j=j.replace(lc,k)),b.data===j&&(i+=(/\?/.test(i)?"&":"?")+b.jsonp+"="+g))),b.url=i,b.data=j,a[g]=function(a){f=[a]},d.always(function(){a[g]=h,f&&K.isFunction(h)&&a[g](f[0])}),b.converters["script json"]=function(){return f||K.error(g+" was not called"),f[0]},b.dataTypes[0]="json","script"}}),K.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){return K.globalEval(a),a}}}),K.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),K.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=H.head||H.getElementsByTagName("head")[0]||H.documentElement;return{send:function(e,f){c=H.createElement("script"),c.async="async",a.scriptCharset&&(c.charset=a.scriptCharset),c.src=a.url,c.onload=c.onreadystatechange=function(a,e){(e||!c.readyState||/loaded|complete/.test(c.readyState))&&(c.onload=c.onreadystatechange=null,d&&c.parentNode&&d.removeChild(c),c=b,e||f(200,"success"))},d.insertBefore(c,d.firstChild)},abort:function(){c&&c.onload(0,1)}}}});var mc,nc=a.ActiveXObject?function(){for(var a in mc)mc[a](0,1)}:!1,oc=0;K.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&A()||B()}:A,function(a){K.extend(K.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})}(K.ajaxSettings.xhr()),K.support.ajax&&K.ajaxTransport(function(c){if(!c.crossDomain||K.support.cors){var d;return{send:function(e,f){var g,h,i=c.xhr();if(c.username?i.open(c.type,c.url,c.async,c.username,c.password):i.open(c.type,c.url,c.async),c.xhrFields)for(h in c.xhrFields)i[h]=c.xhrFields[h];c.mimeType&&i.overrideMimeType&&i.overrideMimeType(c.mimeType),c.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");try{for(h in e)i.setRequestHeader(h,e[h])}catch(j){}i.send(c.hasContent&&c.data||null),d=function(a,e){var h,j,k,l,m;try{if(d&&(e||4===i.readyState))if(d=b,g&&(i.onreadystatechange=K.noop,nc&&delete mc[g]),e)4!==i.readyState&&i.abort();else{h=i.status,k=i.getAllResponseHeaders(),l={},m=i.responseXML,m&&m.documentElement&&(l.xml=m),l.text=i.responseText;try{j=i.statusText}catch(n){j=""}h||!c.isLocal||c.crossDomain?1223===h&&(h=204):h=l.text?200:404}}catch(o){e||f(-1,o)}l&&f(h,j,l,k)},c.async&&4!==i.readyState?(g=++oc,nc&&(mc||(mc={},K(a).unload(nc)),mc[g]=d),i.onreadystatechange=d):d()},abort:function(){d&&d(0,1)}}}});var pc,qc,rc,sc,tc={},uc=/^(?:toggle|show|hide)$/,vc=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,wc=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];K.fn.extend({show:function(a,b,c){var d,e;if(a||0===a)return this.animate(E("show",3),a,b,c);for(var f=0,g=this.length;g>f;f++)d=this[f],d.style&&(e=d.style.display,K._data(d,"olddisplay")||"none"!==e||(e=d.style.display=""),""===e&&"none"===K.css(d,"display")&&K._data(d,"olddisplay",F(d.nodeName)));for(f=0;g>f;f++)d=this[f],d.style&&(e=d.style.display,(""===e||"none"===e)&&(d.style.display=K._data(d,"olddisplay")||""));return this},hide:function(a,b,c){if(a||0===a)return this.animate(E("hide",3),a,b,c);for(var d,e,f=0,g=this.length;g>f;f++)d=this[f],d.style&&(e=K.css(d,"display"),"none"===e||K._data(d,"olddisplay")||K._data(d,"olddisplay",e));for(f=0;g>f;f++)this[f].style&&(this[f].style.display="none");return this},_toggle:K.fn.toggle,toggle:function(a,b,c){var d="boolean"==typeof a;return K.isFunction(a)&&K.isFunction(b)?this._toggle.apply(this,arguments):null==a||d?this.each(function(){var b=d?a:K(this).is(":hidden");K(this)[b?"show":"hide"]()}):this.animate(E("toggle",3),a,b,c),this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){function e(){f.queue===!1&&K._mark(this);var b,c,d,e,g,h,i,j,k,l=K.extend({},f),m=1===this.nodeType,n=m&&K(this).is(":hidden");l.animatedProperties={};for(d in a){if(b=K.camelCase(d),d!==b&&(a[b]=a[d],delete a[d]),c=a[b],K.isArray(c)?(l.animatedProperties[b]=c[1],c=a[b]=c[0]):l.animatedProperties[b]=l.specialEasing&&l.specialEasing[b]||l.easing||"swing","hide"===c&&n||"show"===c&&!n)return l.complete.call(this);!m||"height"!==b&&"width"!==b||(l.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],"inline"===K.css(this,"display")&&"none"===K.css(this,"float")&&(K.support.inlineBlockNeedsLayout&&"inline"!==F(this.nodeName)?this.style.zoom=1:this.style.display="inline-block"))}null!=l.overflow&&(this.style.overflow="hidden");for(d in a)e=new K.fx(this,l,d),c=a[d],uc.test(c)?(k=K._data(this,"toggle"+d)||("toggle"===c?n?"show":"hide":0),k?(K._data(this,"toggle"+d,"show"===k?"hide":"show"),e[k]()):e[c]()):(g=vc.exec(c),h=e.cur(),g?(i=parseFloat(g[2]),j=g[3]||(K.cssNumber[d]?"":"px"),"px"!==j&&(K.style(this,d,(i||1)+j),h=(i||1)/e.cur()*h,K.style(this,d,h+j)),g[1]&&(i=("-="===g[1]?-1:1)*i+h),e.custom(h,i,j)):e.custom(h,c,""));return!0}var f=K.speed(b,c,d);return K.isEmptyObject(a)?this.each(f.complete,[!1]):(a=K.extend({},a),f.queue===!1?this.each(e):this.queue(f.queue,e))},stop:function(a,c,d){return"string"!=typeof a&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){function b(a,b,c){var e=b[c];K.removeData(a,c,!0),e.stop(d)}var c,e=!1,f=K.timers,g=K._data(this);if(d||K._unmark(!0,this),null==a)for(c in g)g[c]&&g[c].stop&&c.indexOf(".run")===c.length-4&&b(this,g,c);else g[c=a+".run"]&&g[c].stop&&b(this,g,c);for(c=f.length;c--;)f[c].elem!==this||null!=a&&f[c].queue!==a||(d?f[c](!0):f[c].saveState(),e=!0,f.splice(c,1));d&&e||K.dequeue(this,a)})}}),K.each({slideDown:E("show",1),slideUp:E("hide",1),slideToggle:E("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){K.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),K.extend({speed:function(a,b,c){var d=a&&"object"==typeof a?K.extend({},a):{complete:c||!c&&b||K.isFunction(a)&&a,duration:a,easing:c&&b||b&&!K.isFunction(b)&&b};return d.duration=K.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in K.fx.speeds?K.fx.speeds[d.duration]:K.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(a){K.isFunction(d.old)&&d.old.call(this),d.queue?K.dequeue(this,d.queue):a!==!1&&K._unmark(this)},d},easing:{linear:function(a,b,c,d){return c+d*a},swing:function(a,b,c,d){return(-Math.cos(a*Math.PI)/2+.5)*d+c}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig=b.orig||{}}}),K.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(K.fx.step[this.prop]||K.fx.step._default)(this)},cur:function(){if(null!=this.elem[this.prop]&&(!this.elem.style||null==this.elem.style[this.prop]))return this.elem[this.prop];var a,b=K.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?b&&"auto"!==b?b:0:a},custom:function(a,c,d){function e(a){return f.step(a)}var f=this,g=K.fx;this.startTime=sc||C(),this.end=c,this.now=this.start=a,this.pos=this.state=0,this.unit=d||this.unit||(K.cssNumber[this.prop]?"":"px"),e.queue=this.options.queue,e.elem=this.elem,e.saveState=function(){f.options.hide&&K._data(f.elem,"fxshow"+f.prop)===b&&K._data(f.elem,"fxshow"+f.prop,f.start)},e()&&K.timers.push(e)&&!rc&&(rc=setInterval(g.tick,g.interval))},show:function(){var a=K._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=a||K.style(this.elem,this.prop),this.options.show=!0,a!==b?this.custom(this.cur(),a):this.custom("width"===this.prop||"height"===this.prop?1:0,this.cur()),K(this.elem).show()},hide:function(){this.options.orig[this.prop]=K._data(this.elem,"fxshow"+this.prop)||K.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var b,c,d,e=sc||C(),f=!0,g=this.elem,h=this.options;if(a||e>=h.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),h.animatedProperties[this.prop]=!0;for(b in h.animatedProperties)h.animatedProperties[b]!==!0&&(f=!1);if(f){if(null==h.overflow||K.support.shrinkWrapBlocks||K.each(["","X","Y"],function(a,b){g.style["overflow"+b]=h.overflow[a]}),h.hide&&K(g).hide(),h.hide||h.show)for(b in h.animatedProperties)K.style(g,b,h.orig[b]),K.removeData(g,"fxshow"+b,!0),K.removeData(g,"toggle"+b,!0);d=h.complete,d&&(h.complete=!1,d.call(g))}return!1}return 1/0==h.duration?this.now=e:(c=e-this.startTime,this.state=c/h.duration,this.pos=K.easing[h.animatedProperties[this.prop]](this.state,c,0,1,h.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},K.extend(K.fx,{tick:function(){for(var a,b=K.timers,c=0;c<b.length;c++)a=b[c],a()||b[c]!==a||b.splice(c--,1);b.length||K.fx.stop()},interval:13,stop:function(){clearInterval(rc),rc=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){K.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&null!=a.elem.style[a.prop]?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now}}}),K.each(["width","height"],function(a,b){K.fx.step[b]=function(a){K.style(a.elem,b,Math.max(0,a.now)+a.unit)}}),K.expr&&K.expr.filters&&(K.expr.filters.animated=function(a){return K.grep(K.timers,function(b){return a===b.elem}).length});var xc=/^t(?:able|d|h)$/i,yc=/^(?:body|html)$/i;K.fn.offset="getBoundingClientRect"in H.documentElement?function(a){var b,c=this[0];if(a)return this.each(function(b){K.offset.setOffset(this,a,b)});if(!c||!c.ownerDocument)return null;if(c===c.ownerDocument.body)return K.offset.bodyOffset(c);try{b=c.getBoundingClientRect()}catch(d){}var e=c.ownerDocument,f=e.documentElement;if(!b||!K.contains(f,c))return b?{top:b.top,left:b.left}:{top:0,left:0};var g=e.body,h=G(e),i=f.clientTop||g.clientTop||0,j=f.clientLeft||g.clientLeft||0,k=h.pageYOffset||K.support.boxModel&&f.scrollTop||g.scrollTop,l=h.pageXOffset||K.support.boxModel&&f.scrollLeft||g.scrollLeft,m=b.top+k-i,n=b.left+l-j;return{top:m,left:n}}:function(a){var b=this[0];if(a)return this.each(function(b){K.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return K.offset.bodyOffset(b);for(var c,d=b.offsetParent,e=b,f=b.ownerDocument,g=f.documentElement,h=f.body,i=f.defaultView,j=i?i.getComputedStyle(b,null):b.currentStyle,k=b.offsetTop,l=b.offsetLeft;(b=b.parentNode)&&b!==h&&b!==g&&(!K.support.fixedPosition||"fixed"!==j.position);)c=i?i.getComputedStyle(b,null):b.currentStyle,k-=b.scrollTop,l-=b.scrollLeft,b===d&&(k+=b.offsetTop,l+=b.offsetLeft,!K.support.doesNotAddBorder||K.support.doesAddBorderForTableAndCells&&xc.test(b.nodeName)||(k+=parseFloat(c.borderTopWidth)||0,l+=parseFloat(c.borderLeftWidth)||0),e=d,d=b.offsetParent),K.support.subtractsBorderForOverflowNotVisible&&"visible"!==c.overflow&&(k+=parseFloat(c.borderTopWidth)||0,l+=parseFloat(c.borderLeftWidth)||0),j=c;return("relative"===j.position||"static"===j.position)&&(k+=h.offsetTop,l+=h.offsetLeft),K.support.fixedPosition&&"fixed"===j.position&&(k+=Math.max(g.scrollTop,h.scrollTop),l+=Math.max(g.scrollLeft,h.scrollLeft)),{top:k,left:l}},K.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;return K.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(K.css(a,"marginTop"))||0,c+=parseFloat(K.css(a,"marginLeft"))||0),{top:b,left:c}},setOffset:function(a,b,c){var d=K.css(a,"position");"static"===d&&(a.style.position="relative");var e,f,g=K(a),h=g.offset(),i=K.css(a,"top"),j=K.css(a,"left"),k=("absolute"===d||"fixed"===d)&&K.inArray("auto",[i,j])>-1,l={},m={};k?(m=g.position(),e=m.top,f=m.left):(e=parseFloat(i)||0,f=parseFloat(j)||0),K.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(l.top=b.top-h.top+e),null!=b.left&&(l.left=b.left-h.left+f),"using"in b?b.using.call(a,l):g.css(l)}},K.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),c=this.offset(),d=yc.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat(K.css(a,"marginTop"))||0,c.left-=parseFloat(K.css(a,"marginLeft"))||0,d.top+=parseFloat(K.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(K.css(b[0],"borderLeftWidth"))||0,{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||H.body;a&&!yc.test(a.nodeName)&&"static"===K.css(a,"position");)a=a.offsetParent;return a})}}),K.each(["Left","Top"],function(a,c){var d="scroll"+c;K.fn[d]=function(c){var e,f;return c===b?(e=this[0])?(f=G(e),f?"pageXOffset"in f?f[a?"pageYOffset":"pageXOffset"]:K.support.boxModel&&f.document.documentElement[d]||f.document.body[d]:e[d]):null:this.each(function(){f=G(this),f?f.scrollTo(a?K(f).scrollLeft():c,a?c:K(f).scrollTop()):this[d]=c})}}),K.each(["Height","Width"],function(a,c){var d=c.toLowerCase();K.fn["inner"+c]=function(){var a=this[0];return a?a.style?parseFloat(K.css(a,d,"padding")):this[d]():null},K.fn["outer"+c]=function(a){var b=this[0];return b?b.style?parseFloat(K.css(b,d,a?"margin":"border")):this[d]():null},K.fn[d]=function(a){var e=this[0];if(!e)return null==a?null:this;if(K.isFunction(a))return this.each(function(b){var c=K(this);c[d](a.call(this,b,c[d]()))});if(K.isWindow(e)){var f=e.document.documentElement["client"+c],g=e.document.body;return"CSS1Compat"===e.document.compatMode&&f||g&&g["client"+c]||f}if(9===e.nodeType)return Math.max(e.documentElement["client"+c],e.body["scroll"+c],e.documentElement["scroll"+c],e.body["offset"+c],e.documentElement["offset"+c]);if(a===b){var h=K.css(e,d),i=parseFloat(h);return K.isNumeric(i)?i:h}return this.css(d,"string"==typeof a?a:a+"px")}}),a.jQuery=a.$=K,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return K})}(window),function(a,b){function c(b,c){var e=b.nodeName.toLowerCase();return"area"===e?(c=b.parentNode,e=c.name,b.href&&e&&"map"===c.nodeName.toLowerCase()?(b=a("img[usemap=#"+e+"]")[0],!!b&&d(b)):!1):(/input|select|textarea|button|object/.test(e)?!b.disabled:"a"==e?b.href||c:c)&&d(b)}function d(b){return!a(b).parents().andSelf().filter(function(){return"hidden"===a.curCSS(this,"visibility")||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{},a.ui.version||(a.extend(a.ui,{version:"1.8.16",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),a.fn.extend({propAttr:a.fn.prop||a.fn.attr,_focus:a.fn.focus,focus:function(b,c){return"number"==typeof b?this.each(function(){var d=this;setTimeout(function(){a(d).focus(),c&&c.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;return b=a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))
}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length){c=a(this[0]);for(var d;c.length&&c[0]!==document;){if(d=c.css("position"),("absolute"===d||"relative"===d||"fixed"===d)&&(d=parseInt(c.css("zIndex"),10),!isNaN(d)&&0!==d))return d;c=c.parent()}}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.each(["Width","Height"],function(c,d){function e(b,c,d,e){return a.each(f,function(){c-=parseFloat(a.curCSS(b,"padding"+this,!0))||0,d&&(c-=parseFloat(a.curCSS(b,"border"+this+"Width",!0))||0),e&&(c-=parseFloat(a.curCSS(b,"margin"+this,!0))||0)}),c}var f="Width"===d?["Left","Right"]:["Top","Bottom"],g=d.toLowerCase(),h={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?h["inner"+d].call(this):this.each(function(){a(this).css(g,e(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return"number"!=typeof b?h["outer"+d].call(this,b):this.each(function(){a(this).css(g,e(this,b,!0,c)+"px")})}}),a.extend(a.expr[":"],{data:function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a(function(){var b=document.body,c=b.appendChild(c=document.createElement("div"));a.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),a.support.minHeight=100===c.offsetHeight,a.support.selectstart="onselectstart"in c,b.removeChild(c).style.display="none"}),a.extend(a.ui,{plugin:{add:function(b,c,d){b=a.ui[b].prototype;for(var e in d)b.plugins[e]=b.plugins[e]||[],b.plugins[e].push([c,d[e]])},call:function(a,b,c){if((b=a.plugins[b])&&a.element[0].parentNode)for(var d=0;d<b.length;d++)a.options[b[d][0]]&&b[d][1].apply(a.element,c)}},contains:function(a,b){return document.compareDocumentPosition?16&a.compareDocumentPosition(b):a!==b&&a.contains(b)},hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;c=c&&"left"===c?"scrollLeft":"scrollTop";var d=!1;return b[c]>0?!0:(b[c]=1,d=b[c]>0,b[c]=0,d)},isOverAxis:function(a,b,c){return a>b&&b+c>a},isOver:function(b,c,d,e,f,g){return a.ui.isOverAxis(b,d,f)&&a.ui.isOverAxis(c,e,g)}}))}(jQuery),function(a,b){if(a.cleanData){var c=a.cleanData;a.cleanData=function(b){for(var d,e=0;null!=(d=b[e]);e++)try{a(d).triggerHandler("remove")}catch(f){}c(b)}}else{var d=a.fn.remove;a.fn.remove=function(b,c){return this.each(function(){return c||(!b||a.filter(b,[this]).length)&&a("*",this).add([this]).each(function(){try{a(this).triggerHandler("remove")}catch(b){}}),d.call(a(this),b,c)})}}a.widget=function(b,c,d){var e,f=b.split(".")[0];b=b.split(".")[1],e=f+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][e]=function(c){return!!a.data(c,b)},a[f]=a[f]||{},a[f][b]=function(a,b){arguments.length&&this._createWidget(a,b)},c=new c,c.options=a.extend(!0,{},c.options),a[f][b].prototype=a.extend(!0,c,{namespace:f,widgetName:b,widgetEventPrefix:a[f][b].prototype.widgetEventPrefix||b,widgetBaseClass:e},d),a.widget.bridge(b,a[f][b])},a.widget.bridge=function(c,d){a.fn[c]=function(e){var f="string"==typeof e,g=Array.prototype.slice.call(arguments,1),h=this;return e=!f&&g.length?a.extend.apply(null,[!0,e].concat(g)):e,f&&"_"===e.charAt(0)?h:(this.each(f?function(){var d=a.data(this,c),f=d&&a.isFunction(d[e])?d[e].apply(d,g):d;return f!==d&&f!==b?(h=f,!1):void 0}:function(){var b=a.data(this,c);b?b.option(e||{})._init():a.data(this,c,new d(e,this))}),h)}},a.Widget=function(a,b){arguments.length&&this._createWidget(a,b)},a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(b,c){a.data(c,this.widgetName,this),this.element=a(c),this.options=a.extend(!0,{},this.options,this._getCreateOptions(),b);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(c,d){var e=c;if(0===arguments.length)return a.extend({},this.options);if("string"==typeof c){if(d===b)return this.options[c];e={},e[c]=d}return this._setOptions(e),this},_setOptions:function(b){var c=this;return a.each(b,function(a,b){c._setOption(a,b)}),this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",b),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(b,c,d){var e=this.options[b];if(c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),d=d||{},c.originalEvent){b=a.event.props.length;for(var f;b;)f=a.event.props[--b],c[f]=c.originalEvent[f]}return this.element.trigger(c,d),!(a.isFunction(e)&&e.call(this.element[0],c,d)===!1||c.isDefaultPrevented())}}}(jQuery),function(a){var b=!1;a(document).mouseup(function(){b=!1}),a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){return!0===a.data(c.target,b.widgetName+".preventClickEvent")?(a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(c){if(!b){this._mouseStarted&&this._mouseUp(c),this._mouseDownEvent=c;var d=this,e=1==c.which,f="string"==typeof this.options.cancel&&c.target.nodeName?a(c.target).closest(this.options.cancel).length:!1;return e&&!f&&this._mouseCapture(c)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&(this._mouseStarted=this._mouseStart(c)!==!1,!this._mouseStarted)?(c.preventDefault(),!0):(!0===a.data(c.target,this.widgetName+".preventClickEvent")&&a.removeData(c.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),c.preventDefault(),b=!0)):!0}},_mouseMove:function(b){return!a.browser.msie||document.documentMode>=9||b.button?this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&((this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1)?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted):this._mouseUp(b)},_mouseUp:function(b){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target==this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(a){a.ui=a.ui||{};var b=/left|center|right/,c=/top|center|bottom/,d=a.fn.position,e=a.fn.offset;a.fn.position=function(e){if(!e||!e.of)return d.apply(this,arguments);e=a.extend({},e);var f,g,h,i=a(e.of),j=i[0],k=(e.collision||"flip").split(" "),l=e.offset?e.offset.split(" "):[0,0];return 9===j.nodeType?(f=i.width(),g=i.height(),h={top:0,left:0}):j.setTimeout?(f=i.width(),g=i.height(),h={top:i.scrollTop(),left:i.scrollLeft()}):j.preventDefault?(e.at="left top",f=g=0,h={top:e.of.pageY,left:e.of.pageX}):(f=i.outerWidth(),g=i.outerHeight(),h=i.offset()),a.each(["my","at"],function(){var a=(e[this]||"").split(" ");1===a.length&&(a=b.test(a[0])?a.concat(["center"]):c.test(a[0])?["center"].concat(a):["center","center"]),a[0]=b.test(a[0])?a[0]:"center",a[1]=c.test(a[1])?a[1]:"center",e[this]=a}),1===k.length&&(k[1]=k[0]),l[0]=parseInt(l[0],10)||0,1===l.length&&(l[1]=l[0]),l[1]=parseInt(l[1],10)||0,"right"===e.at[0]?h.left+=f:"center"===e.at[0]&&(h.left+=f/2),"bottom"===e.at[1]?h.top+=g:"center"===e.at[1]&&(h.top+=g/2),h.left+=l[0],h.top+=l[1],this.each(function(){var b,c=a(this),d=c.outerWidth(),i=c.outerHeight(),j=parseInt(a.curCSS(this,"marginLeft",!0))||0,m=parseInt(a.curCSS(this,"marginTop",!0))||0,n=d+j+(parseInt(a.curCSS(this,"marginRight",!0))||0),o=i+m+(parseInt(a.curCSS(this,"marginBottom",!0))||0),p=a.extend({},h);"right"===e.my[0]?p.left-=d:"center"===e.my[0]&&(p.left-=d/2),"bottom"===e.my[1]?p.top-=i:"center"===e.my[1]&&(p.top-=i/2),p.left=Math.round(p.left),p.top=Math.round(p.top),b={left:p.left-j,top:p.top-m},a.each(["left","top"],function(c,h){a.ui.position[k[c]]&&a.ui.position[k[c]][h](p,{targetWidth:f,targetHeight:g,elemWidth:d,elemHeight:i,collisionPosition:b,collisionWidth:n,collisionHeight:o,offset:l,my:e.my,at:e.at})}),a.fn.bgiframe&&c.bgiframe(),c.offset(a.extend(p,{using:e.using}))})},a.ui.position={fit:{left:function(b,c){var d=a(window);d=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft(),b.left=d>0?b.left-d:Math.max(b.left-c.collisionPosition.left,b.left)},top:function(b,c){var d=a(window);d=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop(),b.top=d>0?b.top-d:Math.max(b.top-c.collisionPosition.top,b.top)}},flip:{left:function(b,c){if("center"!==c.at[0]){var d=a(window);d=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft();var e="left"===c.my[0]?-c.elemWidth:"right"===c.my[0]?c.elemWidth:0,f="left"===c.at[0]?c.targetWidth:-c.targetWidth,g=-2*c.offset[0];b.left+=c.collisionPosition.left<0?e+f+g:d>0?e+f+g:0}},top:function(b,c){if("center"!==c.at[1]){var d=a(window);d=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop();var e="top"===c.my[1]?-c.elemHeight:"bottom"===c.my[1]?c.elemHeight:0,f="top"===c.at[1]?c.targetHeight:-c.targetHeight,g=-2*c.offset[1];b.top+=c.collisionPosition.top<0?e+f+g:d>0?e+f+g:0}}}},a.offset.setOffset||(a.offset.setOffset=function(b,c){/static/.test(a.curCSS(b,"position"))&&(b.style.position="relative");var d=a(b),e=d.offset(),f=parseInt(a.curCSS(b,"top",!0),10)||0,g=parseInt(a.curCSS(b,"left",!0),10)||0;e={top:c.top-e.top+f,left:c.left-e.left+g},"using"in c?c.using.call(b,e):d.css(e)},a.fn.offset=function(b){var c=this[0];return c&&c.ownerDocument?b?this.each(function(){a.offset.setOffset(this,b)}):e.call(this):null})}(jQuery),function(a){a.widget("ui.draggable",a.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"!=this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){return this.element.data("draggable")?(this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this):void 0},_mouseCapture:function(b){var c=this.options;return this.helper||c.disabled||a(b.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(b),this.handle?(c.iframeFix&&a(c.iframeFix===!0?"iframe":c.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(a(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(b){var c=this.options;return this.helper=this._createHelper(b),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),c.containment&&this._setContainment(),this._trigger("start",b)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.helper.addClass("ui-draggable-dragging"),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b),!0)},_mouseDrag:function(b,c){if(this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),!c){if(c=this._uiHash(),this._trigger("drag",b,c)===!1)return this._mouseUp({}),!1;this.position=c.position}return this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var c=!1;if(a.ui.ddmanager&&!this.options.dropBehaviour&&(c=a.ui.ddmanager.drop(this,b)),this.dropped&&(c=this.dropped,this.dropped=!1),!(this.element[0]&&this.element[0].parentNode||"original"!=this.options.helper))return!1;if("invalid"==this.options.revert&&!c||"valid"==this.options.revert&&c||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,c)){var d=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){d._trigger("stop",b)!==!1&&d._clear()})}else this._trigger("stop",b)!==!1&&this._clear();return!1},_mouseUp:function(b){return this.options.iframeFix===!0&&a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){var c=this.options.handle&&a(this.options.handle,this.element).length?!1:!0;return a(this.options.handle,this.element).find("*").andSelf().each(function(){this==b.target&&(c=!0)}),c},_createHelper:function(b){var c=this.options;return b=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b])):"clone"==c.helper?this.element.clone().removeAttr("id"):this.element,b.parents("body").length||b.appendTo("parent"==c.appendTo?this.element[0].parentNode:c.appendTo),b[0]!=this.element[0]&&!/(fixed|absolute)/.test(b.css("position"))&&b.css("position","absolute"),b},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&a.browser.msie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;if("parent"==b.containment&&(b.containment=this.helper[0].parentNode),("document"==b.containment||"window"==b.containment)&&(this.containment=["document"==b.containment?0:a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==b.containment?0:a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==b.containment?0:a(window).scrollLeft())+a("document"==b.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==b.containment?0:a(window).scrollTop())+(a("document"==b.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(b.containment)||b.containment.constructor==Array)b.containment.constructor==Array&&(this.containment=b.containment);else{b=a(b.containment);var c=b[0];if(c){b.offset();var d="hidden"!=a(c).css("overflow");this.containment=[(parseInt(a(c).css("borderLeftWidth"),10)||0)+(parseInt(a(c).css("paddingLeft"),10)||0),(parseInt(a(c).css("borderTopWidth"),10)||0)+(parseInt(a(c).css("paddingTop"),10)||0),(d?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(a(c).css("borderLeftWidth"),10)||0)-(parseInt(a(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(d?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(a(c).css("borderTopWidth"),10)||0)-(parseInt(a(c).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=b}}},_convertPositionTo:function(b,c){c||(c=this.position),b="absolute"==b?1:-1;var d="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,e=/(html|body)/i.test(d[0].tagName);return{top:c.top+this.offset.relative.top*b+this.offset.parent.top*b-(a.browser.safari&&a.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():e?0:d.scrollTop())*b),left:c.left+this.offset.relative.left*b+this.offset.parent.left*b-(a.browser.safari&&a.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())*b)}},_generatePosition:function(b){var c=this.options,d="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,e=/(html|body)/i.test(d[0].tagName),f=b.pageX,g=b.pageY;if(this.originalPosition){var h;this.containment&&(this.relative_container?(h=this.relative_container.offset(),h=[this.containment[0]+h.left,this.containment[1]+h.top,this.containment[2]+h.left,this.containment[3]+h.top]):h=this.containment,b.pageX-this.offset.click.left<h[0]&&(f=h[0]+this.offset.click.left),b.pageY-this.offset.click.top<h[1]&&(g=h[1]+this.offset.click.top),b.pageX-this.offset.click.left>h[2]&&(f=h[2]+this.offset.click.left),b.pageY-this.offset.click.top>h[3]&&(g=h[3]+this.offset.click.top)),c.grid&&(g=c.grid[1]?this.originalPageY+Math.round((g-this.originalPageY)/c.grid[1])*c.grid[1]:this.originalPageY,g=h?g-this.offset.click.top<h[1]||g-this.offset.click.top>h[3]?g-this.offset.click.top<h[1]?g+c.grid[1]:g-c.grid[1]:g:g,f=c.grid[0]?this.originalPageX+Math.round((f-this.originalPageX)/c.grid[0])*c.grid[0]:this.originalPageX,f=h?f-this.offset.click.left<h[0]||f-this.offset.click.left>h[2]?f-this.offset.click.left<h[0]?f+c.grid[0]:f-c.grid[0]:f:f)}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&a.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():e?0:d.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&a.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(b,c,d){return d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d]),"drag"==b&&(this.positionAbs=this._convertPositionTo("absolute")),a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.extend(a.ui.draggable,{version:"1.8.16"}),a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c){var d=a(this).data("draggable"),e=d.options,f=a.extend({},c,{item:d.element});d.sortables=[],a(e.connectToSortable).each(function(){var c=a.data(this,"sortable");c&&!c.options.disabled&&(d.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",b,f))})},stop:function(b,c){var d=a(this).data("draggable"),e=a.extend({},c,{item:d.element});a.each(d.sortables,function(){this.instance.isOver?(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,"original"==d.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,e))})},drag:function(b,c){var d=a(this).data("draggable"),e=this;a.each(d.sortables,function(){this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(e).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",b),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",b),d.dropped=!1)})}}),a.ui.plugin.add("draggable","cursor",{start:function(){var b=a("body"),c=a(this).data("draggable").options;b.css("cursor")&&(c._cursor=b.css("cursor")),b.css("cursor",c.cursor)},stop:function(){var b=a(this).data("draggable").options;b._cursor&&a("body").css("cursor",b._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(b,c){b=a(c.helper),c=a(this).data("draggable").options,b.css("opacity")&&(c._opacity=b.css("opacity")),b.css("opacity",c.opacity)},stop:function(b,c){b=a(this).data("draggable").options,b._opacity&&a(c.helper).css("opacity",b._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(){var b=a(this).data("draggable");b.scrollParent[0]!=document&&"HTML"!=b.scrollParent[0].tagName&&(b.overflowOffset=b.scrollParent.offset())},drag:function(b){var c=a(this).data("draggable"),d=c.options,e=!1;c.scrollParent[0]!=document&&"HTML"!=c.scrollParent[0].tagName?(d.axis&&"x"==d.axis||(c.overflowOffset.top+c.scrollParent[0].offsetHeight-b.pageY<d.scrollSensitivity?c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop+d.scrollSpeed:b.pageY-c.overflowOffset.top<d.scrollSensitivity&&(c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop-d.scrollSpeed)),d.axis&&"y"==d.axis||(c.overflowOffset.left+c.scrollParent[0].offsetWidth-b.pageX<d.scrollSensitivity?c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft+d.scrollSpeed:b.pageX-c.overflowOffset.left<d.scrollSensitivity&&(c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft-d.scrollSpeed))):(d.axis&&"x"==d.axis||(b.pageY-a(document).scrollTop()<d.scrollSensitivity?e=a(document).scrollTop(a(document).scrollTop()-d.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<d.scrollSensitivity&&(e=a(document).scrollTop(a(document).scrollTop()+d.scrollSpeed))),d.axis&&"y"==d.axis||(b.pageX-a(document).scrollLeft()<d.scrollSensitivity?e=a(document).scrollLeft(a(document).scrollLeft()-d.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<d.scrollSensitivity&&(e=a(document).scrollLeft(a(document).scrollLeft()+d.scrollSpeed)))),e!==!1&&a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(c,b)}}),a.ui.plugin.add("draggable","snap",{start:function(){var b=a(this).data("draggable"),c=b.options;b.snapElements=[],a(c.snap.constructor!=String?c.snap.items||":data(draggable)":c.snap).each(function(){var c=a(this),d=c.offset();this!=b.element[0]&&b.snapElements.push({item:this,width:c.outerWidth(),height:c.outerHeight(),top:d.top,left:d.left})})},drag:function(b,c){for(var d=a(this).data("draggable"),e=d.options,f=e.snapTolerance,g=c.offset.left,h=g+d.helperProportions.width,i=c.offset.top,j=i+d.helperProportions.height,k=d.snapElements.length-1;k>=0;k--){var l=d.snapElements[k].left,m=l+d.snapElements[k].width,n=d.snapElements[k].top,o=n+d.snapElements[k].height;if(g>l-f&&m+f>g&&i>n-f&&o+f>i||g>l-f&&m+f>g&&j>n-f&&o+f>j||h>l-f&&m+f>h&&i>n-f&&o+f>i||h>l-f&&m+f>h&&j>n-f&&o+f>j){if("inner"!=e.snapMode){var p=Math.abs(n-j)<=f,q=Math.abs(o-i)<=f,r=Math.abs(l-h)<=f,s=Math.abs(m-g)<=f;p&&(c.position.top=d._convertPositionTo("relative",{top:n-d.helperProportions.height,left:0}).top-d.margins.top),q&&(c.position.top=d._convertPositionTo("relative",{top:o,left:0}).top-d.margins.top),r&&(c.position.left=d._convertPositionTo("relative",{top:0,left:l-d.helperProportions.width}).left-d.margins.left),s&&(c.position.left=d._convertPositionTo("relative",{top:0,left:m}).left-d.margins.left)}var t=p||q||r||s;"outer"!=e.snapMode&&(p=Math.abs(n-i)<=f,q=Math.abs(o-j)<=f,r=Math.abs(l-g)<=f,s=Math.abs(m-h)<=f,p&&(c.position.top=d._convertPositionTo("relative",{top:n,left:0}).top-d.margins.top),q&&(c.position.top=d._convertPositionTo("relative",{top:o-d.helperProportions.height,left:0}).top-d.margins.top),r&&(c.position.left=d._convertPositionTo("relative",{top:0,left:l}).left-d.margins.left),s&&(c.position.left=d._convertPositionTo("relative",{top:0,left:m-d.helperProportions.width}).left-d.margins.left)),!d.snapElements[k].snapping&&(p||q||r||s||t)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[k].item})),d.snapElements[k].snapping=p||q||r||s||t}else d.snapElements[k].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[k].item})),d.snapElements[k].snapping=!1}}}),a.ui.plugin.add("draggable","stack",{start:function(){var b=a(this).data("draggable").options;if(b=a.makeArray(a(b.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)}),b.length){var c=parseInt(b[0].style.zIndex)||0;a(b).each(function(a){this.style.zIndex=c+a}),this[0].style.zIndex=c+b.length}}}),a.ui.plugin.add("draggable","zIndex",{start:function(b,c){b=a(c.helper),c=a(this).data("draggable").options,b.css("zIndex")&&(c._zIndex=b.css("zIndex")),b.css("zIndex",c.zIndex)},stop:function(b,c){b=a(this).data("draggable").options,b._zIndex&&a(c.helper).css("zIndex",b._zIndex)}})}(jQuery),function(a){a.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var b=this.options,c=b.accept;this.isover=0,this.isout=1,this.accept=a.isFunction(c)?c:function(a){return a.is(c)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},a.ui.ddmanager.droppables[b.scope]=a.ui.ddmanager.droppables[b.scope]||[],a.ui.ddmanager.droppables[b.scope].push(this),b.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){for(var b=a.ui.ddmanager.droppables[this.options.scope],c=0;c<b.length;c++)b[c]==this&&b.splice(c,1);return this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable"),this},_setOption:function(b,c){"accept"==b&&(this.accept=a.isFunction(c)?c:function(a){return a.is(c)}),a.Widget.prototype._setOption.apply(this,arguments)},_activate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),c&&this._trigger("activate",b,this.ui(c))},_deactivate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),c&&this._trigger("deactivate",b,this.ui(c))},_over:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!=this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",b,this.ui(c)))},_out:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!=this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",b,this.ui(c)))},_drop:function(b,c){var d=c||a.ui.ddmanager.current;if(!d||(d.currentItem||d.element)[0]==this.element[0])return!1;var e=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var b=a.data(this,"droppable");return b.options.greedy&&!b.options.disabled&&b.options.scope==d.options.scope&&b.accept.call(b.element[0],d.currentItem||d.element)&&a.ui.intersect(d,a.extend(b,{offset:b.element.offset()}),b.options.tolerance)?(e=!0,!1):void 0}),e?!1:this.accept.call(this.element[0],d.currentItem||d.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",b,this.ui(d)),this.element):!1
},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}}),a.extend(a.ui.droppable,{version:"1.8.16"}),a.ui.intersect=function(b,c,d){if(!c.offset)return!1;var e=(b.positionAbs||b.position.absolute).left,f=e+b.helperProportions.width,g=(b.positionAbs||b.position.absolute).top,h=g+b.helperProportions.height,i=c.offset.left,j=i+c.proportions.width,k=c.offset.top,l=k+c.proportions.height;switch(d){case"fit":return e>=i&&j>=f&&g>=k&&l>=h;case"intersect":return i<e+b.helperProportions.width/2&&f-b.helperProportions.width/2<j&&k<g+b.helperProportions.height/2&&h-b.helperProportions.height/2<l;case"pointer":return a.ui.isOver((b.positionAbs||b.position.absolute).top+(b.clickOffset||b.offset.click).top,(b.positionAbs||b.position.absolute).left+(b.clickOffset||b.offset.click).left,k,i,c.proportions.height,c.proportions.width);case"touch":return(g>=k&&l>=g||h>=k&&l>=h||k>g&&h>l)&&(e>=i&&j>=e||f>=i&&j>=f||i>e&&f>j);default:return!1}},a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(b,c){var d=a.ui.ddmanager.droppables[b.options.scope]||[],e=c?c.type:null,f=(b.currentItem||b.element).find(":data(droppable)").andSelf(),g=0;a:for(;g<d.length;g++)if(!(d[g].options.disabled||b&&!d[g].accept.call(d[g].element[0],b.currentItem||b.element))){for(var h=0;h<f.length;h++)if(f[h]==d[g].element[0]){d[g].proportions.height=0;continue a}d[g].visible="none"!=d[g].element.css("display"),d[g].visible&&("mousedown"==e&&d[g]._activate.call(d[g],c),d[g].offset=d[g].element.offset(),d[g].proportions={width:d[g].element[0].offsetWidth,height:d[g].element[0].offsetHeight})}},drop:function(b,c){var d=!1;return a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&a.ui.intersect(b,this,this.options.tolerance)&&(d=d||this._drop.call(this,c)),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,c)))}),d},dragStart:function(b,c){b.element.parents(":not(body,html)").bind("scroll.droppable",function(){b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)})},drag:function(b,c){b.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(b,c),a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var d=a.ui.intersect(b,this,this.options.tolerance);if(d=d||1!=this.isover?d&&0==this.isover?"isover":null:"isout"){var e;if(this.options.greedy){var f=this.element.parents(":data(droppable):eq(0)");f.length&&(e=a.data(f[0],"droppable"),e.greedyChild="isover"==d?1:0)}e&&"isover"==d&&(e.isover=0,e.isout=1,e._out.call(e,c)),this[d]=1,this["isout"==d?"isover":"isout"]=0,this["isover"==d?"_over":"_out"].call(this,c),e&&"isout"==d&&(e.isout=0,e.isover=1,e._over.call(e,c))}}})},dragStop:function(b,c){b.element.parents(":not(body,html)").unbind("scroll.droppable"),b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)}}}(jQuery),function(a){a.widget("ui.resizable",a.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var b=this,c=this.options;if(this.element.addClass("ui-resizable"),a.extend(this,{_aspectRatio:!!c.aspectRatio,aspectRatio:c.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:c.helper||c.ghost||c.animate?c.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(/relative/.test(this.element.css("position"))&&a.browser.opera&&this.element.css({position:"relative",top:"auto",left:"auto"}),this.element.wrap(a('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=c.handles||(a(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var d=this.handles.split(",");this.handles={};for(var e=0;e<d.length;e++){var f=a.trim(d[e]),g=a('<div class="ui-resizable-handle ui-resizable-'+f+'"></div>');/sw|se|ne|nw/.test(f)&&g.css({zIndex:++c.zIndex}),"se"==f&&g.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[f]=".ui-resizable-"+f,this.element.append(g)}}this._renderAxis=function(b){b=b||this.element;for(var c in this.handles){if(this.handles[c].constructor==String&&(this.handles[c]=a(this.handles[c],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var d=a(this.handles[c],this.element),e=0;e=/sw|ne|nw|se|n|s/.test(c)?d.outerHeight():d.outerWidth(),d=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join(""),b.css(d,e),this._proportionallyResize()}a(this.handles[c])}},this._renderAxis(this.element),this._handles=a(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!b.resizing){if(this.className)var a=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);b.axis=a&&a[1]?a[1]:"se"}}),c.autoHide&&(this._handles.hide(),a(this.element).addClass("ui-resizable-autohide").hover(function(){c.disabled||(a(this).removeClass("ui-resizable-autohide"),b._handles.show())},function(){c.disabled||b.resizing||(a(this).addClass("ui-resizable-autohide"),b._handles.hide())})),this._mouseInit()},destroy:function(){this._mouseDestroy();var b=function(b){a(b).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){b(this.element);var c=this.element;c.after(this.originalElement.css({position:c.css("position"),width:c.outerWidth(),height:c.outerHeight(),top:c.css("top"),left:c.css("left")})).remove()}return this.originalElement.css("resize",this.originalResizeStyle),b(this.originalElement),this},_mouseCapture:function(b){var c=!1;for(var d in this.handles)a(this.handles[d])[0]==b.target&&(c=!0);return!this.options.disabled&&c},_mouseStart:function(c){var d=this.options,e=this.element.position(),f=this.element;this.resizing=!0,this.documentScroll={top:a(document).scrollTop(),left:a(document).scrollLeft()},(f.is(".ui-draggable")||/absolute/.test(f.css("position")))&&f.css({position:"absolute",top:e.top,left:e.left}),a.browser.opera&&/relative/.test(f.css("position"))&&f.css({position:"relative",top:"auto",left:"auto"}),this._renderProxy(),e=b(this.helper.css("left"));var g=b(this.helper.css("top"));return d.containment&&(e+=a(d.containment).scrollLeft()||0,g+=a(d.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:e,top:g},this.size=this._helper?{width:f.outerWidth(),height:f.outerHeight()}:{width:f.width(),height:f.height()},this.originalSize=this._helper?{width:f.outerWidth(),height:f.outerHeight()}:{width:f.width(),height:f.height()},this.originalPosition={left:e,top:g},this.sizeDiff={width:f.outerWidth()-f.width(),height:f.outerHeight()-f.height()},this.originalMousePosition={left:c.pageX,top:c.pageY},this.aspectRatio="number"==typeof d.aspectRatio?d.aspectRatio:this.originalSize.width/this.originalSize.height||1,d=a(".ui-resizable-"+this.axis).css("cursor"),a("body").css("cursor","auto"==d?this.axis+"-resize":d),f.addClass("ui-resizable-resizing"),this._propagate("start",c),!0},_mouseDrag:function(a){var b=this.helper,c=this.originalMousePosition,d=this._change[this.axis];return d?(c=d.apply(this,[a,a.pageX-c.left||0,a.pageY-c.top||0]),this._updateVirtualBoundaries(a.shiftKey),(this._aspectRatio||a.shiftKey)&&(c=this._updateRatio(c,a)),c=this._respectSize(c,a),this._propagate("resize",a),b.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(c),this._trigger("resize",a,this.ui()),!1):!1},_mouseStop:function(b){this.resizing=!1;var c=this.options,d=this;if(this._helper){var e=this._proportionallyResizeElements,f=e.length&&/textarea/i.test(e[0].nodeName);e=f&&a.ui.hasScroll(e[0],"left")?0:d.sizeDiff.height,f=f?0:d.sizeDiff.width,f={width:d.helper.width()-f,height:d.helper.height()-e},e=parseInt(d.element.css("left"),10)+(d.position.left-d.originalPosition.left)||null;var g=parseInt(d.element.css("top"),10)+(d.position.top-d.originalPosition.top)||null;c.animate||this.element.css(a.extend(f,{top:g,left:e})),d.helper.height(d.size.height),d.helper.width(d.size.width),this._helper&&!c.animate&&this._proportionallyResize()}return a("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",b),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(a){var b,d,e,f=this.options;f={minWidth:c(f.minWidth)?f.minWidth:0,maxWidth:c(f.maxWidth)?f.maxWidth:1/0,minHeight:c(f.minHeight)?f.minHeight:0,maxHeight:c(f.maxHeight)?f.maxHeight:1/0},(this._aspectRatio||a)&&(a=f.minHeight*this.aspectRatio,d=f.minWidth/this.aspectRatio,b=f.maxHeight*this.aspectRatio,e=f.maxWidth/this.aspectRatio,a>f.minWidth&&(f.minWidth=a),d>f.minHeight&&(f.minHeight=d),b<f.maxWidth&&(f.maxWidth=b),e<f.maxHeight&&(f.maxHeight=e)),this._vBoundaries=f},_updateCache:function(a){this.offset=this.helper.offset(),c(a.left)&&(this.position.left=a.left),c(a.top)&&(this.position.top=a.top),c(a.height)&&(this.size.height=a.height),c(a.width)&&(this.size.width=a.width)},_updateRatio:function(a){var b=this.position,d=this.size,e=this.axis;return c(a.height)?a.width=a.height*this.aspectRatio:c(a.width)&&(a.height=a.width/this.aspectRatio),"sw"==e&&(a.left=b.left+(d.width-a.width),a.top=null),"nw"==e&&(a.top=b.top+(d.height-a.height),a.left=b.left+(d.width-a.width)),a},_respectSize:function(a){var b=this._vBoundaries,d=this.axis,e=c(a.width)&&b.maxWidth&&b.maxWidth<a.width,f=c(a.height)&&b.maxHeight&&b.maxHeight<a.height,g=c(a.width)&&b.minWidth&&b.minWidth>a.width,h=c(a.height)&&b.minHeight&&b.minHeight>a.height;g&&(a.width=b.minWidth),h&&(a.height=b.minHeight),e&&(a.width=b.maxWidth),f&&(a.height=b.maxHeight);var i=this.originalPosition.left+this.originalSize.width,j=this.position.top+this.size.height,k=/sw|nw|w/.test(d);return d=/nw|ne|n/.test(d),g&&k&&(a.left=i-b.minWidth),e&&k&&(a.left=i-b.maxWidth),h&&d&&(a.top=j-b.minHeight),f&&d&&(a.top=j-b.maxHeight),(b=!a.width&&!a.height)&&!a.left&&a.top?a.top=null:b&&!a.top&&a.left&&(a.left=null),a},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var b=this.helper||this.element,c=0;c<this._proportionallyResizeElements.length;c++){var d=this._proportionallyResizeElements[c];if(!this.borderDif){var e=[d.css("borderTopWidth"),d.css("borderRightWidth"),d.css("borderBottomWidth"),d.css("borderLeftWidth")],f=[d.css("paddingTop"),d.css("paddingRight"),d.css("paddingBottom"),d.css("paddingLeft")];this.borderDif=a.map(e,function(a,b){return a=parseInt(a,10)||0,b=parseInt(f[b],10)||0,a+b})}a.browser.msie&&(a(b).is(":hidden")||a(b).parents(":hidden").length)||d.css({height:b.height()-this.borderDif[0]-this.borderDif[2]||0,width:b.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var b=this.options;if(this.elementOffset=this.element.offset(),this._helper){this.helper=this.helper||a('<div style="overflow:hidden;"></div>');var c=a.browser.msie&&a.browser.version<7,d=c?1:0;c=c?2:-1,this.helper.addClass(this._helper).css({width:this.element.outerWidth()+c,height:this.element.outerHeight()+c,position:"absolute",left:this.elementOffset.left-d+"px",top:this.elementOffset.top-d+"px",zIndex:++b.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(a,b){return{width:this.originalSize.width+b}},w:function(a,b){return{left:this.originalPosition.left+b,width:this.originalSize.width-b}},n:function(a,b,c){return{top:this.originalPosition.top+c,height:this.originalSize.height-c}},s:function(a,b,c){return{height:this.originalSize.height+c}},se:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},sw:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,c,d]))},ne:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},nw:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,c,d]))}},_propagate:function(b,c){a.ui.plugin.call(this,b,[c,this.ui()]),"resize"!=b&&this._trigger(b,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),a.extend(a.ui.resizable,{version:"1.8.16"}),a.ui.plugin.add("resizable","alsoResize",{start:function(){var b=a(this).data("resizable").options,c=function(b){a(b).each(function(){var b=a(this);b.data("resizable-alsoresize",{width:parseInt(b.width(),10),height:parseInt(b.height(),10),left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10),position:b.css("position")})})};"object"!=typeof b.alsoResize||b.alsoResize.parentNode?c(b.alsoResize):b.alsoResize.length?(b.alsoResize=b.alsoResize[0],c(b.alsoResize)):a.each(b.alsoResize,function(a){c(a)})},resize:function(b,c){var d=a(this).data("resizable");b=d.options;var e=d.originalSize,f=d.originalPosition,g={height:d.size.height-e.height||0,width:d.size.width-e.width||0,top:d.position.top-f.top||0,left:d.position.left-f.left||0},h=function(b,e){a(b).each(function(){var b=a(this),f=a(this).data("resizable-alsoresize"),h={},i=e&&e.length?e:b.parents(c.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(i,function(a,b){(a=(f[b]||0)+(g[b]||0))&&a>=0&&(h[b]=a||null)}),a.browser.opera&&/relative/.test(b.css("position"))&&(d._revertToRelativePosition=!0,b.css({position:"absolute",top:"auto",left:"auto"})),b.css(h)})};"object"!=typeof b.alsoResize||b.alsoResize.nodeType?h(b.alsoResize):a.each(b.alsoResize,function(a,b){h(a,b)})},stop:function(){var b=a(this).data("resizable"),c=b.options,d=function(b){a(b).each(function(){var b=a(this);b.css({position:b.data("resizable-alsoresize").position})})};b._revertToRelativePosition&&(b._revertToRelativePosition=!1,"object"!=typeof c.alsoResize||c.alsoResize.nodeType?d(c.alsoResize):a.each(c.alsoResize,function(a){d(a)})),a(this).removeData("resizable-alsoresize")}}),a.ui.plugin.add("resizable","animate",{stop:function(b){var c=a(this).data("resizable"),d=c.options,e=c._proportionallyResizeElements,f=e.length&&/textarea/i.test(e[0].nodeName),g=f&&a.ui.hasScroll(e[0],"left")?0:c.sizeDiff.height;f={width:c.size.width-(f?0:c.sizeDiff.width),height:c.size.height-g},g=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null;var h=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null;c.element.animate(a.extend(f,h&&g?{top:h,left:g}:{}),{duration:d.animateDuration,easing:d.animateEasing,step:function(){var d={width:parseInt(c.element.css("width"),10),height:parseInt(c.element.css("height"),10),top:parseInt(c.element.css("top"),10),left:parseInt(c.element.css("left"),10)};e&&e.length&&a(e[0]).css({width:d.width,height:d.height}),c._updateCache(d),c._propagate("resize",b)}})}}),a.ui.plugin.add("resizable","containment",{start:function(){var c=a(this).data("resizable"),d=c.element,e=c.options.containment;if(d=e instanceof a?e.get(0):/parent/.test(e)?d.parent().get(0):e)if(c.containerElement=a(d),/document/.test(e)||e==document)c.containerOffset={left:0,top:0},c.containerPosition={left:0,top:0},c.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight};else{var f=a(d),g=[];a(["Top","Right","Left","Bottom"]).each(function(a,c){g[a]=b(f.css("padding"+c))}),c.containerOffset=f.offset(),c.containerPosition=f.position(),c.containerSize={height:f.innerHeight()-g[3],width:f.innerWidth()-g[1]},e=c.containerOffset;var h=c.containerSize.height,i=c.containerSize.width;i=a.ui.hasScroll(d,"left")?d.scrollWidth:i,h=a.ui.hasScroll(d)?d.scrollHeight:h,c.parentData={element:d,left:e.left,top:e.top,width:i,height:h}}},resize:function(b){var c=a(this).data("resizable"),d=c.options,e=c.containerOffset,f=c.position;b=c._aspectRatio||b.shiftKey;var g={top:0,left:0},h=c.containerElement;h[0]!=document&&/static/.test(h.css("position"))&&(g=e),f.left<(c._helper?e.left:0)&&(c.size.width+=c._helper?c.position.left-e.left:c.position.left-g.left,b&&(c.size.height=c.size.width/d.aspectRatio),c.position.left=d.helper?e.left:0),f.top<(c._helper?e.top:0)&&(c.size.height+=c._helper?c.position.top-e.top:c.position.top,b&&(c.size.width=c.size.height*d.aspectRatio),c.position.top=c._helper?e.top:0),c.offset.left=c.parentData.left+c.position.left,c.offset.top=c.parentData.top+c.position.top,d=Math.abs((c._helper?c.offset.left-g.left:c.offset.left-g.left)+c.sizeDiff.width),e=Math.abs((c._helper?c.offset.top-g.top:c.offset.top-e.top)+c.sizeDiff.height),f=c.containerElement.get(0)==c.element.parent().get(0),g=/relative|absolute/.test(c.containerElement.css("position")),f&&g&&(d-=c.parentData.left),d+c.size.width>=c.parentData.width&&(c.size.width=c.parentData.width-d,b&&(c.size.height=c.size.width/c.aspectRatio)),e+c.size.height>=c.parentData.height&&(c.size.height=c.parentData.height-e,b&&(c.size.width=c.size.height*c.aspectRatio))},stop:function(){var b=a(this).data("resizable"),c=b.options,d=b.containerOffset,e=b.containerPosition,f=b.containerElement,g=a(b.helper),h=g.offset(),i=g.outerWidth()-b.sizeDiff.width;g=g.outerHeight()-b.sizeDiff.height,b._helper&&!c.animate&&/relative/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:g}),b._helper&&!c.animate&&/static/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:g})}}),a.ui.plugin.add("resizable","ghost",{start:function(){var b=a(this).data("resizable"),c=b.options,d=b.size;b.ghost=b.originalElement.clone(),b.ghost.css({opacity:.25,display:"block",position:"relative",height:d.height,width:d.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof c.ghost?c.ghost:""),b.ghost.appendTo(b.helper)},resize:function(){var b=a(this).data("resizable");b.ghost&&b.ghost.css({position:"relative",height:b.size.height,width:b.size.width})},stop:function(){var b=a(this).data("resizable");b.ghost&&b.helper&&b.helper.get(0).removeChild(b.ghost.get(0))}}),a.ui.plugin.add("resizable","grid",{resize:function(){var b=a(this).data("resizable"),c=b.options,d=b.size,e=b.originalSize,f=b.originalPosition,g=b.axis;c.grid="number"==typeof c.grid?[c.grid,c.grid]:c.grid;var h=Math.round((d.width-e.width)/(c.grid[0]||1))*(c.grid[0]||1);c=Math.round((d.height-e.height)/(c.grid[1]||1))*(c.grid[1]||1),/^(se|s|e)$/.test(g)?(b.size.width=e.width+h,b.size.height=e.height+c):/^(ne)$/.test(g)?(b.size.width=e.width+h,b.size.height=e.height+c,b.position.top=f.top-c):(/^(sw)$/.test(g)?(b.size.width=e.width+h,b.size.height=e.height+c):(b.size.width=e.width+h,b.size.height=e.height+c,b.position.top=f.top-c),b.position.left=f.left-h)}});var b=function(a){return parseInt(a,10)||0},c=function(a){return!isNaN(parseInt(a,10))}}(jQuery),function(a){a.widget("ui.selectable",a.ui.mouse,{options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var b=this;this.element.addClass("ui-selectable"),this.dragged=!1;var c;this.refresh=function(){c=a(b.options.filter,b.element[0]),c.each(function(){var b=a(this),c=b.offset();a.data(this,"selectable-item",{element:this,$element:b,left:c.left,top:c.top,right:c.left+b.outerWidth(),bottom:c.top+b.outerHeight(),startselected:!1,selected:b.hasClass("ui-selected"),selecting:b.hasClass("ui-selecting"),unselecting:b.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=c.addClass("ui-selectee"),this._mouseInit(),this.helper=a("<div class='ui-selectable-helper'></div>")},destroy:function(){return this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable"),this._mouseDestroy(),this},_mouseStart:function(b){var c=this;if(this.opos=[b.pageX,b.pageY],!this.options.disabled){var d=this.options;this.selectees=a(d.filter,this.element[0]),this._trigger("start",b),a(d.appendTo).append(this.helper),this.helper.css({left:b.clientX,top:b.clientY,width:0,height:0}),d.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var d=a.data(this,"selectable-item");d.startselected=!0,b.metaKey||(d.$element.removeClass("ui-selected"),d.selected=!1,d.$element.addClass("ui-unselecting"),d.unselecting=!0,c._trigger("unselecting",b,{unselecting:d.element}))}),a(b.target).parents().andSelf().each(function(){var d=a.data(this,"selectable-item");if(d){var e=!b.metaKey||!d.$element.hasClass("ui-selected");return d.$element.removeClass(e?"ui-unselecting":"ui-selected").addClass(e?"ui-selecting":"ui-unselecting"),d.unselecting=!e,d.selecting=e,(d.selected=e)?c._trigger("selecting",b,{selecting:d.element}):c._trigger("unselecting",b,{unselecting:d.element}),!1}})}},_mouseDrag:function(b){var c=this;if(this.dragged=!0,!this.options.disabled){var d=this.options,e=this.opos[0],f=this.opos[1],g=b.pageX,h=b.pageY;if(e>g){var i=g;g=e,e=i}return f>h&&(i=h,h=f,f=i),this.helper.css({left:e,top:f,width:g-e,height:h-f}),this.selectees.each(function(){var i=a.data(this,"selectable-item");if(i&&i.element!=c.element[0]){var j=!1;"touch"==d.tolerance?j=!(i.left>g||i.right<e||i.top>h||i.bottom<f):"fit"==d.tolerance&&(j=i.left>e&&i.right<g&&i.top>f&&i.bottom<h),j?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,c._trigger("selecting",b,{selecting:i.element}))):(i.selecting&&(b.metaKey&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),c._trigger("unselecting",b,{unselecting:i.element}))),i.selected&&(b.metaKey||i.startselected||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,c._trigger("unselecting",b,{unselecting:i.element}))))}}),!1}},_mouseStop:function(b){var c=this;return this.dragged=!1,a(".ui-unselecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-unselecting"),d.unselecting=!1,d.startselected=!1,c._trigger("unselected",b,{unselected:d.element})}),a(".ui-selecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-selecting").addClass("ui-selected"),d.selecting=!1,d.selected=!0,d.startselected=!0,c._trigger("selected",b,{selected:d.element})}),this._trigger("stop",b),this.helper.remove(),!1}}),a.extend(a.ui.selectable,{version:"1.8.16"})}(jQuery),function(a){a.widget("ui.sortable",a.ui.mouse,{widgetEventPrefix:"sort",options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var a=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===a.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit()},destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").removeData("sortable").unbind(".sortable"),this._mouseDestroy();for(var a=this.items.length-1;a>=0;a--)this.items[a].item.removeData("sortable-item");return this},_setOption:function(b,c){"disabled"===b?(this.options[b]=c,this.widget()[c?"addClass":"removeClass"]("ui-sortable-disabled")):a.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(b,c){if(this.reverting)return!1;if(this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(b);var d=null,e=this;if(a(b.target).parents().each(function(){return a.data(this,"sortable-item")==e?(d=a(this),!1):void 0}),a.data(b.target,"sortable-item")==e&&(d=a(b.target)),!d)return!1;if(this.options.handle&&!c){var f=!1;if(a(this.options.handle,d).find("*").andSelf().each(function(){this==b.target&&(f=!0)}),!f)return!1}return this.currentItem=d,this._removeCurrentsFromItems(),!0},_mouseStart:function(b,c,d){c=this.options;var e=this;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(b),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),c.containment&&this._setContainment(),c.cursor&&(a("body").css("cursor")&&(this._storedCursor=a("body").css("cursor")),a("body").css("cursor",c.cursor)),c.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",c.opacity)),c.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",c.zIndex)),this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",b,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!d)for(d=this.containers.length-1;d>=0;d--)this.containers[d]._trigger("activate",b,e._uiHash(this));return a.ui.ddmanager&&(a.ui.ddmanager.current=this),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(b),!0},_mouseDrag:function(b){if(this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll){var c=this.options,d=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<c.scrollSensitivity?this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop+c.scrollSpeed:b.pageY-this.overflowOffset.top<c.scrollSensitivity&&(this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop-c.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<c.scrollSensitivity?this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft+c.scrollSpeed:b.pageX-this.overflowOffset.left<c.scrollSensitivity&&(this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft-c.scrollSpeed)):(b.pageY-a(document).scrollTop()<c.scrollSensitivity?d=a(document).scrollTop(a(document).scrollTop()-c.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<c.scrollSensitivity&&(d=a(document).scrollTop(a(document).scrollTop()+c.scrollSpeed)),b.pageX-a(document).scrollLeft()<c.scrollSensitivity?d=a(document).scrollLeft(a(document).scrollLeft()-c.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<c.scrollSensitivity&&(d=a(document).scrollLeft(a(document).scrollLeft()+c.scrollSpeed))),d!==!1&&a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b)}for(this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),c=this.items.length-1;c>=0;c--){d=this.items[c];var e=d.item[0],f=this._intersectsWithPointer(d);if(f&&e!=this.currentItem[0]&&this.placeholder[1==f?"next":"prev"]()[0]!=e&&!a.ui.contains(this.placeholder[0],e)&&("semi-dynamic"==this.options.type?!a.ui.contains(this.element[0],e):!0)){if(this.direction=1==f?"down":"up","pointer"!=this.options.tolerance&&!this._intersectsWithSides(d))break;this._rearrange(b,d),this._trigger("change",b,this._uiHash());break}}return this._contactContainers(b),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),this._trigger("sort",b,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(b,c){if(b){if(a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b),this.options.revert){var d=this;c=d.placeholder.offset(),d.reverting=!0,a(this.helper).animate({left:c.left-this.offset.parent.left-d.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:c.top-this.offset.parent.top-d.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){d._clear(b)})}else this._clear(b,c);return!1}},cancel:function(){var b=this;if(this.dragging){this._mouseUp({target:null}),"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var c=this.containers.length-1;c>=0;c--)this.containers[c]._trigger("deactivate",null,b._uiHash(this)),this.containers[c].containerCache.over&&(this.containers[c]._trigger("out",null,b._uiHash(this)),this.containers[c].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},a(c).each(function(){var c=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[-=_](.+)/);c&&d.push((b.key||c[1]+"[]")+"="+(b.key&&b.expression?c[1]:c[2]))}),!d.length&&b.key&&d.push(b.key+"="),d.join("&")
},toArray:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},c.each(function(){d.push(a(b.item||this).attr(b.attribute||"id")||"")}),d},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,d=this.positionAbs.top,e=d+this.helperProportions.height,f=a.left,g=f+a.width,h=a.top,i=h+a.height,j=this.offset.click.top,k=this.offset.click.left;return j=d+j>h&&i>d+j&&b+k>f&&g>b+k,"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?j:f<b+this.helperProportions.width/2&&c-this.helperProportions.width/2<g&&h<d+this.helperProportions.height/2&&e-this.helperProportions.height/2<i},_intersectsWithPointer:function(b){var c=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top,b.height);b=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left,b.width),c=c&&b,b=this._getDragVerticalDirection();var d=this._getDragHorizontalDirection();return c?this.floating?d&&"right"==d||"down"==b?2:1:b&&("down"==b?2:1):!1},_intersectsWithSides:function(b){var c=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top+b.height/2,b.height);b=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left+b.width/2,b.width);var d=this._getDragVerticalDirection(),e=this._getDragHorizontalDirection();return this.floating&&e?"right"==e&&b||"left"==e&&!b:d&&("down"==d&&c||"up"==d&&!c)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return 0!=a&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!=a&&(a>0?"right":"left")},refresh:function(a){return this._refreshItems(a),this.refreshPositions(),this},_connectWith:function(){var a=this.options;return a.connectWith.constructor==String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(b){var c=[],d=[],e=this._connectWith();if(e&&b)for(b=e.length-1;b>=0;b--)for(var f=a(e[b]),g=f.length-1;g>=0;g--){var h=a.data(f[g],"sortable");h&&h!=this&&!h.options.disabled&&d.push([a.isFunction(h.options.items)?h.options.items.call(h.element):a(h.options.items,h.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),h])}for(d.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),b=d.length-1;b>=0;b--)d[b][0].each(function(){c.push(this)});return a(c)},_removeCurrentsFromItems:function(){for(var a=this.currentItem.find(":data(sortable-item)"),b=0;b<this.items.length;b++)for(var c=0;c<a.length;c++)a[c]==this.items[b].item[0]&&this.items.splice(b,1)},_refreshItems:function(b){this.items=[],this.containers=[this];var c=this.items,d=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]],e=this._connectWith();if(e)for(var f=e.length-1;f>=0;f--)for(var g=a(e[f]),h=g.length-1;h>=0;h--){var i=a.data(g[h],"sortable");i&&i!=this&&!i.options.disabled&&(d.push([a.isFunction(i.options.items)?i.options.items.call(i.element[0],b,{item:this.currentItem}):a(i.options.items,i.element),i]),this.containers.push(i))}for(f=d.length-1;f>=0;f--)for(b=d[f][1],e=d[f][0],h=0,g=e.length;g>h;h++)i=a(e[h]),i.data("sortable-item",b),c.push({item:i,instance:b,width:0,height:0,left:0,top:0})},refreshPositions:function(b){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var c=this.items.length-1;c>=0;c--){var d=this.items[c];if(d.instance==this.currentContainer||!this.currentContainer||d.item[0]==this.currentItem[0]){var e=this.options.toleranceElement?a(this.options.toleranceElement,d.item):d.item;b||(d.width=e.outerWidth(),d.height=e.outerHeight()),e=e.offset(),d.left=e.left,d.top=e.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(c=this.containers.length-1;c>=0;c--)e=this.containers[c].element.offset(),this.containers[c].containerCache.left=e.left,this.containers[c].containerCache.top=e.top,this.containers[c].containerCache.width=this.containers[c].element.outerWidth(),this.containers[c].containerCache.height=this.containers[c].element.outerHeight();return this},_createPlaceholder:function(b){var c=b||this,d=c.options;if(!d.placeholder||d.placeholder.constructor==String){var e=d.placeholder;d.placeholder={element:function(){var b=a(document.createElement(c.currentItem[0].nodeName)).addClass(e||c.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return e||(b.style.visibility="hidden"),b},update:function(a,b){(!e||d.forcePlaceholderSize)&&(b.height()||b.height(c.currentItem.innerHeight()-parseInt(c.currentItem.css("paddingTop")||0,10)-parseInt(c.currentItem.css("paddingBottom")||0,10)),b.width()||b.width(c.currentItem.innerWidth()-parseInt(c.currentItem.css("paddingLeft")||0,10)-parseInt(c.currentItem.css("paddingRight")||0,10)))}}}c.placeholder=a(d.placeholder.element.call(c.element,c.currentItem)),c.currentItem.after(c.placeholder),d.placeholder.update(c,c.placeholder)},_contactContainers:function(b){for(var c=null,d=null,e=this.containers.length-1;e>=0;e--)a.ui.contains(this.currentItem[0],this.containers[e].element[0])||(this._intersectsWith(this.containers[e].containerCache)?c&&a.ui.contains(this.containers[e].element[0],c.element[0])||(c=this.containers[e],d=e):this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",b,this._uiHash(this)),this.containers[e].containerCache.over=0));if(c)if(1===this.containers.length)this.containers[d]._trigger("over",b,this._uiHash(this)),this.containers[d].containerCache.over=1;else if(this.currentContainer!=this.containers[d]){c=1e4,e=null;for(var f=this.positionAbs[this.containers[d].floating?"left":"top"],g=this.items.length-1;g>=0;g--)if(a.ui.contains(this.containers[d].element[0],this.items[g].item[0])){var h=this.items[g][this.containers[d].floating?"left":"top"];Math.abs(h-f)<c&&(c=Math.abs(h-f),e=this.items[g])}(e||this.options.dropOnEmpty)&&(this.currentContainer=this.containers[d],e?this._rearrange(b,e,null,!0):this._rearrange(b,null,this.containers[d].element,!0),this._trigger("change",b,this._uiHash()),this.containers[d]._trigger("change",b,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[d]._trigger("over",b,this._uiHash(this)),this.containers[d].containerCache.over=1)}},_createHelper:function(b){var c=this.options;return b=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b,this.currentItem])):"clone"==c.helper?this.currentItem.clone():this.currentItem,b.parents("body").length||a("parent"!=c.appendTo?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(b[0]),b[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(""==b[0].style.width||c.forceHelperSize)&&b.width(this.currentItem.width()),(""==b[0].style.height||c.forceHelperSize)&&b.height(this.currentItem.height()),b},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&a.browser.msie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;if("parent"==b.containment&&(b.containment=this.helper[0].parentNode),("document"==b.containment||"window"==b.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a("document"==b.containment?document:window).width()-this.helperProportions.width-this.margins.left,(a("document"==b.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),!/^(document|window|parent)$/.test(b.containment)){var c=a(b.containment)[0];b=a(b.containment).offset();var d="hidden"!=a(c).css("overflow");this.containment=[b.left+(parseInt(a(c).css("borderLeftWidth"),10)||0)+(parseInt(a(c).css("paddingLeft"),10)||0)-this.margins.left,b.top+(parseInt(a(c).css("borderTopWidth"),10)||0)+(parseInt(a(c).css("paddingTop"),10)||0)-this.margins.top,b.left+(d?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(a(c).css("borderLeftWidth"),10)||0)-(parseInt(a(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,b.top+(d?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(a(c).css("borderTopWidth"),10)||0)-(parseInt(a(c).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(b,c){c||(c=this.position),b="absolute"==b?1:-1;var d="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,e=/(html|body)/i.test(d[0].tagName);return{top:c.top+this.offset.relative.top*b+this.offset.parent.top*b-(a.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():e?0:d.scrollTop())*b),left:c.left+this.offset.relative.left*b+this.offset.parent.left*b-(a.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())*b)}},_generatePosition:function(b){var c=this.options,d="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,e=/(html|body)/i.test(d[0].tagName);"relative"!=this.cssPosition||this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset());var f=b.pageX,g=b.pageY;return this.originalPosition&&(this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(g=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(g=this.containment[3]+this.offset.click.top)),c.grid&&(g=this.originalPageY+Math.round((g-this.originalPageY)/c.grid[1])*c.grid[1],g=this.containment?g-this.offset.click.top<this.containment[1]||g-this.offset.click.top>this.containment[3]?g-this.offset.click.top<this.containment[1]?g+c.grid[1]:g-c.grid[1]:g:g,f=this.originalPageX+Math.round((f-this.originalPageX)/c.grid[0])*c.grid[0],f=this.containment?f-this.offset.click.left<this.containment[0]||f-this.offset.click.left>this.containment[2]?f-this.offset.click.left<this.containment[0]?f+c.grid[0]:f-c.grid[0]:f:f)),{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():e?0:d.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())}},_rearrange:function(a,b,c,d){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?b.item[0]:b.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var e=this,f=this.counter;window.setTimeout(function(){f==e.counter&&e.refreshPositions(!d)},0)},_clear:function(b,c){this.reverting=!1;var d=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]==this.currentItem[0]){for(var e in this._storedCSS)("auto"==this._storedCSS[e]||"static"==this._storedCSS[e])&&(this._storedCSS[e]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();if(this.fromOutside&&!c&&d.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev==this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent==this.currentItem.parent()[0]||c||d.push(function(a){this._trigger("update",a,this._uiHash())}),!a.ui.contains(this.element[0],this.currentItem[0]))for(c||d.push(function(a){this._trigger("remove",a,this._uiHash())}),e=this.containers.length-1;e>=0;e--)a.ui.contains(this.containers[e].element[0],this.currentItem[0])&&!c&&(d.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.containers[e])),d.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.containers[e])));for(e=this.containers.length-1;e>=0;e--)c||d.push(function(a){return function(b){a._trigger("deactivate",b,this._uiHash(this))}}.call(this,this.containers[e])),this.containers[e].containerCache.over&&(d.push(function(a){return function(b){a._trigger("out",b,this._uiHash(this))}}.call(this,this.containers[e])),this.containers[e].containerCache.over=0);if(this._storedCursor&&a("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!c){for(this._trigger("beforeStop",b,this._uiHash()),e=0;e<d.length;e++)d[e].call(this,b);this._trigger("stop",b,this._uiHash())}return!1}if(c||this._trigger("beforeStop",b,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,!c){for(e=0;e<d.length;e++)d[e].call(this,b);this._trigger("stop",b,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){a.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(b){var c=b||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:b?b.element:null}}}),a.extend(a.ui.sortable,{version:"1.8.16"})}(jQuery),function(a){a.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:!0,clearStyle:!1,collapsible:!1,event:"click",fillSpace:!1,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var b=this,c=b.options;if(b.running=0,b.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix"),b.headers=b.element.find(c.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){c.disabled||a(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){c.disabled||a(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){c.disabled||a(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){c.disabled||a(this).removeClass("ui-state-focus")}),b.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom"),c.navigation){var d=b.element.find("a").filter(c.navigationFilter).eq(0);if(d.length){var e=d.closest(".ui-accordion-header");b.active=e.length?e:d.closest(".ui-accordion-content").prev()}}b.active=b._findActive(b.active||c.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top"),b.active.next().addClass("ui-accordion-content-active"),b._createIcons(),b.resize(),b.element.attr("role","tablist"),b.headers.attr("role","tab").bind("keydown.accordion",function(a){return b._keydown(a)}).next().attr("role","tabpanel"),b.headers.not(b.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide(),b.active.length?b.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}):b.headers.eq(0).attr("tabIndex",0),a.browser.safari||b.headers.find("a").attr("tabIndex",-1),c.event&&b.headers.bind(c.event.split(" ").join(".accordion ")+".accordion",function(a){b._clickHandler.call(b,a,this),a.preventDefault()})},_createIcons:function(){var b=this.options;b.icons&&(a("<span></span>").addClass("ui-icon "+b.icons.header).prependTo(this.headers),this.active.children(".ui-icon").toggleClass(b.icons.header).toggleClass(b.icons.headerSelected),this.element.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.children(".ui-icon").remove(),this.element.removeClass("ui-accordion-icons")},destroy:function(){var b=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex"),this.headers.find("a").removeAttr("tabIndex"),this._destroyIcons();var c=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");return(b.autoHeight||b.fillHeight)&&c.css("height",""),a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments),"active"==b&&this.activate(c),"icons"==b&&(this._destroyIcons(),c&&this._createIcons()),"disabled"==b&&this.headers.add(this.headers.next())[c?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")},_keydown:function(b){if(!(this.options.disabled||b.altKey||b.ctrlKey)){var c=a.ui.keyCode,d=this.headers.length,e=this.headers.index(b.target),f=!1;switch(b.keyCode){case c.RIGHT:case c.DOWN:f=this.headers[(e+1)%d];break;case c.LEFT:case c.UP:f=this.headers[(e-1+d)%d];break;case c.SPACE:case c.ENTER:this._clickHandler({target:b.target},b.target),b.preventDefault()}return f?(a(b.target).attr("tabIndex",-1),a(f).attr("tabIndex",0),f.focus(),!1):!0}},resize:function(){var b,c=this.options;if(c.fillSpace){if(a.browser.msie){var d=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}b=this.element.parent().height(),a.browser.msie&&this.element.parent().css("overflow",d),this.headers.each(function(){b-=a(this).outerHeight(!0)}),this.headers.next().each(function(){a(this).height(Math.max(0,b-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")}else c.autoHeight&&(b=0,this.headers.next().each(function(){b=Math.max(b,a(this).height("").height())}).height(b));return this},activate:function(a){return this.options.active=a,a=this._findActive(a)[0],this._clickHandler({target:a},a),this},_findActive:function(b){return b?"number"==typeof b?this.headers.filter(":eq("+b+")"):this.headers.not(this.headers.not(b)):b===!1?a([]):this.headers.filter(":eq(0)")},_clickHandler:function(b,c){var d=this.options;if(!d.disabled)if(b.target){if(b=a(b.currentTarget||c),c=b[0]===this.active[0],d.active=d.collapsible&&c?!1:this.headers.index(b),!(this.running||!d.collapsible&&c)){var e=this.active;i=b.next(),g=this.active.next(),h={options:d,newHeader:c&&d.collapsible?a([]):b,oldHeader:this.active,newContent:c&&d.collapsible?a([]):i,oldContent:g};var f=this.headers.index(this.active[0])>this.headers.index(b[0]);this.active=c?a([]):b,this._toggle(i,g,h,c,f),e.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(d.icons.headerSelected).addClass(d.icons.header),c||(b.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(d.icons.header).addClass(d.icons.headerSelected),b.next().addClass("ui-accordion-content-active"))}}else if(d.collapsible){this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(d.icons.headerSelected).addClass(d.icons.header),this.active.next().addClass("ui-accordion-content-active");var g=this.active.next(),h={options:d,newHeader:a([]),oldHeader:d.active,newContent:a([]),oldContent:g},i=this.active=a([]);this._toggle(i,g,h)}},_toggle:function(b,c,d,e,f){var g=this,h=g.options;g.toShow=b,g.toHide=c,g.data=d;var i=function(){return g?g._completed.apply(g,arguments):void 0};if(g._trigger("changestart",null,g.data),g.running=0===c.size()?b.size():c.size(),h.animated){d={},d=h.collapsible&&e?{toShow:a([]),toHide:c,complete:i,down:f,autoHeight:h.autoHeight||h.fillSpace}:{toShow:b,toHide:c,complete:i,down:f,autoHeight:h.autoHeight||h.fillSpace},h.proxied||(h.proxied=h.animated),h.proxiedDuration||(h.proxiedDuration=h.duration),h.animated=a.isFunction(h.proxied)?h.proxied(d):h.proxied,h.duration=a.isFunction(h.proxiedDuration)?h.proxiedDuration(d):h.proxiedDuration,e=a.ui.accordion.animations;var j=h.duration,k=h.animated;!k||e[k]||a.easing[k]||(k="slide"),e[k]||(e[k]=function(a){this.slide(a,{easing:k,duration:j||700})}),e[k](d)}else h.collapsible&&e?b.toggle():(c.hide(),b.show()),i(!0);c.prev().attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).blur(),b.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},_completed:function(a){this.running=a?0:--this.running,this.running||(this.options.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""}),this.toHide.removeClass("ui-accordion-content-active"),this.toHide.length&&(this.toHide.parent()[0].className=this.toHide.parent()[0].className),this._trigger("change",null,this.data))}}),a.extend(a.ui.accordion,{version:"1.8.16",animations:{slide:function(b,c){if(b=a.extend({easing:"swing",duration:300},b,c),b.toHide.size())if(b.toShow.size()){var d,e=b.toShow.css("overflow"),f=0,g={},h={};c=b.toShow,d=c[0].style.width,c.width(parseInt(c.parent().width(),10)-parseInt(c.css("paddingLeft"),10)-parseInt(c.css("paddingRight"),10)-(parseInt(c.css("borderLeftWidth"),10)||0)-(parseInt(c.css("borderRightWidth"),10)||0)),a.each(["height","paddingTop","paddingBottom"],function(c,d){h[d]="hide",c=(""+a.css(b.toShow[0],d)).match(/^([\d+-.]+)(.*)$/),g[d]={value:c[1],unit:c[2]||"px"}}),b.toShow.css({height:0,overflow:"hidden"}).show(),b.toHide.filter(":hidden").each(b.complete).end().filter(":visible").animate(h,{step:function(a,c){"height"==c.prop&&(f=c.end-c.start===0?0:(c.now-c.start)/(c.end-c.start)),b.toShow[0].style[c.prop]=f*g[c.prop].value+g[c.prop].unit},duration:b.duration,easing:b.easing,complete:function(){b.autoHeight||b.toShow.css("height",""),b.toShow.css({width:d,overflow:e}),b.complete()}})}else b.toHide.animate({height:"hide",paddingTop:"hide",paddingBottom:"hide"},b);else b.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},b)},bounceslide:function(a){this.slide(a,{easing:a.down?"easeOutBounce":"swing",duration:a.down?1e3:200})}}})}(jQuery),function(a){var b=0;a.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var b,c=this,d=this.element[0].ownerDocument;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(d){if(!c.options.disabled&&!c.element.propAttr("readOnly")){b=!1;var e=a.ui.keyCode;switch(d.keyCode){case e.PAGE_UP:c._move("previousPage",d);break;case e.PAGE_DOWN:c._move("nextPage",d);break;case e.UP:c._move("previous",d),d.preventDefault();break;case e.DOWN:c._move("next",d),d.preventDefault();break;case e.ENTER:case e.NUMPAD_ENTER:c.menu.active&&(b=!0,d.preventDefault());case e.TAB:if(!c.menu.active)return;c.menu.select(d);break;case e.ESCAPE:c.element.val(c.term),c.close(d);break;default:clearTimeout(c.searching),c.searching=setTimeout(function(){c.term!=c.element.val()&&(c.selectedItem=null,c.search(null,d))},c.options.delay)}}}).bind("keypress.autocomplete",function(a){b&&(b=!1,a.preventDefault())}).bind("focus.autocomplete",function(){c.options.disabled||(c.selectedItem=null,c.previous=c.element.val())}).bind("blur.autocomplete",function(a){c.options.disabled||(clearTimeout(c.searching),c.closing=setTimeout(function(){c.close(a),c._change(a)},150))}),this._initSource(),this.response=function(){return c._response.apply(c,arguments)},this.menu=a("<ul></ul>").addClass("ui-autocomplete").appendTo(a(this.options.appendTo||"body",d)[0]).mousedown(function(b){var d=c.menu.element[0];a(b.target).closest(".ui-menu-item").length||setTimeout(function(){a(document).one("mousedown",function(b){b.target!==c.element[0]&&b.target!==d&&!a.ui.contains(d,b.target)&&c.close()})},1),setTimeout(function(){clearTimeout(c.closing)},13)}).menu({focus:function(a,b){b=b.item.data("item.autocomplete"),!1!==c._trigger("focus",a,{item:b})&&/^key/.test(a.originalEvent.type)&&c.element.val(b.value)},selected:function(a,b){var e=b.item.data("item.autocomplete"),f=c.previous;c.element[0]!==d.activeElement&&(c.element.focus(),c.previous=f,setTimeout(function(){c.previous=f,c.selectedItem=e},1)),!1!==c._trigger("select",a,{item:e})&&c.element.val(e.value),c.term=c.element.val(),c.close(a),c.selectedItem=e},blur:function(){c.menu.element.is(":visible")&&c.element.val()!==c.term&&c.element.val(c.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu"),a.fn.bgiframe&&this.menu.element.bgiframe()},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments),"source"===b&&this._initSource(),"appendTo"===b&&this.menu.element.appendTo(a(c||"body",this.element[0].ownerDocument)[0]),"disabled"===b&&c&&this.xhr&&this.xhr.abort()},_initSource:function(){var c,d,e=this;a.isArray(this.options.source)?(c=this.options.source,this.source=function(b,d){d(a.ui.autocomplete.filter(c,b.term))}):"string"==typeof this.options.source?(d=this.options.source,this.source=function(c,f){e.xhr&&e.xhr.abort(),e.xhr=a.ajax({url:d,data:c,dataType:"json",autocompleteRequest:++b,success:function(a){this.autocompleteRequest===b&&f(a)},error:function(){this.autocompleteRequest===b&&f([])}})}):this.source=this.options.source},search:function(a,b){return a=null!=a?a:this.element.val(),this.term=this.element.val(),a.length<this.options.minLength?this.close(b):(clearTimeout(this.closing),this._trigger("search",b)!==!1?this._search(a):void 0)},_search:function(a){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.source({term:a},this.response)},_response:function(a){!this.options.disabled&&a&&a.length?(a=this._normalize(a),this._suggest(a),this._trigger("open")):this.close(),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},close:function(a){clearTimeout(this.closing),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",a))},_change:function(a){this.previous!==this.element.val()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(b){return"string"==typeof b?{label:b,value:b}:a.extend({label:b.label||b.value,value:b.value||b.label},b)})},_suggest:function(b){var c=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(c,b),this.menu.deactivate(),this.menu.refresh(),c.show(),this._resizeMenu(),c.position(a.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(new a.Event("mouseover"))},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth(),this.element.outerWidth()))},_renderMenu:function(b,c){var d=this;a.each(c,function(a,c){d._renderItem(b,c)})},_renderItem:function(b,c){return a("<li></li>").data("item.autocomplete",c).append(a("<a></a>").text(c.label)).appendTo(b)},_move:function(a,b){this.menu.element.is(":visible")?this.menu.first()&&/^previous/.test(a)||this.menu.last()&&/^next/.test(a)?(this.element.val(this.term),this.menu.deactivate()):this.menu[a](b):this.search(null,b)},widget:function(){return this.menu.element}}),a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(b,c){var d=new RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(a){return d.test(a.label||a.value||a)})}})}(jQuery),function(a){a.widget("ui.menu",{_create:function(){var b=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(c){a(c.target).closest(".ui-menu-item a").length&&(c.preventDefault(),b.select(c))}),this.refresh()},refresh:function(){var b=this;this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem").children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(c){b.activate(c,a(this).parent())}).mouseleave(function(){b.deactivate()})},activate:function(a,b){if(this.deactivate(),this.hasScroll()){var c=b.offset().top-this.element.offset().top,d=this.element.scrollTop(),e=this.element.height();0>c?this.element.scrollTop(d+c):c>=e&&this.element.scrollTop(d+c-e+b.height())}this.active=b.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end(),this._trigger("focus",a,{item:b})},deactivate:function(){this.active&&(this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null)},next:function(a){this.move("next",".ui-menu-item:first",a)},previous:function(a){this.move("prev",".ui-menu-item:last",a)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(a,b,c){this.active?(a=this.active[a+"All"](".ui-menu-item").eq(0),a.length?this.activate(c,a):this.activate(c,this.element.children(b))):this.activate(c,this.element.children(b))},nextPage:function(b){if(this.hasScroll())if(!this.active||this.last())this.activate(b,this.element.children(".ui-menu-item:first"));else{var c=this.active.offset().top,d=this.element.height(),e=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-c-d+a(this).height();
return 10>b&&b>-10});e.length||(e=this.element.children(".ui-menu-item:last")),this.activate(b,e)}else this.activate(b,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},previousPage:function(b){if(this.hasScroll())if(!this.active||this.first())this.activate(b,this.element.children(".ui-menu-item:last"));else{var c=this.active.offset().top,d=this.element.height();result=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-c+d-a(this).height();return 10>b&&b>-10}),result.length||(result=this.element.children(".ui-menu-item:first")),this.activate(b,result)}else this.activate(b,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element[a.fn.prop?"prop":"attr"]("scrollHeight")},select:function(a){this._trigger("selected",a,{item:this.active})}})}(jQuery),function(a){var b,c,d,e,f=function(){var b=a(this).find(":ui-button");setTimeout(function(){b.button("refresh")},1)},g=function(b){var c=b.name,d=b.form,e=a([]);return c&&(e=d?a(d).find("[name='"+c+"']"):a("[name='"+c+"']",b.ownerDocument).filter(function(){return!this.form})),e};a.widget("ui.button",{options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",f),"boolean"!=typeof this.options.disabled&&(this.options.disabled=this.element.propAttr("disabled")),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var h=this,i=this.options,j="checkbox"===this.type||"radio"===this.type,k="ui-state-hover"+(j?"":" ui-state-active");null===i.label&&(i.label=this.buttonElement.html()),this.element.is(":disabled")&&(i.disabled=!0),this.buttonElement.addClass("ui-button ui-widget ui-state-default ui-corner-all").attr("role","button").bind("mouseenter.button",function(){i.disabled||(a(this).addClass("ui-state-hover"),this===b&&a(this).addClass("ui-state-active"))}).bind("mouseleave.button",function(){i.disabled||a(this).removeClass(k)}).bind("click.button",function(a){i.disabled&&(a.preventDefault(),a.stopImmediatePropagation())}),this.element.bind("focus.button",function(){h.buttonElement.addClass("ui-state-focus")}).bind("blur.button",function(){h.buttonElement.removeClass("ui-state-focus")}),j&&(this.element.bind("change.button",function(){e||h.refresh()}),this.buttonElement.bind("mousedown.button",function(a){i.disabled||(e=!1,c=a.pageX,d=a.pageY)}).bind("mouseup.button",function(a){i.disabled||(c!==a.pageX||d!==a.pageY)&&(e=!0)})),"checkbox"===this.type?this.buttonElement.bind("click.button",function(){return i.disabled||e?!1:(a(this).toggleClass("ui-state-active"),void h.buttonElement.attr("aria-pressed",h.element[0].checked))}):"radio"===this.type?this.buttonElement.bind("click.button",function(){if(i.disabled||e)return!1;a(this).addClass("ui-state-active"),h.buttonElement.attr("aria-pressed","true");var b=h.element[0];g(b).not(b).map(function(){return a(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown.button",function(){return i.disabled?!1:(a(this).addClass("ui-state-active"),b=this,void a(document).one("mouseup",function(){b=null}))}).bind("mouseup.button",function(){return i.disabled?!1:void a(this).removeClass("ui-state-active")}).bind("keydown.button",function(b){return i.disabled?!1:void((b.keyCode==a.ui.keyCode.SPACE||b.keyCode==a.ui.keyCode.ENTER)&&a(this).addClass("ui-state-active"))}).bind("keyup.button",function(){a(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(b){b.keyCode===a.ui.keyCode.SPACE&&a(this).click()})),this._setOption("disabled",i.disabled),this._resetButton()},_determineButtonType:function(){if(this.type=this.element.is(":checkbox")?"checkbox":this.element.is(":radio")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type){var a=this.element.parents().filter(":last"),b="label[for='"+this.element.attr("id")+"']";this.buttonElement=a.find(b),this.buttonElement.length||(a=a.length?a.siblings():this.element.siblings(),this.buttonElement=a.filter(b),this.buttonElement.length||(this.buttonElement=a.find(b))),this.element.addClass("ui-helper-hidden-accessible"),(a=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.attr("aria-pressed",a)}else this.buttonElement=this.element},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass("ui-button ui-widget ui-state-default ui-corner-all ui-state-hover ui-state-active  ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only").removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title"),a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments),"disabled"===b?c?this.element.propAttr("disabled",!0):this.element.propAttr("disabled",!1):this._resetButton()},refresh:function(){var b=this.element.is(":disabled");b!==this.options.disabled&&this._setOption("disabled",b),"radio"===this.type?g(this.element[0]).each(function(){a(this).is(":checked")?a(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):a(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)this.options.label&&this.element.val(this.options.label);else{var b=this.buttonElement.removeClass("ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only"),c=a("<span></span>").addClass("ui-button-text").html(this.options.label).appendTo(b.empty()).text(),d=this.options.icons,e=d.primary&&d.secondary,f=[];d.primary||d.secondary?(this.options.text&&f.push("ui-button-text-icon"+(e?"s":d.primary?"-primary":"-secondary")),d.primary&&b.prepend("<span class='ui-button-icon-primary ui-icon "+d.primary+"'></span>"),d.secondary&&b.append("<span class='ui-button-icon-secondary ui-icon "+d.secondary+"'></span>"),this.options.text||(f.push(e?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||b.attr("title",c))):f.push("ui-button-text-only"),b.addClass(f.join(" "))}}}),a.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(b,c){"disabled"===b&&this.buttons.button("option",b,c),a.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){var b="ltr"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(b?"ui-corner-left":"ui-corner-right").end().filter(":last").addClass(b?"ui-corner-right":"ui-corner-left").end().end()},destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy"),a.Widget.prototype.destroy.call(this)}})}(jQuery),function(a,b){var c={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},d={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},e=a.attrFn||{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0,click:!0};a.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(b){var c=a(this).css(b).offset().top;0>c&&a(this).css("top",b.top-c)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),"string"!=typeof this.originalTitle&&(this.originalTitle=""),this.options.title=this.options.title||this.originalTitle;var b=this,c=b.options,d=c.title||"&#160;",e=a.ui.dialog.getTitleId(b.element),f=(b.uiDialog=a("<div></div>")).appendTo(document.body).hide().addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+c.dialogClass).css({zIndex:c.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(d){c.closeOnEscape&&!d.isDefaultPrevented()&&d.keyCode&&d.keyCode===a.ui.keyCode.ESCAPE&&(b.close(d),d.preventDefault())}).attr({role:"dialog","aria-labelledby":e}).mousedown(function(a){b.moveToTop(!1,a)});b.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(f);var g=(b.uiDialogTitlebar=a("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(f),h=a('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){h.addClass("ui-state-hover")},function(){h.removeClass("ui-state-hover")}).focus(function(){h.addClass("ui-state-focus")}).blur(function(){h.removeClass("ui-state-focus")}).click(function(a){return b.close(a),!1}).appendTo(g);(b.uiDialogTitlebarCloseText=a("<span></span>")).addClass("ui-icon ui-icon-closethick").text(c.closeText).appendTo(h),a("<span></span>").addClass("ui-dialog-title").attr("id",e).html(d).prependTo(g),a.isFunction(c.beforeclose)&&!a.isFunction(c.beforeClose)&&(c.beforeClose=c.beforeclose),g.find("*").add(g).disableSelection(),c.draggable&&a.fn.draggable&&b._makeDraggable(),c.resizable&&a.fn.resizable&&b._makeResizable(),b._createButtons(c.buttons),b._isOpen=!1,a.fn.bgiframe&&f.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var a=this;return a.overlay&&a.overlay.destroy(),a.uiDialog.hide(),a.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),a.uiDialog.remove(),a.originalTitle&&a.element.attr("title",a.originalTitle),a},widget:function(){return this.uiDialog},close:function(b){var c,d,e=this;return!1!==e._trigger("beforeClose",b)?(e.overlay&&e.overlay.destroy(),e.uiDialog.unbind("keypress.ui-dialog"),e._isOpen=!1,e.options.hide?e.uiDialog.hide(e.options.hide,function(){e._trigger("close",b)}):(e.uiDialog.hide(),e._trigger("close",b)),a.ui.dialog.overlay.resize(),e.options.modal&&(c=0,a(".ui-dialog").each(function(){this!==e.uiDialog[0]&&(d=a(this).css("z-index"),isNaN(d)||(c=Math.max(c,d)))}),a.ui.dialog.maxZ=c),e):void 0},isOpen:function(){return this._isOpen},moveToTop:function(b,c){var d=this,e=d.options;return e.modal&&!b||!e.stack&&!e.modal?d._trigger("focus",c):(e.zIndex>a.ui.dialog.maxZ&&(a.ui.dialog.maxZ=e.zIndex),d.overlay&&(a.ui.dialog.maxZ+=1,d.overlay.$el.css("z-index",a.ui.dialog.overlay.maxZ=a.ui.dialog.maxZ)),b={scrollTop:d.element.scrollTop(),scrollLeft:d.element.scrollLeft()},a.ui.dialog.maxZ+=1,d.uiDialog.css("z-index",a.ui.dialog.maxZ),d.element.attr(b),d._trigger("focus",c),d)},open:function(){if(!this._isOpen){var b=this,c=b.options,d=b.uiDialog;return b.overlay=c.modal?new a.ui.dialog.overlay(b):null,b._size(),b._position(c.position),d.show(c.show),b.moveToTop(!0),c.modal&&d.bind("keypress.ui-dialog",function(b){if(b.keyCode===a.ui.keyCode.TAB){var c=a(":tabbable",this),d=c.filter(":first");if(c=c.filter(":last"),b.target===c[0]&&!b.shiftKey)return d.focus(1),!1;if(b.target===d[0]&&b.shiftKey)return c.focus(1),!1}}),a(b.element.find(":tabbable").get().concat(d.find(".ui-dialog-buttonpane :tabbable").get().concat(d.get()))).eq(0).focus(),b._isOpen=!0,b._trigger("open"),b}},_createButtons:function(b){var c=this,d=!1,f=a("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),g=a("<div></div>").addClass("ui-dialog-buttonset").appendTo(f);c.uiDialog.find(".ui-dialog-buttonpane").remove(),"object"==typeof b&&null!==b&&a.each(b,function(){return!(d=!0)}),d&&(a.each(b,function(b,d){d=a.isFunction(d)?{click:d,text:b}:d;var f=a('<button type="button"></button>').click(function(){d.click.apply(c.element[0],arguments)}).appendTo(g);a.each(d,function(a,b){"click"!==a&&(a in e?f[a](b):f.attr(a,b))}),a.fn.button&&f.button()}),f.appendTo(c.uiDialog))},_makeDraggable:function(){function b(a){return{position:a.position,offset:a.offset}}var c,d=this,e=d.options,f=a(document);d.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(f,g){c="auto"===e.height?"auto":a(this).height(),a(this).height(a(this).height()).addClass("ui-dialog-dragging"),d._trigger("dragStart",f,b(g))},drag:function(a,c){d._trigger("drag",a,b(c))},stop:function(g,h){e.position=[h.position.left-f.scrollLeft(),h.position.top-f.scrollTop()],a(this).removeClass("ui-dialog-dragging").height(c),d._trigger("dragStop",g,b(h)),a.ui.dialog.overlay.resize()}})},_makeResizable:function(c){function d(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}c=c===b?this.options.resizable:c;var e=this,f=e.options,g=e.uiDialog.css("position");c="string"==typeof c?c:"n,e,s,w,se,sw,ne,nw",e.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:e.element,maxWidth:f.maxWidth,maxHeight:f.maxHeight,minWidth:f.minWidth,minHeight:e._minHeight(),handles:c,start:function(b,c){a(this).addClass("ui-dialog-resizing"),e._trigger("resizeStart",b,d(c))},resize:function(a,b){e._trigger("resize",a,d(b))},stop:function(b,c){a(this).removeClass("ui-dialog-resizing"),f.height=a(this).height(),f.width=a(this).width(),e._trigger("resizeStop",b,d(c)),a.ui.dialog.overlay.resize()}}).css("position",g).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var a=this.options;return"auto"===a.height?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(b){var c,d=[],e=[0,0];b?(("string"==typeof b||"object"==typeof b&&"0"in b)&&(d=b.split?b.split(" "):[b[0],b[1]],1===d.length&&(d[1]=d[0]),a.each(["left","top"],function(a,b){+d[a]===d[a]&&(e[a]=d[a],d[a]=b)}),b={my:d.join(" "),at:d.join(" "),offset:e.join(" ")}),b=a.extend({},a.ui.dialog.prototype.options.position,b)):b=a.ui.dialog.prototype.options.position,(c=this.uiDialog.is(":visible"))||this.uiDialog.show(),this.uiDialog.css({top:0,left:0}).position(a.extend({of:window},b)),c||this.uiDialog.hide()},_setOptions:function(b){var e=this,f={},g=!1;a.each(b,function(a,b){e._setOption(a,b),a in c&&(g=!0),a in d&&(f[a]=b)}),g&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",f)},_setOption:function(b,c){var d=this,e=d.uiDialog;switch(b){case"beforeclose":b="beforeClose";break;case"buttons":d._createButtons(c);break;case"closeText":d.uiDialogTitlebarCloseText.text(""+c);break;case"dialogClass":e.removeClass(d.options.dialogClass).addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+c);break;case"disabled":c?e.addClass("ui-dialog-disabled"):e.removeClass("ui-dialog-disabled");break;case"draggable":var f=e.is(":data(draggable)");f&&!c&&e.draggable("destroy"),!f&&c&&d._makeDraggable();break;case"position":d._position(c);break;case"resizable":(f=e.is(":data(resizable)"))&&!c&&e.resizable("destroy"),f&&"string"==typeof c&&e.resizable("option","handles",c),!f&&c!==!1&&d._makeResizable(c);break;case"title":a(".ui-dialog-title",d.uiDialogTitlebar).html(""+(c||"&#160;"))}a.Widget.prototype._setOption.apply(d,arguments)},_size:function(){var b,c,d=this.options,e=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),d.minWidth>d.width&&(d.width=d.minWidth),b=this.uiDialog.css({height:"auto",width:d.width}).height(),c=Math.max(0,d.minHeight-b),"auto"===d.height?a.support.minHeight?this.element.css({minHeight:c,height:"auto"}):(this.uiDialog.show(),d=this.element.css("height","auto").height(),e||this.uiDialog.hide(),this.element.height(Math.max(d,c))):this.element.height(Math.max(d.height-b,0)),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),a.extend(a.ui.dialog,{version:"1.8.16",uuid:0,maxZ:0,getTitleId:function(a){return a=a.attr("id"),a||(this.uuid+=1,a=this.uuid),"ui-dialog-title-"+a},overlay:function(b){this.$el=a.ui.dialog.overlay.create(b)}}),a.extend(a.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:a.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(a){return a+".dialog-overlay"}).join(" "),create:function(b){0===this.instances.length&&(setTimeout(function(){a.ui.dialog.overlay.instances.length&&a(document).bind(a.ui.dialog.overlay.events,function(b){return a(b.target).zIndex()<a.ui.dialog.overlay.maxZ?!1:void 0})},1),a(document).bind("keydown.dialog-overlay",function(c){b.options.closeOnEscape&&!c.isDefaultPrevented()&&c.keyCode&&c.keyCode===a.ui.keyCode.ESCAPE&&(b.close(c),c.preventDefault())}),a(window).bind("resize.dialog-overlay",a.ui.dialog.overlay.resize));var c=(this.oldInstances.pop()||a("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});return a.fn.bgiframe&&c.bgiframe(),this.instances.push(c),c},destroy:function(b){var c=a.inArray(b,this.instances);-1!=c&&this.oldInstances.push(this.instances.splice(c,1)[0]),0===this.instances.length&&a([document,window]).unbind(".dialog-overlay"),b.remove();var d=0;a.each(this.instances,function(){d=Math.max(d,this.css("z-index"))}),this.maxZ=d},height:function(){var b,c;return a.browser.msie&&a.browser.version<7?(b=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),c=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),c>b?a(window).height()+"px":b+"px"):a(document).height()+"px"},width:function(){var b,c;return a.browser.msie?(b=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),c=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),c>b?a(window).width()+"px":b+"px"):a(document).width()+"px"},resize:function(){var b=a([]);a.each(a.ui.dialog.overlay.instances,function(){b=b.add(this)}),b.css({width:0,height:0}).css({width:a.ui.dialog.overlay.width(),height:a.ui.dialog.overlay.height()})}}),a.extend(a.ui.dialog.overlay.prototype,{destroy:function(){a.ui.dialog.overlay.destroy(this.$el)}})}(jQuery),function(a){a.widget("ui.slider",a.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var b=this,c=this.options,d=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),e=c.values&&c.values.length||1,f=[];this._mouseSliding=this._keySliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(c.disabled?" ui-slider-disabled ui-disabled":"")),this.range=a([]),c.range&&(c.range===!0&&(c.values||(c.values=[this._valueMin(),this._valueMin()]),c.values.length&&2!==c.values.length&&(c.values=[c.values[0],c.values[0]])),this.range=a("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===c.range||"max"===c.range?" ui-slider-range-"+c.range:"")));for(var g=d.length;e>g;g+=1)f.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");this.handles=d.add(a(f.join("")).appendTo(b.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(a){a.preventDefault()}).hover(function(){c.disabled||a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")}).focus(function(){c.disabled?a(this).blur():(a(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),a(this).addClass("ui-state-focus"))}).blur(function(){a(this).removeClass("ui-state-focus")}),this.handles.each(function(b){a(this).data("index.ui-slider-handle",b)}),this.handles.keydown(function(c){var d,e,f,g=!0,h=a(this).data("index.ui-slider-handle");if(!b.options.disabled){switch(c.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(g=!1,!b._keySliding&&(b._keySliding=!0,a(this).addClass("ui-state-active"),d=b._start(c,h),d===!1))return}switch(f=b.options.step,d=e=b.options.values&&b.options.values.length?b.values(h):b.value(),c.keyCode){case a.ui.keyCode.HOME:e=b._valueMin();break;case a.ui.keyCode.END:e=b._valueMax();break;case a.ui.keyCode.PAGE_UP:e=b._trimAlignValue(d+(b._valueMax()-b._valueMin())/5);break;case a.ui.keyCode.PAGE_DOWN:e=b._trimAlignValue(d-(b._valueMax()-b._valueMin())/5);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(d===b._valueMax())return;e=b._trimAlignValue(d+f);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(d===b._valueMin())return;e=b._trimAlignValue(d-f)}return b._slide(c,h,e),g}}).keyup(function(c){var d=a(this).data("index.ui-slider-handle");b._keySliding&&(b._keySliding=!1,b._stop(c,d),b._change(c,d),a(this).removeClass("ui-state-active"))}),this._refreshValue(),this._animateOff=!1},destroy:function(){return this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy(),this},_mouseCapture:function(b){var c,d,e,f,g,h=this.options;return h.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),c=this._normValueFromMouse({x:b.pageX,y:b.pageY}),d=this._valueMax()-this._valueMin()+1,f=this,this.handles.each(function(b){var h=Math.abs(c-f.values(b));d>h&&(d=h,e=a(this),g=b)}),h.range===!0&&this.values(1)===h.min&&(g+=1,e=a(this.handles[g])),this._start(b,g)===!1?!1:(this._mouseSliding=!0,f._handleIndex=g,e.addClass("ui-state-active").focus(),h=e.offset(),this._clickOffset=a(b.target).parents().andSelf().is(".ui-slider-handle")?{left:b.pageX-h.left-e.width()/2,top:b.pageY-h.top-e.height()/2-(parseInt(e.css("borderTopWidth"),10)||0)-(parseInt(e.css("borderBottomWidth"),10)||0)+(parseInt(e.css("marginTop"),10)||0)}:{left:0,top:0},this.handles.hasClass("ui-state-hover")||this._slide(b,g,c),this._animateOff=!0))},_mouseStart:function(){return!0},_mouseDrag:function(a){var b=this._normValueFromMouse({x:a.pageX,y:a.pageY});return this._slide(a,this._handleIndex,b),!1},_mouseStop:function(a){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(a,this._handleIndex),this._change(a,this._handleIndex),this._clickOffset=this._handleIndex=null,this._animateOff=!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(a){var b;return"horizontal"===this.orientation?(b=this.elementSize.width,a=a.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(b=this.elementSize.height,a=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),b=a/b,b>1&&(b=1),0>b&&(b=0),"vertical"===this.orientation&&(b=1-b),a=this._valueMax()-this._valueMin(),this._trimAlignValue(this._valueMin()+b*a)},_start:function(a,b){var c={handle:this.handles[b],value:this.value()};return this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("start",a,c)},_slide:function(a,b,c){var d;this.options.values&&this.options.values.length?(d=this.values(b?0:1),2===this.options.values.length&&this.options.range===!0&&(0===b&&c>d||1===b&&d>c)&&(c=d),c!==this.values(b)&&(d=this.values(),d[b]=c,a=this._trigger("slide",a,{handle:this.handles[b],value:c,values:d}),this.values(b?0:1),a!==!1&&this.values(b,c,!0))):c!==this.value()&&(a=this._trigger("slide",a,{handle:this.handles[b],value:c}),a!==!1&&this.value(c))},_stop:function(a,b){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("stop",a,c)},_change:function(a,b){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("change",a,c)}},value:function(a){return arguments.length?(this.options.value=this._trimAlignValue(a),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(b,c){var d,e,f;if(arguments.length>1)this.options.values[b]=this._trimAlignValue(c),this._refreshValue(),this._change(null,b);else{if(!arguments.length)return this._values();if(!a.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(b):this.value();for(d=this.options.values,e=arguments[0],f=0;f<d.length;f+=1)d[f]=this._trimAlignValue(e[f]),this._change(null,f);this._refreshValue()}},_setOption:function(b,c){var d,e=0;switch(a.isArray(this.options.values)&&(e=this.options.values.length),a.Widget.prototype._setOption.apply(this,arguments),b){case"disabled":c?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),d=0;e>d;d+=1)this._change(null,d);this._animateOff=!1}},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a)},_values:function(a){var b,c;if(arguments.length)return b=this.options.values[a],b=this._trimAlignValue(b);for(b=this.options.values.slice(),c=0;c<b.length;c+=1)b[c]=this._trimAlignValue(b[c]);return b},_trimAlignValue:function(a){if(a<=this._valueMin())return this._valueMin();if(a>=this._valueMax())return this._valueMax();var b=this.options.step>0?this.options.step:1,c=(a-this._valueMin())%b;return a-=c,2*Math.abs(c)>=b&&(a+=c>0?b:-b),parseFloat(a.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var b,c,d,e,f,g=this.options.range,h=this.options,i=this,j=this._animateOff?!1:h.animate,k={};this.options.values&&this.options.values.length?this.handles.each(function(d){b=(i.values(d)-i._valueMin())/(i._valueMax()-i._valueMin())*100,k["horizontal"===i.orientation?"left":"bottom"]=b+"%",a(this).stop(1,1)[j?"animate":"css"](k,h.animate),i.options.range===!0&&("horizontal"===i.orientation?(0===d&&i.range.stop(1,1)[j?"animate":"css"]({left:b+"%"},h.animate),1===d&&i.range[j?"animate":"css"]({width:b-c+"%"},{queue:!1,duration:h.animate})):(0===d&&i.range.stop(1,1)[j?"animate":"css"]({bottom:b+"%"},h.animate),1===d&&i.range[j?"animate":"css"]({height:b-c+"%"},{queue:!1,duration:h.animate}))),c=b}):(d=this.value(),e=this._valueMin(),f=this._valueMax(),b=f!==e?(d-e)/(f-e)*100:0,k["horizontal"===i.orientation?"left":"bottom"]=b+"%",this.handle.stop(1,1)[j?"animate":"css"](k,h.animate),"min"===g&&"horizontal"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({width:b+"%"},h.animate),"max"===g&&"horizontal"===this.orientation&&this.range[j?"animate":"css"]({width:100-b+"%"},{queue:!1,duration:h.animate}),"min"===g&&"vertical"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({height:b+"%"},h.animate),"max"===g&&"vertical"===this.orientation&&this.range[j?"animate":"css"]({height:100-b+"%"},{queue:!1,duration:h.animate}))}}),a.extend(a.ui.slider,{version:"1.8.16"})}(jQuery),function(a,b){function c(){return++e}function d(){return++f}var e=0,f=0;a.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(!0)},_setOption:function(a,b){"selected"==a?this.options.collapsible&&b==this.options.selected||this.select(b):(this.options[a]=b,this._tabify())},_tabId:function(a){return a.title&&a.title.replace(/\s/g,"_").replace(/[^\wÀ-￿-]/g,"")||this.options.idPrefix+c()},_sanitizeSelector:function(a){return a.replace(/:/g,"\\:")},_cookie:function(){var b=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+d());return a.cookie.apply(null,[b].concat(a.makeArray(arguments)))},_ui:function(a,b){return{tab:a,panel:b,index:this.anchors.index(a)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var b=a(this);b.html(b.data("label.tabs")).removeData("label.tabs")})},_tabify:function(c){function d(b,c){b.css("display",""),!a.support.opacity&&c.opacity&&b[0].style.removeAttribute("filter")}var e=this,f=this.options,g=/^#.+/;this.list=this.element.find("ol,ul").eq(0),this.lis=a(" > li:has(a[href])",this.list),this.anchors=this.lis.map(function(){return a("a",this)[0]}),this.panels=a([]),this.anchors.each(function(b,c){var d,h=a(c).attr("href"),i=h.split("#")[0];i&&(i===location.toString().split("#")[0]||(d=a("base")[0])&&i===d.href)&&(h=c.hash,c.href=h),g.test(h)?e.panels=e.panels.add(e.element.find(e._sanitizeSelector(h))):h&&"#"!==h?(a.data(c,"href.tabs",h),a.data(c,"load.tabs",h.replace(/#.*$/,"")),h=e._tabId(c),c.href="#"+h,c=e.element.find("#"+h),c.length||(c=a(f.panelTemplate).attr("id",h).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(e.panels[b-1]||e.list),c.data("destroy.tabs",!0)),e.panels=e.panels.add(c)):f.disabled.push(b)}),c?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),f.selected===b?(location.hash&&this.anchors.each(function(a,b){return b.hash==location.hash?(f.selected=a,!1):void 0}),"number"!=typeof f.selected&&f.cookie&&(f.selected=parseInt(e._cookie(),10)),"number"!=typeof f.selected&&this.lis.filter(".ui-tabs-selected").length&&(f.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))),f.selected=f.selected||(this.lis.length?0:-1)):null===f.selected&&(f.selected=-1),f.selected=f.selected>=0&&this.anchors[f.selected]||f.selected<0?f.selected:0,f.disabled=a.unique(f.disabled.concat(a.map(this.lis.filter(".ui-state-disabled"),function(a){return e.lis.index(a)}))).sort(),-1!=a.inArray(f.selected,f.disabled)&&f.disabled.splice(a.inArray(f.selected,f.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),f.selected>=0&&this.anchors.length&&(e.element.find(e._sanitizeSelector(e.anchors[f.selected].hash)).removeClass("ui-tabs-hide"),this.lis.eq(f.selected).addClass("ui-tabs-selected ui-state-active"),e.element.queue("tabs",function(){e._trigger("show",null,e._ui(e.anchors[f.selected],e.element.find(e._sanitizeSelector(e.anchors[f.selected].hash))[0]))}),this.load(f.selected)),a(window).bind("unload",function(){e.lis.add(e.anchors).unbind(".tabs"),e.lis=e.anchors=e.panels=null
})):f.selected=this.lis.index(this.lis.filter(".ui-tabs-selected")),this.element[f.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible"),f.cookie&&this._cookie(f.selected,f.cookie),c=0;for(var h;h=this.lis[c];c++)a(h)[-1==a.inArray(c,f.disabled)||a(h).hasClass("ui-tabs-selected")?"removeClass":"addClass"]("ui-state-disabled");if(f.cache===!1&&this.anchors.removeData("cache.tabs"),this.lis.add(this.anchors).unbind(".tabs"),"mouseover"!==f.event){var i=function(a,b){b.is(":not(.ui-state-disabled)")&&b.addClass("ui-state-"+a)},j=function(a,b){b.removeClass("ui-state-"+a)};this.lis.bind("mouseover.tabs",function(){i("hover",a(this))}),this.lis.bind("mouseout.tabs",function(){j("hover",a(this))}),this.anchors.bind("focus.tabs",function(){i("focus",a(this).closest("li"))}),this.anchors.bind("blur.tabs",function(){j("focus",a(this).closest("li"))})}var k,l;f.fx&&(a.isArray(f.fx)?(k=f.fx[0],l=f.fx[1]):k=l=f.fx);var m=l?function(b,c){a(b).closest("li").addClass("ui-tabs-selected ui-state-active"),c.hide().removeClass("ui-tabs-hide").animate(l,l.duration||"normal",function(){d(c,l),e._trigger("show",null,e._ui(b,c[0]))})}:function(b,c){a(b).closest("li").addClass("ui-tabs-selected ui-state-active"),c.removeClass("ui-tabs-hide"),e._trigger("show",null,e._ui(b,c[0]))},n=k?function(a,b){b.animate(k,k.duration||"normal",function(){e.lis.removeClass("ui-tabs-selected ui-state-active"),b.addClass("ui-tabs-hide"),d(b,k),e.element.dequeue("tabs")})}:function(a,b){e.lis.removeClass("ui-tabs-selected ui-state-active"),b.addClass("ui-tabs-hide"),e.element.dequeue("tabs")};this.anchors.bind(f.event+".tabs",function(){var b=this,c=a(b).closest("li"),d=e.panels.filter(":not(.ui-tabs-hide)"),g=e.element.find(e._sanitizeSelector(b.hash));if(c.hasClass("ui-tabs-selected")&&!f.collapsible||c.hasClass("ui-state-disabled")||c.hasClass("ui-state-processing")||e.panels.filter(":animated").length||e._trigger("select",null,e._ui(this,g[0]))===!1)return this.blur(),!1;if(f.selected=e.anchors.index(this),e.abort(),f.collapsible){if(c.hasClass("ui-tabs-selected"))return f.selected=-1,f.cookie&&e._cookie(f.selected,f.cookie),e.element.queue("tabs",function(){n(b,d)}).dequeue("tabs"),this.blur(),!1;if(!d.length)return f.cookie&&e._cookie(f.selected,f.cookie),e.element.queue("tabs",function(){m(b,g)}),e.load(e.anchors.index(this)),this.blur(),!1}if(f.cookie&&e._cookie(f.selected,f.cookie),!g.length)throw"jQuery UI Tabs: Mismatching fragment identifier.";d.length&&e.element.queue("tabs",function(){n(b,d)}),e.element.queue("tabs",function(){m(b,g)}),e.load(e.anchors.index(this)),a.browser.msie&&this.blur()}),this.anchors.bind("click.tabs",function(){return!1})},_getIndex:function(a){return"string"==typeof a&&(a=this.anchors.index(this.anchors.filter("[href$="+a+"]"))),a},destroy:function(){var b=this.options;return this.abort(),this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs"),this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.anchors.each(function(){var b=a.data(this,"href.tabs");b&&(this.href=b);var c=a(this).unbind(".tabs");a.each(["href","load","cache"],function(a,b){c.removeData(b+".tabs")})}),this.lis.unbind(".tabs").add(this.panels).each(function(){a.data(this,"destroy.tabs")?a(this).remove():a(this).removeClass("ui-state-default ui-corner-top ui-tabs-selected ui-state-active ui-state-hover ui-state-focus ui-state-disabled ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide")}),b.cookie&&this._cookie(null,b.cookie),this},add:function(c,d,e){e===b&&(e=this.anchors.length);var f=this,g=this.options;d=a(g.tabTemplate.replace(/#\{href\}/g,c).replace(/#\{label\}/g,d)),c=c.indexOf("#")?this._tabId(a("a",d)[0]):c.replace("#",""),d.addClass("ui-state-default ui-corner-top").data("destroy.tabs",!0);var h=f.element.find("#"+c);return h.length||(h=a(g.panelTemplate).attr("id",c).data("destroy.tabs",!0)),h.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"),e>=this.lis.length?(d.appendTo(this.list),h.appendTo(this.list[0].parentNode)):(d.insertBefore(this.lis[e]),h.insertBefore(this.panels[e])),g.disabled=a.map(g.disabled,function(a){return a>=e?++a:a}),this._tabify(),1==this.anchors.length&&(g.selected=0,d.addClass("ui-tabs-selected ui-state-active"),h.removeClass("ui-tabs-hide"),this.element.queue("tabs",function(){f._trigger("show",null,f._ui(f.anchors[0],f.panels[0]))}),this.load(0)),this._trigger("add",null,this._ui(this.anchors[e],this.panels[e])),this},remove:function(b){b=this._getIndex(b);var c=this.options,d=this.lis.eq(b).remove(),e=this.panels.eq(b).remove();return d.hasClass("ui-tabs-selected")&&this.anchors.length>1&&this.select(b+(b+1<this.anchors.length?1:-1)),c.disabled=a.map(a.grep(c.disabled,function(a){return a!=b}),function(a){return a>=b?--a:a}),this._tabify(),this._trigger("remove",null,this._ui(d.find("a")[0],e[0])),this},enable:function(b){b=this._getIndex(b);var c=this.options;return-1!=a.inArray(b,c.disabled)?(this.lis.eq(b).removeClass("ui-state-disabled"),c.disabled=a.grep(c.disabled,function(a){return a!=b}),this._trigger("enable",null,this._ui(this.anchors[b],this.panels[b])),this):void 0},disable:function(a){a=this._getIndex(a);var b=this.options;return a!=b.selected&&(this.lis.eq(a).addClass("ui-state-disabled"),b.disabled.push(a),b.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[a],this.panels[a]))),this},select:function(a){if(a=this._getIndex(a),-1==a){if(!this.options.collapsible||-1==this.options.selected)return this;a=this.options.selected}return this.anchors.eq(a).trigger(this.options.event+".tabs"),this},load:function(b){b=this._getIndex(b);var c=this,d=this.options,e=this.anchors.eq(b)[0],f=a.data(e,"load.tabs");if(this.abort(),f&&(0===this.element.queue("tabs").length||!a.data(e,"cache.tabs"))){if(this.lis.eq(b).addClass("ui-state-processing"),d.spinner){var g=a("span",e);g.data("label.tabs",g.html()).html(d.spinner)}return this.xhr=a.ajax(a.extend({},d.ajaxOptions,{url:f,success:function(f,g){c.element.find(c._sanitizeSelector(e.hash)).html(f),c._cleanup(),d.cache&&a.data(e,"cache.tabs",!0),c._trigger("load",null,c._ui(c.anchors[b],c.panels[b]));try{d.ajaxOptions.success(f,g)}catch(h){}},error:function(a,f){c._cleanup(),c._trigger("load",null,c._ui(c.anchors[b],c.panels[b]));try{d.ajaxOptions.error(a,f,b,e)}catch(g){}}})),c.element.dequeue("tabs"),this}this.element.dequeue("tabs")},abort:function(){return this.element.queue([]),this.panels.stop(!1,!0),this.element.queue("tabs",this.element.queue("tabs").splice(-2,2)),this.xhr&&(this.xhr.abort(),delete this.xhr),this._cleanup(),this},url:function(a,b){return this.anchors.eq(a).removeData("cache.tabs").data("load.tabs",b),this},length:function(){return this.anchors.length}}),a.extend(a.ui.tabs,{version:"1.8.16"}),a.extend(a.ui.tabs.prototype,{rotation:null,rotate:function(a,b){var c=this,d=this.options,e=c._rotate||(c._rotate=function(b){clearTimeout(c.rotation),c.rotation=setTimeout(function(){var a=d.selected;c.select(++a<c.anchors.length?a:0)},a),b&&b.stopPropagation()});return b=c._unrotate||(c._unrotate=b?function(){t=d.selected,e()}:function(a){a.clientX&&c.rotate(null)}),a?(this.element.bind("tabsshow",e),this.anchors.bind(d.event+".tabs",b),e()):(clearTimeout(c.rotation),this.element.unbind("tabsshow",e),this.anchors.unbind(d.event+".tabs",b),delete this._rotate,delete this._unrotate),this}})}(jQuery),function(d,C){function M(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._inDialog=this._datepickerShowing=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},d.extend(this._defaults,this.regional[""]),this.dpDiv=N(d('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function N(a){return a.bind("mouseout",function(a){a=d(a.target).closest("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a"),a.length&&a.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")}).bind("mouseover",function(b){b=d(b.target).closest("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a"),!d.datepicker._isDisabledDatepicker(J.inline?a.parent()[0]:J.input[0])&&b.length&&(b.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),b.addClass("ui-state-hover"),b.hasClass("ui-datepicker-prev")&&b.addClass("ui-datepicker-prev-hover"),b.hasClass("ui-datepicker-next")&&b.addClass("ui-datepicker-next-hover"))})}function H(a,b){d.extend(a,b);for(var c in b)(null==b[c]||b[c]==C)&&(a[c]=b[c]);return a}d.extend(d.ui,{datepicker:{version:"1.8.16"}});var B=(new Date).getTime(),J;d.extend(M.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){return H(this._defaults,a||{}),this},_attachDatepicker:function(a,b){var c=null;for(var e in this._defaults){var f=a.getAttribute("date:"+e);if(f){c=c||{};try{c[e]=eval(f)}catch(h){c[e]=f}}}e=a.nodeName.toLowerCase(),f="div"==e||"span"==e,a.id||(this.uuid+=1,a.id="dp"+this.uuid);var i=this._newInst(d(a),f);i.settings=d.extend({},b||{},c||{}),"input"==e?this._connectDatepicker(a,i):f&&this._inlineDatepicker(a,i)},_newInst:function(a,b){return{id:a[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:a,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:b,dpDiv:b?N(d('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(a,b){var c=d(a);b.append=d([]),b.trigger=d([]),c.hasClass(this.markerClassName)||(this._attachments(c,b),c.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),this._autoSize(b),d.data(a,"datepicker",b),b.settings.disabled&&this._disableDatepicker(a))},_attachments:function(a,b){var c=this._get(b,"appendText"),e=this._get(b,"isRTL");if(b.append&&b.append.remove(),c&&(b.append=d('<span class="'+this._appendClass+'">'+c+"</span>"),a[e?"before":"after"](b.append)),a.unbind("focus",this._showDatepicker),b.trigger&&b.trigger.remove(),c=this._get(b,"showOn"),("focus"==c||"both"==c)&&a.focus(this._showDatepicker),"button"==c||"both"==c){c=this._get(b,"buttonText");var f=this._get(b,"buttonImage");b.trigger=d(this._get(b,"buttonImageOnly")?d("<img/>").addClass(this._triggerClass).attr({src:f,alt:c,title:c}):d('<button type="button"></button>').addClass(this._triggerClass).html(""==f?c:d("<img/>").attr({src:f,alt:c,title:c}))),a[e?"before":"after"](b.trigger),b.trigger.click(function(){return d.datepicker._datepickerShowing&&d.datepicker._lastInput==a[0]?d.datepicker._hideDatepicker():d.datepicker._showDatepicker(a[0]),!1})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b=new Date(2009,11,20),c=this._get(a,"dateFormat");if(c.match(/[DM]/)){var d=function(a){for(var b=0,c=0,d=0;d<a.length;d++)a[d].length>b&&(b=a[d].length,c=d);return c};b.setMonth(d(this._get(a,c.match(/MM/)?"monthNames":"monthNamesShort"))),b.setDate(d(this._get(a,c.match(/DD/)?"dayNames":"dayNamesShort"))+20-b.getDay())}a.input.attr("size",this._formatDate(a,b).length)}},_inlineDatepicker:function(a,b){var c=d(a);c.hasClass(this.markerClassName)||(c.addClass(this.markerClassName).append(b.dpDiv).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),d.data(a,"datepicker",b),this._setDate(b,this._getDefaultDate(b),!0),this._updateDatepicker(b),this._updateAlternate(b),b.settings.disabled&&this._disableDatepicker(a),b.dpDiv.css("display","block"))},_dialogDatepicker:function(a,b,c,e,f){return a=this._dialogInst,a||(this.uuid+=1,this._dialogInput=d('<input type="text" id="dp'+this.uuid+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>'),this._dialogInput.keydown(this._doKeyDown),d("body").append(this._dialogInput),a=this._dialogInst=this._newInst(this._dialogInput,!1),a.settings={},d.data(this._dialogInput[0],"datepicker",a)),H(a.settings,e||{}),b=b&&b.constructor==Date?this._formatDate(a,b):b,this._dialogInput.val(b),this._pos=f?f.length?f:[f.pageX,f.pageY]:null,this._pos||(this._pos=[document.documentElement.clientWidth/2-100+(document.documentElement.scrollLeft||document.body.scrollLeft),document.documentElement.clientHeight/2-150+(document.documentElement.scrollTop||document.body.scrollTop)]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),a.settings.onSelect=c,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),d.blockUI&&d.blockUI(this.dpDiv),d.data(this._dialogInput[0],"datepicker",a),this},_destroyDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();d.removeData(a,"datepicker"),"input"==e?(c.append.remove(),c.trigger.remove(),b.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"==e||"span"==e)&&b.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();"input"==e?(a.disabled=!1,c.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"==e||"span"==e)&&(b=b.children("."+this._inlineClass),b.children().removeClass("ui-state-disabled"),b.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled")),this._disabledInputs=d.map(this._disabledInputs,function(b){return b==a?null:b})}},_disableDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();"input"==e?(a.disabled=!0,c.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"==e||"span"==e)&&(b=b.children("."+this._inlineClass),b.children().addClass("ui-state-disabled"),b.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled","disabled")),this._disabledInputs=d.map(this._disabledInputs,function(b){return b==a?null:b}),this._disabledInputs[this._disabledInputs.length]=a}},_isDisabledDatepicker:function(a){if(!a)return!1;for(var b=0;b<this._disabledInputs.length;b++)if(this._disabledInputs[b]==a)return!0;return!1},_getInst:function(a){try{return d.data(a,"datepicker")}catch(b){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(a,b,c){var e=this._getInst(a);if(2==arguments.length&&"string"==typeof b)return"defaults"==b?d.extend({},d.datepicker._defaults):e?"all"==b?d.extend({},e.settings):this._get(e,b):null;var f=b||{};if("string"==typeof b&&(f={},f[b]=c),e){this._curInst==e&&this._hideDatepicker();var g=this._getDateDatepicker(a,!0),h=this._getMinMaxDate(e,"min"),i=this._getMinMaxDate(e,"max");H(e.settings,f),null!==h&&f.dateFormat!==C&&f.minDate===C&&(e.settings.minDate=this._formatDate(e,h)),null!==i&&f.dateFormat!==C&&f.maxDate===C&&(e.settings.maxDate=this._formatDate(e,i)),this._attachments(d(a),e),this._autoSize(e),this._setDate(e,g),this._updateAlternate(e),this._updateDatepicker(e)}},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){(a=this._getInst(a))&&this._updateDatepicker(a)},_setDateDatepicker:function(a,b){(a=this._getInst(a))&&(this._setDate(a,b),this._updateDatepicker(a),this._updateAlternate(a))},_getDateDatepicker:function(a,b){return(a=this._getInst(a))&&!a.inline&&this._setDateFromField(a,b),a?this._getDate(a):null},_doKeyDown:function(a){var b=d.datepicker._getInst(a.target),c=!0,e=b.dpDiv.is(".ui-datepicker-rtl");if(b._keyEvent=!0,d.datepicker._datepickerShowing)switch(a.keyCode){case 9:d.datepicker._hideDatepicker(),c=!1;break;case 13:return c=d("td."+d.datepicker._dayOverClass+":not(."+d.datepicker._currentClass+")",b.dpDiv),c[0]&&d.datepicker._selectDay(a.target,b.selectedMonth,b.selectedYear,c[0]),(a=d.datepicker._get(b,"onSelect"))?(c=d.datepicker._formatDate(b),a.apply(b.input?b.input[0]:null,[c,b])):d.datepicker._hideDatepicker(),!1;case 27:d.datepicker._hideDatepicker();break;case 33:d.datepicker._adjustDate(a.target,a.ctrlKey?-d.datepicker._get(b,"stepBigMonths"):-d.datepicker._get(b,"stepMonths"),"M");break;case 34:d.datepicker._adjustDate(a.target,a.ctrlKey?+d.datepicker._get(b,"stepBigMonths"):+d.datepicker._get(b,"stepMonths"),"M");break;case 35:(a.ctrlKey||a.metaKey)&&d.datepicker._clearDate(a.target),c=a.ctrlKey||a.metaKey;break;case 36:(a.ctrlKey||a.metaKey)&&d.datepicker._gotoToday(a.target),c=a.ctrlKey||a.metaKey;break;case 37:(a.ctrlKey||a.metaKey)&&d.datepicker._adjustDate(a.target,e?1:-1,"D"),c=a.ctrlKey||a.metaKey,a.originalEvent.altKey&&d.datepicker._adjustDate(a.target,a.ctrlKey?-d.datepicker._get(b,"stepBigMonths"):-d.datepicker._get(b,"stepMonths"),"M");break;case 38:(a.ctrlKey||a.metaKey)&&d.datepicker._adjustDate(a.target,-7,"D"),c=a.ctrlKey||a.metaKey;break;case 39:(a.ctrlKey||a.metaKey)&&d.datepicker._adjustDate(a.target,e?-1:1,"D"),c=a.ctrlKey||a.metaKey,a.originalEvent.altKey&&d.datepicker._adjustDate(a.target,a.ctrlKey?+d.datepicker._get(b,"stepBigMonths"):+d.datepicker._get(b,"stepMonths"),"M");break;case 40:(a.ctrlKey||a.metaKey)&&d.datepicker._adjustDate(a.target,7,"D"),c=a.ctrlKey||a.metaKey;break;default:c=!1}else 36==a.keyCode&&a.ctrlKey?d.datepicker._showDatepicker(this):c=!1;c&&(a.preventDefault(),a.stopPropagation())},_doKeyPress:function(a){var b=d.datepicker._getInst(a.target);if(d.datepicker._get(b,"constrainInput")){b=d.datepicker._possibleChars(d.datepicker._get(b,"dateFormat"));var c=String.fromCharCode(a.charCode==C?a.keyCode:a.charCode);return a.ctrlKey||a.metaKey||" ">c||!b||b.indexOf(c)>-1}},_doKeyUp:function(a){if(a=d.datepicker._getInst(a.target),a.input.val()!=a.lastVal)try{d.datepicker.parseDate(d.datepicker._get(a,"dateFormat"),a.input?a.input.val():null,d.datepicker._getFormatConfig(a))&&(d.datepicker._setDateFromField(a),d.datepicker._updateAlternate(a),d.datepicker._updateDatepicker(a))}catch(b){d.datepicker.log(b)}return!0},_showDatepicker:function(a){if(a=a.target||a,"input"!=a.nodeName.toLowerCase()&&(a=d("input",a.parentNode)[0]),!d.datepicker._isDisabledDatepicker(a)&&d.datepicker._lastInput!=a){var b=d.datepicker._getInst(a);d.datepicker._curInst&&d.datepicker._curInst!=b&&(d.datepicker._datepickerShowing&&d.datepicker._triggerOnClose(d.datepicker._curInst),d.datepicker._curInst.dpDiv.stop(!0,!0));var c=d.datepicker._get(b,"beforeShow");if(c=c?c.apply(a,[a,b]):{},c!==!1){H(b.settings,c),b.lastVal=null,d.datepicker._lastInput=a,d.datepicker._setDateFromField(b),d.datepicker._inDialog&&(a.value=""),d.datepicker._pos||(d.datepicker._pos=d.datepicker._findPos(a),d.datepicker._pos[1]+=a.offsetHeight);var e=!1;if(d(a).parents().each(function(){return e|="fixed"==d(this).css("position"),!e}),e&&d.browser.opera&&(d.datepicker._pos[0]-=document.documentElement.scrollLeft,d.datepicker._pos[1]-=document.documentElement.scrollTop),c={left:d.datepicker._pos[0],top:d.datepicker._pos[1]},d.datepicker._pos=null,b.dpDiv.empty(),b.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),d.datepicker._updateDatepicker(b),c=d.datepicker._checkOffset(b,c,e),b.dpDiv.css({position:d.datepicker._inDialog&&d.blockUI?"static":e?"fixed":"absolute",display:"none",left:c.left+"px",top:c.top+"px"}),!b.inline){c=d.datepicker._get(b,"showAnim");var f=d.datepicker._get(b,"duration"),g=function(){var a=b.dpDiv.find("iframe.ui-datepicker-cover");if(a.length){var c=d.datepicker._getBorders(b.dpDiv);a.css({left:-c[0],top:-c[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()})}};b.dpDiv.zIndex(d(a).zIndex()+1),d.datepicker._datepickerShowing=!0,d.effects&&d.effects[c]?b.dpDiv.show(c,d.datepicker._get(b,"showOptions"),f,g):b.dpDiv[c||"show"](c?f:null,g),c&&f||g(),b.input.is(":visible")&&!b.input.is(":disabled")&&b.input.focus(),d.datepicker._curInst=b}}}},_updateDatepicker:function(a){this.maxRows=4;var b=d.datepicker._getBorders(a.dpDiv);J=a,a.dpDiv.empty().append(this._generateHTML(a));var c=a.dpDiv.find("iframe.ui-datepicker-cover");if(c.length&&c.css({left:-b[0],top:-b[1],width:a.dpDiv.outerWidth(),height:a.dpDiv.outerHeight()}),a.dpDiv.find("."+this._dayOverClass+" a").mouseover(),b=this._getNumberOfMonths(a),c=b[1],a.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),c>1&&a.dpDiv.addClass("ui-datepicker-multi-"+c).css("width",17*c+"em"),a.dpDiv[(1!=b[0]||1!=b[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),a.dpDiv[(this._get(a,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),a==d.datepicker._curInst&&d.datepicker._datepickerShowing&&a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&a.input[0]!=document.activeElement&&a.input.focus(),a.yearshtml){var e=a.yearshtml;setTimeout(function(){e===a.yearshtml&&a.yearshtml&&a.dpDiv.find("select.ui-datepicker-year:first").replaceWith(a.yearshtml),e=a.yearshtml=null},0)}},_getBorders:function(a){var b=function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(a,b,c){var e=a.dpDiv.outerWidth(),f=a.dpDiv.outerHeight(),g=a.input?a.input.outerWidth():0,h=a.input?a.input.outerHeight():0,i=document.documentElement.clientWidth+d(document).scrollLeft(),j=document.documentElement.clientHeight+d(document).scrollTop();return b.left-=this._get(a,"isRTL")?e-g:0,b.left-=c&&b.left==a.input.offset().left?d(document).scrollLeft():0,b.top-=c&&b.top==a.input.offset().top+h?d(document).scrollTop():0,b.left-=Math.min(b.left,b.left+e>i&&i>e?Math.abs(b.left+e-i):0),b.top-=Math.min(b.top,b.top+f>j&&j>f?Math.abs(f+h):0),b},_findPos:function(a){for(var b=this._get(this._getInst(a),"isRTL");a&&("hidden"==a.type||1!=a.nodeType||d.expr.filters.hidden(a));)a=a[b?"previousSibling":"nextSibling"];return a=d(a).offset(),[a.left,a.top]},_triggerOnClose:function(a){var b=this._get(a,"onClose");b&&b.apply(a.input?a.input[0]:null,[a.input?a.input.val():"",a])},_hideDatepicker:function(a){var b=this._curInst;if(b&&(!a||b==d.data(a,"datepicker"))&&this._datepickerShowing){a=this._get(b,"showAnim");var c=this._get(b,"duration"),e=function(){d.datepicker._tidyDialog(b),this._curInst=null};d.effects&&d.effects[a]?b.dpDiv.hide(a,d.datepicker._get(b,"showOptions"),c,e):b.dpDiv["slideDown"==a?"slideUp":"fadeIn"==a?"fadeOut":"hide"](a?c:null,e),a||e(),d.datepicker._triggerOnClose(b),this._datepickerShowing=!1,this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),d.blockUI&&(d.unblockUI(),d("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(a){d.datepicker._curInst&&(a=d(a.target),a[0].id!=d.datepicker._mainDivId&&0==a.parents("#"+d.datepicker._mainDivId).length&&!a.hasClass(d.datepicker.markerClassName)&&!a.hasClass(d.datepicker._triggerClass)&&d.datepicker._datepickerShowing&&!(d.datepicker._inDialog&&d.blockUI)&&d.datepicker._hideDatepicker())},_adjustDate:function(a,b,c){a=d(a);var e=this._getInst(a[0]);this._isDisabledDatepicker(a[0])||(this._adjustInstDate(e,b+("M"==c?this._get(e,"showCurrentAtPos"):0),c),this._updateDatepicker(e))},_gotoToday:function(a){a=d(a);var b=this._getInst(a[0]);if(this._get(b,"gotoCurrent")&&b.currentDay)b.selectedDay=b.currentDay,b.drawMonth=b.selectedMonth=b.currentMonth,b.drawYear=b.selectedYear=b.currentYear;else{var c=new Date;b.selectedDay=c.getDate(),b.drawMonth=b.selectedMonth=c.getMonth(),b.drawYear=b.selectedYear=c.getFullYear()}this._notifyChange(b),this._adjustDate(a)},_selectMonthYear:function(a,b,c){a=d(a);var e=this._getInst(a[0]);e["selected"+("M"==c?"Month":"Year")]=e["draw"+("M"==c?"Month":"Year")]=parseInt(b.options[b.selectedIndex].value,10),this._notifyChange(e),this._adjustDate(a)},_selectDay:function(a,b,c,e){var f=d(a);d(e).hasClass(this._unselectableClass)||this._isDisabledDatepicker(f[0])||(f=this._getInst(f[0]),f.selectedDay=f.currentDay=d("a",e).html(),f.selectedMonth=f.currentMonth=b,f.selectedYear=f.currentYear=c,this._selectDate(a,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear)))},_clearDate:function(a){a=d(a),this._getInst(a[0]),this._selectDate(a,"")},_selectDate:function(a,b){a=this._getInst(d(a)[0]),b=null!=b?b:this._formatDate(a),a.input&&a.input.val(b),this._updateAlternate(a);var c=this._get(a,"onSelect");c?c.apply(a.input?a.input[0]:null,[b,a]):a.input&&a.input.trigger("change"),a.inline?this._updateDatepicker(a):(this._hideDatepicker(),this._lastInput=a.input[0],"object"!=typeof a.input[0]&&a.input.focus(),this._lastInput=null)},_updateAlternate:function(a){var b=this._get(a,"altField");if(b){var c=this._get(a,"altFormat")||this._get(a,"dateFormat"),e=this._getDate(a),f=this.formatDate(c,e,this._getFormatConfig(a));d(b).each(function(){d(this).val(f)})}},noWeekends:function(a){return a=a.getDay(),[a>0&&6>a,""]},iso8601Week:function(a){a=new Date(a.getTime()),a.setDate(a.getDate()+4-(a.getDay()||7));var b=a.getTime();return a.setMonth(0),a.setDate(1),Math.floor(Math.round((b-a)/864e5)/7)+1},parseDate:function(a,b,c){if(null==a||null==b)throw"Invalid arguments";if(b="object"==typeof b?b.toString():b+"",""==b)return null;var e=(c?c.shortYearCutoff:null)||this._defaults.shortYearCutoff;e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10);for(var f=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,g=(c?c.dayNames:null)||this._defaults.dayNames,h=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,i=(c?c.monthNames:null)||this._defaults.monthNames,j=c=-1,k=-1,l=-1,m=!1,n=function(b){return(b=s+1<a.length&&a.charAt(s+1)==b)&&s++,b},o=function(a){var c=n(a);if(a=new RegExp("^\\d{1,"+("@"==a?14:"!"==a?20:"y"==a&&c?4:"o"==a?3:2)+"}"),a=b.substring(r).match(a),!a)throw"Missing number at position "+r;return r+=a[0].length,parseInt(a[0],10)},p=function(a,c,e){a=d.map(n(a)?e:c,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)});var f=-1;if(d.each(a,function(a,c){return a=c[1],b.substr(r,a.length).toLowerCase()==a.toLowerCase()?(f=c[0],r+=a.length,!1):void 0}),-1!=f)return f+1;throw"Unknown name at position "+r},q=function(){if(b.charAt(r)!=a.charAt(s))throw"Unexpected literal at position "+r;r++},r=0,s=0;s<a.length;s++)if(m)"'"!=a.charAt(s)||n("'")?q():m=!1;else switch(a.charAt(s)){case"d":k=o("d");break;case"D":p("D",f,g);break;case"o":l=o("o");break;case"m":j=o("m");break;case"M":j=p("M",h,i);break;case"y":c=o("y");break;case"@":var t=new Date(o("@"));c=t.getFullYear(),j=t.getMonth()+1,k=t.getDate();break;case"!":t=new Date((o("!")-this._ticksTo1970)/1e4),c=t.getFullYear(),j=t.getMonth()+1,k=t.getDate();break;case"'":n("'")?q():m=!0;break;default:q()}if(r<b.length)throw"Extra/unparsed characters found in date: "+b.substring(r);if(-1==c?c=(new Date).getFullYear():100>c&&(c+=(new Date).getFullYear()-(new Date).getFullYear()%100+(e>=c?0:-100)),l>-1)for(j=1,k=l;;){if(e=this._getDaysInMonth(c,j-1),e>=k)break;j++,k-=e}if(t=this._daylightSavingAdjust(new Date(c,j-1,k)),t.getFullYear()!=c||t.getMonth()+1!=j||t.getDate()!=k)throw"Invalid date";return t},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(a,b,c){if(!b)return"";var d=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,e=(c?c.dayNames:null)||this._defaults.dayNames,f=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort;c=(c?c.monthNames:null)||this._defaults.monthNames;var g=function(b){return(b=l+1<a.length&&a.charAt(l+1)==b)&&l++,b},h=function(a,b,c){if(b=""+b,g(a))for(;b.length<c;)b="0"+b;return b},i=function(a,b,c,d){return g(a)?d[b]:c[b]},j="",k=!1;if(b)for(var l=0;l<a.length;l++)if(k)"'"!=a.charAt(l)||g("'")?j+=a.charAt(l):k=!1;else switch(a.charAt(l)){case"d":j+=h("d",b.getDate(),2);break;case"D":j+=i("D",b.getDay(),d,e);break;case"o":j+=h("o",Math.round((new Date(b.getFullYear(),b.getMonth(),b.getDate()).getTime()-new Date(b.getFullYear(),0,0).getTime())/864e5),3);break;case"m":j+=h("m",b.getMonth()+1,2);break;case"M":j+=i("M",b.getMonth(),f,c);break;case"y":j+=g("y")?b.getFullYear():(b.getYear()%100<10?"0":"")+b.getYear()%100;break;case"@":j+=b.getTime();break;case"!":j+=1e4*b.getTime()+this._ticksTo1970;break;case"'":g("'")?j+="'":k=!0;break;default:j+=a.charAt(l)}return j},_possibleChars:function(a){for(var b="",c=!1,d=function(b){return(b=e+1<a.length&&a.charAt(e+1)==b)&&e++,b},e=0;e<a.length;e++)if(c)"'"!=a.charAt(e)||d("'")?b+=a.charAt(e):c=!1;else switch(a.charAt(e)){case"d":case"m":case"y":case"@":b+="0123456789";break;case"D":case"M":return null;case"'":d("'")?b+="'":c=!0;break;default:b+=a.charAt(e)}return b},_get:function(a,b){return a.settings[b]!==C?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()!=a.lastVal){var c,d,e=this._get(a,"dateFormat"),f=a.lastVal=a.input?a.input.val():null;c=d=this._getDefaultDate(a);var g=this._getFormatConfig(a);try{c=this.parseDate(e,f,g)||d}catch(h){this.log(h),f=b?"":f}a.selectedDay=c.getDate(),a.drawMonth=a.selectedMonth=c.getMonth(),a.drawYear=a.selectedYear=c.getFullYear(),a.currentDay=f?c.getDate():0,a.currentMonth=f?c.getMonth():0,a.currentYear=f?c.getFullYear():0,this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(a,b,c){var e=function(a){var b=new Date;return b.setDate(b.getDate()+a),b},f=function(b){try{return d.datepicker.parseDate(d.datepicker._get(a,"dateFormat"),b,d.datepicker._getFormatConfig(a))}catch(c){}var e=(b.toLowerCase().match(/^c/)?d.datepicker._getDate(a):null)||new Date,f=e.getFullYear(),g=e.getMonth();e=e.getDate();for(var h=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,i=h.exec(b);i;){switch(i[2]||"d"){case"d":case"D":e+=parseInt(i[1],10);
break;case"w":case"W":e+=7*parseInt(i[1],10);break;case"m":case"M":g+=parseInt(i[1],10),e=Math.min(e,d.datepicker._getDaysInMonth(f,g));break;case"y":case"Y":f+=parseInt(i[1],10),e=Math.min(e,d.datepicker._getDaysInMonth(f,g))}i=h.exec(b)}return new Date(f,g,e)};return(b=(b=null==b||""===b?c:"string"==typeof b?f(b):"number"==typeof b?isNaN(b)?c:e(b):new Date(b.getTime()))&&"Invalid Date"==b.toString()?c:b)&&(b.setHours(0),b.setMinutes(0),b.setSeconds(0),b.setMilliseconds(0)),this._daylightSavingAdjust(b)},_daylightSavingAdjust:function(a){return a?(a.setHours(a.getHours()>12?a.getHours()+2:0),a):null},_setDate:function(a,b,c){var d=!b,e=a.selectedMonth,f=a.selectedYear;b=this._restrictMinMax(a,this._determineDate(a,b,new Date)),a.selectedDay=a.currentDay=b.getDate(),a.drawMonth=a.selectedMonth=a.currentMonth=b.getMonth(),a.drawYear=a.selectedYear=a.currentYear=b.getFullYear(),e==a.selectedMonth&&f==a.selectedYear||c||this._notifyChange(a),this._adjustInstDate(a),a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){return!a.currentYear||a.input&&""==a.input.val()?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay))},_generateHTML:function(a){var b=new Date;b=this._daylightSavingAdjust(new Date(b.getFullYear(),b.getMonth(),b.getDate()));var c=this._get(a,"isRTL"),e=this._get(a,"showButtonPanel"),f=this._get(a,"hideIfNoPrevNext"),g=this._get(a,"navigationAsDateFormat"),h=this._getNumberOfMonths(a),i=this._get(a,"showCurrentAtPos"),j=this._get(a,"stepMonths"),k=1!=h[0]||1!=h[1],l=this._daylightSavingAdjust(a.currentDay?new Date(a.currentYear,a.currentMonth,a.currentDay):new Date(9999,9,9)),m=this._getMinMaxDate(a,"min"),n=this._getMinMaxDate(a,"max");i=a.drawMonth-i;var o=a.drawYear;if(0>i&&(i+=12,o--),n){var p=this._daylightSavingAdjust(new Date(n.getFullYear(),n.getMonth()-h[0]*h[1]+1,n.getDate()));for(p=m&&m>p?m:p;this._daylightSavingAdjust(new Date(o,i,1))>p;)i--,0>i&&(i=11,o--)}a.drawMonth=i,a.drawYear=o,p=this._get(a,"prevText"),p=g?this.formatDate(p,this._daylightSavingAdjust(new Date(o,i-j,1)),this._getFormatConfig(a)):p,p=this._canAdjustMonth(a,-1,o,i)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+B+".datepicker._adjustDate('#"+a.id+"', -"+j+", 'M');\" title=\""+p+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+p+"</span></a>":f?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+p+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+p+"</span></a>";var q=this._get(a,"nextText");q=g?this.formatDate(q,this._daylightSavingAdjust(new Date(o,i+j,1)),this._getFormatConfig(a)):q,f=this._canAdjustMonth(a,1,o,i)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+B+".datepicker._adjustDate('#"+a.id+"', +"+j+", 'M');\" title=\""+q+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+q+"</span></a>":f?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+q+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+q+"</span></a>",j=this._get(a,"currentText"),q=this._get(a,"gotoCurrent")&&a.currentDay?l:b,j=g?this.formatDate(j,q,this._getFormatConfig(a)):j,g=a.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+B+'.datepicker._hideDatepicker();">'+this._get(a,"closeText")+"</button>",e=e?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(c?g:"")+(this._isInRange(a,q)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+B+".datepicker._gotoToday('#"+a.id+"');\">"+j+"</button>":"")+(c?"":g)+"</div>":"",g=parseInt(this._get(a,"firstDay"),10),g=isNaN(g)?0:g,j=this._get(a,"showWeek"),q=this._get(a,"dayNames"),this._get(a,"dayNamesShort");var r=this._get(a,"dayNamesMin"),s=this._get(a,"monthNames"),t=this._get(a,"monthNamesShort"),u=this._get(a,"beforeShowDay"),v=this._get(a,"showOtherMonths"),w=this._get(a,"selectOtherMonths");this._get(a,"calculateWeek");for(var x=this._getDefaultDate(a),y="",z=0;z<h[0];z++){var A="";this.maxRows=4;for(var C=0;C<h[1];C++){var D=this._daylightSavingAdjust(new Date(o,i,a.selectedDay)),E=" ui-corner-all",F="";if(k){if(F+='<div class="ui-datepicker-group',h[1]>1)switch(C){case 0:F+=" ui-datepicker-group-first",E=" ui-corner-"+(c?"right":"left");break;case h[1]-1:F+=" ui-datepicker-group-last",E=" ui-corner-"+(c?"left":"right");break;default:F+=" ui-datepicker-group-middle",E=""}F+='">'}F+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+E+'">'+(/all|left/.test(E)&&0==z?c?f:p:"")+(/all|right/.test(E)&&0==z?c?p:f:"")+this._generateMonthYearHeader(a,i,o,m,n,z>0||C>0,s,t)+'</div><table class="ui-datepicker-calendar"><thead><tr>';var G=j?'<th class="ui-datepicker-week-col">'+this._get(a,"weekHeader")+"</th>":"";for(E=0;7>E;E++){var H=(E+g)%7;G+="<th"+((E+g+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+q[H]+'">'+r[H]+"</span></th>"}F+=G+"</tr></thead><tbody>",G=this._getDaysInMonth(o,i),o==a.selectedYear&&i==a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,G)),E=(this._getFirstDayOfMonth(o,i)-g+7)%7,G=Math.ceil((E+G)/7),this.maxRows=G=k?this.maxRows>G?this.maxRows:G:G,H=this._daylightSavingAdjust(new Date(o,i,1-E));for(var I=0;G>I;I++){F+="<tr>";var J=j?'<td class="ui-datepicker-week-col">'+this._get(a,"calculateWeek")(H)+"</td>":"";for(E=0;7>E;E++){var K=u?u.apply(a.input?a.input[0]:null,[H]):[!0,""],L=H.getMonth()!=i,M=L&&!w||!K[0]||m&&m>H||n&&H>n;J+='<td class="'+((E+g+6)%7>=5?" ui-datepicker-week-end":"")+(L?" ui-datepicker-other-month":"")+(H.getTime()==D.getTime()&&i==a.selectedMonth&&a._keyEvent||x.getTime()==H.getTime()&&x.getTime()==D.getTime()?" "+this._dayOverClass:"")+(M?" "+this._unselectableClass+" ui-state-disabled":"")+(L&&!v?"":" "+K[1]+(H.getTime()==l.getTime()?" "+this._currentClass:"")+(H.getTime()==b.getTime()?" ui-datepicker-today":""))+'"'+(L&&!v||!K[2]?"":' title="'+K[2]+'"')+(M?"":' onclick="DP_jQuery_'+B+".datepicker._selectDay('#"+a.id+"',"+H.getMonth()+","+H.getFullYear()+', this);return false;"')+">"+(L&&!v?"&#xa0;":M?'<span class="ui-state-default">'+H.getDate()+"</span>":'<a class="ui-state-default'+(H.getTime()==b.getTime()?" ui-state-highlight":"")+(H.getTime()==l.getTime()?" ui-state-active":"")+(L?" ui-priority-secondary":"")+'" href="#">'+H.getDate()+"</a>")+"</td>",H.setDate(H.getDate()+1),H=this._daylightSavingAdjust(H)}F+=J+"</tr>"}i++,i>11&&(i=0,o++),F+="</tbody></table>"+(k?"</div>"+(h[0]>0&&C==h[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),A+=F}y+=A}return y+=e+(d.browser.msie&&parseInt(d.browser.version,10)<7&&!a.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),a._keyEvent=!1,y},_generateMonthYearHeader:function(a,b,c,d,e,f,g,h){var i=this._get(a,"changeMonth"),j=this._get(a,"changeYear"),k=this._get(a,"showMonthAfterYear"),l='<div class="ui-datepicker-title">',m="";if(f||!i)m+='<span class="ui-datepicker-month">'+g[b]+"</span>";else{g=d&&d.getFullYear()==c;var n=e&&e.getFullYear()==c;m+='<select class="ui-datepicker-month" onchange="DP_jQuery_'+B+".datepicker._selectMonthYear('#"+a.id+"', this, 'M');\" >";for(var o=0;12>o;o++)(!g||o>=d.getMonth())&&(!n||o<=e.getMonth())&&(m+='<option value="'+o+'"'+(o==b?' selected="selected"':"")+">"+h[o]+"</option>");m+="</select>"}if(k||(l+=m+(!f&&i&&j?"":"&#xa0;")),!a.yearshtml)if(a.yearshtml="",f||!j)l+='<span class="ui-datepicker-year">'+c+"</span>";else{h=this._get(a,"yearRange").split(":");var p=(new Date).getFullYear();for(g=function(a){return a=a.match(/c[+-].*/)?c+parseInt(a.substring(1),10):a.match(/[+-].*/)?p+parseInt(a,10):parseInt(a,10),isNaN(a)?p:a},b=g(h[0]),h=Math.max(b,g(h[1]||"")),b=d?Math.max(b,d.getFullYear()):b,h=e?Math.min(h,e.getFullYear()):h,a.yearshtml+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+B+".datepicker._selectMonthYear('#"+a.id+"', this, 'Y');\" >";h>=b;b++)a.yearshtml+='<option value="'+b+'"'+(b==c?' selected="selected"':"")+">"+b+"</option>";a.yearshtml+="</select>",l+=a.yearshtml,a.yearshtml=null}return l+=this._get(a,"yearSuffix"),k&&(l+=(!f&&i&&j?"":"&#xa0;")+m),l+="</div>"},_adjustInstDate:function(a,b,c){var d=a.drawYear+("Y"==c?b:0),e=a.drawMonth+("M"==c?b:0);b=Math.min(a.selectedDay,this._getDaysInMonth(d,e))+("D"==c?b:0),d=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(d,e,b))),a.selectedDay=d.getDate(),a.drawMonth=a.selectedMonth=d.getMonth(),a.drawYear=a.selectedYear=d.getFullYear(),("M"==c||"Y"==c)&&this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min");return a=this._getMinMaxDate(a,"max"),b=c&&c>b?c:b,b=a&&b>a?a:b},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){return a=this._get(a,"numberOfMonths"),null==a?[1,1]:"number"==typeof a?[1,a]:a},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return new Date(a,b,1).getDay()},_canAdjustMonth:function(a,b,c,d){var e=this._getNumberOfMonths(a);return c=this._daylightSavingAdjust(new Date(c,d+(0>b?b:e[0]*e[1]),1)),0>b&&c.setDate(this._getDaysInMonth(c.getFullYear(),c.getMonth())),this._isInRange(a,c)},_isInRange:function(a,b){var c=this._getMinMaxDate(a,"min");return a=this._getMinMaxDate(a,"max"),(!c||b.getTime()>=c.getTime())&&(!a||b.getTime()<=a.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");return b="string"!=typeof b?b:(new Date).getFullYear()%100+parseInt(b,10),{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,d){return b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear),b=b?"object"==typeof b?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay)),this.formatDate(this._get(a,"dateFormat"),b,this._getFormatConfig(a))}}),d.fn.datepicker=function(a){if(!this.length)return this;d.datepicker.initialized||(d(document).mousedown(d.datepicker._checkExternalClick).find("body").append(d.datepicker.dpDiv),d.datepicker.initialized=!0);var b=Array.prototype.slice.call(arguments,1);return"string"!=typeof a||"isDisabled"!=a&&"getDate"!=a&&"widget"!=a?"option"==a&&2==arguments.length&&"string"==typeof arguments[1]?d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this[0]].concat(b)):this.each(function(){"string"==typeof a?d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this].concat(b)):d.datepicker._attachDatepicker(this,a)}):d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this[0]].concat(b))},d.datepicker=new M,d.datepicker.initialized=!1,d.datepicker.uuid=(new Date).getTime(),d.datepicker.version="1.8.16",window["DP_jQuery_"+B]=d}(jQuery),function(a,b){a.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=a("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove(),a.Widget.prototype.destroy.apply(this,arguments)},value:function(a){return a===b?this._value():(this._setOption("value",a),this)},_setOption:function(b,c){"value"===b&&(this.options.value=c,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),a.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var a=this.options.value;return"number"!=typeof a&&(a=0),Math.min(this.options.max,Math.max(this.min,a))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var a=this.value(),b=this._percentage();this.oldValue!==a&&(this.oldValue=a,this._trigger("change")),this.valueDiv.toggle(a>this.min).toggleClass("ui-corner-right",a===this.options.max).width(b.toFixed(0)+"%"),this.element.attr("aria-valuenow",a)}}),a.extend(a.ui.progressbar,{version:"1.8.16"})}(jQuery),jQuery.effects||function(a,b){function c(b){var c;return b&&b.constructor==Array&&3==b.length?b:(c=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(b))?[parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10)]:(c=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(b))?[2.55*parseFloat(c[1]),2.55*parseFloat(c[2]),2.55*parseFloat(c[3])]:(c=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(b))?[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]:(c=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(b))?[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]:/rgba\(0, 0, 0, 0\)/.exec(b)?j.transparent:j[a.trim(b).toLowerCase()]}function d(b,d){var e;do{if(e=a.curCSS(b,d),""!=e&&"transparent"!=e||a.nodeName(b,"body"))break;d="backgroundColor"}while(b=b.parentNode);return c(e)}function e(){var a,b,c=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,d={};if(c&&c.length&&c[0]&&c[c[0]])for(var e=c.length;e--;)a=c[e],"string"==typeof c[a]&&(b=a.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()}),d[b]=c[a]);else for(a in c)"string"==typeof c[a]&&(d[a]=c[a]);return d}function f(b){var c,d;for(c in b)d=b[c],(null==d||a.isFunction(d)||c in l||/scrollbar/.test(c)||!/color/i.test(c)&&isNaN(parseFloat(d)))&&delete b[c];return b}function g(a,b){var c,d={_:0};for(c in b)a[c]!=b[c]&&(d[c]=b[c]);return d}function h(b,c,d,e){return"object"==typeof b&&(e=c,d=null,c=b,b=c.effect),a.isFunction(c)&&(e=c,d=null,c={}),("number"==typeof c||a.fx.speeds[c])&&(e=d,d=c,c={}),a.isFunction(d)&&(e=d,d=null),c=c||{},d=d||c.duration,d=a.fx.off?0:"number"==typeof d?d:d in a.fx.speeds?a.fx.speeds[d]:a.fx.speeds._default,e=e||c.complete,[b,c,d,e]}function i(b){return!b||"number"==typeof b||a.fx.speeds[b]?!0:"string"!=typeof b||a.effects[b]?!1:!0}a.effects={},a.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(b,e){a.fx.step[e]=function(a){a.colorInit||(a.start=d(a.elem,e),a.end=c(a.end),a.colorInit=!0),a.elem.style[e]="rgb("+Math.max(Math.min(parseInt(a.pos*(a.end[0]-a.start[0])+a.start[0],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[1]-a.start[1])+a.start[1],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[2]-a.start[2])+a.start[2],10),255),0)+")"}});var j={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},k=["add","remove","toggle"],l={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.effects.animateClass=function(b,c,d,h){return a.isFunction(d)&&(h=d,d=null),this.queue(function(){var i,j=a(this),l=j.attr("style")||" ",m=f(e.call(this)),n=j.attr("class");a.each(k,function(a,c){b[c]&&j[c+"Class"](b[c])}),i=f(e.call(this)),j.attr("class",n),j.animate(g(m,i),{queue:!1,duration:c,easing:d,complete:function(){a.each(k,function(a,c){b[c]&&j[c+"Class"](b[c])}),"object"==typeof j.attr("style")?(j.attr("style").cssText="",j.attr("style").cssText=l):j.attr("style",l),h&&h.apply(this,arguments),a.dequeue(this)}})})},a.fn.extend({_addClass:a.fn.addClass,addClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,[{add:b},c,d,e]):this._addClass(b)},_removeClass:a.fn.removeClass,removeClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,[{remove:b},c,d,e]):this._removeClass(b)},_toggleClass:a.fn.toggleClass,toggleClass:function(c,d,e,f,g){return"boolean"==typeof d||d===b?e?a.effects.animateClass.apply(this,[d?{add:c}:{remove:c},e,f,g]):this._toggleClass(c,d):a.effects.animateClass.apply(this,[{toggle:c},d,e,f])},switchClass:function(b,c,d,e,f){return a.effects.animateClass.apply(this,[{add:c,remove:b},d,e,f])}}),a.extend(a.effects,{version:"1.8.16",save:function(a,b){for(var c=0;c<b.length;c++)null!==b[c]&&a.data("ec.storage."+b[c],a[0].style[b[c]])},restore:function(a,b){for(var c=0;c<b.length;c++)null!==b[c]&&a.css(b[c],a.data("ec.storage."+b[c]))},setMode:function(a,b){return"toggle"==b&&(b=a.is(":hidden")?"show":"hide"),b},getBaseline:function(a,b){var c;switch(a[0]){case"top":c=0;break;case"middle":c=.5;break;case"bottom":c=1;break;default:c=a[0]/b.height}switch(a[1]){case"left":a=0;break;case"center":a=.5;break;case"right":a=1;break;default:a=a[1]/b.width}return{x:a,y:c}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var c={width:b.outerWidth(!0),height:b.outerHeight(!0),"float":b.css("float")},d=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e=document.activeElement;return b.wrap(d),(b[0]===e||a.contains(b[0],e))&&a(e).focus(),d=b.parent(),"static"==b.css("position")?(d.css({position:"relative"}),b.css({position:"relative"})):(a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(a,d){c[d]=b.css(d),isNaN(parseInt(c[d],10))&&(c[d]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),d.css(c).show()},removeWrapper:function(b){var c,d=document.activeElement;return b.parent().is(".ui-effects-wrapper")?(c=b.parent().replaceWith(b),(b[0]===d||a.contains(b[0],d))&&a(d).focus(),c):b},setTransition:function(b,c,d,e){return e=e||{},a.each(c,function(a,c){unit=b.cssUnit(c),unit[0]>0&&(e[c]=unit[0]*d+unit[1])}),e}}),a.fn.extend({effect:function(b){var c=h.apply(this,arguments),d={options:c[1],duration:c[2],callback:c[3]};c=d.options.mode;var e=a.effects[b];return a.fx.off||!e?c?this[c](d.duration,d.callback):this.each(function(){d.callback&&d.callback.call(this)}):e.call(this,d)},_show:a.fn.show,show:function(a){if(i(a))return this._show.apply(this,arguments);var b=h.apply(this,arguments);return b[1].mode="show",this.effect.apply(this,b)},_hide:a.fn.hide,hide:function(a){if(i(a))return this._hide.apply(this,arguments);var b=h.apply(this,arguments);return b[1].mode="hide",this.effect.apply(this,b)},__toggle:a.fn.toggle,toggle:function(b){if(i(b)||"boolean"==typeof b||a.isFunction(b))return this.__toggle.apply(this,arguments);var c=h.apply(this,arguments);return c[1].mode="toggle",this.effect.apply(this,c)},cssUnit:function(b){var c=this.css(b),d=[];return a.each(["em","px","%","pt"],function(a,b){c.indexOf(b)>0&&(d=[parseFloat(c),b])}),d}}),a.easing.jswing=a.easing.swing,a.extend(a.easing,{def:"easeOutQuad",swing:function(b,c,d,e,f){return a.easing[a.easing.def](b,c,d,e,f)},easeInQuad:function(a,b,c,d,e){return d*(b/=e)*b+c},easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c},easeInOutQuad:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b+c:-d/2*(--b*(b-2)-1)+c},easeInCubic:function(a,b,c,d,e){return d*(b/=e)*b*b+c},easeOutCubic:function(a,b,c,d,e){return d*((b=b/e-1)*b*b+1)+c},easeInOutCubic:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b+c:d/2*((b-=2)*b*b+2)+c},easeInQuart:function(a,b,c,d,e){return d*(b/=e)*b*b*b+c},easeOutQuart:function(a,b,c,d,e){return-d*((b=b/e-1)*b*b*b-1)+c},easeInOutQuart:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b+c:-d/2*((b-=2)*b*b*b-2)+c},easeInQuint:function(a,b,c,d,e){return d*(b/=e)*b*b*b*b+c},easeOutQuint:function(a,b,c,d,e){return d*((b=b/e-1)*b*b*b*b+1)+c},easeInOutQuint:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b*b+c:d/2*((b-=2)*b*b*b*b+2)+c},easeInSine:function(a,b,c,d,e){return-d*Math.cos(b/e*(Math.PI/2))+d+c},easeOutSine:function(a,b,c,d,e){return d*Math.sin(b/e*(Math.PI/2))+c},easeInOutSine:function(a,b,c,d,e){return-d/2*(Math.cos(Math.PI*b/e)-1)+c},easeInExpo:function(a,b,c,d,e){return 0==b?c:d*Math.pow(2,10*(b/e-1))+c},easeOutExpo:function(a,b,c,d,e){return b==e?c+d:d*(-Math.pow(2,-10*b/e)+1)+c},easeInOutExpo:function(a,b,c,d,e){return 0==b?c:b==e?c+d:(b/=e/2)<1?d/2*Math.pow(2,10*(b-1))+c:d/2*(-Math.pow(2,-10*--b)+2)+c},easeInCirc:function(a,b,c,d,e){return-d*(Math.sqrt(1-(b/=e)*b)-1)+c},easeOutCirc:function(a,b,c,d,e){return d*Math.sqrt(1-(b=b/e-1)*b)+c},easeInOutCirc:function(a,b,c,d,e){return(b/=e/2)<1?-d/2*(Math.sqrt(1-b*b)-1)+c:d/2*(Math.sqrt(1-(b-=2)*b)+1)+c},easeInElastic:function(a,b,c,d,e){a=1.70158;var f=0,g=d;return 0==b?c:1==(b/=e)?c+d:(f||(f=.3*e),g<Math.abs(d)?(g=d,a=f/4):a=f/(2*Math.PI)*Math.asin(d/g),-(g*Math.pow(2,10*(b-=1))*Math.sin(2*(b*e-a)*Math.PI/f))+c)},easeOutElastic:function(a,b,c,d,e){a=1.70158;var f=0,g=d;return 0==b?c:1==(b/=e)?c+d:(f||(f=.3*e),g<Math.abs(d)?(g=d,a=f/4):a=f/(2*Math.PI)*Math.asin(d/g),g*Math.pow(2,-10*b)*Math.sin(2*(b*e-a)*Math.PI/f)+d+c)},easeInOutElastic:function(a,b,c,d,e){a=1.70158;var f=0,g=d;return 0==b?c:2==(b/=e/2)?c+d:(f||(f=.3*e*1.5),g<Math.abs(d)?(g=d,a=f/4):a=f/(2*Math.PI)*Math.asin(d/g),1>b?-.5*g*Math.pow(2,10*(b-=1))*Math.sin(2*(b*e-a)*Math.PI/f)+c:g*Math.pow(2,-10*(b-=1))*Math.sin(2*(b*e-a)*Math.PI/f)*.5+d+c)},easeInBack:function(a,c,d,e,f,g){return g==b&&(g=1.70158),e*(c/=f)*c*((g+1)*c-g)+d},easeOutBack:function(a,c,d,e,f,g){return g==b&&(g=1.70158),e*((c=c/f-1)*c*((g+1)*c+g)+1)+d},easeInOutBack:function(a,c,d,e,f,g){return g==b&&(g=1.70158),(c/=f/2)<1?e/2*c*c*(((g*=1.525)+1)*c-g)+d:e/2*((c-=2)*c*(((g*=1.525)+1)*c+g)+2)+d},easeInBounce:function(b,c,d,e,f){return e-a.easing.easeOutBounce(b,f-c,0,e,f)+d},easeOutBounce:function(a,b,c,d,e){return(b/=e)<1/2.75?7.5625*d*b*b+c:2/2.75>b?d*(7.5625*(b-=1.5/2.75)*b+.75)+c:2.5/2.75>b?d*(7.5625*(b-=2.25/2.75)*b+.9375)+c:d*(7.5625*(b-=2.625/2.75)*b+.984375)+c},easeInOutBounce:function(b,c,d,e,f){return f/2>c?.5*a.easing.easeInBounce(b,2*c,0,e,f)+d:.5*a.easing.easeOutBounce(b,2*c-f,0,e,f)+.5*e+d}})}(jQuery),function(a){a.effects.blind=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.direction||"vertical";a.effects.save(c,d),c.show();var g=a.effects.createWrapper(c).css({overflow:"hidden"}),h="vertical"==f?"height":"width";f="vertical"==f?g.height():g.width(),"show"==e&&g.css(h,0);var i={};i[h]="show"==e?f:0,g.animate(i,b.duration,b.options.easing,function(){"hide"==e&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(c[0],arguments),c.dequeue()})})}}(jQuery),function(a){a.effects.bounce=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"effect"),f=b.options.direction||"up",g=b.options.distance||20,h=b.options.times||5,i=b.duration||250;/show|hide/.test(e)&&d.push("opacity"),a.effects.save(c,d),c.show(),a.effects.createWrapper(c);var j="up"==f||"down"==f?"top":"left";if(f="up"==f||"left"==f?"pos":"neg",g=b.options.distance||("top"==j?c.outerHeight({margin:!0})/3:c.outerWidth({margin:!0})/3),"show"==e&&c.css("opacity",0).css(j,"pos"==f?-g:g),"hide"==e&&(g/=2*h),"hide"!=e&&h--,"show"==e){var k={opacity:1};k[j]=("pos"==f?"+=":"-=")+g,c.animate(k,i/2,b.options.easing),g/=2,h--}for(k=0;h>k;k++){var l={},m={};l[j]=("pos"==f?"-=":"+=")+g,m[j]=("pos"==f?"+=":"-=")+g,c.animate(l,i/2,b.options.easing).animate(m,i/2,b.options.easing),g="hide"==e?2*g:g/2}"hide"==e?(k={opacity:0},k[j]=("pos"==f?"-=":"+=")+g,c.animate(k,i/2,b.options.easing,function(){c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments)})):(l={},m={},l[j]=("pos"==f?"-=":"+=")+g,m[j]=("pos"==f?"+=":"-=")+g,c.animate(l,i/2,b.options.easing).animate(m,i/2,b.options.easing,function(){a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments)})),c.queue("fx",function(){c.dequeue()}),c.dequeue()})}}(jQuery),function(a){a.effects.clip=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right","height","width"],e=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.direction||"vertical";a.effects.save(c,d),c.show();var g=a.effects.createWrapper(c).css({overflow:"hidden"});g="IMG"==c[0].tagName?g:c;var h={size:"vertical"==f?"height":"width",position:"vertical"==f?"top":"left"};f="vertical"==f?g.height():g.width(),"show"==e&&(g.css(h.size,0),g.css(h.position,f/2));var i={};i[h.size]="show"==e?f:0,i[h.position]="show"==e?0:f/2,g.animate(i,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){"hide"==e&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(c[0],arguments),c.dequeue()}})})}}(jQuery),function(a){a.effects.drop=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right","opacity"],e=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.direction||"left";a.effects.save(c,d),c.show(),a.effects.createWrapper(c);var g="up"==f||"down"==f?"top":"left";f="up"==f||"left"==f?"pos":"neg";var h=b.options.distance||("top"==g?c.outerHeight({margin:!0})/2:c.outerWidth({margin:!0})/2);"show"==e&&c.css("opacity",0).css(g,"pos"==f?-h:h);var i={opacity:"show"==e?1:0};i[g]=("show"==e?"pos"==f?"+=":"-=":"pos"==f?"-=":"+=")+h,c.animate(i,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){"hide"==e&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}}(jQuery),function(a){a.effects.explode=function(b){return this.queue(function(){var c=b.options.pieces?Math.round(Math.sqrt(b.options.pieces)):3,d=b.options.pieces?Math.round(Math.sqrt(b.options.pieces)):3;b.options.mode="toggle"==b.options.mode?a(this).is(":visible")?"hide":"show":b.options.mode;var e=a(this).show().css("visibility","hidden"),f=e.offset();f.top-=parseInt(e.css("marginTop"),10)||0,f.left-=parseInt(e.css("marginLeft"),10)||0;for(var g=e.outerWidth(!0),h=e.outerHeight(!0),i=0;c>i;i++)for(var j=0;d>j;j++)e.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-j*(g/d),top:-i*(h/c)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:g/d,height:h/c,left:f.left+j*(g/d)+("show"==b.options.mode?(j-Math.floor(d/2))*(g/d):0),top:f.top+i*(h/c)+("show"==b.options.mode?(i-Math.floor(c/2))*(h/c):0),opacity:"show"==b.options.mode?0:1}).animate({left:f.left+j*(g/d)+("show"==b.options.mode?0:(j-Math.floor(d/2))*(g/d)),top:f.top+i*(h/c)+("show"==b.options.mode?0:(i-Math.floor(c/2))*(h/c)),opacity:"show"==b.options.mode?1:0},b.duration||500);setTimeout(function(){"show"==b.options.mode?e.css({visibility:"visible"}):e.css({visibility:"visible"}).hide(),b.callback&&b.callback.apply(e[0]),e.dequeue(),a("div.ui-effects-explode").remove()},b.duration||500)})}}(jQuery),function(a){a.effects.fade=function(b){return this.queue(function(){var c=a(this),d=a.effects.setMode(c,b.options.mode||"hide");c.animate({opacity:d},{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}}(jQuery),function(a){a.effects.fold=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.size||15,g=!!b.options.horizFirst,h=b.duration?b.duration/2:a.fx.speeds._default/2;a.effects.save(c,d),c.show();var i=a.effects.createWrapper(c).css({overflow:"hidden"}),j="show"==e!=g,k=j?["width","height"]:["height","width"];j=j?[i.width(),i.height()]:[i.height(),i.width()];var l=/([0-9]+)%/.exec(f);l&&(f=parseInt(l[1],10)/100*j["hide"==e?0:1]),"show"==e&&i.css(g?{height:0,width:f}:{height:f,width:0}),g={},l={},g[k[0]]="show"==e?j[0]:f,l[k[1]]="show"==e?j[1]:0,i.animate(g,h,b.options.easing).animate(l,h,b.options.easing,function(){"hide"==e&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(c[0],arguments),c.dequeue()})})}}(jQuery),function(a){a.effects.highlight=function(b){return this.queue(function(){var c=a(this),d=["backgroundImage","backgroundColor","opacity"],e=a.effects.setMode(c,b.options.mode||"show"),f={backgroundColor:c.css("backgroundColor")};"hide"==e&&(f.opacity=0),a.effects.save(c,d),c.show().css({backgroundImage:"none",backgroundColor:b.options.color||"#ffff99"}).animate(f,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){"hide"==e&&c.hide(),a.effects.restore(c,d),"show"==e&&!a.support.opacity&&this.style.removeAttribute("filter"),b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}}(jQuery),function(a){a.effects.pulsate=function(b){return this.queue(function(){var c=a(this),d=a.effects.setMode(c,b.options.mode||"show");for(times=2*(b.options.times||5)-1,duration=b.duration?b.duration/2:a.fx.speeds._default/2,isVisible=c.is(":visible"),animateTo=0,isVisible||(c.css("opacity",0).show(),animateTo=1),("hide"==d&&isVisible||"show"==d&&!isVisible)&&times--,d=0;times>d;d++)c.animate({opacity:animateTo},duration,b.options.easing),animateTo=(animateTo+1)%2;c.animate({opacity:animateTo},duration,b.options.easing,function(){0==animateTo&&c.hide(),b.callback&&b.callback.apply(this,arguments)}),c.queue("fx",function(){c.dequeue()}).dequeue()})}}(jQuery),function(a){a.effects.puff=function(b){return this.queue(function(){var c=a(this),d=a.effects.setMode(c,b.options.mode||"hide"),e=parseInt(b.options.percent,10)||150,f=e/100,g={height:c.height(),width:c.width()};a.extend(b.options,{fade:!0,mode:d,percent:"hide"==d?e:100,from:"hide"==d?g:{height:g.height*f,width:g.width*f}}),c.effect("scale",b.options,b.duration,b.callback),c.dequeue()})},a.effects.scale=function(b){return this.queue(function(){var c=a(this),d=a.extend(!0,{},b.options),e=a.effects.setMode(c,b.options.mode||"effect"),f=parseInt(b.options.percent,10)||(0==parseInt(b.options.percent,10)?0:"hide"==e?0:100),g=b.options.direction||"both",h=b.options.origin;"effect"!=e&&(d.origin=h||["middle","center"],d.restore=!0),h={height:c.height(),width:c.width()},c.from=b.options.from||("show"==e?{height:0,width:0}:h),f={y:"horizontal"!=g?f/100:1,x:"vertical"!=g?f/100:1},c.to={height:h.height*f.y,width:h.width*f.x},b.options.fade&&("show"==e&&(c.from.opacity=0,c.to.opacity=1),"hide"==e&&(c.from.opacity=1,c.to.opacity=0)),d.from=c.from,d.to=c.to,d.mode=e,c.effect("size",d,b.duration,b.callback),c.dequeue()})},a.effects.size=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right","width","height","overflow","opacity"],e=["position","top","bottom","left","right","overflow","opacity"],f=["width","height","overflow"],g=["fontSize"],h=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],i=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],j=a.effects.setMode(c,b.options.mode||"effect"),k=b.options.restore||!1,l=b.options.scale||"both",m=b.options.origin,n={height:c.height(),width:c.width()};
c.from=b.options.from||n,c.to=b.options.to||n,m&&(m=a.effects.getBaseline(m,n),c.from.top=(n.height-c.from.height)*m.y,c.from.left=(n.width-c.from.width)*m.x,c.to.top=(n.height-c.to.height)*m.y,c.to.left=(n.width-c.to.width)*m.x);var o={from:{y:c.from.height/n.height,x:c.from.width/n.width},to:{y:c.to.height/n.height,x:c.to.width/n.width}};("box"==l||"both"==l)&&(o.from.y!=o.to.y&&(d=d.concat(h),c.from=a.effects.setTransition(c,h,o.from.y,c.from),c.to=a.effects.setTransition(c,h,o.to.y,c.to)),o.from.x!=o.to.x&&(d=d.concat(i),c.from=a.effects.setTransition(c,i,o.from.x,c.from),c.to=a.effects.setTransition(c,i,o.to.x,c.to))),("content"==l||"both"==l)&&o.from.y!=o.to.y&&(d=d.concat(g),c.from=a.effects.setTransition(c,g,o.from.y,c.from),c.to=a.effects.setTransition(c,g,o.to.y,c.to)),a.effects.save(c,k?d:e),c.show(),a.effects.createWrapper(c),c.css("overflow","hidden").css(c.from),("content"==l||"both"==l)&&(h=h.concat(["marginTop","marginBottom"]).concat(g),i=i.concat(["marginLeft","marginRight"]),f=d.concat(h).concat(i),c.find("*[width]").each(function(){child=a(this),k&&a.effects.save(child,f);var c={height:child.height(),width:child.width()};child.from={height:c.height*o.from.y,width:c.width*o.from.x},child.to={height:c.height*o.to.y,width:c.width*o.to.x},o.from.y!=o.to.y&&(child.from=a.effects.setTransition(child,h,o.from.y,child.from),child.to=a.effects.setTransition(child,h,o.to.y,child.to)),o.from.x!=o.to.x&&(child.from=a.effects.setTransition(child,i,o.from.x,child.from),child.to=a.effects.setTransition(child,i,o.to.x,child.to)),child.css(child.from),child.animate(child.to,b.duration,b.options.easing,function(){k&&a.effects.restore(child,f)})})),c.animate(c.to,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){0===c.to.opacity&&c.css("opacity",c.from.opacity),"hide"==j&&c.hide(),a.effects.restore(c,k?d:e),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}}(jQuery),function(a){a.effects.shake=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"];a.effects.setMode(c,b.options.mode||"effect");var e=b.options.direction||"left",f=b.options.distance||20,g=b.options.times||3,h=b.duration||b.options.duration||140;a.effects.save(c,d),c.show(),a.effects.createWrapper(c);var i="up"==e||"down"==e?"top":"left",j="up"==e||"left"==e?"pos":"neg";e={};var k={},l={};for(e[i]=("pos"==j?"-=":"+=")+f,k[i]=("pos"==j?"+=":"-=")+2*f,l[i]=("pos"==j?"-=":"+=")+2*f,c.animate(e,h,b.options.easing),f=1;g>f;f++)c.animate(k,h,b.options.easing).animate(l,h,b.options.easing);c.animate(k,h,b.options.easing).animate(e,h/2,b.options.easing,function(){a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments)}),c.queue("fx",function(){c.dequeue()}),c.dequeue()})}}(jQuery),function(a){a.effects.slide=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"show"),f=b.options.direction||"left";a.effects.save(c,d),c.show(),a.effects.createWrapper(c).css({overflow:"hidden"});var g="up"==f||"down"==f?"top":"left";f="up"==f||"left"==f?"pos":"neg";var h=b.options.distance||("top"==g?c.outerHeight({margin:!0}):c.outerWidth({margin:!0}));"show"==e&&c.css(g,"pos"==f?isNaN(h)?"-"+h:-h:h);var i={};i[g]=("show"==e?"pos"==f?"+=":"-=":"pos"==f?"-=":"+=")+h,c.animate(i,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){"hide"==e&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}}(jQuery),function(a){a.effects.transfer=function(b){return this.queue(function(){var c=a(this),d=a(b.options.to),e=d.offset();d={top:e.top,left:e.left,height:d.innerHeight(),width:d.innerWidth()},e=c.offset();var f=a('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(b.options.className).css({top:e.top,left:e.left,height:c.innerHeight(),width:c.innerWidth(),position:"absolute"}).animate(d,b.duration,b.options.easing,function(){f.remove(),b.callback&&b.callback.apply(c[0],arguments),c.dequeue()})})}}(jQuery),function(a){var b,c=[],d=function(){for(var d=0;d<c.length;d++)if(a(c[d][0])[0]&&(c[d][2]||a(c[d][0]).next()[0]||a.isReady)){try{c[d][1].apply(a(c[d][0]).eq(0))}catch(e){"undefined"!=typeof console&&console.log(e)}c.splice(d,1),d--}(!c.length||a.isReady)&&(b=clearInterval(b))};a.fn.available=function(a,e){return e=e||!1,c.push([this.selector,a,e]),b||(b=setInterval(d,1)),this}}(jQuery),function(a){a.fn.fitText=function(b,c){var d={minFontSize:Number.NEGATIVE_INFINITY,maxFontSize:Number.POSITIVE_INFINITY};return this.each(function(){var e=a(this),f=b||1;c&&a.extend(d,c);var g=function(){e.css("font-size",Math.max(Math.min(e.width()/(10*f),parseFloat(d.maxFontSize)),parseFloat(d.minFontSize)))};g(),a(window).resize(g)})}}(jQuery),jQuery.fn.autoSize=function(){return this.each(function(){var a=this.scrollHeight,b=function(){c(this)},c=function(b){var c=b.scrollHeight;c!==a&&(b.style.height=c+"px",a=c)};this.style.overflow="hidden",this.onkeydown=b,this.onfocus=b,this.onblur=b,this.onchange=b})},function(a){a.fn.numeric=function(b,c){"boolean"==typeof b&&(b={decimal:b}),b=b||{},"undefined"==typeof b.negative&&(b.negative=!0);var d=b.decimal===!1?"":b.decimal||".",e=b.negative===!0?!0:!1,c="function"==typeof c?c:function(){};return this.data("numeric.decimal",d).data("numeric.negative",e).data("numeric.callback",c).keypress(a.fn.numeric.keypress).keyup(a.fn.numeric.keyup).blur(a.fn.numeric.blur)},a.fn.numeric.keypress=function(b){var c=a.data(this,"numeric.decimal"),d=a.data(this,"numeric.negative"),e=b.charCode?b.charCode:b.keyCode?b.keyCode:0;if(13==e&&"input"==this.nodeName.toLowerCase())return!0;if(13==e)return!1;var f=!1;if(b.ctrlKey&&97==e||b.ctrlKey&&65==e)return!0;if(b.ctrlKey&&120==e||b.ctrlKey&&88==e)return!0;if(b.ctrlKey&&99==e||b.ctrlKey&&67==e)return!0;if(b.ctrlKey&&122==e||b.ctrlKey&&90==e)return!0;if(b.ctrlKey&&118==e||b.ctrlKey&&86==e||b.shiftKey&&45==e)return!0;if(48>e||e>57){if(0!=this.value.indexOf("-")&&d&&45==e&&(0==this.value.length||0==a.fn.getSelectionStart(this)))return!0;c&&e==c.charCodeAt(0)&&-1!=this.value.indexOf(c)&&(f=!1),8!=e&&9!=e&&13!=e&&35!=e&&36!=e&&37!=e&&39!=e&&46!=e?f=!1:"undefined"!=typeof b.charCode&&(b.keyCode==b.which&&0!=b.which?(f=!0,46==b.which&&(f=!1)):0!=b.keyCode&&0==b.charCode&&0==b.which&&(f=!0)),c&&e==c.charCodeAt(0)&&(f=-1==this.value.indexOf(c)?!0:!1)}else f=!0;return f},a.fn.numeric.keyup=function(){var b=this.value;if(b.length>0){var c=a.fn.getSelectionStart(this),d=a.data(this,"numeric.decimal"),e=a.data(this,"numeric.negative");if(""!=d){var f=b.indexOf(d);0==f&&(this.value="0"+b),1==f&&"-"==b.charAt(0)&&(this.value="-0"+b.substring(1)),b=this.value}for(var g=[0,1,2,3,4,5,6,7,8,9,"-",d],h=b.length,i=h-1;i>=0;i--){var j=b.charAt(i);0!=i&&"-"==j?b=b.substring(0,i)+b.substring(i+1):0!=i||e||"-"!=j||(b=b.substring(1));for(var k=!1,l=0;l<g.length;l++)if(j==g[l]){k=!0;break}k&&" "!=j||(b=b.substring(0,i)+b.substring(i+1))}var m=b.indexOf(d);if(m>0)for(var i=h-1;i>m;i--){var j=b.charAt(i);j==d&&(b=b.substring(0,i)+b.substring(i+1))}this.value=b,a.fn.setSelection(this,c)}},a.fn.numeric.blur=function(){var b=a.data(this,"numeric.decimal"),c=a.data(this,"numeric.callback"),d=this.value;if(""!=d){var e=new RegExp("^\\d+$|\\d*"+b+"\\d+");e.exec(d)||c.apply(this)}},a.fn.removeNumeric=function(){return this.data("numeric.decimal",null).data("numeric.negative",null).data("numeric.callback",null).unbind("keypress",a.fn.numeric.keypress).unbind("blur",a.fn.numeric.blur)},a.fn.getSelectionStart=function(a){if(a.createTextRange){var b=document.selection.createRange().duplicate();return b.moveEnd("character",a.value.length),""==b.text?a.value.length:a.value.lastIndexOf(b.text)}return a.selectionStart},a.fn.setSelection=function(a,b){if("number"==typeof b&&(b=[b,b]),b&&b.constructor==Array&&2==b.length)if(a.createTextRange){var c=a.createTextRange();c.collapse(!0),c.moveStart("character",b[0]),c.moveEnd("character",b[1]),c.select()}else a.setSelectionRange&&(a.focus(),a.setSelectionRange(b[0],b[1]))}}(jQuery),function(a){var b,c,d="0.4.2",e="hasOwnProperty",f=/[\.\/]/,g="*",h=function(){},i=function(a,b){return a-b},j={n:{}},k=function(a,d){a=String(a);var e,f=c,g=Array.prototype.slice.call(arguments,2),h=k.listeners(a),j=0,l=[],m={},n=[],o=b;b=a,c=0;for(var p=0,q=h.length;q>p;p++)"zIndex"in h[p]&&(l.push(h[p].zIndex),h[p].zIndex<0&&(m[h[p].zIndex]=h[p]));for(l.sort(i);l[j]<0;)if(e=m[l[j++]],n.push(e.apply(d,g)),c)return c=f,n;for(p=0;q>p;p++)if(e=h[p],"zIndex"in e)if(e.zIndex==l[j]){if(n.push(e.apply(d,g)),c)break;do if(j++,e=m[l[j]],e&&n.push(e.apply(d,g)),c)break;while(e)}else m[e.zIndex]=e;else if(n.push(e.apply(d,g)),c)break;return c=f,b=o,n.length?n:null};k._events=j,k.listeners=function(a){var b,c,d,e,h,i,k,l,m=a.split(f),n=j,o=[n],p=[];for(e=0,h=m.length;h>e;e++){for(l=[],i=0,k=o.length;k>i;i++)for(n=o[i].n,c=[n[m[e]],n[g]],d=2;d--;)b=c[d],b&&(l.push(b),p=p.concat(b.f||[]));o=l}return p},k.on=function(a,b){if(a=String(a),"function"!=typeof b)return function(){};for(var c=a.split(f),d=j,e=0,g=c.length;g>e;e++)d=d.n,d=d.hasOwnProperty(c[e])&&d[c[e]]||(d[c[e]]={n:{}});for(d.f=d.f||[],e=0,g=d.f.length;g>e;e++)if(d.f[e]==b)return h;return d.f.push(b),function(a){+a==+a&&(b.zIndex=+a)}},k.f=function(a){var b=[].slice.call(arguments,1);return function(){k.apply(null,[a,null].concat(b).concat([].slice.call(arguments,0)))}},k.stop=function(){c=1},k.nt=function(a){return a?new RegExp("(?:\\.|\\/|^)"+a+"(?:\\.|\\/|$)").test(b):b},k.nts=function(){return b.split(f)},k.off=k.unbind=function(a,b){if(!a)return void(k._events=j={n:{}});var c,d,h,i,l,m,n,o=a.split(f),p=[j];for(i=0,l=o.length;l>i;i++)for(m=0;m<p.length;m+=h.length-2){if(h=[m,1],c=p[m].n,o[i]!=g)c[o[i]]&&h.push(c[o[i]]);else for(d in c)c[e](d)&&h.push(c[d]);p.splice.apply(p,h)}for(i=0,l=p.length;l>i;i++)for(c=p[i];c.n;){if(b){if(c.f){for(m=0,n=c.f.length;n>m;m++)if(c.f[m]==b){c.f.splice(m,1);break}!c.f.length&&delete c.f}for(d in c.n)if(c.n[e](d)&&c.n[d].f){var q=c.n[d].f;for(m=0,n=q.length;n>m;m++)if(q[m]==b){q.splice(m,1);break}!q.length&&delete c.n[d].f}}else{delete c.f;for(d in c.n)c.n[e](d)&&c.n[d].f&&delete c.n[d].f}c=c.n}},k.once=function(a,b){var c=function(){return k.unbind(a,c),b.apply(this,arguments)};return k.on(a,c)},k.version=d,k.toString=function(){return"You are running Eve "+d},"undefined"!=typeof module&&module.exports?module.exports=k:"undefined"!=typeof define?define("eve",[],function(){return k}):a.eve=k}(this),function(){function a(b){if(a.is(b,"function"))return s?b():eve.on("raphael.DOMload",b);if(a.is(b,T))return a._engine.create[B](a,b.splice(0,3+a.is(b[0],R))).add(b);var c=Array.prototype.slice.call(arguments,0);if(a.is(c[c.length-1],"function")){var d=c.pop();return s?d.call(a._engine.create[B](a,c)):eve.on("raphael.DOMload",function(){d.call(a._engine.create[B](a,c))})}return a._engine.create[B](a,arguments)}function b(a){if(Object(a)!==a)return a;var c=new a.constructor;for(var d in a)a[x](d)&&(c[d]=b(a[d]));return c}function c(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return a.push(a.splice(c,1)[0])}function d(a,b,d){function e(){var f=Array.prototype.slice.call(arguments,0),g=f.join("␀"),h=e.cache=e.cache||{},i=e.count=e.count||[];return h[x](g)?(c(i,g),d?d(h[g]):h[g]):(i.length>=1e3&&delete h[i.shift()],i.push(g),h[g]=a[B](b,f),d?d(h[g]):h[g])}return e}function e(){return this.hex}function f(a,b){for(var c=[],d=0,e=a.length;e-2*!b>d;d+=2){var f=[{x:+a[d-2],y:+a[d-1]},{x:+a[d],y:+a[d+1]},{x:+a[d+2],y:+a[d+3]},{x:+a[d+4],y:+a[d+5]}];b?d?e-4==d?f[3]={x:+a[0],y:+a[1]}:e-2==d&&(f[2]={x:+a[0],y:+a[1]},f[3]={x:+a[2],y:+a[3]}):f[0]={x:+a[e-2],y:+a[e-1]}:e-4==d?f[3]=f[2]:d||(f[0]={x:+a[d],y:+a[d+1]}),c.push(["C",(-f[0].x+6*f[1].x+f[2].x)/6,(-f[0].y+6*f[1].y+f[2].y)/6,(f[1].x+6*f[2].x-f[3].x)/6,(f[1].y+6*f[2].y-f[3].y)/6,f[2].x,f[2].y])}return c}function g(a,b,c,d,e){var f=-3*b+9*c-9*d+3*e,g=a*f+6*b-12*c+6*d;return a*g-3*b+3*c}function h(a,b,c,d,e,f,h,i,j){null==j&&(j=1),j=j>1?1:0>j?0:j;for(var k=j/2,l=12,m=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],n=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],o=0,p=0;l>p;p++){var q=k*m[p]+k,r=g(q,a,c,e,h),s=g(q,b,d,f,i),t=r*r+s*s;o+=n[p]*L.sqrt(t)}return k*o}function i(a,b,c,d,e,f,g,i,j){if(!(0>j||h(a,b,c,d,e,f,g,i)<j)){var k,l=1,m=l/2,n=l-m,o=.01;for(k=h(a,b,c,d,e,f,g,i,n);O(k-j)>o;)m/=2,n+=(j>k?1:-1)*m,k=h(a,b,c,d,e,f,g,i,n);return n}}function j(a,b,c,d,e,f,g,h){if(!(M(a,c)<N(e,g)||N(a,c)>M(e,g)||M(b,d)<N(f,h)||N(b,d)>M(f,h))){var i=(a*d-b*c)*(e-g)-(a-c)*(e*h-f*g),j=(a*d-b*c)*(f-h)-(b-d)*(e*h-f*g),k=(a-c)*(f-h)-(b-d)*(e-g);if(k){var l=i/k,m=j/k,n=+l.toFixed(2),o=+m.toFixed(2);if(!(n<+N(a,c).toFixed(2)||n>+M(a,c).toFixed(2)||n<+N(e,g).toFixed(2)||n>+M(e,g).toFixed(2)||o<+N(b,d).toFixed(2)||o>+M(b,d).toFixed(2)||o<+N(f,h).toFixed(2)||o>+M(f,h).toFixed(2)))return{x:l,y:m}}}}function k(b,c,d){var e=a.bezierBBox(b),f=a.bezierBBox(c);if(!a.isBBoxIntersect(e,f))return d?0:[];for(var g=h.apply(0,b),i=h.apply(0,c),k=~~(g/5),l=~~(i/5),m=[],n=[],o={},p=d?0:[],q=0;k+1>q;q++){var r=a.findDotsAtSegment.apply(a,b.concat(q/k));m.push({x:r.x,y:r.y,t:q/k})}for(q=0;l+1>q;q++)r=a.findDotsAtSegment.apply(a,c.concat(q/l)),n.push({x:r.x,y:r.y,t:q/l});for(q=0;k>q;q++)for(var s=0;l>s;s++){var t=m[q],u=m[q+1],v=n[s],w=n[s+1],x=O(u.x-t.x)<.001?"y":"x",y=O(w.x-v.x)<.001?"y":"x",z=j(t.x,t.y,u.x,u.y,v.x,v.y,w.x,w.y);if(z){if(o[z.x.toFixed(4)]==z.y.toFixed(4))continue;o[z.x.toFixed(4)]=z.y.toFixed(4);var A=t.t+O((z[x]-t[x])/(u[x]-t[x]))*(u.t-t.t),B=v.t+O((z[y]-v[y])/(w[y]-v[y]))*(w.t-v.t);A>=0&&1>=A&&B>=0&&1>=B&&(d?p++:p.push({x:z.x,y:z.y,t1:A,t2:B}))}}return p}function l(b,c,d){b=a._path2curve(b),c=a._path2curve(c);for(var e,f,g,h,i,j,l,m,n,o,p=d?0:[],q=0,r=b.length;r>q;q++){var s=b[q];if("M"==s[0])e=i=s[1],f=j=s[2];else{"C"==s[0]?(n=[e,f].concat(s.slice(1)),e=n[6],f=n[7]):(n=[e,f,e,f,i,j,i,j],e=i,f=j);for(var t=0,u=c.length;u>t;t++){var v=c[t];if("M"==v[0])g=l=v[1],h=m=v[2];else{"C"==v[0]?(o=[g,h].concat(v.slice(1)),g=o[6],h=o[7]):(o=[g,h,g,h,l,m,l,m],g=l,h=m);var w=k(n,o,d);if(d)p+=w;else{for(var x=0,y=w.length;y>x;x++)w[x].segment1=q,w[x].segment2=t,w[x].bez1=n,w[x].bez2=o;p=p.concat(w)}}}}}return p}function m(a,b,c,d,e,f){null!=a?(this.a=+a,this.b=+b,this.c=+c,this.d=+d,this.e=+e,this.f=+f):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}function n(){return this.x+F+this.y+F+this.width+" × "+this.height}function o(a,b,c,d,e,f){function g(a){return((l*a+k)*a+j)*a}function h(a,b){var c=i(a,b);return((o*c+n)*c+m)*c}function i(a,b){var c,d,e,f,h,i;for(e=a,i=0;8>i;i++){if(f=g(e)-a,O(f)<b)return e;if(h=(3*l*e+2*k)*e+j,O(h)<1e-6)break;e-=f/h}if(c=0,d=1,e=a,c>e)return c;if(e>d)return d;for(;d>c;){if(f=g(e),O(f-a)<b)return e;a>f?c=e:d=e,e=(d-c)/2+c}return e}var j=3*b,k=3*(d-b)-j,l=1-j-k,m=3*c,n=3*(e-c)-m,o=1-m-n;return h(a,1/(200*f))}function p(a,b){var c=[],d={};if(this.ms=b,this.times=1,a){for(var e in a)a[x](e)&&(d[Z(e)]=a[e],c.push(Z(e)));c.sort(jb)}this.anim=d,this.top=c[c.length-1],this.percents=c}function q(b,c,d,e,f,g){d=Z(d);var h,i,j,k,l,n,p=b.ms,q={},r={},s={};if(e)for(v=0,w=fc.length;w>v;v++){var t=fc[v];if(t.el.id==c.id&&t.anim==b){t.percent!=d?(fc.splice(v,1),j=1):i=t,c.attr(t.totalOrigin);break}}else e=+r;for(var v=0,w=b.percents.length;w>v;v++){if(b.percents[v]==d||b.percents[v]>e*b.top){d=b.percents[v],l=b.percents[v-1]||0,p=p/b.top*(d-l),k=b.percents[v+1],h=b.anim[d];break}e&&c.attr(b.anim[b.percents[v]])}if(h){if(i)i.initstatus=e,i.start=new Date-i.ms*e;else{for(var y in h)if(h[x](y)&&(bb[x](y)||c.paper.customAttributes[x](y)))switch(q[y]=c.attr(y),null==q[y]&&(q[y]=ab[y]),r[y]=h[y],bb[y]){case R:s[y]=(r[y]-q[y])/p;break;case"colour":q[y]=a.getRGB(q[y]);var z=a.getRGB(r[y]);s[y]={r:(z.r-q[y].r)/p,g:(z.g-q[y].g)/p,b:(z.b-q[y].b)/p};break;case"path":var A=Ib(q[y],r[y]),B=A[1];for(q[y]=A[0],s[y]=[],v=0,w=q[y].length;w>v;v++){s[y][v]=[0];for(var D=1,E=q[y][v].length;E>D;D++)s[y][v][D]=(B[v][D]-q[y][v][D])/p}break;case"transform":var F=c._,I=Nb(F[y],r[y]);if(I)for(q[y]=I.from,r[y]=I.to,s[y]=[],s[y].real=!0,v=0,w=q[y].length;w>v;v++)for(s[y][v]=[q[y][v][0]],D=1,E=q[y][v].length;E>D;D++)s[y][v][D]=(r[y][v][D]-q[y][v][D])/p;else{var J=c.matrix||new m,K={_:{transform:F.transform},getBBox:function(){return c.getBBox(1)}};q[y]=[J.a,J.b,J.c,J.d,J.e,J.f],Lb(K,r[y]),r[y]=K._.transform,s[y]=[(K.matrix.a-J.a)/p,(K.matrix.b-J.b)/p,(K.matrix.c-J.c)/p,(K.matrix.d-J.d)/p,(K.matrix.e-J.e)/p,(K.matrix.f-J.f)/p]}break;case"csv":var L=G(h[y])[H](u),M=G(q[y])[H](u);if("clip-rect"==y)for(q[y]=M,s[y]=[],v=M.length;v--;)s[y][v]=(L[v]-q[y][v])/p;r[y]=L;break;default:for(L=[][C](h[y]),M=[][C](q[y]),s[y]=[],v=c.paper.customAttributes[y].length;v--;)s[y][v]=((L[v]||0)-(M[v]||0))/p}var N=h.easing,O=a.easing_formulas[N];if(!O)if(O=G(N).match(X),O&&5==O.length){var P=O;O=function(a){return o(a,+P[1],+P[2],+P[3],+P[4],p)}}else O=lb;if(n=h.start||b.start||+new Date,t={anim:b,percent:d,timestamp:n,start:n+(b.del||0),status:0,initstatus:e||0,stop:!1,ms:p,easing:O,from:q,diff:s,to:r,el:c,callback:h.callback,prev:l,next:k,repeat:g||b.times,origin:c.attr(),totalOrigin:f},fc.push(t),e&&!i&&!j&&(t.stop=!0,t.start=new Date-p*e,1==fc.length))return hc();j&&(t.start=new Date-t.ms*e),1==fc.length&&gc(hc)}eve("raphael.anim.start."+c.id,c,b)}}function r(a){for(var b=0;b<fc.length;b++)fc[b].el.paper==a&&fc.splice(b--,1)}a.version="2.1.0",a.eve=eve;var s,t,u=/[, ]+/,v={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},w=/\{(\d+)\}/g,x="hasOwnProperty",y={doc:document,win:window},z={was:Object.prototype[x].call(y.win,"Raphael"),is:y.win.Raphael},A=function(){this.ca=this.customAttributes={}},B="apply",C="concat",D="createTouch"in y.doc,E="",F=" ",G=String,H="split",I="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[H](F),J={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},K=G.prototype.toLowerCase,L=Math,M=L.max,N=L.min,O=L.abs,P=L.pow,Q=L.PI,R="number",S="string",T="array",U=Object.prototype.toString,V=(a._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|°|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|°|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),W={NaN:1,Infinity:1,"-Infinity":1},X=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,Y=L.round,Z=parseFloat,$=parseInt,_=G.prototype.toUpperCase,ab=a._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},bb=a._availableAnimAttrs={blur:R,"clip-rect":"csv",cx:R,cy:R,fill:"colour","fill-opacity":R,"font-size":R,height:R,opacity:R,path:"path",r:R,rx:R,ry:R,stroke:"colour","stroke-opacity":R,"stroke-width":R,transform:"transform",width:R,x:R,y:R},cb=/[	\x0a\x0d   ᠎             　\u2028\u2029]*,[	\x0a\x0d   ᠎             　\u2028\u2029]*/,db={hs:1,rg:1},eb=/,?([achlmqrstvxz]),?/gi,fb=/([achlmrqstvz])[	\x0a\x0d   ᠎             　\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[	\x0a\x0d   ᠎             　\u2028\u2029]*,?[	\x0a\x0d   ᠎             　\u2028\u2029]*)+)/gi,gb=/([rstm])[	\x0a\x0d   ᠎             　\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[	\x0a\x0d   ᠎             　\u2028\u2029]*,?[	\x0a\x0d   ᠎             　\u2028\u2029]*)+)/gi,hb=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[	\x0a\x0d   ᠎             　\u2028\u2029]*,?[	\x0a\x0d   ᠎             　\u2028\u2029]*/gi,ib=(a._radial_gradient=/^r(?:\(([^,]+?)[	\x0a\x0d   ᠎             　\u2028\u2029]*,[	\x0a\x0d   ᠎             　\u2028\u2029]*([^\)]+?)\))?/,{}),jb=function(a,b){return Z(a)-Z(b)},kb=function(){},lb=function(a){return a},mb=a._rectPath=function(a,b,c,d,e){return e?[["M",a+e,b],["l",c-2*e,0],["a",e,e,0,0,1,e,e],["l",0,d-2*e],["a",e,e,0,0,1,-e,e],["l",2*e-c,0],["a",e,e,0,0,1,-e,-e],["l",0,2*e-d],["a",e,e,0,0,1,e,-e],["z"]]:[["M",a,b],["l",c,0],["l",0,d],["l",-c,0],["z"]]},nb=function(a,b,c,d){return null==d&&(d=c),[["M",a,b],["m",0,-d],["a",c,d,0,1,1,0,2*d],["a",c,d,0,1,1,0,-2*d],["z"]]},ob=a._getPath={path:function(a){return a.attr("path")},circle:function(a){var b=a.attrs;return nb(b.cx,b.cy,b.r)},ellipse:function(a){var b=a.attrs;return nb(b.cx,b.cy,b.rx,b.ry)},rect:function(a){var b=a.attrs;return mb(b.x,b.y,b.width,b.height,b.r)},image:function(a){var b=a.attrs;return mb(b.x,b.y,b.width,b.height)},text:function(a){var b=a._getBBox();return mb(b.x,b.y,b.width,b.height)},set:function(a){var b=a._getBBox();return mb(b.x,b.y,b.width,b.height)}},pb=a.mapPath=function(a,b){if(!b)return a;var c,d,e,f,g,h,i;for(a=Ib(a),e=0,g=a.length;g>e;e++)for(i=a[e],f=1,h=i.length;h>f;f+=2)c=b.x(i[f],i[f+1]),d=b.y(i[f],i[f+1]),i[f]=c,i[f+1]=d;return a};if(a._g=y,a.type=y.win.SVGAngle||y.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML","VML"==a.type){var qb,rb=y.doc.createElement("div");if(rb.innerHTML='<v:shape adj="1"/>',qb=rb.firstChild,qb.style.behavior="url(#default#VML)",!qb||"object"!=typeof qb.adj)return a.type=E;rb=null}a.svg=!(a.vml="VML"==a.type),a._Paper=A,a.fn=t=A.prototype=a.prototype,a._id=0,a._oid=0,a.is=function(a,b){return b=K.call(b),"finite"==b?!W[x](+a):"array"==b?a instanceof Array:"null"==b&&null===a||b==typeof a&&null!==a||"object"==b&&a===Object(a)||"array"==b&&Array.isArray&&Array.isArray(a)||U.call(a).slice(8,-1).toLowerCase()==b},a.angle=function(b,c,d,e,f,g){if(null==f){var h=b-d,i=c-e;return h||i?(180+180*L.atan2(-i,-h)/Q+360)%360:0}return a.angle(b,c,f,g)-a.angle(d,e,f,g)},a.rad=function(a){return a%360*Q/180},a.deg=function(a){return 180*a/Q%360},a.snapTo=function(b,c,d){if(d=a.is(d,"finite")?d:10,a.is(b,T)){for(var e=b.length;e--;)if(O(b[e]-c)<=d)return b[e]}else{b=+b;var f=c%b;if(d>f)return c-f;if(f>b-d)return c-f+b}return c};a.createUUID=function(a,b){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(a,b).toUpperCase()}}(/[xy]/g,function(a){var b=16*L.random()|0,c="x"==a?b:3&b|8;return c.toString(16)});a.setWindow=function(b){eve("raphael.setWindow",a,y.win,b),y.win=b,y.doc=y.win.document,a._engine.initWin&&a._engine.initWin(y.win)};var sb=function(b){if(a.vml){var c,e=/^\s+|\s+$/g;try{var f=new ActiveXObject("htmlfile");f.write("<body>"),f.close(),c=f.body}catch(g){c=createPopup().document.body}var h=c.createTextRange();sb=d(function(a){try{c.style.color=G(a).replace(e,E);var b=h.queryCommandValue("ForeColor");return b=(255&b)<<16|65280&b|(16711680&b)>>>16,"#"+("000000"+b.toString(16)).slice(-6)}catch(d){return"none"}})}else{var i=y.doc.createElement("i");i.title="Raphaël Colour Picker",i.style.display="none",y.doc.body.appendChild(i),sb=d(function(a){return i.style.color=a,y.doc.defaultView.getComputedStyle(i,E).getPropertyValue("color")})}return sb(b)},tb=function(){return"hsb("+[this.h,this.s,this.b]+")"},ub=function(){return"hsl("+[this.h,this.s,this.l]+")"},vb=function(){return this.hex},wb=function(b,c,d){if(null==c&&a.is(b,"object")&&"r"in b&&"g"in b&&"b"in b&&(d=b.b,c=b.g,b=b.r),null==c&&a.is(b,S)){var e=a.getRGB(b);b=e.r,c=e.g,d=e.b}return(b>1||c>1||d>1)&&(b/=255,c/=255,d/=255),[b,c,d]},xb=function(b,c,d,e){b*=255,c*=255,d*=255;var f={r:b,g:c,b:d,hex:a.rgb(b,c,d),toString:vb};return a.is(e,"finite")&&(f.opacity=e),f};a.color=function(b){var c;return a.is(b,"object")&&"h"in b&&"s"in b&&"b"in b?(c=a.hsb2rgb(b),b.r=c.r,b.g=c.g,b.b=c.b,b.hex=c.hex):a.is(b,"object")&&"h"in b&&"s"in b&&"l"in b?(c=a.hsl2rgb(b),b.r=c.r,b.g=c.g,b.b=c.b,b.hex=c.hex):(a.is(b,"string")&&(b=a.getRGB(b)),a.is(b,"object")&&"r"in b&&"g"in b&&"b"in b?(c=a.rgb2hsl(b),b.h=c.h,b.s=c.s,b.l=c.l,c=a.rgb2hsb(b),b.v=c.b):(b={hex:"none"},b.r=b.g=b.b=b.h=b.s=b.v=b.l=-1)),b.toString=vb,b},a.hsb2rgb=function(a,b,c,d){this.is(a,"object")&&"h"in a&&"s"in a&&"b"in a&&(c=a.b,b=a.s,a=a.h,d=a.o),a*=360;var e,f,g,h,i;return a=a%360/60,i=c*b,h=i*(1-O(a%2-1)),e=f=g=c-i,a=~~a,e+=[i,h,0,0,h,i][a],f+=[h,i,i,h,0,0][a],g+=[0,0,h,i,i,h][a],xb(e,f,g,d)},a.hsl2rgb=function(a,b,c,d){this.is(a,"object")&&"h"in a&&"s"in a&&"l"in a&&(c=a.l,b=a.s,a=a.h),(a>1||b>1||c>1)&&(a/=360,b/=100,c/=100),a*=360;var e,f,g,h,i;return a=a%360/60,i=2*b*(.5>c?c:1-c),h=i*(1-O(a%2-1)),e=f=g=c-i/2,a=~~a,e+=[i,h,0,0,h,i][a],f+=[h,i,i,h,0,0][a],g+=[0,0,h,i,i,h][a],xb(e,f,g,d)},a.rgb2hsb=function(a,b,c){c=wb(a,b,c),a=c[0],b=c[1],c=c[2];var d,e,f,g;return f=M(a,b,c),g=f-N(a,b,c),d=0==g?null:f==a?(b-c)/g:f==b?(c-a)/g+2:(a-b)/g+4,d=(d+360)%6*60/360,e=0==g?0:g/f,{h:d,s:e,b:f,toString:tb}},a.rgb2hsl=function(a,b,c){c=wb(a,b,c),a=c[0],b=c[1],c=c[2];var d,e,f,g,h,i;return g=M(a,b,c),h=N(a,b,c),i=g-h,d=0==i?null:g==a?(b-c)/i:g==b?(c-a)/i+2:(a-b)/i+4,d=(d+360)%6*60/360,f=(g+h)/2,e=0==i?0:.5>f?i/(2*f):i/(2-2*f),{h:d,s:e,l:f,toString:ub}},a._path2string=function(){return this.join(",").replace(eb,"$1")};a._preload=function(a,b){var c=y.doc.createElement("img");c.style.cssText="position:absolute;left:-9999em;top:-9999em",c.onload=function(){b.call(this),this.onload=null,y.doc.body.removeChild(this)},c.onerror=function(){y.doc.body.removeChild(this)},y.doc.body.appendChild(c),c.src=a};a.getRGB=d(function(b){if(!b||(b=G(b)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:e};if("none"==b)return{r:-1,g:-1,b:-1,hex:"none",toString:e};!(db[x](b.toLowerCase().substring(0,2))||"#"==b.charAt())&&(b=sb(b));var c,d,f,g,h,i,j=b.match(V);return j?(j[2]&&(f=$(j[2].substring(5),16),d=$(j[2].substring(3,5),16),c=$(j[2].substring(1,3),16)),j[3]&&(f=$((h=j[3].charAt(3))+h,16),d=$((h=j[3].charAt(2))+h,16),c=$((h=j[3].charAt(1))+h,16)),j[4]&&(i=j[4][H](cb),c=Z(i[0]),"%"==i[0].slice(-1)&&(c*=2.55),d=Z(i[1]),"%"==i[1].slice(-1)&&(d*=2.55),f=Z(i[2]),"%"==i[2].slice(-1)&&(f*=2.55),"rgba"==j[1].toLowerCase().slice(0,4)&&(g=Z(i[3])),i[3]&&"%"==i[3].slice(-1)&&(g/=100)),j[5]?(i=j[5][H](cb),c=Z(i[0]),"%"==i[0].slice(-1)&&(c*=2.55),d=Z(i[1]),"%"==i[1].slice(-1)&&(d*=2.55),f=Z(i[2]),"%"==i[2].slice(-1)&&(f*=2.55),("deg"==i[0].slice(-3)||"°"==i[0].slice(-1))&&(c/=360),"hsba"==j[1].toLowerCase().slice(0,4)&&(g=Z(i[3])),i[3]&&"%"==i[3].slice(-1)&&(g/=100),a.hsb2rgb(c,d,f,g)):j[6]?(i=j[6][H](cb),c=Z(i[0]),"%"==i[0].slice(-1)&&(c*=2.55),d=Z(i[1]),"%"==i[1].slice(-1)&&(d*=2.55),f=Z(i[2]),"%"==i[2].slice(-1)&&(f*=2.55),("deg"==i[0].slice(-3)||"°"==i[0].slice(-1))&&(c/=360),"hsla"==j[1].toLowerCase().slice(0,4)&&(g=Z(i[3])),i[3]&&"%"==i[3].slice(-1)&&(g/=100),a.hsl2rgb(c,d,f,g)):(j={r:c,g:d,b:f,toString:e},j.hex="#"+(16777216|f|d<<8|c<<16).toString(16).slice(1),a.is(g,"finite")&&(j.opacity=g),j)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:e}},a),a.hsb=d(function(b,c,d){return a.hsb2rgb(b,c,d).hex}),a.hsl=d(function(b,c,d){return a.hsl2rgb(b,c,d).hex}),a.rgb=d(function(a,b,c){return"#"+(16777216|c|b<<8|a<<16).toString(16).slice(1)}),a.getColor=function(a){var b=this.getColor.start=this.getColor.start||{h:0,s:1,b:a||.75},c=this.hsb2rgb(b.h,b.s,b.b);return b.h+=.075,b.h>1&&(b.h=0,b.s-=.2,b.s<=0&&(this.getColor.start={h:0,s:1,b:b.b})),c.hex},a.getColor.reset=function(){delete this.start},a.parsePathString=function(b){if(!b)return null;var c=yb(b);if(c.arr)return Ab(c.arr);var d={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},e=[];return a.is(b,T)&&a.is(b[0],T)&&(e=Ab(b)),e.length||G(b).replace(fb,function(a,b,c){var f=[],g=b.toLowerCase();if(c.replace(hb,function(a,b){b&&f.push(+b)}),"m"==g&&f.length>2&&(e.push([b][C](f.splice(0,2))),g="l",b="m"==b?"l":"L"),"r"==g)e.push([b][C](f));else for(;f.length>=d[g]&&(e.push([b][C](f.splice(0,d[g]))),d[g]););}),e.toString=a._path2string,c.arr=Ab(e),e},a.parseTransformString=d(function(b){if(!b)return null;var c=[];return a.is(b,T)&&a.is(b[0],T)&&(c=Ab(b)),c.length||G(b).replace(gb,function(a,b,d){{var e=[];K.call(b)}d.replace(hb,function(a,b){b&&e.push(+b)}),c.push([b][C](e))}),c.toString=a._path2string,c});var yb=function(a){var b=yb.ps=yb.ps||{};return b[a]?b[a].sleep=100:b[a]={sleep:100},setTimeout(function(){for(var c in b)b[x](c)&&c!=a&&(b[c].sleep--,!b[c].sleep&&delete b[c])}),b[a]};a.findDotsAtSegment=function(a,b,c,d,e,f,g,h,i){var j=1-i,k=P(j,3),l=P(j,2),m=i*i,n=m*i,o=k*a+3*l*i*c+3*j*i*i*e+n*g,p=k*b+3*l*i*d+3*j*i*i*f+n*h,q=a+2*i*(c-a)+m*(e-2*c+a),r=b+2*i*(d-b)+m*(f-2*d+b),s=c+2*i*(e-c)+m*(g-2*e+c),t=d+2*i*(f-d)+m*(h-2*f+d),u=j*a+i*c,v=j*b+i*d,w=j*e+i*g,x=j*f+i*h,y=90-180*L.atan2(q-s,r-t)/Q;return(q>s||t>r)&&(y+=180),{x:o,y:p,m:{x:q,y:r},n:{x:s,y:t},start:{x:u,y:v},end:{x:w,y:x},alpha:y}},a.bezierBBox=function(b,c,d,e,f,g,h,i){a.is(b,"array")||(b=[b,c,d,e,f,g,h,i]);var j=Hb.apply(null,b);return{x:j.min.x,y:j.min.y,x2:j.max.x,y2:j.max.y,width:j.max.x-j.min.x,height:j.max.y-j.min.y}},a.isPointInsideBBox=function(a,b,c){return b>=a.x&&b<=a.x2&&c>=a.y&&c<=a.y2},a.isBBoxIntersect=function(b,c){var d=a.isPointInsideBBox;return d(c,b.x,b.y)||d(c,b.x2,b.y)||d(c,b.x,b.y2)||d(c,b.x2,b.y2)||d(b,c.x,c.y)||d(b,c.x2,c.y)||d(b,c.x,c.y2)||d(b,c.x2,c.y2)||(b.x<c.x2&&b.x>c.x||c.x<b.x2&&c.x>b.x)&&(b.y<c.y2&&b.y>c.y||c.y<b.y2&&c.y>b.y)},a.pathIntersection=function(a,b){return l(a,b)},a.pathIntersectionNumber=function(a,b){return l(a,b,1)},a.isPointInsidePath=function(b,c,d){var e=a.pathBBox(b);return a.isPointInsideBBox(e,c,d)&&l(b,[["M",c,d],["H",e.x2+10]],1)%2==1},a._removedFactory=function(a){return function(){eve("raphael.log",null,"Raphaël: you are calling to method “"+a+"” of removed object",a)}};var zb=a.pathBBox=function(a){var c=yb(a);if(c.bbox)return b(c.bbox);if(!a)return{x:0,y:0,width:0,height:0,x2:0,y2:0};a=Ib(a);for(var d,e=0,f=0,g=[],h=[],i=0,j=a.length;j>i;i++)if(d=a[i],"M"==d[0])e=d[1],f=d[2],g.push(e),h.push(f);else{var k=Hb(e,f,d[1],d[2],d[3],d[4],d[5],d[6]);g=g[C](k.min.x,k.max.x),h=h[C](k.min.y,k.max.y),e=d[5],f=d[6]}var l=N[B](0,g),m=N[B](0,h),n=M[B](0,g),o=M[B](0,h),p={x:l,y:m,x2:n,y2:o,width:n-l,height:o-m};return c.bbox=b(p),p},Ab=function(c){var d=b(c);return d.toString=a._path2string,d},Bb=a._pathToRelative=function(b){var c=yb(b);if(c.rel)return Ab(c.rel);a.is(b,T)&&a.is(b&&b[0],T)||(b=a.parsePathString(b));var d=[],e=0,f=0,g=0,h=0,i=0;"M"==b[0][0]&&(e=b[0][1],f=b[0][2],g=e,h=f,i++,d.push(["M",e,f]));for(var j=i,k=b.length;k>j;j++){var l=d[j]=[],m=b[j];if(m[0]!=K.call(m[0]))switch(l[0]=K.call(m[0]),l[0]){case"a":l[1]=m[1],l[2]=m[2],l[3]=m[3],l[4]=m[4],l[5]=m[5],l[6]=+(m[6]-e).toFixed(3),l[7]=+(m[7]-f).toFixed(3);break;case"v":l[1]=+(m[1]-f).toFixed(3);break;case"m":g=m[1],h=m[2];default:for(var n=1,o=m.length;o>n;n++)l[n]=+(m[n]-(n%2?e:f)).toFixed(3)}else{l=d[j]=[],"m"==m[0]&&(g=m[1]+e,h=m[2]+f);for(var p=0,q=m.length;q>p;p++)d[j][p]=m[p]}var r=d[j].length;switch(d[j][0]){case"z":e=g,f=h;break;case"h":e+=+d[j][r-1];break;case"v":f+=+d[j][r-1];break;default:e+=+d[j][r-2],f+=+d[j][r-1]}}return d.toString=a._path2string,c.rel=Ab(d),d},Cb=a._pathToAbsolute=function(b){var c=yb(b);if(c.abs)return Ab(c.abs);if(a.is(b,T)&&a.is(b&&b[0],T)||(b=a.parsePathString(b)),!b||!b.length)return[["M",0,0]];var d=[],e=0,g=0,h=0,i=0,j=0;"M"==b[0][0]&&(e=+b[0][1],g=+b[0][2],h=e,i=g,j++,d[0]=["M",e,g]);for(var k,l,m=3==b.length&&"M"==b[0][0]&&"R"==b[1][0].toUpperCase()&&"Z"==b[2][0].toUpperCase(),n=j,o=b.length;o>n;n++){if(d.push(k=[]),l=b[n],l[0]!=_.call(l[0]))switch(k[0]=_.call(l[0]),k[0]){case"A":k[1]=l[1],k[2]=l[2],k[3]=l[3],k[4]=l[4],k[5]=l[5],k[6]=+(l[6]+e),k[7]=+(l[7]+g);break;case"V":k[1]=+l[1]+g;break;case"H":k[1]=+l[1]+e;break;case"R":for(var p=[e,g][C](l.slice(1)),q=2,r=p.length;r>q;q++)p[q]=+p[q]+e,p[++q]=+p[q]+g;d.pop(),d=d[C](f(p,m));break;
case"M":h=+l[1]+e,i=+l[2]+g;default:for(q=1,r=l.length;r>q;q++)k[q]=+l[q]+(q%2?e:g)}else if("R"==l[0])p=[e,g][C](l.slice(1)),d.pop(),d=d[C](f(p,m)),k=["R"][C](l.slice(-2));else for(var s=0,t=l.length;t>s;s++)k[s]=l[s];switch(k[0]){case"Z":e=h,g=i;break;case"H":e=k[1];break;case"V":g=k[1];break;case"M":h=k[k.length-2],i=k[k.length-1];default:e=k[k.length-2],g=k[k.length-1]}}return d.toString=a._path2string,c.abs=Ab(d),d},Db=function(a,b,c,d){return[a,b,c,d,c,d]},Eb=function(a,b,c,d,e,f){var g=1/3,h=2/3;return[g*a+h*c,g*b+h*d,g*e+h*c,g*f+h*d,e,f]},Fb=function(a,b,c,e,f,g,h,i,j,k){var l,m=120*Q/180,n=Q/180*(+f||0),o=[],p=d(function(a,b,c){var d=a*L.cos(c)-b*L.sin(c),e=a*L.sin(c)+b*L.cos(c);return{x:d,y:e}});if(k)y=k[0],z=k[1],w=k[2],x=k[3];else{l=p(a,b,-n),a=l.x,b=l.y,l=p(i,j,-n),i=l.x,j=l.y;var q=(L.cos(Q/180*f),L.sin(Q/180*f),(a-i)/2),r=(b-j)/2,s=q*q/(c*c)+r*r/(e*e);s>1&&(s=L.sqrt(s),c=s*c,e=s*e);var t=c*c,u=e*e,v=(g==h?-1:1)*L.sqrt(O((t*u-t*r*r-u*q*q)/(t*r*r+u*q*q))),w=v*c*r/e+(a+i)/2,x=v*-e*q/c+(b+j)/2,y=L.asin(((b-x)/e).toFixed(9)),z=L.asin(((j-x)/e).toFixed(9));y=w>a?Q-y:y,z=w>i?Q-z:z,0>y&&(y=2*Q+y),0>z&&(z=2*Q+z),h&&y>z&&(y-=2*Q),!h&&z>y&&(z-=2*Q)}var A=z-y;if(O(A)>m){var B=z,D=i,E=j;z=y+m*(h&&z>y?1:-1),i=w+c*L.cos(z),j=x+e*L.sin(z),o=Fb(i,j,c,e,f,0,h,D,E,[z,B,w,x])}A=z-y;var F=L.cos(y),G=L.sin(y),I=L.cos(z),J=L.sin(z),K=L.tan(A/4),M=4/3*c*K,N=4/3*e*K,P=[a,b],R=[a+M*G,b-N*F],S=[i+M*J,j-N*I],T=[i,j];if(R[0]=2*P[0]-R[0],R[1]=2*P[1]-R[1],k)return[R,S,T][C](o);o=[R,S,T][C](o).join()[H](",");for(var U=[],V=0,W=o.length;W>V;V++)U[V]=V%2?p(o[V-1],o[V],n).y:p(o[V],o[V+1],n).x;return U},Gb=function(a,b,c,d,e,f,g,h,i){var j=1-i;return{x:P(j,3)*a+3*P(j,2)*i*c+3*j*i*i*e+P(i,3)*g,y:P(j,3)*b+3*P(j,2)*i*d+3*j*i*i*f+P(i,3)*h}},Hb=d(function(a,b,c,d,e,f,g,h){var i,j=e-2*c+a-(g-2*e+c),k=2*(c-a)-2*(e-c),l=a-c,m=(-k+L.sqrt(k*k-4*j*l))/2/j,n=(-k-L.sqrt(k*k-4*j*l))/2/j,o=[b,h],p=[a,g];return O(m)>"1e12"&&(m=.5),O(n)>"1e12"&&(n=.5),m>0&&1>m&&(i=Gb(a,b,c,d,e,f,g,h,m),p.push(i.x),o.push(i.y)),n>0&&1>n&&(i=Gb(a,b,c,d,e,f,g,h,n),p.push(i.x),o.push(i.y)),j=f-2*d+b-(h-2*f+d),k=2*(d-b)-2*(f-d),l=b-d,m=(-k+L.sqrt(k*k-4*j*l))/2/j,n=(-k-L.sqrt(k*k-4*j*l))/2/j,O(m)>"1e12"&&(m=.5),O(n)>"1e12"&&(n=.5),m>0&&1>m&&(i=Gb(a,b,c,d,e,f,g,h,m),p.push(i.x),o.push(i.y)),n>0&&1>n&&(i=Gb(a,b,c,d,e,f,g,h,n),p.push(i.x),o.push(i.y)),{min:{x:N[B](0,p),y:N[B](0,o)},max:{x:M[B](0,p),y:M[B](0,o)}}}),Ib=a._path2curve=d(function(a,b){var c=!b&&yb(a);if(!b&&c.curve)return Ab(c.curve);for(var d=Cb(a),e=b&&Cb(b),f={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},g={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},h=(function(a,b){var c,d;if(!a)return["C",b.x,b.y,b.x,b.y,b.x,b.y];switch(!(a[0]in{T:1,Q:1})&&(b.qx=b.qy=null),a[0]){case"M":b.X=a[1],b.Y=a[2];break;case"A":a=["C"][C](Fb[B](0,[b.x,b.y][C](a.slice(1))));break;case"S":c=b.x+(b.x-(b.bx||b.x)),d=b.y+(b.y-(b.by||b.y)),a=["C",c,d][C](a.slice(1));break;case"T":b.qx=b.x+(b.x-(b.qx||b.x)),b.qy=b.y+(b.y-(b.qy||b.y)),a=["C"][C](Eb(b.x,b.y,b.qx,b.qy,a[1],a[2]));break;case"Q":b.qx=a[1],b.qy=a[2],a=["C"][C](Eb(b.x,b.y,a[1],a[2],a[3],a[4]));break;case"L":a=["C"][C](Db(b.x,b.y,a[1],a[2]));break;case"H":a=["C"][C](Db(b.x,b.y,a[1],b.y));break;case"V":a=["C"][C](Db(b.x,b.y,b.x,a[1]));break;case"Z":a=["C"][C](Db(b.x,b.y,b.X,b.Y))}return a}),i=function(a,b){if(a[b].length>7){a[b].shift();for(var c=a[b];c.length;)a.splice(b++,0,["C"][C](c.splice(0,6)));a.splice(b,1),l=M(d.length,e&&e.length||0)}},j=function(a,b,c,f,g){a&&b&&"M"==a[g][0]&&"M"!=b[g][0]&&(b.splice(g,0,["M",f.x,f.y]),c.bx=0,c.by=0,c.x=a[g][1],c.y=a[g][2],l=M(d.length,e&&e.length||0))},k=0,l=M(d.length,e&&e.length||0);l>k;k++){d[k]=h(d[k],f),i(d,k),e&&(e[k]=h(e[k],g)),e&&i(e,k),j(d,e,f,g,k),j(e,d,g,f,k);var m=d[k],n=e&&e[k],o=m.length,p=e&&n.length;f.x=m[o-2],f.y=m[o-1],f.bx=Z(m[o-4])||f.x,f.by=Z(m[o-3])||f.y,g.bx=e&&(Z(n[p-4])||g.x),g.by=e&&(Z(n[p-3])||g.y),g.x=e&&n[p-2],g.y=e&&n[p-1]}return e||(c.curve=Ab(d)),e?[d,e]:d},null,Ab),Jb=(a._parseDots=d(function(b){for(var c=[],d=0,e=b.length;e>d;d++){var f={},g=b[d].match(/^([^:]*):?([\d\.]*)/);if(f.color=a.getRGB(g[1]),f.color.error)return null;f.color=f.color.hex,g[2]&&(f.offset=g[2]+"%"),c.push(f)}for(d=1,e=c.length-1;e>d;d++)if(!c[d].offset){for(var h=Z(c[d-1].offset||0),i=0,j=d+1;e>j;j++)if(c[j].offset){i=c[j].offset;break}i||(i=100,j=e),i=Z(i);for(var k=(i-h)/(j-d+1);j>d;d++)h+=k,c[d].offset=h+"%"}return c}),a._tear=function(a,b){a==b.top&&(b.top=a.prev),a==b.bottom&&(b.bottom=a.next),a.next&&(a.next.prev=a.prev),a.prev&&(a.prev.next=a.next)}),Kb=(a._tofront=function(a,b){b.top!==a&&(Jb(a,b),a.next=null,a.prev=b.top,b.top.next=a,b.top=a)},a._toback=function(a,b){b.bottom!==a&&(Jb(a,b),a.next=b.bottom,a.prev=null,b.bottom.prev=a,b.bottom=a)},a._insertafter=function(a,b,c){Jb(a,c),b==c.top&&(c.top=a),b.next&&(b.next.prev=a),a.next=b.next,a.prev=b,b.next=a},a._insertbefore=function(a,b,c){Jb(a,c),b==c.bottom&&(c.bottom=a),b.prev&&(b.prev.next=a),a.prev=b.prev,b.prev=a,a.next=b},a.toMatrix=function(a,b){var c=zb(a),d={_:{transform:E},getBBox:function(){return c}};return Lb(d,b),d.matrix}),Lb=(a.transformPath=function(a,b){return pb(a,Kb(a,b))},a._extractTransform=function(b,c){if(null==c)return b._.transform;c=G(c).replace(/\.{3}|…/g,b._.transform||E);var d=a.parseTransformString(c),e=0,f=0,g=0,h=1,i=1,j=b._,k=new m;if(j.transform=d||[],d)for(var l=0,n=d.length;n>l;l++){var o,p,q,r,s,t=d[l],u=t.length,v=G(t[0]).toLowerCase(),w=t[0]!=v,x=w?k.invert():0;"t"==v&&3==u?w?(o=x.x(0,0),p=x.y(0,0),q=x.x(t[1],t[2]),r=x.y(t[1],t[2]),k.translate(q-o,r-p)):k.translate(t[1],t[2]):"r"==v?2==u?(s=s||b.getBBox(1),k.rotate(t[1],s.x+s.width/2,s.y+s.height/2),e+=t[1]):4==u&&(w?(q=x.x(t[2],t[3]),r=x.y(t[2],t[3]),k.rotate(t[1],q,r)):k.rotate(t[1],t[2],t[3]),e+=t[1]):"s"==v?2==u||3==u?(s=s||b.getBBox(1),k.scale(t[1],t[u-1],s.x+s.width/2,s.y+s.height/2),h*=t[1],i*=t[u-1]):5==u&&(w?(q=x.x(t[3],t[4]),r=x.y(t[3],t[4]),k.scale(t[1],t[2],q,r)):k.scale(t[1],t[2],t[3],t[4]),h*=t[1],i*=t[2]):"m"==v&&7==u&&k.add(t[1],t[2],t[3],t[4],t[5],t[6]),j.dirtyT=1,b.matrix=k}b.matrix=k,j.sx=h,j.sy=i,j.deg=e,j.dx=f=k.e,j.dy=g=k.f,1==h&&1==i&&!e&&j.bbox?(j.bbox.x+=+f,j.bbox.y+=+g):j.dirtyT=1}),Mb=function(a){var b=a[0];switch(b.toLowerCase()){case"t":return[b,0,0];case"m":return[b,1,0,0,1,0,0];case"r":return 4==a.length?[b,0,a[2],a[3]]:[b,0];case"s":return 5==a.length?[b,1,1,a[3],a[4]]:3==a.length?[b,1,1]:[b,1]}},Nb=a._equaliseTransform=function(b,c){c=G(c).replace(/\.{3}|…/g,b),b=a.parseTransformString(b)||[],c=a.parseTransformString(c)||[];for(var d,e,f,g,h=M(b.length,c.length),i=[],j=[],k=0;h>k;k++){if(f=b[k]||Mb(c[k]),g=c[k]||Mb(f),f[0]!=g[0]||"r"==f[0].toLowerCase()&&(f[2]!=g[2]||f[3]!=g[3])||"s"==f[0].toLowerCase()&&(f[3]!=g[3]||f[4]!=g[4]))return;for(i[k]=[],j[k]=[],d=0,e=M(f.length,g.length);e>d;d++)d in f&&(i[k][d]=f[d]),d in g&&(j[k][d]=g[d])}return{from:i,to:j}};a._getContainer=function(b,c,d,e){var f;return f=null!=e||a.is(b,"object")?b:y.doc.getElementById(b),null!=f?f.tagName?null==c?{container:f,width:f.style.pixelWidth||f.offsetWidth,height:f.style.pixelHeight||f.offsetHeight}:{container:f,width:c,height:d}:{container:1,x:b,y:c,width:d,height:e}:void 0},a.pathToRelative=Bb,a._engine={},a.path2curve=Ib,a.matrix=function(a,b,c,d,e,f){return new m(a,b,c,d,e,f)},function(b){function c(a){return a[0]*a[0]+a[1]*a[1]}function d(a){var b=L.sqrt(c(a));a[0]&&(a[0]/=b),a[1]&&(a[1]/=b)}b.add=function(a,b,c,d,e,f){var g,h,i,j,k=[[],[],[]],l=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],n=[[a,c,e],[b,d,f],[0,0,1]];for(a&&a instanceof m&&(n=[[a.a,a.c,a.e],[a.b,a.d,a.f],[0,0,1]]),g=0;3>g;g++)for(h=0;3>h;h++){for(j=0,i=0;3>i;i++)j+=l[g][i]*n[i][h];k[g][h]=j}this.a=k[0][0],this.b=k[1][0],this.c=k[0][1],this.d=k[1][1],this.e=k[0][2],this.f=k[1][2]},b.invert=function(){var a=this,b=a.a*a.d-a.b*a.c;return new m(a.d/b,-a.b/b,-a.c/b,a.a/b,(a.c*a.f-a.d*a.e)/b,(a.b*a.e-a.a*a.f)/b)},b.clone=function(){return new m(this.a,this.b,this.c,this.d,this.e,this.f)},b.translate=function(a,b){this.add(1,0,0,1,a,b)},b.scale=function(a,b,c,d){null==b&&(b=a),(c||d)&&this.add(1,0,0,1,c,d),this.add(a,0,0,b,0,0),(c||d)&&this.add(1,0,0,1,-c,-d)},b.rotate=function(b,c,d){b=a.rad(b),c=c||0,d=d||0;var e=+L.cos(b).toFixed(9),f=+L.sin(b).toFixed(9);this.add(e,f,-f,e,c,d),this.add(1,0,0,1,-c,-d)},b.x=function(a,b){return a*this.a+b*this.c+this.e},b.y=function(a,b){return a*this.b+b*this.d+this.f},b.get=function(a){return+this[G.fromCharCode(97+a)].toFixed(4)},b.toString=function(){return a.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},b.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},b.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},b.split=function(){var b={};b.dx=this.e,b.dy=this.f;var e=[[this.a,this.c],[this.b,this.d]];b.scalex=L.sqrt(c(e[0])),d(e[0]),b.shear=e[0][0]*e[1][0]+e[0][1]*e[1][1],e[1]=[e[1][0]-e[0][0]*b.shear,e[1][1]-e[0][1]*b.shear],b.scaley=L.sqrt(c(e[1])),d(e[1]),b.shear/=b.scaley;var f=-e[0][1],g=e[1][1];return 0>g?(b.rotate=a.deg(L.acos(g)),0>f&&(b.rotate=360-b.rotate)):b.rotate=a.deg(L.asin(f)),b.isSimple=!(+b.shear.toFixed(9)||b.scalex.toFixed(9)!=b.scaley.toFixed(9)&&b.rotate),b.isSuperSimple=!+b.shear.toFixed(9)&&b.scalex.toFixed(9)==b.scaley.toFixed(9)&&!b.rotate,b.noRotation=!+b.shear.toFixed(9)&&!b.rotate,b},b.toTransformString=function(a){var b=a||this[H]();return b.isSimple?(b.scalex=+b.scalex.toFixed(4),b.scaley=+b.scaley.toFixed(4),b.rotate=+b.rotate.toFixed(4),(b.dx||b.dy?"t"+[b.dx,b.dy]:E)+(1!=b.scalex||1!=b.scaley?"s"+[b.scalex,b.scaley,0,0]:E)+(b.rotate?"r"+[b.rotate,0,0]:E)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(m.prototype);var Ob=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);t.safari="Apple Computer, Inc."==navigator.vendor&&(Ob&&Ob[1]<4||"iP"==navigator.platform.slice(0,2))||"Google Inc."==navigator.vendor&&Ob&&Ob[1]<8?function(){var a=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){a.remove()})}:kb;for(var Pb=function(){this.returnValue=!1},Qb=function(){return this.originalEvent.preventDefault()},Rb=function(){this.cancelBubble=!0},Sb=function(){return this.originalEvent.stopPropagation()},Tb=function(){return y.doc.addEventListener?function(a,b,c,d){var e=D&&J[b]?J[b]:b,f=function(e){var f=y.doc.documentElement.scrollTop||y.doc.body.scrollTop,g=y.doc.documentElement.scrollLeft||y.doc.body.scrollLeft,h=e.clientX+g,i=e.clientY+f;if(D&&J[x](b))for(var j=0,k=e.targetTouches&&e.targetTouches.length;k>j;j++)if(e.targetTouches[j].target==a){var l=e;e=e.targetTouches[j],e.originalEvent=l,e.preventDefault=Qb,e.stopPropagation=Sb;break}return c.call(d,e,h,i)};return a.addEventListener(e,f,!1),function(){return a.removeEventListener(e,f,!1),!0}}:y.doc.attachEvent?function(a,b,c,d){var e=function(a){a=a||y.win.event;var b=y.doc.documentElement.scrollTop||y.doc.body.scrollTop,e=y.doc.documentElement.scrollLeft||y.doc.body.scrollLeft,f=a.clientX+e,g=a.clientY+b;return a.preventDefault=a.preventDefault||Pb,a.stopPropagation=a.stopPropagation||Rb,c.call(d,a,f,g)};a.attachEvent("on"+b,e);var f=function(){return a.detachEvent("on"+b,e),!0};return f}:void 0}(),Ub=[],Vb=function(a){for(var b,c=a.clientX,d=a.clientY,e=y.doc.documentElement.scrollTop||y.doc.body.scrollTop,f=y.doc.documentElement.scrollLeft||y.doc.body.scrollLeft,g=Ub.length;g--;){if(b=Ub[g],D){for(var h,i=a.touches.length;i--;)if(h=a.touches[i],h.identifier==b.el._drag.id){c=h.clientX,d=h.clientY,(a.originalEvent?a.originalEvent:a).preventDefault();break}}else a.preventDefault();var j,k=b.el.node,l=k.nextSibling,m=k.parentNode,n=k.style.display;y.win.opera&&m.removeChild(k),k.style.display="none",j=b.el.paper.getElementByPoint(c,d),k.style.display=n,y.win.opera&&(l?m.insertBefore(k,l):m.appendChild(k)),j&&eve("raphael.drag.over."+b.el.id,b.el,j),c+=f,d+=e,eve("raphael.drag.move."+b.el.id,b.move_scope||b.el,c-b.el._drag.x,d-b.el._drag.y,c,d,a)}},Wb=function(b){a.unmousemove(Vb).unmouseup(Wb);for(var c,d=Ub.length;d--;)c=Ub[d],c.el._drag={},eve("raphael.drag.end."+c.el.id,c.end_scope||c.start_scope||c.move_scope||c.el,b);Ub=[]},Xb=a.el={},Yb=I.length;Yb--;)!function(b){a[b]=Xb[b]=function(c,d){return a.is(c,"function")&&(this.events=this.events||[],this.events.push({name:b,f:c,unbind:Tb(this.shape||this.node||y.doc,b,c,d||this)})),this},a["un"+b]=Xb["un"+b]=function(a){for(var c=this.events||[],d=c.length;d--;)if(c[d].name==b&&c[d].f==a)return c[d].unbind(),c.splice(d,1),!c.length&&delete this.events,this;return this}}(I[Yb]);Xb.data=function(b,c){var d=ib[this.id]=ib[this.id]||{};if(1==arguments.length){if(a.is(b,"object")){for(var e in b)b[x](e)&&this.data(e,b[e]);return this}return eve("raphael.data.get."+this.id,this,d[b],b),d[b]}return d[b]=c,eve("raphael.data.set."+this.id,this,c,b),this},Xb.removeData=function(a){return null==a?ib[this.id]={}:ib[this.id]&&delete ib[this.id][a],this},Xb.getData=function(){return ib[this.id]||{}},Xb.hover=function(a,b,c,d){return this.mouseover(a,c).mouseout(b,d||c)},Xb.unhover=function(a,b){return this.unmouseover(a).unmouseout(b)};var Zb=[];Xb.drag=function(b,c,d,e,f,g){function h(h){(h.originalEvent||h).preventDefault();var i=y.doc.documentElement.scrollTop||y.doc.body.scrollTop,j=y.doc.documentElement.scrollLeft||y.doc.body.scrollLeft;this._drag.x=h.clientX+j,this._drag.y=h.clientY+i,this._drag.id=h.identifier,!Ub.length&&a.mousemove(Vb).mouseup(Wb),Ub.push({el:this,move_scope:e,start_scope:f,end_scope:g}),c&&eve.on("raphael.drag.start."+this.id,c),b&&eve.on("raphael.drag.move."+this.id,b),d&&eve.on("raphael.drag.end."+this.id,d),eve("raphael.drag.start."+this.id,f||e||this,h.clientX+j,h.clientY+i,h)}return this._drag={},Zb.push({el:this,start:h}),this.mousedown(h),this},Xb.onDragOver=function(a){a?eve.on("raphael.drag.over."+this.id,a):eve.unbind("raphael.drag.over."+this.id)},Xb.undrag=function(){for(var b=Zb.length;b--;)Zb[b].el==this&&(this.unmousedown(Zb[b].start),Zb.splice(b,1),eve.unbind("raphael.drag.*."+this.id));!Zb.length&&a.unmousemove(Vb).unmouseup(Wb),Ub=[]},t.circle=function(b,c,d){var e=a._engine.circle(this,b||0,c||0,d||0);return this.__set__&&this.__set__.push(e),e},t.rect=function(b,c,d,e,f){var g=a._engine.rect(this,b||0,c||0,d||0,e||0,f||0);return this.__set__&&this.__set__.push(g),g},t.ellipse=function(b,c,d,e){var f=a._engine.ellipse(this,b||0,c||0,d||0,e||0);return this.__set__&&this.__set__.push(f),f},t.path=function(b){b&&!a.is(b,S)&&!a.is(b[0],T)&&(b+=E);var c=a._engine.path(a.format[B](a,arguments),this);return this.__set__&&this.__set__.push(c),c},t.image=function(b,c,d,e,f){var g=a._engine.image(this,b||"about:blank",c||0,d||0,e||0,f||0);return this.__set__&&this.__set__.push(g),g},t.text=function(b,c,d){var e=a._engine.text(this,b||0,c||0,G(d));return this.__set__&&this.__set__.push(e),e},t.set=function(b){!a.is(b,"array")&&(b=Array.prototype.splice.call(arguments,0,arguments.length));var c=new jc(b);return this.__set__&&this.__set__.push(c),c.paper=this,c.type="set",c},t.setStart=function(a){this.__set__=a||this.set()},t.setFinish=function(){var a=this.__set__;return delete this.__set__,a},t.setSize=function(b,c){return a._engine.setSize.call(this,b,c)},t.setViewBox=function(b,c,d,e,f){return a._engine.setViewBox.call(this,b,c,d,e,f)},t.top=t.bottom=null,t.raphael=a;var $b=function(a){var b=a.getBoundingClientRect(),c=a.ownerDocument,d=c.body,e=c.documentElement,f=e.clientTop||d.clientTop||0,g=e.clientLeft||d.clientLeft||0,h=b.top+(y.win.pageYOffset||e.scrollTop||d.scrollTop)-f,i=b.left+(y.win.pageXOffset||e.scrollLeft||d.scrollLeft)-g;return{y:h,x:i}};t.getElementByPoint=function(a,b){var c=this,d=c.canvas,e=y.doc.elementFromPoint(a,b);if(y.win.opera&&"svg"==e.tagName){var f=$b(d),g=d.createSVGRect();g.x=a-f.x,g.y=b-f.y,g.width=g.height=1;var h=d.getIntersectionList(g,null);h.length&&(e=h[h.length-1])}if(!e)return null;for(;e.parentNode&&e!=d.parentNode&&!e.raphael;)e=e.parentNode;return e==c.canvas.parentNode&&(e=d),e=e&&e.raphael?c.getById(e.raphaelid):null},t.getElementsByBBox=function(a){var b=this.set();return this.forEach(function(c){Raphael.isBBoxIntersect(c.getBBox(),a)&&b.push(c)}),b},t.getById=function(a){for(var b=this.bottom;b;){if(b.id==a)return b;b=b.next}return null},t.forEach=function(a,b){for(var c=this.bottom;c;){if(a.call(b,c)===!1)return this;c=c.next}return this},t.getElementsByPoint=function(a,b){var c=this.set();return this.forEach(function(d){d.isPointInside(a,b)&&c.push(d)}),c},Xb.isPointInside=function(b,c){var d=this.realPath=this.realPath||ob[this.type](this);return a.isPointInsidePath(d,b,c)},Xb.getBBox=function(a){if(this.removed)return{};var b=this._;return a?((b.dirty||!b.bboxwt)&&(this.realPath=ob[this.type](this),b.bboxwt=zb(this.realPath),b.bboxwt.toString=n,b.dirty=0),b.bboxwt):((b.dirty||b.dirtyT||!b.bbox)&&((b.dirty||!this.realPath)&&(b.bboxwt=0,this.realPath=ob[this.type](this)),b.bbox=zb(pb(this.realPath,this.matrix)),b.bbox.toString=n,b.dirty=b.dirtyT=0),b.bbox)},Xb.clone=function(){if(this.removed)return null;var a=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(a),a},Xb.glow=function(a){if("text"==this.type)return null;a=a||{};var b={width:(a.width||10)+(+this.attr("stroke-width")||1),fill:a.fill||!1,opacity:a.opacity||.5,offsetx:a.offsetx||0,offsety:a.offsety||0,color:a.color||"#000"},c=b.width/2,d=this.paper,e=d.set(),f=this.realPath||ob[this.type](this);f=this.matrix?pb(f,this.matrix):f;for(var g=1;c+1>g;g++)e.push(d.path(f).attr({stroke:b.color,fill:b.fill?b.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(b.width/c*g).toFixed(3),opacity:+(b.opacity/c).toFixed(3)}));return e.insertBefore(this).translate(b.offsetx,b.offsety)};var _b=function(b,c,d,e,f,g,j,k,l){return null==l?h(b,c,d,e,f,g,j,k):a.findDotsAtSegment(b,c,d,e,f,g,j,k,i(b,c,d,e,f,g,j,k,l))},ac=function(b,c){return function(d,e,f){d=Ib(d);for(var g,h,i,j,k,l="",m={},n=0,o=0,p=d.length;p>o;o++){if(i=d[o],"M"==i[0])g=+i[1],h=+i[2];else{if(j=_b(g,h,i[1],i[2],i[3],i[4],i[5],i[6]),n+j>e){if(c&&!m.start){if(k=_b(g,h,i[1],i[2],i[3],i[4],i[5],i[6],e-n),l+=["C"+k.start.x,k.start.y,k.m.x,k.m.y,k.x,k.y],f)return l;m.start=l,l=["M"+k.x,k.y+"C"+k.n.x,k.n.y,k.end.x,k.end.y,i[5],i[6]].join(),n+=j,g=+i[5],h=+i[6];continue}if(!b&&!c)return k=_b(g,h,i[1],i[2],i[3],i[4],i[5],i[6],e-n),{x:k.x,y:k.y,alpha:k.alpha}}n+=j,g=+i[5],h=+i[6]}l+=i.shift()+i}return m.end=l,k=b?n:c?m:a.findDotsAtSegment(g,h,i[0],i[1],i[2],i[3],i[4],i[5],1),k.alpha&&(k={x:k.x,y:k.y,alpha:k.alpha}),k}},bc=ac(1),cc=ac(),dc=ac(0,1);a.getTotalLength=bc,a.getPointAtLength=cc,a.getSubpath=function(a,b,c){if(this.getTotalLength(a)-c<1e-6)return dc(a,b).end;var d=dc(a,c,1);return b?dc(d,b).end:d},Xb.getTotalLength=function(){return"path"==this.type?this.node.getTotalLength?this.node.getTotalLength():bc(this.attrs.path):void 0},Xb.getPointAtLength=function(a){return"path"==this.type?cc(this.attrs.path,a):void 0},Xb.getSubpath=function(b,c){return"path"==this.type?a.getSubpath(this.attrs.path,b,c):void 0};var ec=a.easing_formulas={linear:function(a){return a},"<":function(a){return P(a,1.7)},">":function(a){return P(a,.48)},"<>":function(a){var b=.48-a/1.04,c=L.sqrt(.1734+b*b),d=c-b,e=P(O(d),1/3)*(0>d?-1:1),f=-c-b,g=P(O(f),1/3)*(0>f?-1:1),h=e+g+.5;return 3*(1-h)*h*h+h*h*h},backIn:function(a){var b=1.70158;return a*a*((b+1)*a-b)},backOut:function(a){a-=1;var b=1.70158;return a*a*((b+1)*a+b)+1},elastic:function(a){return a==!!a?a:P(2,-10*a)*L.sin(2*(a-.075)*Q/.3)+1},bounce:function(a){var b,c=7.5625,d=2.75;return 1/d>a?b=c*a*a:2/d>a?(a-=1.5/d,b=c*a*a+.75):2.5/d>a?(a-=2.25/d,b=c*a*a+.9375):(a-=2.625/d,b=c*a*a+.984375),b}};ec.easeIn=ec["ease-in"]=ec["<"],ec.easeOut=ec["ease-out"]=ec[">"],ec.easeInOut=ec["ease-in-out"]=ec["<>"],ec["back-in"]=ec.backIn,ec["back-out"]=ec.backOut;var fc=[],gc=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){setTimeout(a,16)},hc=function(){for(var b=+new Date,c=0;c<fc.length;c++){var d=fc[c];if(!d.el.removed&&!d.paused){var e,f,g=b-d.start,h=d.ms,i=d.easing,j=d.from,k=d.diff,l=d.to,m=(d.t,d.el),n={},o={};if(d.initstatus?(g=(d.initstatus*d.anim.top-d.prev)/(d.percent-d.prev)*h,d.status=d.initstatus,delete d.initstatus,d.stop&&fc.splice(c--,1)):d.status=(d.prev+(d.percent-d.prev)*(g/h))/d.anim.top,!(0>g))if(h>g){var p=i(g/h);for(var r in j)if(j[x](r)){switch(bb[r]){case R:e=+j[r]+p*h*k[r];break;case"colour":e="rgb("+[ic(Y(j[r].r+p*h*k[r].r)),ic(Y(j[r].g+p*h*k[r].g)),ic(Y(j[r].b+p*h*k[r].b))].join(",")+")";break;case"path":e=[];for(var s=0,t=j[r].length;t>s;s++){e[s]=[j[r][s][0]];for(var u=1,v=j[r][s].length;v>u;u++)e[s][u]=+j[r][s][u]+p*h*k[r][s][u];e[s]=e[s].join(F)}e=e.join(F);break;case"transform":if(k[r].real)for(e=[],s=0,t=j[r].length;t>s;s++)for(e[s]=[j[r][s][0]],u=1,v=j[r][s].length;v>u;u++)e[s][u]=j[r][s][u]+p*h*k[r][s][u];else{var w=function(a){return+j[r][a]+p*h*k[r][a]};e=[["m",w(0),w(1),w(2),w(3),w(4),w(5)]]}break;case"csv":if("clip-rect"==r)for(e=[],s=4;s--;)e[s]=+j[r][s]+p*h*k[r][s];break;default:var y=[][C](j[r]);for(e=[],s=m.paper.customAttributes[r].length;s--;)e[s]=+y[s]+p*h*k[r][s]}n[r]=e}m.attr(n),function(a,b,c){setTimeout(function(){eve("raphael.anim.frame."+a,b,c)})}(m.id,m,d.anim)}else{if(function(b,c,d){setTimeout(function(){eve("raphael.anim.frame."+c.id,c,d),eve("raphael.anim.finish."+c.id,c,d),a.is(b,"function")&&b.call(c)})}(d.callback,m,d.anim),m.attr(l),fc.splice(c--,1),d.repeat>1&&!d.next){for(f in l)l[x](f)&&(o[f]=d.totalOrigin[f]);d.el.attr(o),q(d.anim,d.el,d.anim.percents[0],null,d.totalOrigin,d.repeat-1)}d.next&&!d.stop&&q(d.anim,d.el,d.next,null,d.totalOrigin,d.repeat)}}}a.svg&&m&&m.paper&&m.paper.safari(),fc.length&&gc(hc)},ic=function(a){return a>255?255:0>a?0:a};Xb.animateWith=function(b,c,d,e,f,g){var h=this;if(h.removed)return g&&g.call(h),h;var i=d instanceof p?d:a.animation(d,e,f,g);q(i,h,i.percents[0],null,h.attr());for(var j=0,k=fc.length;k>j;j++)if(fc[j].anim==c&&fc[j].el==b){fc[k-1].start=fc[j].start;break}return h},Xb.onAnimation=function(a){return a?eve.on("raphael.anim.frame."+this.id,a):eve.unbind("raphael.anim.frame."+this.id),this},p.prototype.delay=function(a){var b=new p(this.anim,this.ms);return b.times=this.times,b.del=+a||0,b},p.prototype.repeat=function(a){var b=new p(this.anim,this.ms);return b.del=this.del,b.times=L.floor(M(a,0))||1,b},a.animation=function(b,c,d,e){if(b instanceof p)return b;(a.is(d,"function")||!d)&&(e=e||d||null,d=null),b=Object(b),c=+c||0;var f,g,h={};for(g in b)b[x](g)&&Z(g)!=g&&Z(g)+"%"!=g&&(f=!0,h[g]=b[g]);return f?(d&&(h.easing=d),e&&(h.callback=e),new p({100:h},c)):new p(b,c)},Xb.animate=function(b,c,d,e){var f=this;if(f.removed)return e&&e.call(f),f;var g=b instanceof p?b:a.animation(b,c,d,e);return q(g,f,g.percents[0],null,f.attr()),f},Xb.setTime=function(a,b){return a&&null!=b&&this.status(a,N(b,a.ms)/a.ms),this},Xb.status=function(a,b){var c,d,e=[],f=0;if(null!=b)return q(a,this,-1,N(b,1)),this;for(c=fc.length;c>f;f++)if(d=fc[f],d.el.id==this.id&&(!a||d.anim==a)){if(a)return d.status;e.push({anim:d.anim,status:d.status})}return a?0:e},Xb.pause=function(a){for(var b=0;b<fc.length;b++)fc[b].el.id!=this.id||a&&fc[b].anim!=a||eve("raphael.anim.pause."+this.id,this,fc[b].anim)!==!1&&(fc[b].paused=!0);return this},Xb.resume=function(a){for(var b=0;b<fc.length;b++)if(fc[b].el.id==this.id&&(!a||fc[b].anim==a)){var c=fc[b];eve("raphael.anim.resume."+this.id,this,c.anim)!==!1&&(delete c.paused,this.status(c.anim,c.status))}return this},Xb.stop=function(a){for(var b=0;b<fc.length;b++)fc[b].el.id!=this.id||a&&fc[b].anim!=a||eve("raphael.anim.stop."+this.id,this,fc[b].anim)!==!1&&fc.splice(b--,1);return this},eve.on("raphael.remove",r),eve.on("raphael.clear",r),Xb.toString=function(){return"Raphaël’s object"};var jc=function(a){if(this.items=[],this.length=0,this.type="set",a)for(var b=0,c=a.length;c>b;b++)!a[b]||a[b].constructor!=Xb.constructor&&a[b].constructor!=jc||(this[this.items.length]=this.items[this.items.length]=a[b],this.length++)},kc=jc.prototype;kc.push=function(){for(var a,b,c=0,d=arguments.length;d>c;c++)a=arguments[c],!a||a.constructor!=Xb.constructor&&a.constructor!=jc||(b=this.items.length,this[b]=this.items[b]=a,this.length++);return this},kc.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},kc.forEach=function(a,b){for(var c=0,d=this.items.length;d>c;c++)if(a.call(b,this.items[c],c)===!1)return this;return this};for(var lc in Xb)Xb[x](lc)&&(kc[lc]=function(a){return function(){var b=arguments;return this.forEach(function(c){c[a][B](c,b)})}}(lc));kc.attr=function(b,c){if(b&&a.is(b,T)&&a.is(b[0],"object"))for(var d=0,e=b.length;e>d;d++)this.items[d].attr(b[d]);else for(var f=0,g=this.items.length;g>f;f++)this.items[f].attr(b,c);return this},kc.clear=function(){for(;this.length;)this.pop()},kc.splice=function(a,b){a=0>a?M(this.length+a,0):a,b=M(0,N(this.length-a,b));var c,d=[],e=[],f=[];for(c=2;c<arguments.length;c++)f.push(arguments[c]);for(c=0;b>c;c++)e.push(this[a+c]);for(;c<this.length-a;c++)d.push(this[a+c]);var g=f.length;for(c=0;c<g+d.length;c++)this.items[a+c]=this[a+c]=g>c?f[c]:d[c-g];for(c=this.items.length=this.length-=b-g;this[c];)delete this[c++];return new jc(e)},kc.exclude=function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]==a)return this.splice(b,1),!0},kc.animate=function(b,c,d,e){(a.is(d,"function")||!d)&&(e=d||null);var f,g,h=this.items.length,i=h,j=this;if(!h)return this;e&&(g=function(){!--h&&e.call(j)}),d=a.is(d,S)?d:g;var k=a.animation(b,c,d,g);for(f=this.items[--i].animate(k);i--;)this.items[i]&&!this.items[i].removed&&this.items[i].animateWith(f,k,k);return this},kc.insertAfter=function(a){for(var b=this.items.length;b--;)this.items[b].insertAfter(a);return this},kc.getBBox=function(){for(var a=[],b=[],c=[],d=[],e=this.items.length;e--;)if(!this.items[e].removed){var f=this.items[e].getBBox();a.push(f.x),b.push(f.y),c.push(f.x+f.width),d.push(f.y+f.height)}return a=N[B](0,a),b=N[B](0,b),c=M[B](0,c),d=M[B](0,d),{x:a,y:b,x2:c,y2:d,width:c-a,height:d-b}},kc.clone=function(a){a=this.paper.set();for(var b=0,c=this.items.length;c>b;b++)a.push(this.items[b].clone());return a},kc.toString=function(){return"Raphaël‘s set"},kc.glow=function(a){var b=this.paper.set();return this.forEach(function(c){var d=c.glow(a);null!=d&&d.forEach(function(a){b.push(a)})}),b},a.registerFont=function(a){if(!a.face)return a;this.fonts=this.fonts||{};var b={w:a.w,face:{},glyphs:{}},c=a.face["font-family"];for(var d in a.face)a.face[x](d)&&(b.face[d]=a.face[d]);if(this.fonts[c]?this.fonts[c].push(b):this.fonts[c]=[b],!a.svg){b.face["units-per-em"]=$(a.face["units-per-em"],10);for(var e in a.glyphs)if(a.glyphs[x](e)){var f=a.glyphs[e];if(b.glyphs[e]={w:f.w,k:{},d:f.d&&"M"+f.d.replace(/[mlcxtrv]/g,function(a){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[a]||"M"})+"z"},f.k)for(var g in f.k)f[x](g)&&(b.glyphs[e].k[g]=f.k[g])}}return a},t.getFont=function(b,c,d,e){if(e=e||"normal",d=d||"normal",c=+c||{normal:400,bold:700,lighter:300,bolder:800}[c]||400,a.fonts){var f=a.fonts[b];if(!f){var g=new RegExp("(^|\\s)"+b.replace(/[^\w\d\s+!~.:_-]/g,E)+"(\\s|$)","i");for(var h in a.fonts)if(a.fonts[x](h)&&g.test(h)){f=a.fonts[h];break}}var i;if(f)for(var j=0,k=f.length;k>j&&(i=f[j],i.face["font-weight"]!=c||i.face["font-style"]!=d&&i.face["font-style"]||i.face["font-stretch"]!=e);j++);return i}},t.print=function(b,c,d,e,f,g,h){g=g||"middle",h=M(N(h||0,1),-1);var i,j=G(d)[H](E),k=0,l=0,m=E;if(a.is(e,d)&&(e=this.getFont(e)),e){i=(f||16)/e.face["units-per-em"];for(var n=e.face.bbox[H](u),o=+n[0],p=n[3]-n[1],q=0,r=+n[1]+("baseline"==g?p+ +e.face.descent:p/2),s=0,t=j.length;t>s;s++){if("\n"==j[s])k=0,w=0,l=0,q+=p;else{var v=l&&e.glyphs[j[s-1]]||{},w=e.glyphs[j[s]];k+=l?(v.w||e.w)+(v.k&&v.k[j[s]]||0)+e.w*h:0,l=1}w&&w.d&&(m+=a.transformPath(w.d,["t",k*i,q*i,"s",i,i,o,r,"t",(b-o)/i,(c-r)/i]))}}return this.path(m).attr({fill:"#000",stroke:"none"})},t.add=function(b){if(a.is(b,"array"))for(var c,d=this.set(),e=0,f=b.length;f>e;e++)c=b[e]||{},v[x](c.type)&&d.push(this[c.type]().attr(c));return d},a.format=function(b,c){var d=a.is(c,T)?[0][C](c):arguments;return b&&a.is(b,S)&&d.length-1&&(b=b.replace(w,function(a,b){return null==d[++b]?E:d[b]})),b||E},a.fullfill=function(){var a=/\{([^\}]+)\}/g,b=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,c=function(a,c,d){var e=d;return c.replace(b,function(a,b,c,d,f){b=b||d,e&&(b in e&&(e=e[b]),"function"==typeof e&&f&&(e=e()))}),e=(null==e||e==d?a:e)+""};return function(b,d){return String(b).replace(a,function(a,b){return c(a,b,d)})}}(),a.ninja=function(){return z.was?y.win.Raphael=z.is:Raphael=void 0,a},a.st=kc,function(b,c,d){function e(){/in/.test(b.readyState)?setTimeout(e,9):a.eve("raphael.DOMload")}null==b.readyState&&b.addEventListener&&(b.addEventListener(c,d=function(){b.removeEventListener(c,d,!1),b.readyState="complete"},!1),b.readyState="loading"),e()}(document,"DOMContentLoaded"),z.was?y.win.Raphael=a:Raphael=a,eve.on("raphael.DOMload",function(){s=!0})}(),window.Raphael&&window.Raphael.svg&&function(a){var b="hasOwnProperty",c=String,d=parseFloat,e=parseInt,f=Math,g=f.max,h=f.abs,i=f.pow,j=/[, ]+/,k=a.eve,l="",m=" ",n="http://www.w3.org/1999/xlink",o={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},p={};a.toString=function(){return"Your browser supports SVG.\nYou are running Raphaël "+this.version};var q=function(d,e){if(e){"string"==typeof d&&(d=q(d));for(var f in e)e[b](f)&&("xlink:"==f.substring(0,6)?d.setAttributeNS(n,f.substring(6),c(e[f])):d.setAttribute(f,c(e[f])))}else d=a._g.doc.createElementNS("http://www.w3.org/2000/svg",d),d.style&&(d.style.webkitTapHighlightColor="rgba(0,0,0,0)");return d},r=function(b,e){var j="linear",k=b.id+e,m=.5,n=.5,o=b.node,p=b.paper,r=o.style,s=a._g.doc.getElementById(k);if(!s){if(e=c(e).replace(a._radial_gradient,function(a,b,c){if(j="radial",b&&c){m=d(b),n=d(c);var e=2*(n>.5)-1;i(m-.5,2)+i(n-.5,2)>.25&&(n=f.sqrt(.25-i(m-.5,2))*e+.5)&&.5!=n&&(n=n.toFixed(5)-1e-5*e)}return l}),e=e.split(/\s*\-\s*/),"linear"==j){var t=e.shift();if(t=-d(t),isNaN(t))return null;var u=[0,0,f.cos(a.rad(t)),f.sin(a.rad(t))],v=1/(g(h(u[2]),h(u[3]))||1);u[2]*=v,u[3]*=v,u[2]<0&&(u[0]=-u[2],u[2]=0),u[3]<0&&(u[1]=-u[3],u[3]=0)}var w=a._parseDots(e);if(!w)return null;if(k=k.replace(/[\(\)\s,°#]/g,"_"),b.gradient&&k!=b.gradient.id&&(p.defs.removeChild(b.gradient),delete b.gradient),!b.gradient){s=q(j+"Gradient",{id:k}),b.gradient=s,q(s,"radial"==j?{fx:m,fy:n}:{x1:u[0],y1:u[1],x2:u[2],y2:u[3],gradientTransform:b.matrix.invert()}),p.defs.appendChild(s);for(var x=0,y=w.length;y>x;x++)s.appendChild(q("stop",{offset:w[x].offset?w[x].offset:x?"100%":"0%","stop-color":w[x].color||"#fff"}))}}return q(o,{fill:"url(#"+k+")",opacity:1,"fill-opacity":1}),r.fill=l,r.opacity=1,r.fillOpacity=1,1},s=function(a){var b=a.getBBox(1);q(a.pattern,{patternTransform:a.matrix.invert()+" translate("+b.x+","+b.y+")"})},t=function(d,e,f){if("path"==d.type){for(var g,h,i,j,k,m=c(e).toLowerCase().split("-"),n=d.paper,r=f?"end":"start",s=d.node,t=d.attrs,u=t["stroke-width"],v=m.length,w="classic",x=3,y=3,z=5;v--;)switch(m[v]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":w=m[v];break;case"wide":y=5;break;case"narrow":y=2;break;case"long":x=5;break;case"short":x=2}if("open"==w?(x+=2,y+=2,z+=2,i=1,j=f?4:1,k={fill:"none",stroke:t.stroke}):(j=i=x/2,k={fill:t.stroke,stroke:"none"}),d._.arrows?f?(d._.arrows.endPath&&p[d._.arrows.endPath]--,d._.arrows.endMarker&&p[d._.arrows.endMarker]--):(d._.arrows.startPath&&p[d._.arrows.startPath]--,d._.arrows.startMarker&&p[d._.arrows.startMarker]--):d._.arrows={},"none"!=w){var A="raphael-marker-"+w,B="raphael-marker-"+r+w+x+y;
a._g.doc.getElementById(A)?p[A]++:(n.defs.appendChild(q(q("path"),{"stroke-linecap":"round",d:o[w],id:A})),p[A]=1);var C,D=a._g.doc.getElementById(B);D?(p[B]++,C=D.getElementsByTagName("use")[0]):(D=q(q("marker"),{id:B,markerHeight:y,markerWidth:x,orient:"auto",refX:j,refY:y/2}),C=q(q("use"),{"xlink:href":"#"+A,transform:(f?"rotate(180 "+x/2+" "+y/2+") ":l)+"scale("+x/z+","+y/z+")","stroke-width":(1/((x/z+y/z)/2)).toFixed(4)}),D.appendChild(C),n.defs.appendChild(D),p[B]=1),q(C,k);var E=i*("diamond"!=w&&"oval"!=w);f?(g=d._.arrows.startdx*u||0,h=a.getTotalLength(t.path)-E*u):(g=E*u,h=a.getTotalLength(t.path)-(d._.arrows.enddx*u||0)),k={},k["marker-"+r]="url(#"+B+")",(h||g)&&(k.d=Raphael.getSubpath(t.path,g,h)),q(s,k),d._.arrows[r+"Path"]=A,d._.arrows[r+"Marker"]=B,d._.arrows[r+"dx"]=E,d._.arrows[r+"Type"]=w,d._.arrows[r+"String"]=e}else f?(g=d._.arrows.startdx*u||0,h=a.getTotalLength(t.path)-g):(g=0,h=a.getTotalLength(t.path)-(d._.arrows.enddx*u||0)),d._.arrows[r+"Path"]&&q(s,{d:Raphael.getSubpath(t.path,g,h)}),delete d._.arrows[r+"Path"],delete d._.arrows[r+"Marker"],delete d._.arrows[r+"dx"],delete d._.arrows[r+"Type"],delete d._.arrows[r+"String"];for(k in p)if(p[b](k)&&!p[k]){var F=a._g.doc.getElementById(k);F&&F.parentNode.removeChild(F)}}},u={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},v=function(a,b,d){if(b=u[c(b).toLowerCase()]){for(var e=a.attrs["stroke-width"]||"1",f={round:e,square:e,butt:0}[a.attrs["stroke-linecap"]||d["stroke-linecap"]]||0,g=[],h=b.length;h--;)g[h]=b[h]*e+(h%2?1:-1)*f;q(a.node,{"stroke-dasharray":g.join(",")})}},w=function(d,e){var f=d.node,i=d.attrs,k=f.style.visibility;f.style.visibility="hidden";for(var m in e)if(e[b](m)){if(!a._availableAttrs[b](m))continue;var o=e[m];switch(i[m]=o,m){case"blur":d.blur(o);break;case"href":case"title":case"target":var p=f.parentNode;if("a"!=p.tagName.toLowerCase()){var u=q("a");p.insertBefore(u,f),u.appendChild(f),p=u}"target"==m?p.setAttributeNS(n,"show","blank"==o?"new":o):p.setAttributeNS(n,m,o);break;case"cursor":f.style.cursor=o;break;case"transform":d.transform(o);break;case"arrow-start":t(d,o);break;case"arrow-end":t(d,o,1);break;case"clip-rect":var w=c(o).split(j);if(4==w.length){d.clip&&d.clip.parentNode.parentNode.removeChild(d.clip.parentNode);var x=q("clipPath"),z=q("rect");x.id=a.createUUID(),q(z,{x:w[0],y:w[1],width:w[2],height:w[3]}),x.appendChild(z),d.paper.defs.appendChild(x),q(f,{"clip-path":"url(#"+x.id+")"}),d.clip=z}if(!o){var A=f.getAttribute("clip-path");if(A){var B=a._g.doc.getElementById(A.replace(/(^url\(#|\)$)/g,l));B&&B.parentNode.removeChild(B),q(f,{"clip-path":l}),delete d.clip}}break;case"path":"path"==d.type&&(q(f,{d:o?i.path=a._pathToAbsolute(o):"M0,0"}),d._.dirty=1,d._.arrows&&("startString"in d._.arrows&&t(d,d._.arrows.startString),"endString"in d._.arrows&&t(d,d._.arrows.endString,1)));break;case"width":if(f.setAttribute(m,o),d._.dirty=1,!i.fx)break;m="x",o=i.x;case"x":i.fx&&(o=-i.x-(i.width||0));case"rx":if("rx"==m&&"rect"==d.type)break;case"cx":f.setAttribute(m,o),d.pattern&&s(d),d._.dirty=1;break;case"height":if(f.setAttribute(m,o),d._.dirty=1,!i.fy)break;m="y",o=i.y;case"y":i.fy&&(o=-i.y-(i.height||0));case"ry":if("ry"==m&&"rect"==d.type)break;case"cy":f.setAttribute(m,o),d.pattern&&s(d),d._.dirty=1;break;case"r":"rect"==d.type?q(f,{rx:o,ry:o}):f.setAttribute(m,o),d._.dirty=1;break;case"src":"image"==d.type&&f.setAttributeNS(n,"href",o);break;case"stroke-width":(1!=d._.sx||1!=d._.sy)&&(o/=g(h(d._.sx),h(d._.sy))||1),d.paper._vbSize&&(o*=d.paper._vbSize),f.setAttribute(m,o),i["stroke-dasharray"]&&v(d,i["stroke-dasharray"],e),d._.arrows&&("startString"in d._.arrows&&t(d,d._.arrows.startString),"endString"in d._.arrows&&t(d,d._.arrows.endString,1));break;case"stroke-dasharray":v(d,o,e);break;case"fill":var C=c(o).match(a._ISURL);if(C){x=q("pattern");var D=q("image");x.id=a.createUUID(),q(x,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),q(D,{x:0,y:0,"xlink:href":C[1]}),x.appendChild(D),function(b){a._preload(C[1],function(){var a=this.offsetWidth,c=this.offsetHeight;q(b,{width:a,height:c}),q(D,{width:a,height:c}),d.paper.safari()})}(x),d.paper.defs.appendChild(x),q(f,{fill:"url(#"+x.id+")"}),d.pattern=x,d.pattern&&s(d);break}var E=a.getRGB(o);if(E.error){if(("circle"==d.type||"ellipse"==d.type||"r"!=c(o).charAt())&&r(d,o)){if("opacity"in i||"fill-opacity"in i){var F=a._g.doc.getElementById(f.getAttribute("fill").replace(/^url\(#|\)$/g,l));if(F){var G=F.getElementsByTagName("stop");q(G[G.length-1],{"stop-opacity":("opacity"in i?i.opacity:1)*("fill-opacity"in i?i["fill-opacity"]:1)})}}i.gradient=o,i.fill="none";break}}else delete e.gradient,delete i.gradient,!a.is(i.opacity,"undefined")&&a.is(e.opacity,"undefined")&&q(f,{opacity:i.opacity}),!a.is(i["fill-opacity"],"undefined")&&a.is(e["fill-opacity"],"undefined")&&q(f,{"fill-opacity":i["fill-opacity"]});E[b]("opacity")&&q(f,{"fill-opacity":E.opacity>1?E.opacity/100:E.opacity});case"stroke":E=a.getRGB(o),f.setAttribute(m,E.hex),"stroke"==m&&E[b]("opacity")&&q(f,{"stroke-opacity":E.opacity>1?E.opacity/100:E.opacity}),"stroke"==m&&d._.arrows&&("startString"in d._.arrows&&t(d,d._.arrows.startString),"endString"in d._.arrows&&t(d,d._.arrows.endString,1));break;case"gradient":("circle"==d.type||"ellipse"==d.type||"r"!=c(o).charAt())&&r(d,o);break;case"opacity":i.gradient&&!i[b]("stroke-opacity")&&q(f,{"stroke-opacity":o>1?o/100:o});case"fill-opacity":if(i.gradient){F=a._g.doc.getElementById(f.getAttribute("fill").replace(/^url\(#|\)$/g,l)),F&&(G=F.getElementsByTagName("stop"),q(G[G.length-1],{"stop-opacity":o}));break}default:"font-size"==m&&(o=parseFloat(o)+"px");var H=m.replace(/(\-.)/g,function(a){return a.substring(1).toUpperCase()});f.style[H]=o,d._.dirty=1,f.setAttribute(m,o)}}y(d,e),f.style.visibility=k},x=1.2,y=function(d,f){if("text"==d.type&&(f[b]("text")||f[b]("font")||f[b]("font-size")||f[b]("x")||f[b]("y"))){var g=d.attrs,h=d.node,i=h.firstChild?e(a._g.doc.defaultView.getComputedStyle(h.firstChild,l).getPropertyValue("font-size"),10):10;if(f[b]("text")){for(g.text=f.text;h.firstChild;)h.removeChild(h.firstChild);for(var j,k=c(f.text).split("\n"),m=[],n=0,o=k.length;o>n;n++)j=q("tspan"),n&&q(j,{dy:i*x,x:g.x}),j.appendChild(a._g.doc.createTextNode(k[n])),h.appendChild(j),m[n]=j}else for(m=h.getElementsByTagName("tspan"),n=0,o=m.length;o>n;n++)n?q(m[n],{dy:i*x,x:g.x}):q(m[0],{dy:0});q(h,{x:g.x,y:g.y}),d._.dirty=1;var p=d._getBBox(),r=g.y-(p.y+p.height/2);r&&a.is(r,"finite")&&q(m[0],{dy:r})}},z=function(b,c){this[0]=this.node=b,b.raphael=!0,this.id=a._oid++,b.raphaelid=this.id,this.matrix=a.matrix(),this.realPath=null,this.paper=c,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!c.bottom&&(c.bottom=this),this.prev=c.top,c.top&&(c.top.next=this),c.top=this,this.next=null},A=a.el;z.prototype=A,A.constructor=z,a._engine.path=function(a,b){var c=q("path");b.canvas&&b.canvas.appendChild(c);var d=new z(c,b);return d.type="path",w(d,{fill:"none",stroke:"#000",path:a}),d},A.rotate=function(a,b,e){if(this.removed)return this;if(a=c(a).split(j),a.length-1&&(b=d(a[1]),e=d(a[2])),a=d(a[0]),null==e&&(b=e),null==b||null==e){var f=this.getBBox(1);b=f.x+f.width/2,e=f.y+f.height/2}return this.transform(this._.transform.concat([["r",a,b,e]])),this},A.scale=function(a,b,e,f){if(this.removed)return this;if(a=c(a).split(j),a.length-1&&(b=d(a[1]),e=d(a[2]),f=d(a[3])),a=d(a[0]),null==b&&(b=a),null==f&&(e=f),null==e||null==f)var g=this.getBBox(1);return e=null==e?g.x+g.width/2:e,f=null==f?g.y+g.height/2:f,this.transform(this._.transform.concat([["s",a,b,e,f]])),this},A.translate=function(a,b){return this.removed?this:(a=c(a).split(j),a.length-1&&(b=d(a[1])),a=d(a[0])||0,b=+b||0,this.transform(this._.transform.concat([["t",a,b]])),this)},A.transform=function(c){var d=this._;if(null==c)return d.transform;if(a._extractTransform(this,c),this.clip&&q(this.clip,{transform:this.matrix.invert()}),this.pattern&&s(this),this.node&&q(this.node,{transform:this.matrix}),1!=d.sx||1!=d.sy){var e=this.attrs[b]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":e})}return this},A.hide=function(){return!this.removed&&this.paper.safari(this.node.style.display="none"),this},A.show=function(){return!this.removed&&this.paper.safari(this.node.style.display=""),this},A.remove=function(){if(!this.removed&&this.node.parentNode){var b=this.paper;b.__set__&&b.__set__.exclude(this),k.unbind("raphael.*.*."+this.id),this.gradient&&b.defs.removeChild(this.gradient),a._tear(this,b),"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.removeChild(this.node.parentNode):this.node.parentNode.removeChild(this.node);for(var c in this)this[c]="function"==typeof this[c]?a._removedFactory(c):null;this.removed=!0}},A._getBBox=function(){if("none"==this.node.style.display){this.show();var a=!0}var b={};try{b=this.node.getBBox()}catch(c){}finally{b=b||{}}return a&&this.hide(),b},A.attr=function(c,d){if(this.removed)return this;if(null==c){var e={};for(var f in this.attrs)this.attrs[b](f)&&(e[f]=this.attrs[f]);return e.gradient&&"none"==e.fill&&(e.fill=e.gradient)&&delete e.gradient,e.transform=this._.transform,e}if(null==d&&a.is(c,"string")){if("fill"==c&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("transform"==c)return this._.transform;for(var g=c.split(j),h={},i=0,l=g.length;l>i;i++)c=g[i],h[c]=c in this.attrs?this.attrs[c]:a.is(this.paper.customAttributes[c],"function")?this.paper.customAttributes[c].def:a._availableAttrs[c];return l-1?h:h[g[0]]}if(null==d&&a.is(c,"array")){for(h={},i=0,l=c.length;l>i;i++)h[c[i]]=this.attr(c[i]);return h}if(null!=d){var m={};m[c]=d}else null!=c&&a.is(c,"object")&&(m=c);for(var n in m)k("raphael.attr."+n+"."+this.id,this,m[n]);for(n in this.paper.customAttributes)if(this.paper.customAttributes[b](n)&&m[b](n)&&a.is(this.paper.customAttributes[n],"function")){var o=this.paper.customAttributes[n].apply(this,[].concat(m[n]));this.attrs[n]=m[n];for(var p in o)o[b](p)&&(m[p]=o[p])}return w(this,m),this},A.toFront=function(){if(this.removed)return this;"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);var b=this.paper;return b.top!=this&&a._tofront(this,b),this},A.toBack=function(){if(this.removed)return this;var b=this.node.parentNode;"a"==b.tagName.toLowerCase()?b.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):b.firstChild!=this.node&&b.insertBefore(this.node,this.node.parentNode.firstChild),a._toback(this,this.paper);this.paper;return this},A.insertAfter=function(b){if(this.removed)return this;var c=b.node||b[b.length-1].node;return c.nextSibling?c.parentNode.insertBefore(this.node,c.nextSibling):c.parentNode.appendChild(this.node),a._insertafter(this,b,this.paper),this},A.insertBefore=function(b){if(this.removed)return this;var c=b.node||b[0].node;return c.parentNode.insertBefore(this.node,c),a._insertbefore(this,b,this.paper),this},A.blur=function(b){var c=this;if(0!==+b){var d=q("filter"),e=q("feGaussianBlur");c.attrs.blur=b,d.id=a.createUUID(),q(e,{stdDeviation:+b||1.5}),d.appendChild(e),c.paper.defs.appendChild(d),c._blur=d,q(c.node,{filter:"url(#"+d.id+")"})}else c._blur&&(c._blur.parentNode.removeChild(c._blur),delete c._blur,delete c.attrs.blur),c.node.removeAttribute("filter")},a._engine.circle=function(a,b,c,d){var e=q("circle");a.canvas&&a.canvas.appendChild(e);var f=new z(e,a);return f.attrs={cx:b,cy:c,r:d,fill:"none",stroke:"#000"},f.type="circle",q(e,f.attrs),f},a._engine.rect=function(a,b,c,d,e,f){var g=q("rect");a.canvas&&a.canvas.appendChild(g);var h=new z(g,a);return h.attrs={x:b,y:c,width:d,height:e,r:f||0,rx:f||0,ry:f||0,fill:"none",stroke:"#000"},h.type="rect",q(g,h.attrs),h},a._engine.ellipse=function(a,b,c,d,e){var f=q("ellipse");a.canvas&&a.canvas.appendChild(f);var g=new z(f,a);return g.attrs={cx:b,cy:c,rx:d,ry:e,fill:"none",stroke:"#000"},g.type="ellipse",q(f,g.attrs),g},a._engine.image=function(a,b,c,d,e,f){var g=q("image");q(g,{x:c,y:d,width:e,height:f,preserveAspectRatio:"none"}),g.setAttributeNS(n,"href",b),a.canvas&&a.canvas.appendChild(g);var h=new z(g,a);return h.attrs={x:c,y:d,width:e,height:f,src:b},h.type="image",h},a._engine.text=function(b,c,d,e){var f=q("text");b.canvas&&b.canvas.appendChild(f);var g=new z(f,b);return g.attrs={x:c,y:d,"text-anchor":"middle",text:e,font:a._availableAttrs.font,stroke:"none",fill:"#000"},g.type="text",w(g,g.attrs),g},a._engine.setSize=function(a,b){return this.width=a||this.width,this.height=b||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},a._engine.create=function(){var b=a._getContainer.apply(0,arguments),c=b&&b.container,d=b.x,e=b.y,f=b.width,g=b.height;if(!c)throw new Error("SVG container not found.");var h,i=q("svg"),j="overflow:hidden;";return d=d||0,e=e||0,f=f||512,g=g||342,q(i,{height:g,version:1.1,width:f,xmlns:"http://www.w3.org/2000/svg"}),1==c?(i.style.cssText=j+"position:absolute;left:"+d+"px;top:"+e+"px",a._g.doc.body.appendChild(i),h=1):(i.style.cssText=j+"position:relative",c.firstChild?c.insertBefore(i,c.firstChild):c.appendChild(i)),c=new a._Paper,c.width=f,c.height=g,c.canvas=i,c.clear(),c._left=c._top=0,h&&(c.renderfix=function(){}),c.renderfix(),c},a._engine.setViewBox=function(a,b,c,d,e){k("raphael.setViewBox",this,this._viewBox,[a,b,c,d,e]);var f,h,i=g(c/this.width,d/this.height),j=this.top,l=e?"meet":"xMinYMin";for(null==a?(this._vbSize&&(i=1),delete this._vbSize,f="0 0 "+this.width+m+this.height):(this._vbSize=i,f=a+m+b+m+c+m+d),q(this.canvas,{viewBox:f,preserveAspectRatio:l});i&&j;)h="stroke-width"in j.attrs?j.attrs["stroke-width"]:1,j.attr({"stroke-width":h}),j._.dirty=1,j._.dirtyT=1,j=j.prev;return this._viewBox=[a,b,c,d,!!e],this},a.prototype.renderfix=function(){var a,b=this.canvas,c=b.style;try{a=b.getScreenCTM()||b.createSVGMatrix()}catch(d){a=b.createSVGMatrix()}var e=-a.e%1,f=-a.f%1;(e||f)&&(e&&(this._left=(this._left+e)%1,c.left=this._left+"px"),f&&(this._top=(this._top+f)%1,c.top=this._top+"px"))},a.prototype.clear=function(){a.eve("raphael.clear",this);for(var b=this.canvas;b.firstChild;)b.removeChild(b.firstChild);this.bottom=this.top=null,(this.desc=q("desc")).appendChild(a._g.doc.createTextNode("Created with Raphaël "+a.version)),b.appendChild(this.desc),b.appendChild(this.defs=q("defs"))},a.prototype.remove=function(){k("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var b in this)this[b]="function"==typeof this[b]?a._removedFactory(b):null};var B=a.st;for(var C in A)A[b](C)&&!B[b](C)&&(B[C]=function(a){return function(){var b=arguments;return this.forEach(function(c){c[a].apply(c,b)})}}(C))}(window.Raphael),window.Raphael&&window.Raphael.vml&&function(a){var b="hasOwnProperty",c=String,d=parseFloat,e=Math,f=e.round,g=e.max,h=e.min,i=e.abs,j="fill",k=/[, ]+/,l=a.eve,m=" progid:DXImageTransform.Microsoft",n=" ",o="",p={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},q=/([clmz]),?([^clmz]*)/gi,r=/ progid:\S+Blur\([^\)]+\)/g,s=/-?[^,\s-]+/g,t="position:absolute;left:0;top:0;width:1px;height:1px",u=21600,v={path:1,rect:1,image:1},w={circle:1,ellipse:1},x=function(b){var d=/[ahqstv]/gi,e=a._pathToAbsolute;if(c(b).match(d)&&(e=a._path2curve),d=/[clmz]/g,e==a._pathToAbsolute&&!c(b).match(d)){var g=c(b).replace(q,function(a,b,c){var d=[],e="m"==b.toLowerCase(),g=p[b];return c.replace(s,function(a){e&&2==d.length&&(g+=d+p["m"==b?"l":"L"],d=[]),d.push(f(a*u))}),g+d});return g}var h,i,j=e(b);g=[];for(var k=0,l=j.length;l>k;k++){h=j[k],i=j[k][0].toLowerCase(),"z"==i&&(i="x");for(var m=1,r=h.length;r>m;m++)i+=f(h[m]*u)+(m!=r-1?",":o);g.push(i)}return g.join(n)},y=function(b,c,d){var e=a.matrix();return e.rotate(-b,.5,.5),{dx:e.x(c,d),dy:e.y(c,d)}},z=function(a,b,c,d,e,f){var g=a._,h=a.matrix,k=g.fillpos,l=a.node,m=l.style,o=1,p="",q=u/b,r=u/c;if(m.visibility="hidden",b&&c){if(l.coordsize=i(q)+n+i(r),m.rotation=f*(0>b*c?-1:1),f){var s=y(f,d,e);d=s.dx,e=s.dy}if(0>b&&(p+="x"),0>c&&(p+=" y")&&(o=-1),m.flip=p,l.coordorigin=d*-q+n+e*-r,k||g.fillsize){var t=l.getElementsByTagName(j);t=t&&t[0],l.removeChild(t),k&&(s=y(f,h.x(k[0],k[1]),h.y(k[0],k[1])),t.position=s.dx*o+n+s.dy*o),g.fillsize&&(t.size=g.fillsize[0]*i(b)+n+g.fillsize[1]*i(c)),l.appendChild(t)}m.visibility="visible"}};a.toString=function(){return"Your browser doesn’t support SVG. Falling down to VML.\nYou are running Raphaël "+this.version};var A=function(a,b,d){for(var e=c(b).toLowerCase().split("-"),f=d?"end":"start",g=e.length,h="classic",i="medium",j="medium";g--;)switch(e[g]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":h=e[g];break;case"wide":case"narrow":j=e[g];break;case"long":case"short":i=e[g]}var k=a.node.getElementsByTagName("stroke")[0];k[f+"arrow"]=h,k[f+"arrowlength"]=i,k[f+"arrowwidth"]=j},B=function(e,i){e.attrs=e.attrs||{};var l=e.node,m=e.attrs,p=l.style,q=v[e.type]&&(i.x!=m.x||i.y!=m.y||i.width!=m.width||i.height!=m.height||i.cx!=m.cx||i.cy!=m.cy||i.rx!=m.rx||i.ry!=m.ry||i.r!=m.r),r=w[e.type]&&(m.cx!=i.cx||m.cy!=i.cy||m.r!=i.r||m.rx!=i.rx||m.ry!=i.ry),s=e;for(var t in i)i[b](t)&&(m[t]=i[t]);if(q&&(m.path=a._getPath[e.type](e),e._.dirty=1),i.href&&(l.href=i.href),i.title&&(l.title=i.title),i.target&&(l.target=i.target),i.cursor&&(p.cursor=i.cursor),"blur"in i&&e.blur(i.blur),(i.path&&"path"==e.type||q)&&(l.path=x(~c(m.path).toLowerCase().indexOf("r")?a._pathToAbsolute(m.path):m.path),"image"==e.type&&(e._.fillpos=[m.x,m.y],e._.fillsize=[m.width,m.height],z(e,1,1,0,0,0))),"transform"in i&&e.transform(i.transform),r){var y=+m.cx,B=+m.cy,D=+m.rx||+m.r||0,E=+m.ry||+m.r||0;l.path=a.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",f((y-D)*u),f((B-E)*u),f((y+D)*u),f((B+E)*u),f(y*u))}if("clip-rect"in i){var G=c(i["clip-rect"]).split(k);if(4==G.length){G[2]=+G[2]+ +G[0],G[3]=+G[3]+ +G[1];var H=l.clipRect||a._g.doc.createElement("div"),I=H.style;I.clip=a.format("rect({1}px {2}px {3}px {0}px)",G),l.clipRect||(I.position="absolute",I.top=0,I.left=0,I.width=e.paper.width+"px",I.height=e.paper.height+"px",l.parentNode.insertBefore(H,l),H.appendChild(l),l.clipRect=H)}i["clip-rect"]||l.clipRect&&(l.clipRect.style.clip="auto")}if(e.textpath){var J=e.textpath.style;i.font&&(J.font=i.font),i["font-family"]&&(J.fontFamily='"'+i["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,o)+'"'),i["font-size"]&&(J.fontSize=i["font-size"]),i["font-weight"]&&(J.fontWeight=i["font-weight"]),i["font-style"]&&(J.fontStyle=i["font-style"])}if("arrow-start"in i&&A(s,i["arrow-start"]),"arrow-end"in i&&A(s,i["arrow-end"],1),null!=i.opacity||null!=i["stroke-width"]||null!=i.fill||null!=i.src||null!=i.stroke||null!=i["stroke-width"]||null!=i["stroke-opacity"]||null!=i["fill-opacity"]||null!=i["stroke-dasharray"]||null!=i["stroke-miterlimit"]||null!=i["stroke-linejoin"]||null!=i["stroke-linecap"]){var K=l.getElementsByTagName(j),L=!1;if(K=K&&K[0],!K&&(L=K=F(j)),"image"==e.type&&i.src&&(K.src=i.src),i.fill&&(K.on=!0),(null==K.on||"none"==i.fill||null===i.fill)&&(K.on=!1),K.on&&i.fill){var M=c(i.fill).match(a._ISURL);if(M){K.parentNode==l&&l.removeChild(K),K.rotate=!0,K.src=M[1],K.type="tile";var N=e.getBBox(1);K.position=N.x+n+N.y,e._.fillpos=[N.x,N.y],a._preload(M[1],function(){e._.fillsize=[this.offsetWidth,this.offsetHeight]})}else K.color=a.getRGB(i.fill).hex,K.src=o,K.type="solid",a.getRGB(i.fill).error&&(s.type in{circle:1,ellipse:1}||"r"!=c(i.fill).charAt())&&C(s,i.fill,K)&&(m.fill="none",m.gradient=i.fill,K.rotate=!1)}if("fill-opacity"in i||"opacity"in i){var O=((+m["fill-opacity"]+1||2)-1)*((+m.opacity+1||2)-1)*((+a.getRGB(i.fill).o+1||2)-1);O=h(g(O,0),1),K.opacity=O,K.src&&(K.color="none")}l.appendChild(K);var P=l.getElementsByTagName("stroke")&&l.getElementsByTagName("stroke")[0],Q=!1;!P&&(Q=P=F("stroke")),(i.stroke&&"none"!=i.stroke||i["stroke-width"]||null!=i["stroke-opacity"]||i["stroke-dasharray"]||i["stroke-miterlimit"]||i["stroke-linejoin"]||i["stroke-linecap"])&&(P.on=!0),("none"==i.stroke||null===i.stroke||null==P.on||0==i.stroke||0==i["stroke-width"])&&(P.on=!1);var R=a.getRGB(i.stroke);P.on&&i.stroke&&(P.color=R.hex),O=((+m["stroke-opacity"]+1||2)-1)*((+m.opacity+1||2)-1)*((+R.o+1||2)-1);var S=.75*(d(i["stroke-width"])||1);if(O=h(g(O,0),1),null==i["stroke-width"]&&(S=m["stroke-width"]),i["stroke-width"]&&(P.weight=S),S&&1>S&&(O*=S)&&(P.weight=1),P.opacity=O,i["stroke-linejoin"]&&(P.joinstyle=i["stroke-linejoin"]||"miter"),P.miterlimit=i["stroke-miterlimit"]||8,i["stroke-linecap"]&&(P.endcap="butt"==i["stroke-linecap"]?"flat":"square"==i["stroke-linecap"]?"square":"round"),i["stroke-dasharray"]){var T={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};P.dashstyle=T[b](i["stroke-dasharray"])?T[i["stroke-dasharray"]]:o}Q&&l.appendChild(P)}if("text"==s.type){s.paper.canvas.style.display=o;var U=s.paper.span,V=100,W=m.font&&m.font.match(/\d+(?:\.\d*)?(?=px)/);p=U.style,m.font&&(p.font=m.font),m["font-family"]&&(p.fontFamily=m["font-family"]),m["font-weight"]&&(p.fontWeight=m["font-weight"]),m["font-style"]&&(p.fontStyle=m["font-style"]),W=d(m["font-size"]||W&&W[0])||10,p.fontSize=W*V+"px",s.textpath.string&&(U.innerHTML=c(s.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var X=U.getBoundingClientRect();s.W=m.w=(X.right-X.left)/V,s.H=m.h=(X.bottom-X.top)/V,s.X=m.x,s.Y=m.y+s.H/2,("x"in i||"y"in i)&&(s.path.v=a.format("m{0},{1}l{2},{1}",f(m.x*u),f(m.y*u),f(m.x*u)+1));for(var Y=["x","y","text","font","font-family","font-weight","font-style","font-size"],Z=0,$=Y.length;$>Z;Z++)if(Y[Z]in i){s._.dirty=1;break}switch(m["text-anchor"]){case"start":s.textpath.style["v-text-align"]="left",s.bbx=s.W/2;break;case"end":s.textpath.style["v-text-align"]="right",s.bbx=-s.W/2;break;default:s.textpath.style["v-text-align"]="center",s.bbx=0}s.textpath.style["v-text-kern"]=!0}},C=function(b,f,g){b.attrs=b.attrs||{};var h=(b.attrs,Math.pow),i="linear",j=".5 .5";if(b.attrs.gradient=f,f=c(f).replace(a._radial_gradient,function(a,b,c){return i="radial",b&&c&&(b=d(b),c=d(c),h(b-.5,2)+h(c-.5,2)>.25&&(c=e.sqrt(.25-h(b-.5,2))*(2*(c>.5)-1)+.5),j=b+n+c),o}),f=f.split(/\s*\-\s*/),"linear"==i){var k=f.shift();if(k=-d(k),isNaN(k))return null}var l=a._parseDots(f);if(!l)return null;if(b=b.shape||b.node,l.length){b.removeChild(g),g.on=!0,g.method="none",g.color=l[0].color,g.color2=l[l.length-1].color;for(var m=[],p=0,q=l.length;q>p;p++)l[p].offset&&m.push(l[p].offset+n+l[p].color);g.colors=m.length?m.join():"0% "+g.color,"radial"==i?(g.type="gradientTitle",g.focus="100%",g.focussize="0 0",g.focusposition=j,g.angle=0):(g.type="gradient",g.angle=(270-k)%360),b.appendChild(g)}return 1},D=function(b,c){this[0]=this.node=b,b.raphael=!0,this.id=a._oid++,b.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=c,this.matrix=a.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!c.bottom&&(c.bottom=this),this.prev=c.top,c.top&&(c.top.next=this),c.top=this,this.next=null},E=a.el;D.prototype=E,E.constructor=D,E.transform=function(b){if(null==b)return this._.transform;var d,e=this.paper._viewBoxShift,f=e?"s"+[e.scale,e.scale]+"-1-1t"+[e.dx,e.dy]:o;e&&(d=b=c(b).replace(/\.{3}|…/g,this._.transform||o)),a._extractTransform(this,f+b);var g,h=this.matrix.clone(),i=this.skew,j=this.node,k=~c(this.attrs.fill).indexOf("-"),l=!c(this.attrs.fill).indexOf("url(");if(h.translate(-.5,-.5),l||k||"image"==this.type)if(i.matrix="1 0 0 1",i.offset="0 0",g=h.split(),k&&g.noRotation||!g.isSimple){j.style.filter=h.toFilter();var m=this.getBBox(),p=this.getBBox(1),q=m.x-p.x,r=m.y-p.y;j.coordorigin=q*-u+n+r*-u,z(this,1,1,q,r,0)}else j.style.filter=o,z(this,g.scalex,g.scaley,g.dx,g.dy,g.rotate);else j.style.filter=o,i.matrix=c(h),i.offset=h.offset();return d&&(this._.transform=d),this},E.rotate=function(a,b,e){if(this.removed)return this;if(null!=a){if(a=c(a).split(k),a.length-1&&(b=d(a[1]),e=d(a[2])),a=d(a[0]),null==e&&(b=e),null==b||null==e){var f=this.getBBox(1);b=f.x+f.width/2,e=f.y+f.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",a,b,e]])),this}},E.translate=function(a,b){return this.removed?this:(a=c(a).split(k),a.length-1&&(b=d(a[1])),a=d(a[0])||0,b=+b||0,this._.bbox&&(this._.bbox.x+=a,this._.bbox.y+=b),this.transform(this._.transform.concat([["t",a,b]])),this)},E.scale=function(a,b,e,f){if(this.removed)return this;if(a=c(a).split(k),a.length-1&&(b=d(a[1]),e=d(a[2]),f=d(a[3]),isNaN(e)&&(e=null),isNaN(f)&&(f=null)),a=d(a[0]),null==b&&(b=a),null==f&&(e=f),null==e||null==f)var g=this.getBBox(1);return e=null==e?g.x+g.width/2:e,f=null==f?g.y+g.height/2:f,this.transform(this._.transform.concat([["s",a,b,e,f]])),this._.dirtyT=1,this},E.hide=function(){return!this.removed&&(this.node.style.display="none"),this},E.show=function(){return!this.removed&&(this.node.style.display=o),this},E._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},E.remove=function(){if(!this.removed&&this.node.parentNode){this.paper.__set__&&this.paper.__set__.exclude(this),a.eve.unbind("raphael.*.*."+this.id),a._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape);for(var b in this)this[b]="function"==typeof this[b]?a._removedFactory(b):null;this.removed=!0}},E.attr=function(c,d){if(this.removed)return this;if(null==c){var e={};for(var f in this.attrs)this.attrs[b](f)&&(e[f]=this.attrs[f]);return e.gradient&&"none"==e.fill&&(e.fill=e.gradient)&&delete e.gradient,e.transform=this._.transform,e}if(null==d&&a.is(c,"string")){if(c==j&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;for(var g=c.split(k),h={},i=0,m=g.length;m>i;i++)c=g[i],h[c]=c in this.attrs?this.attrs[c]:a.is(this.paper.customAttributes[c],"function")?this.paper.customAttributes[c].def:a._availableAttrs[c];return m-1?h:h[g[0]]}if(this.attrs&&null==d&&a.is(c,"array")){for(h={},i=0,m=c.length;m>i;i++)h[c[i]]=this.attr(c[i]);return h}var n;null!=d&&(n={},n[c]=d),null==d&&a.is(c,"object")&&(n=c);for(var o in n)l("raphael.attr."+o+"."+this.id,this,n[o]);if(n){for(o in this.paper.customAttributes)if(this.paper.customAttributes[b](o)&&n[b](o)&&a.is(this.paper.customAttributes[o],"function")){var p=this.paper.customAttributes[o].apply(this,[].concat(n[o]));this.attrs[o]=n[o];for(var q in p)p[b](q)&&(n[q]=p[q])}n.text&&"text"==this.type&&(this.textpath.string=n.text),B(this,n)}return this},E.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&a._tofront(this,this.paper),this},E.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),a._toback(this,this.paper)),this)},E.insertAfter=function(b){return this.removed?this:(b.constructor==a.st.constructor&&(b=b[b.length-1]),b.node.nextSibling?b.node.parentNode.insertBefore(this.node,b.node.nextSibling):b.node.parentNode.appendChild(this.node),a._insertafter(this,b,this.paper),this)},E.insertBefore=function(b){return this.removed?this:(b.constructor==a.st.constructor&&(b=b[0]),b.node.parentNode.insertBefore(this.node,b.node),a._insertbefore(this,b,this.paper),this)},E.blur=function(b){var c=this.node.runtimeStyle,d=c.filter;d=d.replace(r,o),0!==+b?(this.attrs.blur=b,c.filter=d+n+m+".Blur(pixelradius="+(+b||1.5)+")",c.margin=a.format("-{0}px 0 0 -{0}px",f(+b||1.5))):(c.filter=d,c.margin=0,delete this.attrs.blur)},a._engine.path=function(a,b){var c=F("shape");c.style.cssText=t,c.coordsize=u+n+u,c.coordorigin=b.coordorigin;var d=new D(c,b),e={fill:"none",stroke:"#000"};a&&(e.path=a),d.type="path",d.path=[],d.Path=o,B(d,e),b.canvas.appendChild(c);var f=F("skew");return f.on=!0,c.appendChild(f),d.skew=f,d.transform(o),d},a._engine.rect=function(b,c,d,e,f,g){var h=a._rectPath(c,d,e,f,g),i=b.path(h),j=i.attrs;return i.X=j.x=c,i.Y=j.y=d,i.W=j.width=e,i.H=j.height=f,j.r=g,j.path=h,i.type="rect",i},a._engine.ellipse=function(a,b,c,d,e){{var f=a.path();f.attrs}return f.X=b-d,f.Y=c-e,f.W=2*d,f.H=2*e,f.type="ellipse",B(f,{cx:b,cy:c,rx:d,ry:e}),f},a._engine.circle=function(a,b,c,d){{var e=a.path();e.attrs}return e.X=b-d,e.Y=c-d,e.W=e.H=2*d,e.type="circle",B(e,{cx:b,cy:c,r:d}),e},a._engine.image=function(b,c,d,e,f,g){var h=a._rectPath(d,e,f,g),i=b.path(h).attr({stroke:"none"}),k=i.attrs,l=i.node,m=l.getElementsByTagName(j)[0];return k.src=c,i.X=k.x=d,i.Y=k.y=e,i.W=k.width=f,i.H=k.height=g,k.path=h,i.type="image",m.parentNode==l&&l.removeChild(m),m.rotate=!0,m.src=c,m.type="tile",i._.fillpos=[d,e],i._.fillsize=[f,g],l.appendChild(m),z(i,1,1,0,0,0),i},a._engine.text=function(b,d,e,g){var h=F("shape"),i=F("path"),j=F("textpath");d=d||0,e=e||0,g=g||"",i.v=a.format("m{0},{1}l{2},{1}",f(d*u),f(e*u),f(d*u)+1),i.textpathok=!0,j.string=c(g),j.on=!0,h.style.cssText=t,h.coordsize=u+n+u,h.coordorigin="0 0";var k=new D(h,b),l={fill:"#000",stroke:"none",font:a._availableAttrs.font,text:g};k.shape=h,k.path=i,k.textpath=j,k.type="text",k.attrs.text=c(g),k.attrs.x=d,k.attrs.y=e,k.attrs.w=1,k.attrs.h=1,B(k,l),h.appendChild(j),h.appendChild(i),b.canvas.appendChild(h);var m=F("skew");return m.on=!0,h.appendChild(m),k.skew=m,k.transform(o),k},a._engine.setSize=function(b,c){var d=this.canvas.style;return this.width=b,this.height=c,b==+b&&(b+="px"),c==+c&&(c+="px"),d.width=b,d.height=c,d.clip="rect(0 "+b+" "+c+" 0)",this._viewBox&&a._engine.setViewBox.apply(this,this._viewBox),this},a._engine.setViewBox=function(b,c,d,e,f){a.eve("raphael.setViewBox",this,this._viewBox,[b,c,d,e,f]);var h,i,j=this.width,k=this.height,l=1/g(d/j,e/k);return f&&(h=k/e,i=j/d,j>d*h&&(b-=(j-d*h)/2/h),k>e*i&&(c-=(k-e*i)/2/i)),this._viewBox=[b,c,d,e,!!f],this._viewBoxShift={dx:-b,dy:-c,scale:l},this.forEach(function(a){a.transform("...")}),this};var F;a._engine.initWin=function(a){var b=a.document;b.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!b.namespaces.rvml&&b.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),F=function(a){return b.createElement("<rvml:"+a+' class="rvml">')}}catch(c){F=function(a){return b.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},a._engine.initWin(a._g.win),a._engine.create=function(){var b=a._getContainer.apply(0,arguments),c=b.container,d=b.height,e=b.width,f=b.x,g=b.y;if(!c)throw new Error("VML container not found.");var h=new a._Paper,i=h.canvas=a._g.doc.createElement("div"),j=i.style;return f=f||0,g=g||0,e=e||512,d=d||342,h.width=e,h.height=d,e==+e&&(e+="px"),d==+d&&(d+="px"),h.coordsize=1e3*u+n+1e3*u,h.coordorigin="0 0",h.span=a._g.doc.createElement("span"),h.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",i.appendChild(h.span),j.cssText=a.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",e,d),1==c?(a._g.doc.body.appendChild(i),j.left=f+"px",j.top=g+"px",j.position="absolute"):c.firstChild?c.insertBefore(i,c.firstChild):c.appendChild(i),h.renderfix=function(){},h},a.prototype.clear=function(){a.eve("raphael.clear",this),this.canvas.innerHTML=o,this.span=a._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},a.prototype.remove=function(){a.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas);for(var b in this)this[b]="function"==typeof this[b]?a._removedFactory(b):null;return!0};var G=a.st;for(var H in E)E[b](H)&&!G[b](H)&&(G[H]=function(a){return function(){var b=arguments;return this.forEach(function(c){c[a].apply(c,b)
})}}(H))}(window.Raphael);var tagInk=function(a,b){"use strict";function c(a){var b,c,d,e,f,g,h,k,l,n,o,p,q,r,s,t=a.x,u=a.y,v=a.width,w=a.height;b=eb/Y.w,c=b*(w/v),d=-Y.x*b,e=-Y.y*b,i({x:t,y:u,w:v,h:w},{x:kb,y:lb,w:mb,h:nb})&&(f=eb/b,g=fb/c,h=v*f,k=w*g,l=h/eb*(cb-d)+t,n=k/fb*(db-e)+u,o=h/qb,ab=v/ib,N.length&&"block"!==M?(r=C.width(),s=C.height(),R=r,S=s,j(-ob/eb,-pb/fb,{cw:r,ch:s},0),m(o,o),j(l/eb,n/fb,{cw:r,ch:s},1)):(p=eb/ab,q=fb/ab,D.setViewBox(-l/ab,-n/ab,p,q)),ob=l,pb=n,qb=h,rb=k,kb=t,lb=u,mb=v,nb=w)}function d(a){for(var b="",c=Raphael.parsePathString(a),d=[],e=bb.width(),f=bb.height(),g=c.length-2;g>=0;g--)if("z"==c[g][0]){b+="M"+d[0]+","+d[1];for(var h=2;h<d.length;h++)b+=h%6==2?"C"+d[h]:d[h],b+=h%6!=1?",":"";b+="z",d.length=0,d=[]}else"M"==c[g][0]?(d.push(c[g][1]),d.push(c[g][2])):(d.push(c[g][5]),d.push(c[g][6]),d.push(c[g][3]),d.push(c[g][4]),d.push(c[g][1]),d.push(c[g][2]));b+="M"+d[0]+","+d[1];for(var h=2;h<d.length;h++)b+=h%6==2?"C"+d[h]:d[h],b+=h%6!=1?",":"";return b+="z",b+="M-5,-5L"+(e+5)+",-5L"+(e+5)+","+(f+5)+"L-5,"+(f+5)+"L-5,-5z"}function e(){for(var a=bb.width(),b=bb.height(),c="",d="",e=I.length,f=0;e>f;f++)I[f].remove();I.length=0;for(var f=0;f<F.length;f++)"M"===F[f]&&(c+="PATH::[pathstring]",d+="PATH::[pathstring]"),c+=F[f]+a*G[f][0]+","+b*G[f][1],d+=F[f]+G[f][0]+","+G[f][1],"L"!=F[f+1]&&(c+="[stroke]"+H[f].color+"[strokeo]"+H[f].opacity+"[strokew]"+b*H[f].width+"[]|",d+="[stroke]"+H[f].color+"[strokeo]"+H[f].opacity+"[strokew]"+H[f].width+"[]|");var h=[];c.length>0&&(h=c.split("PATH::"));for(var f=1;f<h.length;f++){var i=g(h[f],"pathstring","s"),j=g(h[f],"stroke","s"),k=g(h[f],"strokeo","f"),l=g(h[f],"strokew","f"),m=D.path(i);m.data("type","path"),m.attr({"stroke-width":l,"stroke-opacity":k,stroke:j,"stroke-linejoin":"round","stroke-linecap":"round"}),I.push(m)}J=d}function f(){l();for(var a=C.width(),b=C.height(),c="",e=0,f=0;f<O.length;f++)if("M"==O[f]||"L"==O[f])c+=O[f]+N[e]*a+","+N[e+1]*b,e+=2;else if("C"==O[f]){c+="C"+N[e]*a;for(var g=1;6>g;g++)c+=","+(g%2?N[e+g]*b:N[e+g]*a);e+=6}else"z"==O[f]?c+="z":console.log("ELSE: "+O[f]);var h=c;"isolate"==M&&(h=d(c));D.path(h).attr({fill:K,"fill-opacity":L,"stroke-width":0}).data("type","trans");P="TRANS::[path]"+c+"[color]"+K+"[opac]"+L+"[mode]"+M+"[]",s()}function g(a,b,c){return"f"===c?parseFloat(a.split("["+b+"]")[1].split("[")[0]):"s"===c?a.split("["+b+"]")[1].split("[")[0]:parseInt(a.split("["+b+"]")[1].split("[")[0])}function h(a){var b,c=a.split("|"),d=C.width(),h=C.height();R=d,S=h;var i=c.length;for(b=0;i>b;b++){var j=c[b];if(j&&""!=j){var k=j.split("::")[0];switch(k.toLowerCase()){case"text":var l=g(j,"fontsize","f")*h;Q=l;var m,n,o=g(j,"x","f")*d,p=g(j,"y","f")*h;try{m=g(j,"w","f"),n=g(j,"h","f")}catch(q){m=null,n=null}var r=g(j,"color","s"),s=g(j,"font","s"),u=g(j,"str","s"),v=D.text(o,p,u);v.attr({"font-family":s,"font-size":l+"px",fill:r,"text-anchor":"start"}),v.data({x:o,y:p,w:m,h:n,fontsize:l,color:r,font:s,type:"text",str:u}),x=v;break;case"path":J||(J=""),J+=j+"|",t(j+"|");break;case"bezier":sb||(sb=""),sb+=g(j,"pathstring","s"),H.push({color:g(j,"stroke","s"),opacity:g(j,"strokeo","f"),width:g(j,"strokew","f")});break;case"trans":P||(P=""),P+=j+"|";var y=g(j,"path","s");K=g(j,"color","s"),L=g(j,"opac","f"),M=g(j,"mode","s"),N=y.match(/[0-9.\-]+/g),O=y.match(/[CMLz]/g),f();break;default:console.log("Using deprecated ink types: "+k.toLowerCase()+".")}}}e(),sb&&w(),X&&D.setViewBox(0,0,d,h)}function i(a,b){return Math.abs(a.x-b.x)>1e-8||Math.abs(a.y-b.y)>1e-8||Math.abs(a.w-b.w)>1e-8||Math.abs(a.h-b.h)>1e-8}function j(a,b,c,d){var g=c.cw,i=c.ch;D.forEach(function(c){var d=c.data("type");"text"===d&&(c.attr({x:parseFloat(c.attr("x"))+a*g,y:parseFloat(c.attr("y"))+b*i}),c.data("x",parseFloat(c.data("x"))+a*g),c.data("y",parseFloat(c.data("y"))+b*i),y=c.attr("x"),z=c.attr("y"))});for(var j=G.length,k=0;j>k;k++)G[k][0]=G[k][0]+a,G[k][1]=G[k][1]+b;for(var m=N.length,k=0;m>k;k++)N[k]+=k%2?b:a;if(j&&d&&e(),m&&d&&f(),!j&&!m&&d){var n=s();l(),V=n,h(V)}}function k(a,b){return parseFloat(a)/parseFloat(b)}function l(){D.clear(),F.length=0,G.length=0,H.length=0,I.length=0,T.length=0,J="",V=""}function m(a,b,c){D.forEach(function(c){var d=c.data("type");"text"===d&&(c.attr({"font-size":parseFloat(c.attr("font-size"))*b,x:c.attr("x")*a,y:c.attr("y")*b}),c.data({fontsize:c.data("fontsize")*b,x:c.data("x")*a,y:c.data("y")*b}))});for(var d=G.length,g=0;d>g;g++)G[g][0]=G[g][0]*a,G[g][1]=G[g][1]*b,H[g].width=H[g].width*a;for(var i=N.length,g=0;i>g;g++)N[g]*=g%2?b:a;if(d&&c&&e(),i&&c&&f(),!d&&!i&&c){var j=s();l(),V=j,h(V)}}function n(){var a=$("[data-proxy='"+escape(Z)+"']"),b=Y.x,c=Y.y,d=Y.w,e=eb/d,f=e*(a.data("h")/a.data("w")),g=-b*e,h=-c*f;gb=g,hb=h,ib=e,jb=f,kb=gb,lb=hb,mb=ib,nb=jb}function o(a){Z=a}function p(a){_=a}function q(a){Y=a}function r(a){a=parseInt(a),W=a}function s(){var a="",b=C.width(),c=C.height();return J&&""!=J&&(J.split("Mundefined").length>1&&(J=J.split("Mundefined").join("")),a+=J),P&&""!=P&&(a+=P),tb&&(a+=tb.replace(/undefined/g,"")),D.forEach(function(d){if("text"===d.data("type")){var e="TEXT::[str]"+d.data("str")+"[font]"+d.data("font")+"[fontsize]"+k(d.data("fontsize"),c)+"[color]"+d.data("color")+"[x]"+k(d.data("x"),b)+"[y]"+k(d.data("y"),c)+"[w]"+d.data("w")+"[h]"+d.data("h")+"[]";a+=e+"|"}else console.log("type = "+d.data("type"))}),V=a,a}function t(a){var b,c;for(b=0;b<a.length;b++)if("L"==a[b]||"M"==a[b]){var d=a.substring(b).split("|")[0],e=g(d,"stroke","s"),f=g(d,"strokeo","f"),h=g(d,"strokew","f");F.push(a[b]),H.push({color:e,opacity:f,width:h})}var i=a.split("L");for(b=0;b<i.length;b++)if(i[b].length>0){var j=i[b].split("M");for(c=0;c<j.length;c++)if(j[c].length>0&&"P"!=j[c].charAt(0)){var k=j[c].split(",");G.push([parseFloat(k[0]),parseFloat(k[1])])}}U=!1}function u(a){return a.match(/[0-9.\-]+/g)}function v(a){return a.match(/[MLR ]/g)}function w(a){var b,c=bb.width(),d=bb.height(),e=[],f="",g="";if(D.clear(),a=a||sb){var h=v(a),i=u(a),j=0;for(b=0;b<h.length;b++)"M"===h[b]&&(f+="BEZIER::[pathstring]"),g+=h[b]+c*i[2*b]+","+d*i[2*b+1],f+=h[b]+i[2*b]+","+i[2*b+1],("M"===h[b+1]||b===h.length-1)&&(e.push(g),g="",f+="[stroke]"+H[j].color+"[strokeo]"+H[j].opacity+"[strokew]"+H[j].width+"[]|",j++);for(console.log("to save: "+f),b=0;b<e.length;b++){console.log("to draw: "+e[b]);var k=D.path(e[b]);k.data("type","bezier"),k.attr({"stroke-width":H[b].width*d,"stroke-opacity":H[b].opacity,stroke:H[b].color,"stroke-linejoin":"round","stroke-linecap":"round"})}tb=f}}var x,y,z,A={},B=a,b=b?b:$("#"+B)[0],C=$(b),D=Raphael(b,"100%","100%"),E={shapes:0,draw:1,erase:2,text:5},F=[],G=[],H=[],I=[],J="",K="#000000",L=.8,M="isolate",N=[],O=[],P="",Q="12px",R=C.width(),S=C.height(),T=[],U=!1,V="",W=E.draw,X=!0,Y={},Z="",_="",ab=1,bb=$($("#rinplayer").length?"#rinplayer":"#rinPlayer"),cb=0,db=0,eb=bb.width(),fb=bb.height(),gb=0,hb=0,ib=0,jb=0,kb=0,lb=0,mb=0,nb=0,ob=0,pb=0,qb=eb,rb=fb;A.canvid=a,$("#"+B+" svg").css("position","absolute"),A.adjustViewBox=c,A.block_to_isol=d,A.drawPaths=e,A.drawTrans=f,A.get_attr=g,A.loadInk=h,A.nontrivial=i,A.panObjects=j,A.rel_dims=k,A.remove_all=l,A.resizeObjects=m,A.retrieveOrigDims=n,A.setArtName=o,A.setEID=p,A.setInitKeyframeData=q,A.set_mode=r,A.update_datastring=s,A.update_ml_xy_pa=t;var D,sb="",tb="";return A.drawBezierPath=w,A};window.Seadragon||(window.Seadragon={});var Seadragon=window.Seadragon,SeadragonConfig=Seadragon.Config;!function(){SeadragonConfig||(SeadragonConfig=Seadragon.Config={debugMode:!1,animationTime:1.5,blendTime:.5,alwaysBlend:!1,autoHideControls:!0,constrainDuringPan:!0,immediateRender:!1,logarithmicZoom:!0,wrapHorizontal:!1,wrapVertical:!1,wrapOverlays:!1,transformOverlays:!1,minZoomDimension:null,minZoomImageRatio:.8,maxZoomPixelRatio:2,visibilityRatio:.8,springStiffness:5,imageLoaderLimit:2,clickTimeThreshold:200,clickDistThreshold:25,zoomPerClick:2,zoomPerScroll:Math.pow(2,1/3),zoomPerSecond:2,proxyUrl:null,imagePath:"img/",fps:60})}();var SeadragonStrings=Seadragon.Strings;!function(){SeadragonStrings||(SeadragonStrings=Seadragon.Strings={Errors:{Failure:"Sorry, but Seadragon Ajax can't run on your browser!\nPlease try using IE 8 or Firefox 3.\n",Dzc:"Sorry, we don't support Deep Zoom Collections!",Dzi:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",Xml:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",Empty:"You asked us to open nothing, so we did just that.",ImageFormat:"Sorry, we don't support {0}-based Deep Zoom Images.",Security:"It looks like a security restriction stopped us from loading this Deep Zoom Image.",Status:"This space unintentionally left blank ({0} {1}).",Unknown:"Whoops, something inexplicably went wrong. Sorry!"},Messages:{Loading:"Loading..."},Tooltips:{FullPage:"Toggle full page",Home:"Go home",ZoomIn:"Zoom in (you can also use your mouse's scroll wheel)",ZoomOut:"Zoom out (you can also use your mouse's scroll wheel)"}},SeadragonStrings.getString=function(a){for(var b=a.split("."),c=SeadragonStrings,d=0;d<b.length;d++)c=c[b[d]]||{};"string"!=typeof c&&(c="");var e=arguments;return c.replace(/\{\d+\}/g,function(a){var b=parseInt(a.match(/\d+/))+1;return b<e.length?e[b]:""})},SeadragonStrings.setString=function(a,b){for(var c=a.split("."),d=SeadragonStrings,e=0;e<c.length-1;e++)d[c[e]]||(d[c[e]]={}),d=d[c[e]];d[c[e]]=b})}();var SeadragonDebug=function(){this.log=function(a,b){var c=window.console||{},d=SeadragonConfig.debugMode;d&&c.log?c.log(a):d&&b&&alert(a)},this.error=function(a,b){var c=window.console||{},d=SeadragonConfig.debugMode;if(d&&c.error?c.error(a):d&&alert(a),d)throw b||new Error(a)},this.fail=function(a){throw alert(SeadragonStrings.getString("Errors.Failure")),new Error(a)}};SeadragonDebug=Seadragon.Debug=new SeadragonDebug;var SeadragonProfiler=Seadragon.Profiler=function(){var a=this,b=!1,c=0,d=null,e=null,f=1/0,g=0,h=0,i=1/0,j=0,k=0;this.getAvgUpdateTime=function(){return g},this.getMinUpdateTime=function(){return f},this.getMaxUpdateTime=function(){return h},this.getAvgIdleTime=function(){return j},this.getMinIdleTime=function(){return i},this.getMaxIdleTime=function(){return k},this.isMidUpdate=function(){return b},this.getNumUpdates=function(){return c},this.beginUpdate=function(){if(b&&a.endUpdate(),b=!0,d=Date.now(),!(1>c)){var f=d-e;j=(j*(c-1)+f)/c,i>f&&(i=f),f>k&&(k=f)}},this.endUpdate=function(){if(b){e=Date.now(),b=!1;var a=e-d;c++,g=(g*(c-1)+a)/c,f>a&&(f=a),a>h&&(h=a)}},this.clearProfile=function(){b=!1,c=0,d=null,e=null,f=1/0,g=0,h=0,i=1/0,j=0,k=0}},SeadragonPoint=Seadragon.Point;!function(){if(!SeadragonPoint){SeadragonPoint=Seadragon.Point=function(a,b){this.x="number"==typeof a?a:0,this.y="number"==typeof b?b:0};var a=SeadragonPoint.prototype;a.plus=function(a){return new SeadragonPoint(this.x+a.x,this.y+a.y)},a.minus=function(a){return new SeadragonPoint(this.x-a.x,this.y-a.y)},a.times=function(a){return new SeadragonPoint(this.x*a,this.y*a)},a.divide=function(a){return new SeadragonPoint(this.x/a,this.y/a)},a.negate=function(){return new SeadragonPoint(-this.x,-this.y)},a.distanceTo=function(a){return Math.sqrt(Math.pow(this.x-a.x,2)+Math.pow(this.y-a.y,2))},a.distance2To=function(a){return Math.pow(this.x-a.x,2)+Math.pow(this.y-a.y,2)},a.apply=function(a){return new SeadragonPoint(a(this.x),a(this.y))},a.equals=function(a){return a instanceof SeadragonPoint&&this.x===a.x&&this.y===a.y},a.toString=function(){return"("+this.x+","+this.y+")"}}}();var SeadragonRect=Seadragon.Rect;!function(){if(!SeadragonRect){SeadragonRect=Seadragon.Rect=function(a,b,c,d){this.x="number"==typeof a?a:0,this.y="number"==typeof b?b:0,this.width="number"==typeof c?c:0,this.height="number"==typeof d?d:0};var a=SeadragonRect.prototype;a.getAspectRatio=function(){return this.width/this.height},a.getTopLeft=function(){return new SeadragonPoint(this.x,this.y)},a.getBottomRight=function(){return new SeadragonPoint(this.x+this.width,this.y+this.height)},a.getCenter=function(){return new SeadragonPoint(this.x+this.width/2,this.y+this.height/2)},a.getSize=function(){return new SeadragonPoint(this.width,this.height)},a.equals=function(a){return a instanceof SeadragonRect&&this.x===a.x&&this.y===a.y&&this.width===a.width&&this.height===a.height},a.toString=function(){return"["+this.x+","+this.y+","+this.width+"x"+this.height+"]"}}}();var SeadragonSpring=Seadragon.Spring=function(a){function b(a){var b=SeadragonConfig.springStiffness;return(1-Math.exp(-a*b))/(1-Math.exp(-b))}var c="number"==typeof a?a:0,d=c,e=c,f=Date.now(),g=f,h=f;this.getCurrent=function(){return c},this.getTarget=function(){return e},this.resetTo=function(a){e=a,h=f,d=e,g=h},this.springTo=function(a){d=c,g=f,e=a,h=g+1e3*SeadragonConfig.animationTime},this.shiftBy=function(a){d+=a,e+=a},this.update=function(){f=Date.now(),c=f>=h?e:d+(e-d)*b((f-g)/(h-g))}},SeadragonBrowser=Seadragon.Browser={UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5},SeadragonUtils=function(){function a(a,b){return b&&a!=document.body?document.body:a.offsetParent}var b=this,c={bmp:!1,jpeg:!0,jpg:!0,png:!0,tif:!1,wdp:!1},d=SeadragonBrowser.UNKNOWN,e=0,f=!1,g={};!function(){var a=navigator.appName,b=navigator.appVersion,c=navigator.userAgent;if("Microsoft Internet Explorer"==a&&window.attachEvent&&window.ActiveXObject){var h=c.indexOf("MSIE");d=SeadragonBrowser.IE,e=parseFloat(c.substring(h+5,c.indexOf(";",h)));var i=document.documentMode;"undefined"!=typeof i&&(e=i)}else if("Netscape"==a&&window.addEventListener){var j=c.indexOf("Firefox"),k=c.indexOf("Safari"),l=c.indexOf("Chrome");if(j>=0)d=SeadragonBrowser.FIREFOX,e=parseFloat(c.substring(j+8));else if(k>=0){var m=c.substring(0,k).lastIndexOf("/");d=l>=0?SeadragonBrowser.CHROME:SeadragonBrowser.SAFARI,e=parseFloat(c.substring(m+1,k))}}else"Opera"==a&&window.opera&&window.attachEvent&&(d=SeadragonBrowser.OPERA,e=parseFloat(b));for(var n=window.location.search.substring(1),o=n.split("&"),p=0;p<o.length;p++){var q=o[p],r=q.indexOf("=");r>0&&(g[q.substring(0,r)]=decodeURIComponent(q.substring(r+1)))}f=d==SeadragonBrowser.IE&&9>e||d==SeadragonBrowser.CHROME&&2>e}(),this.getBrowser=function(){return d},this.getBrowserVersion=function(){return e},this.getElement=function(a){return"string"==typeof a&&(a=document.getElementById(a)),a},this.getElementPosition=function(c){for(var c=b.getElement(c),d=new SeadragonPoint,e="fixed"==b.getElementStyle(c).position,f=a(c,e);f;)d.x+=c.offsetLeft,d.y+=c.offsetTop,e&&(d=d.plus(b.getPageScroll())),c=f,e="fixed"==b.getElementStyle(c).position,f=a(c,e);return d},this.getElementSize=function(a){var a=b.getElement(a);return new SeadragonPoint(a.clientWidth,a.clientHeight)},this.getElementStyle=function(a){var a=b.getElement(a);return a.currentStyle?a.currentStyle:window.getComputedStyle?window.getComputedStyle(a,""):void SeadragonDebug.fail("Unknown element style, no known technique.")},this.getEvent=function(a){return a?a:window.event},this.getMousePosition=function(a){var a=b.getEvent(a),c=new SeadragonPoint;return"DOMMouseScroll"==a.type&&d==SeadragonBrowser.FIREFOX&&3>e?(c.x=a.screenX,c.y=a.screenY):"number"==typeof a.pageX?(c.x=a.pageX,c.y=a.pageY):"number"==typeof a.clientX?(c.x=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,c.y=a.clientY+document.body.scrollTop+document.documentElement.scrollTop):SeadragonDebug.fail("Unknown event mouse position, no known technique."),c},this.getMouseScroll=function(a){var a=b.getEvent(a),c=0;return"number"==typeof a.wheelDelta?c=a.wheelDelta:"number"==typeof a.detail?c=-1*a.detail:SeadragonDebug.fail("Unknown event mouse scroll, no known technique."),c?c/Math.abs(c):0},this.getPageScroll=function(){var a=new SeadragonPoint,b=document.documentElement||{},c=document.body||{};return"number"==typeof window.pageXOffset?(a.x=window.pageXOffset,a.y=window.pageYOffset):c.scrollLeft||c.scrollTop?(a.x=c.scrollLeft,a.y=c.scrollTop):(b.scrollLeft||b.scrollTop)&&(a.x=b.scrollLeft,a.y=b.scrollTop),a},this.getWindowSize=function(){var a=new SeadragonPoint,b=document.documentElement||{},c=document.body||{};return"number"==typeof window.innerWidth?(a.x=window.innerWidth,a.y=window.innerHeight):b.clientWidth||b.clientHeight?(a.x=b.clientWidth,a.y=b.clientHeight):c.clientWidth||c.clientHeight?(a.x=c.clientWidth,a.y=c.clientHeight):SeadragonDebug.fail("Unknown window size, no known technique."),a},this.imageFormatSupported=function(a){var a=a?a:"";return!!c[a.toLowerCase()]},this.makeCenteredNode=function(a){var a=SeadragonUtils.getElement(a),c=b.makeNeutralElement("div"),d=[];d.push('<div style="display:table; height:100%; width:100%;'),d.push("border:none; margin:0px; padding:0px;"),d.push('#position:relative; overflow:hidden; text-align:left;">'),d.push('<div style="#position:absolute; #top:50%; width:100%; '),d.push("border:none; margin:0px; padding:0px;"),d.push('display:table-cell; vertical-align:middle;">'),d.push('<div style="#position:relative; #top:-50%; width:100%; '),d.push("border:none; margin:0px; padding:0px;"),d.push('text-align:center;"></div></div></div>'),c.innerHTML=d.join(""),c=c.firstChild;for(var e=c,f=c.getElementsByTagName("div");f.length>0;)e=f[0],f=e.getElementsByTagName("div");return e.appendChild(a),c},this.makeNeutralElement=function(a){var b=document.createElement(a),c=b.style;return c.background="transparent none",c.border="none",c.margin="0px",c.padding="0px",c.position="static",b},this.makeTransparentImage=function(a){var c=b.makeNeutralElement("img"),f=null;return d==SeadragonBrowser.IE&&7>e?(f=b.makeNeutralElement("span"),f.style.display="inline-block",c.onload=function(){f.style.width=f.style.width||c.width+"px",f.style.height=f.style.height||c.height+"px",c.onload=null,c=null},c.src=a,f.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+a+"', sizingMethod='scale')"):(f=c,f.src=a),f},this.setElementOpacity=function(a,c,d){var a=b.getElement(a);d&&f&&(c=Math.round(c)),a.style.opacity=1>c?c:"";var e=a.style.filter||"";if(a.style.filter=e.replace(/[\s]*alpha\(.*?\)[\s]*/g,""),!(c>=1)){var g=Math.round(100*c),h=" alpha(opacity="+g+") ";a.style.filter+=h}},this.addEvent=function(a,c,d,e){var a=b.getElement(a);a.addEventListener?("mousewheel"==c&&a.addEventListener("DOMMouseScroll",d,e),a.addEventListener(c,d,e)):a.attachEvent?(a.attachEvent("on"+c,d),e&&a.setCapture&&a.setCapture()):SeadragonDebug.fail("Unable to attach event handler, no known technique.")},this.removeEvent=function(a,c,d,e){var a=b.getElement(a);a.removeEventListener?("mousewheel"==c&&a.removeEventListener("DOMMouseScroll",d,e),a.removeEventListener(c,d,e)):a.detachEvent?(a.detachEvent("on"+c,d),e&&a.releaseCapture&&a.releaseCapture()):SeadragonDebug.fail("Unable to detach event handler, no known technique.")},this.cancelEvent=function(a){var a=b.getEvent(a);a.preventDefault&&a.preventDefault(),a.cancel=!0,a.returnValue=!1},this.stopEvent=function(a){var a=b.getEvent(a);a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0},this.createCallback=function(a,b){for(var c=[],d=2;d<arguments.length;d++)c.push(arguments[d]);return function(){for(var d=c.concat([]),e=0;e<arguments.length;e++)d.push(arguments[e]);return b.apply(a,d)}},this.getUrlParameter=function(a){var b=g[a];return b?b:null},this.makeAjaxRequest=function(a,b){var c="function"==typeof b,d=null;if(c)var e=b,b=function(){window.setTimeout(SeadragonUtils.createCallback(null,e,d),1)};window.XMLHttpRequest&&(d=new XMLHttpRequest),d||SeadragonDebug.fail("Browser doesn't support XMLHttpRequest."),SeadragonConfig.proxyUrl&&(a=SeadragonConfig.proxyUrl+a),c&&(d.onreadystatechange=function(){4==d.readyState&&(d.onreadystatechange=new Function,b())});try{d.open("GET",a,c),d.send(null)}catch(f){SeadragonDebug.log(f.name+" while making AJAX request: "+f.message),d.onreadystatechange=null,d=null,c&&b()}return c?null:d},this.parseXml=function(a){var b=null;if(window.ActiveXObject)try{b=new ActiveXObject("Microsoft.XMLDOM"),b.async=!1,b.loadXML(a)}catch(c){SeadragonDebug.log(c.name+" while parsing XML (ActiveX): "+c.message),console.log("error creating ActiveXObject in Seadragon.Utils parseXml")}else if(window.DOMParser)try{var d=new DOMParser;b=d.parseFromString(a,"text/xml")}catch(c){SeadragonDebug.log(c.name+" while parsing XML (DOMParser): "+c.message)}else SeadragonDebug.fail("Browser doesn't support XML DOM.");return b}};SeadragonUtils=Seadragon.Utils=new SeadragonUtils;var SeadragonMouseTracker=Seadragon.MouseTracker;!function(){function a(a){return SeadragonUtils.getMousePosition(a)}function b(a,b){var c=SeadragonUtils.getMousePosition(a),d=SeadragonUtils.getElementPosition(b);return c.minus(d)}function c(a,b){for(var c=document.body;b&&a!=b&&c!=b;)try{b=b.parentNode}catch(d){return!1}return a==b}function d(){g=!0}function e(){g=!1}if(!SeadragonMouseTracker){var f=SeadragonUtils.getBrowser()==SeadragonBrowser.IE&&SeadragonUtils.getBrowserVersion()<9,g=!1,h=!1,i={},j=[];!function(){f?(SeadragonUtils.addEvent(document,"mousedown",d,!1),SeadragonUtils.addEvent(document,"mouseup",e,!1)):(SeadragonUtils.addEvent(window,"mousedown",d,!0),SeadragonUtils.addEvent(window,"mouseup",e,!0))}(),SeadragonMouseTracker=Seadragon.MouseTracker=function(d){function e(){D||(SeadragonUtils.addEvent(d,"mouseover",p,!1),SeadragonUtils.addEvent(d,"mouseout",q,!1),SeadragonUtils.addEvent(d,"mousedown",r,!1),SeadragonUtils.addEvent(d,"mouseup",s,!1),SeadragonUtils.addEvent(d,"mousewheel",z,!1),SeadragonUtils.addEvent(d,"click",v,!1),D=!0,i[C]=B)}function k(){D&&(SeadragonUtils.removeEvent(d,"mouseover",p,!1),SeadragonUtils.removeEvent(d,"mouseout",q,!1),SeadragonUtils.removeEvent(d,"mousedown",r,!1),SeadragonUtils.removeEvent(d,"mouseup",s,!1),SeadragonUtils.removeEvent(d,"mousewheel",z,!1),SeadragonUtils.removeEvent(d,"click",v,!1),m(),D=!1,delete i[C])}function l(){E||(f?(SeadragonUtils.removeEvent(d,"mouseup",s,!1),SeadragonUtils.addEvent(d,"mouseup",t,!0),SeadragonUtils.addEvent(d,"mousemove",y,!0)):(SeadragonUtils.addEvent(window,"mouseup",u,!0),SeadragonUtils.addEvent(window,"mousemove",x,!0)),E=!0)}function m(){E&&(f?(SeadragonUtils.removeEvent(d,"mousemove",y,!0),SeadragonUtils.removeEvent(d,"mouseup",t,!0),SeadragonUtils.addEvent(d,"mouseup",s,!1)):(SeadragonUtils.removeEvent(window,"mousemove",x,!0),SeadragonUtils.removeEvent(window,"mouseup",u,!0)),E=!1)}function n(a,b){var c=i;for(var d in c)c.hasOwnProperty(d)&&C!=d&&c[d][a](b)}function o(){return G}function p(a){var a=SeadragonUtils.getEvent(a);f&&E&&!c(a.srcElement,d)&&n("onMouseOver",a);var e=a.target?a.target:a.srcElement,h=a.relatedTarget?a.relatedTarget:a.fromElement;if(c(d,e)&&!c(d,h)&&(G=!0,"function"==typeof A.enterHandler))try{A.enterHandler(A,b(a,d),F,g)}catch(i){SeadragonDebug.error(i.name+" while executing enter handler: "+i.message,i)}}function q(a){var a=SeadragonUtils.getEvent(a);f&&E&&!c(a.srcElement,d)&&n("onMouseOut",a);var e=a.target?a.target:a.srcElement,h=a.relatedTarget?a.relatedTarget:a.toElement;if(c(d,e)&&!c(d,h)&&(G=!1,"function"==typeof A.exitHandler))try{A.exitHandler(A,b(a,d),F,g)}catch(i){SeadragonDebug.error(i.name+" while executing exit handler: "+i.message,i)}}function r(c){var c=SeadragonUtils.getEvent(c);if(2!=c.button){if(F=!0,H=a(c),J=H,I=Date.now(),"function"==typeof A.pressHandler)try{A.pressHandler(A,b(c,d))}catch(e){SeadragonDebug.error(e.name+" while executing press handler: "+e.message,e)}(A.pressHandler||A.dragHandler)&&SeadragonUtils.cancelEvent(c),f&&h?f&&j.push(B):(l(),h=!0,j=[B])}}function s(a){var a=SeadragonUtils.getEvent(a),c=F,e=G;if(2!=a.button){if(F=!1,"function"==typeof A.releaseHandler)try{A.releaseHandler(A,b(a,d),c,e)}catch(f){SeadragonDebug.error(f.name+" while executing release handler: "+f.message,f)}c&&e&&w(a)}}function t(a){var a=SeadragonUtils.getEvent(a);if(2!=a.button){for(var b=0;b<j.length;b++){var c=j[b];c.hasMouse()||c.onMouseUp(a)}m(),h=!1,a.srcElement.fireEvent("on"+a.type,document.createEventObject(a)),SeadragonUtils.stopEvent(a)}}function u(a){G||s(a),m()}function v(a){A.clickHandler&&SeadragonUtils.cancelEvent(a)}function w(c){var c=SeadragonUtils.getEvent(c);if(2!=c.button){var e=Date.now()-I,f=a(c),g=J.distance2To(f),h=e<=SeadragonConfig.clickTimeThreshold&&g<=SeadragonConfig.clickDistThreshold;if("function"==typeof A.clickHandler)try{A.clickHandler(A,b(c,d),h,c.shiftKey)}catch(i){SeadragonDebug.error(i.name+" while executing click handler: "+i.message,i)}}}function x(c){var c=SeadragonUtils.getEvent(c),e=a(c),f=e.minus(H);if(H=e,"function"==typeof A.dragHandler){try{A.dragHandler(A,b(c,d),f,c.shiftKey)}catch(g){SeadragonDebug.error(g.name+" while executing drag handler: "+g.message,g)}SeadragonUtils.cancelEvent(c)}}function y(a){for(var b=0;b<j.length;b++)j[b].onMouseMove(a);SeadragonUtils.stopEvent(a)}function z(a){var a=SeadragonUtils.getEvent(a),c=SeadragonUtils.getMouseScroll(a);if("function"==typeof A.scrollHandler){if(c)try{A.scrollHandler(A,b(a,d),c,a.shiftKey)}catch(e){SeadragonDebug.error(e.name+" while executing scroll handler: "+e.message,e)}SeadragonUtils.cancelEvent(a)}}var A=this,B=null,C=Math.random(),d=SeadragonUtils.getElement(d),D=!1,E=!1,F=!1,G=!1,H=null,I=null,J=null;this.target=d,this.enterHandler=null,this.exitHandler=null,this.pressHandler=null,this.releaseHandler=null,this.clickHandler=null,this.dragHandler=null,this.scrollHandler=null,function(){B={hasMouse:o,onMouseOver:p,onMouseOut:q,onMouseUp:s,onMouseMove:x}}(),this.isTracking=function(){return D},this.setTracking=function(a){a?e():k()}}}}();var SeadragonEventManager=Seadragon.EventManager=function(){var a={};this.addListener=function(b,c){"function"==typeof c&&(a[b]||(a[b]=[]),a[b].push(c))},this.removeListener=function(b,c){var d=a[b];if("function"==typeof c&&d)for(var e=0;e<d.length;e++)if(c==d[e])return void d.splice(e,1)},this.clearListeners=function(b){a[b]&&delete a[b]},this.trigger=function(b){var c=a[b],d=[];if(c){for(var e=1;e<arguments.length;e++)d.push(arguments[e]);for(var e=0;e<c.length;e++)try{c[e].apply(window,d)}catch(f){SeadragonDebug.error(f.name+" while executing "+b+" handler: "+f.message,f)}}}},SeadragonImageLoader;!function(){function a(a,b){this.src=a,this.callback=b,this.image=null,this.timeout=null,this.running=!1}var b=15e3;a.prototype.start=function(){var a=this;if(!a.running){a.running=!0,a.image=new Image;var c=function(){a.finish(!0)},d=function(){a.finish(!1)},e=function(){SeadragonDebug.log("Image timed out: "+a.src),a.finish(!1)};a.image.onload=c,a.image.onabort=d,a.image.onerror=d,a.timeout=window.setTimeout(e,b),a.image.src=a.src}},a.prototype.finish=function(a){this.image.onload=null,this.image.onabort=null,this.image.onerror=null,this.timeout&&window.clearTimeout(this.timeout),this.callback(this.src,a?this.image:null)},SeadragonImageLoader=Seadragon.ImageLoader=function(){function b(a,b,e){var f;for(c--,"function"==typeof a&&setTimeout(function(){try{a(e)}catch(c){SeadragonDebug.error(c.name+" while executing "+b+" callback: "+c.message,c)}},2);c<SeadragonConfig.imageLoaderLimit&&d.length>0;)f=d.shift(),f.tile.loaded||(setTimeout(f.job.start(),2),c++)}var c=0,d=[];this.loadImage=function(e,f){var g=SeadragonUtils.createCallback(null,b,f),h=new a(e.url,g);c>=SeadragonConfig.imageLoaderLimit?d.push({job:h,tile:e}):(c++,h.start()),e.loading=!0},this.clear=function(){d.map(function(a){a.tile.loading=!1}),d=[]}}}();var SeadragonButton,SeadragonButtonGroup;!function(){var a={REST:0,GROUP:1,HOVER:2,DOWN:3};SeadragonButton=Seadragon.Button=function(b,c,d,e,f,g,h,i,j,k){function l(){A=!1,SeadragonUtils.setElementOpacity(x,1,!0)}function m(b){b>=a.GROUP&&u==a.REST&&(l(),u=a.GROUP),b>=a.HOVER&&u==a.GROUP&&(y.style.visibility="",u=a.HOVER),b>=a.DOWN&&u==a.HOVER&&(z.style.visibility="",u=a.DOWN)}function n(b){b<=a.HOVER&&u==a.DOWN&&(z.style.visibility="hidden",u=a.HOVER),b<=a.GROUP&&u==a.HOVER&&(y.style.visibility="hidden",u=a.GROUP),b<=a.REST&&u==a.GROUP&&(u=a.REST)}function o(b,c,d,e){d?(m(a.DOWN),j&&j()):e||m(a.HOVER)}function p(b,c,d){n(a.GROUP),d&&k&&k()}function q(){m(a.DOWN),g&&g()}function r(b,c,d,e){d&&e?(n(a.HOVER),h&&h()):d?n(a.GROUP):m(a.HOVER)}function s(a,b,c){i&&c&&i()}var t=SeadragonUtils.makeNeutralElement("span"),u=a.GROUP,v=new SeadragonMouseTracker(t),w=SeadragonUtils.makeTransparentImage(c),x=SeadragonUtils.makeTransparentImage(d),y=SeadragonUtils.makeTransparentImage(e),z=SeadragonUtils.makeTransparentImage(f),g="function"==typeof g?g:null,h="function"==typeof h?h:null,i="function"==typeof i?i:null,j="function"==typeof j?j:null,k="function"==typeof k?k:null,A=!1;this.elmt=t,this.notifyGroupEnter=function(){m(a.GROUP)},this.notifyGroupExit=function(){n(a.REST)},function(){t.style.display="inline-block",t.style.position="relative",t.title=b,t.appendChild(w),t.appendChild(x),t.appendChild(y),t.appendChild(z);var c=(w.style,x.style),d=y.style,e=z.style;c.position=d.position=e.position="absolute",c.top=d.top=e.top="0px",c.left=d.left=e.left="0px",d.visibility=e.visibility="hidden",SeadragonUtils.getBrowser()==SeadragonBrowser.FIREFOX&&SeadragonUtils.getBrowserVersion()<3&&(c.top=d.top=e.top=""),v.enterHandler=o,v.exitHandler=p,v.pressHandler=q,v.releaseHandler=r,v.clickHandler=s,v.setTracking(!0),n(a.REST)}()},SeadragonButtonGroup=Seadragon.ButtonGroup=function(a){function b(){for(var b=0;b<a.length;b++)a[b].notifyGroupEnter()}function c(b,c,d){if(!d)for(var e=0;e<a.length;e++)a[e].notifyGroupExit()}function d(b,c,d,e){if(!e)for(var f=0;f<a.length;f++)a[f].notifyGroupExit()}var e=SeadragonUtils.makeNeutralElement("span"),a=a.concat([]),f=new SeadragonMouseTracker(e);this.elmt=e,this.emulateEnter=function(){b()},this.emulateExit=function(){c()},function(){e.style.display="inline-block";for(var g=0;g<a.length;g++)e.appendChild(a[g].elmt);f.enterHandler=b,f.exitHandler=c,f.releaseHandler=d,f.setTracking(!0)}()}}();var SeadragonTileSource=Seadragon.TileSource=function(a,b,c,d,e,f){var g=this,h=b/a;this.width=a,this.height=b,this.aspectRatio=a/b,this.dimensions=new SeadragonPoint(a,b),this.minLevel=e?e:0,this.maxLevel=f?f:Math.ceil(Math.log(Math.max(a,b))/Math.log(2)),this.tileSize=c?c:0,this.tileOverlap=d?d:0,this.getLevelScale=function(a){return 1/(1<<g.maxLevel-a)},this.getNumTiles=function(c){var d=g.getLevelScale(c),e=Math.ceil(d*a/g.tileSize),f=Math.ceil(d*b/g.tileSize);return new SeadragonPoint(e,f)},this.getPixelRatio=function(a){var b=g.dimensions.times(g.getLevelScale(a)),c=1/b.x,d=1/b.y;return new SeadragonPoint(c,d)},this.getTileAtPoint=function(a,b){var c,d,e=g.dimensions.times(g.getLevelScale(a)),f=b.times(e.x);return c=b.x>=0&&b.x<=1?Math.floor(f.x/g.tileSize):Math.ceil(e.x/g.tileSize)*Math.floor(f.x/e.x)+Math.floor((e.x+f.x%e.x)%e.x/g.tileSize),d=b.y>=0&&b.y<=h?Math.floor(f.y/g.tileSize):Math.ceil(e.y/g.tileSize)*Math.floor(f.y/e.y)+Math.floor((e.y+f.y%e.y)%e.y/g.tileSize),new SeadragonPoint(c,d)},this.getTileBounds=function(a,b,c){var d=g.dimensions.times(g.getLevelScale(a)),e=0===b?0:g.tileSize*b-g.tileOverlap,f=0===c?0:g.tileSize*c-g.tileOverlap,h=g.tileSize+(0===b?1:2)*g.tileOverlap,i=g.tileSize+(0===c?1:2)*g.tileOverlap;h=Math.min(h,d.x-e),i=Math.min(i,d.y-f);var j=1/d.x;return new SeadragonRect(e*j,f*j,h*j,i*j)},this.getTileUrl=function(){throw new Error("Method not implemented.")},this.tileExists=function(a,b,c){var d=g.getNumTiles(a);return a>=g.minLevel&&a<=g.maxLevel&&b>=0&&c>=0&&b<d.x&&c<d.y}},SeadragonDisplayRect=Seadragon.DisplayRect=function(a,b,c,d,e,f){SeadragonRect.apply(this,arguments),this.minLevel=e,this.maxLevel=f};SeadragonDisplayRect.prototype=new SeadragonRect;var SeadragonDziTileSource=Seadragon.DziTileSource=function(a,b,c,d,e,f,g){SeadragonTileSource.apply(this,[a,b,c,d]);var h=this,i={};this.fileFormat=f,this.tileFormat=f,this.displayRects=g,function(){if(g)for(var a=g.length-1;a>=0;a--)for(var b=g[a],c=b.minLevel;c<=b.maxLevel;c++)i[c]||(i[c]=[]),i[c].push(b)}(),this.getTileUrl=function(a,b,c){return[e,a,"/",b,"_",c,".",f].join("")},this.tileExists=function(a,b,d){var e=i[a];if(!e||!e.length)return!0;for(var f=h.getLevelScale(a),g=e.length-1;g>=0;g--){var j=e[g];if(!(a<j.minLevel||a>j.maxLevel)){var k=j.x*f,l=j.y*f,m=k+j.width*f,n=l+j.height*f;if(k=Math.floor(k/c),l=Math.floor(l/c),m=Math.ceil(m/c),n=Math.ceil(n/c),b>=k&&m>b&&d>=l&&n>d)return!0
}}return!1}};SeadragonDziTileSource.prototype=new SeadragonTileSource,function(){function a(a){Error.apply(this,arguments),this.message=a}function b(b){return b instanceof a||(SeadragonDebug.error(b.name+" while creating DZI from XML: "+b.message),b=new a(SeadragonStrings.getString("Errors.Unknown"))),b}function c(a){var b=a.split("/"),c=b[b.length-1],d=c.lastIndexOf(".");return d>-1&&(b[b.length-1]=c.slice(0,d)),b.join("/")+"_files/"}function d(b,c){if(!b)throw new a(SeadragonStrings.getString("Errors.Security"));var d=null;return b.responseXML&&b.responseXML.documentElement?d=b.responseXML:b.responseText&&(d=SeadragonUtils.parseXml(b.responseText)),e(d,c)}function e(b,c){if(!b||!b.documentElement)throw new a(SeadragonStrings.getString("Errors.Xml"));var d=b.documentElement,e=d.tagName;if("Image"==e)try{return f(d,c)}catch(h){var i=SeadragonStrings.getString("Errors.Dzi");throw h instanceof a?h:new a(i)}else{if("Collection"==e)throw new a(SeadragonStrings.getString("Errors.Dzc"));if("Error"==e)return g(d)}throw new a(SeadragonStrings.getString("Errors.Dzi"))}function f(b,c){var d=b.getAttribute("Format");if(!SeadragonUtils.imageFormatSupported(d))throw new a(SeadragonStrings.getString("Errors.ImageFormat",d.toUpperCase()));for(var e=b.getElementsByTagName("Size")[0],f=b.getElementsByTagName("DisplayRect"),g=parseInt(e.getAttribute("Width"),10),h=parseInt(e.getAttribute("Height"),10),i=parseInt(b.getAttribute("TileSize")),j=parseInt(b.getAttribute("Overlap")),k=[],l=0;l<f.length;l++){var m=f[l],n=m.getElementsByTagName("Rect")[0];k.push(new SeadragonDisplayRect(parseInt(n.getAttribute("X"),10),parseInt(n.getAttribute("Y"),10),parseInt(n.getAttribute("Width"),10),parseInt(n.getAttribute("Height"),10),parseInt(m.getAttribute("MinLevel"),10),parseInt(m.getAttribute("MaxLevel"),10)))}return new SeadragonDziTileSource(g,h,i,j,c,d,k)}function g(b){var c=b.getElementsByTagName("Message")[0],d=c.firstChild.nodeValue;throw new a(d)}a.prototype=new Error,SeadragonDziTileSource.getTilesUrl=c,SeadragonDziTileSource.createFromJson=function(d,e){var f,g,h="function"==typeof e,i=d;if(i&&(i.url||i.tilesUrl))try{var j=i.displayRects;if(j&&j.length)for(var k=0,l=j.length;l>k;k++){var m=j[k];j[k]=new SeadragonDisplayRect(m.x||m[0],m.y||m[1],m.width||m[2],m.height||m[3],m.minLevel||m[4],m.maxLevel||m[5])}f=new SeadragonDziTileSource(i.width,i.height,i.tileSize,i.tileOverlap,i.tilesUrl||c(i.url),i.tileFormat,i.displayRects),f.xmlUrl=i.url}catch(n){g=b(n)}else g=new a(SeadragonStrings.getString("Errors.Empty"));if(!h){if(g)throw g;return f}window.setTimeout(SeadragonUtils.createCallback(null,e,f,g&&g.message),1)},SeadragonDziTileSource.createFromXml=function(f,g,h){function i(a,c){try{var d=a(c,l);return d.xmlUrl=f,d}catch(e){if(j)return k=b(e).message,null;throw b(e)}}var j="function"==typeof h,k=null;if(!f){if(k=SeadragonStrings.getString("Errors.Empty"),j)return window.setTimeout(function(){h(null,k)},1),null;throw new a(k)}var l=c(f);return j?(g?window.setTimeout(function(){var a=i(e,SeadragonUtils.parseXml(g));h(a,k)},1):SeadragonUtils.makeAjaxRequest(f,function(a){var b=i(d,a);h(b,k)}),null):g?i(e,SeadragonUtils.parseXml(g)):i(d,SeadragonUtils.makeAjaxRequest(f))}}();var SeadragonViewport=Seadragon.Viewport=function(a,b,c){function d(){j.goHome(!0),j.update()}function e(a){return Math.log(a)/s}function f(a){return Math.pow(2,a)}function g(a,b,c){return Math.min(Math.max(a,b),c)}function h(a,b){var c=a.x,d=a.y,e=g(c,b.x,b.x+b.width),f=g(d,b.y,b.y+b.height);return c===e&&d===f?a:new SeadragonPoint(e,f)}function i(a){var b=j.getZoom(a),c=1/b,d=c/j.getAspectRatio(),e=SeadragonConfig.visibilityRatio,f=(e-.5)*c,g=(e-.5)*d,h=1-2*f,i=l-2*g;return 0>h&&(f+=.5*h,h=0),0>i&&(g+=.5*i,i=0),new Seadragon.Rect(f,g,h,i)}var j=this,a=new SeadragonPoint(a.x,a.y),k=b.x/b.y,l=b.y/b.x,m=new SeadragonSpring(0),n=new SeadragonSpring(0),o=new SeadragonSpring(SeadragonConfig.logarithmicZoom?0:1),p=null,q=new SeadragonRect(0,0,1,l),r=q.getCenter(),s=Math.LN2;this.getHomeBounds=function(){var a=j.getAspectRatio(),b=new SeadragonRect(q.x,q.y,q.width,q.height);return k>=a?(b.height=q.width/a,b.y=r.y-b.height/2):(b.width=q.height*a,b.x=r.x-b.width/2),b},this.getHomeCenter=function(){return r},this.getHomeZoom=function(){var a=k/j.getAspectRatio();return a>=1?1:a},this.getMinCenter=function(a){return i(a).getTopLeft()},this.getMaxCenter=function(a){return i(a).getBottomRight()},this.getMinZoom=function(){var c=j.getHomeZoom();if(SeadragonConfig.minZoomDimension)var d=b.x<=b.y?SeadragonConfig.minZoomDimension/a.x:SeadragonConfig.minZoomDimension/(a.x*l);else var d=SeadragonConfig.minZoomImageRatio*c;return Math.min(d,c)},this.getMaxZoom=function(){var c=b.x*SeadragonConfig.maxZoomPixelRatio/a.x;return Math.max(c,j.getHomeZoom())},this.getAspectRatio=function(){return a.x/a.y},this.getContainerSize=function(){return new SeadragonPoint(a.x,a.y)},this.getBounds=function(a){var b=j.getCenter(a),c=1/j.getZoom(a),d=c/j.getAspectRatio();return new SeadragonRect(b.x-c/2,b.y-d/2,c,d)},this.getCenter=function(b){var c=new SeadragonPoint(m.getCurrent(),n.getCurrent()),d=new SeadragonPoint(m.getTarget(),n.getTarget());if(b)return c;if(!p)return d;var e=j.getZoom(),f=1/e,g=f/j.getAspectRatio(),h=new SeadragonRect(c.x-f/2,c.y-g/2,f,g),i=j.pixelFromPoint(p,!0),k=p.minus(h.getTopLeft()).times(a.x/h.width),l=k.minus(i),o=l.divide(a.x*e);return d.plus(o)},this.getZoom=function(a){var b;return a?(b=o.getCurrent(),SeadragonConfig.logarithmicZoom?f(b):b):(b=o.getTarget(),SeadragonConfig.logarithmicZoom?f(b):b)},this.applyConstraints=function(a){var b=j.getZoom(),c=g(b,j.getMinZoom(),j.getMaxZoom());b!=c&&j.zoomTo(c,p,a);var d=j.getCenter(),e=h(d,i());if(SeadragonConfig.wrapHorizontal&&(e.x=d.x),SeadragonConfig.wrapVertical&&(e.y=d.y),!d.equals(e)){var f=1/c,k=f/j.getAspectRatio();j.fitBounds(new SeadragonRect(e.x-.5*f,e.y-.5*k,f,k),a)}},this.ensureVisible=function(a){j.applyConstraints(a)},this.fitBounds=function(b,c){var d=j.getAspectRatio(),e=b.getCenter(),f=new SeadragonRect(b.x,b.y,b.width,b.height);f.getAspectRatio()>=d?(f.height=b.width/d,f.y=e.y-f.height/2):(f.width=b.height*d,f.x=e.x-f.width/2),j.panTo(j.getCenter(!0),!0),j.zoomTo(j.getZoom(!0),null,!0);var g=j.getBounds(),h=j.getZoom(),i=1/f.width;if(i==h||Math.abs(f.width-g.width)<1e-6)return void j.panTo(e,c);var k=g.getTopLeft().times(a.x/g.width).minus(f.getTopLeft().times(a.x/f.width)).divide(a.x/g.width-a.x/f.width);j.zoomTo(i,k,c)},this.goHome=function(a){var b=j.getCenter();SeadragonConfig.wrapHorizontal&&(b.x=(1+b.x%1)%1,m.resetTo(b.x),m.update()),SeadragonConfig.wrapVertical&&(b.y=(l+b.y%l)%l,n.resetTo(b.y),n.update()),j.fitBounds(q,a)},this.panBy=function(a,b){j.panTo(j.getCenter().plus(a),b)},this.panTo=function(b,d){if(d)return m.resetTo(b.x),void n.resetTo(b.y);if(!p)return m.springTo(b.x),void n.springTo(b.y);var e=j.getZoom(),f=1/e,g=f/j.getAspectRatio(),h=new SeadragonRect(m.getCurrent()-f/2,n.getCurrent()-g/2,f,g),i=j.pixelFromPoint(p,!0),k=p.minus(h.getTopLeft()).times(a.x/h.width),l=k.minus(i),o=l.divide(a.x*e),q=b.minus(o);m.springTo(q.x),n.springTo(q.y),c.scheduleUpdate()},this.zoomBy=function(a,b,c){j.zoomTo(j.getZoom()*a,b,c)},this.zoomTo=function(a,b,d){d?o.resetTo(SeadragonConfig.logarithmicZoom?e(a):a):o.springTo(SeadragonConfig.logarithmicZoom?e(a):a),p=b instanceof SeadragonPoint?b:null,c.scheduleUpdate()},this.resize=function(b,c){var d=j.getBounds(),e=d,f=b.x/a.x;a=new SeadragonPoint(b.x,b.y),c&&(e.width=d.width*f,e.height=e.width/j.getAspectRatio()),j.fitBounds(e,!0)},this.update=function(){var a=m.getCurrent(),b=n.getCurrent(),c=o.getCurrent();if(p)var d=j.pixelFromPoint(p,!0);if(o.update(),p&&o.getCurrent()!=c){var e=j.pixelFromPoint(p,!0),f=e.minus(d),g=j.deltaPointsFromPixels(f,!0);m.shiftBy(g.x),n.shiftBy(g.y)}else p=null;return m.update(),n.update(),m.getCurrent()!=a||n.getCurrent()!=b||o.getCurrent()!=c},this.deltaPixelsFromPoints=function(b,c){return b.times(a.x*j.getZoom(c))},this.deltaPointsFromPixels=function(b,c){return b.divide(a.x*j.getZoom(c))},this.pixelFromPoint=function(b,c){var d=j.getBounds(c);return b.minus(d.getTopLeft()).times(a.x/d.width)},this.pointFromPixel=function(b,c){var d=j.getBounds(c);return b.divide(a.x/d.width).plus(d.getTopLeft())},d()},SeadragonDrawer,SeadragonOverlayPlacement;!function(){function a(a,b,c,d,e,f){this.level=a,this.x=b,this.y=c,this.bounds=d,this.exists=e,this.url=f,this.elmt=null,this.image=null,this.loaded=!1,this.loading=!1,this.style=null,this.position=null,this.size=null,this.blendStart=null,this.opacity=null,this.distance=null,this.visibility=null,this.beingDrawn=!1,this.covered=!1,this.lastDrawnTime=0,this.lastTouchTime=0}function b(a){switch(a){case SeadragonOverlayPlacement.TOP_LEFT:return function(){};case SeadragonOverlayPlacement.TOP:return function(a,b){a.x-=b.x/2};case SeadragonOverlayPlacement.TOP_RIGHT:return function(a,b){a.x-=b.x};case SeadragonOverlayPlacement.RIGHT:return function(a,b){a.x-=b.x,a.y-=b.y/2};case SeadragonOverlayPlacement.BOTTOM_RIGHT:return function(a,b){a.x-=b.x,a.y-=b.y};case SeadragonOverlayPlacement.BOTTOM:return function(a,b){a.x-=b.x/2,a.y-=b.y};case SeadragonOverlayPlacement.BOTTOM_LEFT:return function(a,b){a.y-=b.y};case SeadragonOverlayPlacement.LEFT:return function(a,b){a.y-=b.y/2};case SeadragonOverlayPlacement.CENTER:default:return function(a,b){a.x-=b.x/2,a.y-=b.y/2}}}function c(a,c,d){this.elmt=a,this.scales=c instanceof SeadragonRect,this.bounds=new SeadragonRect(c.x,c.y,c.width,c.height),this.adjust=b(c instanceof SeadragonPoint?d:SeadragonOverlayPlacement.TOP_LEFT),this.position=new SeadragonPoint(c.x,c.y),this.size=new SeadragonPoint(c.width,c.height),this.style=a.style,this.naturalSize=new SeadragonPoint(a.clientWidth,a.clientHeight)}for(var d,e,f=1500,g=.5,h=SeadragonUtils.getBrowser(),i=SeadragonUtils.getBrowserVersion(),j=(navigator.userAgent,!!document.createElement("canvas").getContext),k=document.documentElement||{},l=k.style||{},m=!1,n=["msTransform","WebkitTransform","MozTransform"];d=n.shift();)if("undefined"!=typeof l[d]){m=!0,e=/webkit/i.test(d);break}var o="WebkitTransition",p=("undefined"!=typeof l[o],"progid:DXImageTransform.Microsoft.Matrix"),q=(new RegExp(p+"\\(.*?\\)","g"),function(){try{return h===SeadragonBrowser.IE&&!!document.documentElement.filters}catch(a){return!1}}(),h===SeadragonBrowser.SAFARI&&4>i||h===SeadragonBrowser.CHROME),r=j&&!q,s=!r&&m,t=!1,u="undefined"!=typeof document.documentMode?"bicubic":"nearest-neighbor";a.prototype.toString=function(){return this.level+"/"+this.x+"_"+this.y},a.prototype.drawHTML=function(a){if(!this.loaded)return void SeadragonDebug.error("Attempting to draw tile "+this.toString()+" when it's not yet loaded.");this.elmt||(this.elmt=SeadragonUtils.makeNeutralElement("img"),this.elmt.src=this.url,this.style=this.elmt.style,this.style.position="absolute",this.style.msInterpolationMode=u,s&&(this.style[d+"Origin"]="0px 0px"));var b=this.elmt,c=this.image,f=this.style,g=this.position,h=this.size;if(b.parentNode!==a&&a.appendChild(b),s)f[d]=["matrix(",(h.x/c.width).toFixed(8),",0,0,",(h.y/c.height).toFixed(8),",",g.x.toFixed(8),e?",":"px,",g.y.toFixed(8),e?")":"px)"].join("");else if(t){var i=a.clientWidth,j=a.clientHeight;f.width=i+"px",f.height=j+"px",f.filter=["progid:DXImageTransform.Microsoft.Matrix(","M11=",(h.x/i).toFixed(8),",M22=",(h.y/j).toFixed(8),",Dx=",g.x.toFixed(8),",Dy=",g.y.toFixed(8),")"].join("")}else g=g.apply(Math.floor),h=h.apply(Math.ceil),f.left=g.x+"px",f.top=g.y+"px",f.width=h.x+"px",f.height=h.y+"px";SeadragonUtils.setElementOpacity(b,this.opacity)},a.prototype.drawCanvas=function(a){if(!this.loaded)return void SeadragonDebug.error("Attempting to draw tile "+this.toString()+" when it's not yet loaded.");var b=this.position,c=this.size;a.globalAlpha=this.opacity,a.drawImage(this.image,b.x,b.y,c.x,c.y)},a.prototype.unload=function(){this.elmt&&this.elmt.parentNode&&this.elmt.parentNode.removeChild(this.elmt),this.elmt=null,this.image=null,this.loaded=!1,this.loading=!1},SeadragonOverlayPlacement=Seadragon.OverlayPlacement={CENTER:0,TOP_LEFT:1,TOP:2,TOP_RIGHT:3,RIGHT:4,BOTTOM_RIGHT:5,BOTTOM:6,BOTTOM_LEFT:7,LEFT:8},c.prototype.destroy=function(){var a=this.elmt,b=this.style;a.parentNode&&a.parentNode.removeChild(a),b.top="",b.left="",b.position="",this.scales&&(b.width="",b.height="")},c.prototype.drawHTML=function(a){var b=this.elmt,c=this.style,e=this.scales,f=this.naturalSize;b.parentNode!==a&&(a.appendChild(b),c.position="absolute",f.x=b.clientWidth,f.y=b.clientHeight);var g=this.position,h=this.size;if(e||(h.x=f.x=f.x||b.clientWidth,h.y=f.y=f.y||b.clientHeight),this.adjust(g,h),SeadragonConfig.transformOverlays&&m)c[d+"Origin"]="0px 0px",c[d]=["translate(",g.x.toFixed(8),"px,",g.y.toFixed(8),"px)"].join(""),e&&(b.clientWidth||(c.width="100%"),b.clientHeight||(c.height="100%"),c[d]+=[" scale(",(h.x/b.clientWidth).toFixed(8),",",(h.y/b.clientHeight).toFixed(8),")"].join(""));else if(SeadragonConfig.transformOverlays&&t){var i=a.clientWidth,j=a.clientHeight;c.width=i+"px",c.height=j+"px",c.filter=["progid:DXImageTransform.Microsoft.Matrix(","M11=",(h.x/i).toFixed(8),",M22=",(h.y/j).toFixed(8),",Dx=",g.x.toFixed(8),",Dy=",g.y.toFixed(8),")"].join("")}else g=g.apply(Math.floor),h=h.apply(Math.ceil),c.left=g.x+"px",c.top=g.y+"px",e&&(c.width=h.x+"px",c.height=h.y+"px")},c.prototype.update=function(a,c){this.scales=a instanceof SeadragonRect,this.bounds=new SeadragonRect(a.x,a.y,a.width,a.height),this.adjust=b(a instanceof SeadragonPoint?c:SeadragonOverlayPlacement.TOP_LEFT)},SeadragonDrawer=Seadragon.Drawer=function(b,d,e,i,j){function k(a){return I[a]||(I[a]=b.getNumTiles(a)),I[a]}function l(a){return J[a]||(J[a]=b.getPixelRatio(a)),J[a]}function m(c,d,e,f,g,h){if(K[c]||(K[c]={}),K[c][d]||(K[c][d]={}),!K[c][d][e]){var i=(g+d%g)%g,j=(h+e%h)%h,k=b.getTileBounds(c,i,j),l=b.tileExists(c,i,j),m=b.getTileUrl(c,i,j);k.x+=1*(d-i)/g,k.y+=H*(e-j)/h,K[c][d][e]=new a(c,d,e,k,l,m)}var n=K[c][d][e];return n.lastTouchTime=f,n}function n(a,b){B.loadImage(a,SeadragonUtils.createCallback(null,o,a,b))}function o(a,b,c){if(a.loading=!1,R)return void SeadragonDebug.error("Tile load callback in middle of drawing routine.");if(!c)return SeadragonDebug.log("Tile "+a+" failed to load: "+a.url),void(a.exists=!1);a.image=c,a.loaded=!0;var d=L.length;if(L.length>=f){for(var e=Math.ceil(Math.log(F)/Math.log(2)),g=null,h=-1,i=L.length-1;i>=0;i--){var j=L[i];if(!(j.level<=e||j.beingDrawn))if(g){var k=j.lastTouchTime,l=g.lastTouchTime,m=j.level,n=g.level;(l>k||k===l&&m>n)&&(g=j,h=i)}else g=j,h=i}g&&h>=0&&(g.unload(),d=h)}L[d]=a,S=!0}function p(){K={},L=[]}function q(a,b,c){if(!M[a])return!1;if(void 0===b||void 0===c){var d=M[a];for(var e in d)if(d.hasOwnProperty(e)){var f=d[e];for(var g in f)if(f.hasOwnProperty(g)&&!f[g])return!1}return!0}return void 0===M[a][b]||void 0===M[a][b][c]||M[a][b][c]===!0}function s(a,b,c){return void 0===b||void 0===c?q(a+1):q(a+1,2*b,2*c)&&q(a+1,2*b,2*c+1)&&q(a+1,2*b+1,2*c)&&q(a+1,2*b+1,2*c+1)}function t(a,b,c,d){return M[a]?(M[a][b]||(M[a][b]={}),void(M[a][b][c]=d)):void SeadragonDebug.error("Setting coverage for a tile before its level's coverage has been reset: "+a)}function u(a){M[a]={}}function v(a){for(var b=N.length-1;b>=0;b--)if(N[b].elmt===a)return b;return-1}function w(a){var c;for(c=0;c<O.length;c++)O[c].beingDrawn=!1,O[c].covered=!1;O=[];var e=O;B.clear();var f=d.getBounds(!0);isNaN(f.x)&&(d.goHome(!0),f=d.getBounds(!0));var i=f.getTopLeft(),j=f.getBottomRight(),o=SeadragonConfig.wrapHorizontal,p=SeadragonConfig.wrapVertical;if(!(!o&&(j.x<0||i.x>1)||!p&&(j.y<0||i.y>H))){var q=k,r=l,v=m,w=s,x=t,y=u,z=G,A=(h===SeadragonBrowser.CHROME,Math.abs,Math.floor),C=Math.log,F=Math.max,I=Math.min,J=d.deltaPixelsFromPoints,K=d.pixelFromPoint,L=b.getTileAtPoint,M=(SeadragonConfig.immediateRender,SeadragonConfig.minZoomDimension||64);o||(i.x=F(i.x,0),j.x=I(j.x,1)),p||(i.y=F(i.y,0),j.y=I(j.y,H));var N=Date.now(),P=d.getCenter(),Q=(K(P),J(r(0),!1).x,d.getZoom(!0)<.8?g:.5),R=J(r(0),!0).x,S=I(E,A(C(R/Q)/C(2))),T=F(D,A(C(M)/C(2)));T=I(T,S);for(var U=[],V=!1,W=S;W>=T;W--){var X=!1,Y=J(r(W),!0).x;if(!V&&Y>=Q||W===T)X=!0,V=!0;else if(!V)continue;y(W);var Z=L(W,i),$=L(W,j),_=q(W),ab=_.x,bb=_.y;o||($.x=I($.x,ab-1)),p||($.y=I($.y,bb-1));var cb,db,eb=1,fb=0,gb=1,hb=$.x-Z.x,ib=$.y-Z.y,jb=Z.x+Math.floor(hb/2),kb=Z.y+Math.floor(ib/2),lb=0,_=(hb+1)*(ib+1),mb=[],nb=1/0,ob=-1/0,pb=1/0,qb=-1/0;for(cb=0;_>cb;cb++){nb=Math.min(jb,nb),ob=Math.max(jb,ob),pb=Math.min(kb,pb),qb=Math.max(kb,qb);var rb=v(W,jb,kb,N,ab,bb),sb=X;if(x(W,jb,kb,!1),rb.exists&&(V&&!sb&&(w(W,jb,kb)?x(W,jb,kb,!0):sb=!0),sb)){var tb=rb.bounds.getTopLeft(),ub=rb.bounds.getSize(),vb=K(tb,!0),wb=J(ub,!0);z||(wb=wb.plus(new SeadragonPoint(1,1))),rb.position=vb,rb.size=wb,e.push(rb),rb.loaded||rb.loading||mb.push(rb)}jb+=eb,kb+=fb,lb++;for(var xb=0;!(Z.x<=jb&&jb<=$.x&&Z.y<=kb&&kb<=$.y||(xb++,xb>=4));)lb=0,jb<Z.x?(jb=Z.x,kb=pb-1,eb=1,fb=0,gb=Math.max(1,ob-Z.x+1)):kb>$.y?(jb=nb-1,kb=$.y,eb=0,fb=-1,gb=Math.max(1,$.y-pb+1)):jb>$.x?(jb=$.x,kb=qb+1,eb=-1,fb=0,gb=Math.max(1,$.x-nb+1)):kb<Z.y&&(jb=ob+1,kb=Z.y,eb=0,fb=1,gb=Math.max(1,qb-Z.y+1));lb===gb&&(lb=0,db=eb,eb=-fb,fb=db,0===fb&&gb++)}mb.length>0&&U.push(mb)}var yb;if(a)for(c=U.length-1;c>=0;c--)yb=U[c],yb.map(n);else U.length>0&&(yb=U[U.length-1],n(yb[0],10))}}function x(){{var a,b,c,e,f=z,g=A,h=(SeadragonConfig.alwaysBlend,1e3*SeadragonConfig.blendTime),i=r,j=O,k=t,l=d.deltaPixelsFromPoints,m=d.pixelFromPoint,n=d.getContainerSize(),o=n.x,p=n.y,q=Math.min,u=Math.floor,v=Date.now(),w=SeadragonConfig.wrapOverlays,x=SeadragonConfig.wrapHorizontal;SeadragonConfig.wrapVertical}for(S=!1,i?(f.width=o,f.height=p):f.innerHTML="",a=j.length-1;a>=0;a--)b=j[a],b.covered||s(b.level,b.x,b.y)?b.covered=!0:b.loaded?(b.opacity<1&&(b.blendStart||(b.blendStart=v),c=v-b.blendStart,e=0===h?1:q(1,c/h),b.opacity=e),b.opacity>=1?k(b.level,b.x,b.y,!0):S=!0,i?b.drawCanvas(g):b.drawHTML(f),b.beingDrawn=!0):b.exists&&(S=!0);var B,C,D;for(a=0;a<N.length;a++)B=N[a],C=B.bounds,D=C.getTopLeft(),w&&x&&(D.x+=u(viewportCenterPoint.x)),B.position=m(D,!0),B.size=l(C.getSize(),!0),B.drawHTML(y);P=v}g=j?.1:.5;var y=SeadragonUtils.getElement(e),z=SeadragonUtils.makeNeutralElement(r?"canvas":"div"),A=r?z.getContext("2d"):null,B=new SeadragonImageLoader,C=new SeadragonProfiler,D=b.minLevel,E=b.maxLevel,F=b.tileSize,G=b.tileOverlap,H=b.height/b.width,I={},J={},K={},L=[],M={},N=[],O=[],P=0,Q=0,R=!1,S=!0;this.elmt=y,this.profiler=C,function(){z.style.width="100%",z.style.height="100%",z.style.position="absolute",y.style.textAlign="left",y.appendChild(z)}(),this.addOverlay=function(a,b,d){a=SeadragonUtils.getElement(a),v(a)>=0||(N.push(new c(a,b,d)),S=!0,i.scheduleUpdate())},this.updateOverlay=function(a,b,c){a=SeadragonUtils.getElement(a);var d=v(a);d>=0&&(N[d].update(b,c),S=!0,i.scheduleUpdate())},this.removeOverlay=function(a){a=SeadragonUtils.getElement(a);var b=v(a);b>=0&&(N[b].destroy(),N.splice(b,1),S=!0,i.scheduleUpdate())},this.clearOverlays=function(){for(;N.length>0;)N.pop().destroy(),S=!0,i.scheduleUpdate()},this.needsUpdate=function(){return S},this.numTilesLoaded=function(){return L.length},this.reset=function(){p(),Q=Date.now(),S=!0},this.update=function(a,b){R=!0,a&&w(b),x(),R=!1},this.idle=function(){}}}();var SeadragonViewer,SeadragonControlAnchor;!function(){function a(a,b,c){b===SeadragonControlAnchor.TOP_RIGHT||b===SeadragonControlAnchor.BOTTOM_RIGHT?c.insertBefore(a,c.firstChild):c.appendChild(a)}function b(b,c,d){var e=SeadragonUtils.makeNeutralElement("span");this.elmt=b,this.anchor=c,this.container=d,this.wrapper=e,e.style.display="inline-block",e.appendChild(b),c===SeadragonControlAnchor.NONE&&(e.style.width=e.style.height="100%"),a(e,c,d)}function c(a){function b(){a.viewport&&a.viewport.goHome()}function c(){a.setFullPage(!a.isFullPage()),v.emulateExit(),a.viewport&&a.viewport.applyConstraints()}function e(){y=Date.now(),x=SeadragonConfig.zoomPerSecond,w=!0,p()}function n(){y=Date.now(),x=1/SeadragonConfig.zoomPerSecond,w=!0,p()}function o(){w=!1}function p(){window.setTimeout(q,10)}function q(){if(w&&a.viewport){var b=Date.now(),c=b-y,d=Math.pow(x,c/1e3);a.viewport.zoomBy(d),a.viewport.applyConstraints(),y=b,p()}}function r(){a.viewport&&(w=!1,a.viewport.zoomBy(SeadragonConfig.zoomPerClick/1),a.viewport.applyConstraints())}function s(){a.viewport&&(w=!1,a.viewport.zoomBy(1/SeadragonConfig.zoomPerClick),a.viewport.applyConstraints())}function t(){v.emulateEnter(),v.emulateExit()}function u(a,b){return SeadragonConfig.imagePath+a+b}var v=null,w=!1,x=null,y=null,z=new SeadragonButton(SeadragonStrings.getString("Tooltips.ZoomIn"),u(h,j),u(h,k),u(h,l),u(h,m),e,o,r,e,o),A=new SeadragonButton(SeadragonStrings.getString("Tooltips.ZoomOut"),u(i,j),u(i,k),u(i,l),u(i,m),n,o,s,n,o),B=new SeadragonButton(SeadragonStrings.getString("Tooltips.Home"),u(g,j),u(g,k),u(g,l),u(g,m),null,b,null,null,null),C=new SeadragonButton(SeadragonStrings.getString("Tooltips.FullPage"),u(f,j),u(f,k),u(f,l),u(f,m),null,c,null,null,null);return v=new SeadragonButtonGroup([z,A,B,C]),v.elmt[d]=!0,a.addEventListener("open",t),v.elmt}var d="----seadragon----",e=SeadragonUtils.getBrowser();SeadragonControlAnchor=Seadragon.ControlAnchor={NONE:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4},b.prototype.destroy=function(){this.wrapper.removeChild(this.elmt),this.container.removeChild(this.wrapper)},b.prototype.isVisible=function(){return"none"!==this.wrapper.style.display},b.prototype.setVisible=function(a){this.wrapper.style.display=a?"inline-block":"none"},b.prototype.setOpacity=function(a){this.elmt[d]&&e===SeadragonBrowser.IE?SeadragonUtils.setElementOpacity(this.elmt,a,!0):SeadragonUtils.setElementOpacity(this.wrapper,a,!0)};var f="fullpage",g="home",h="zoomin",i="zoomout",j="_rest.png",k="_grouphover.png",l="_hover.png",m="_pressed.png";SeadragonViewer=Seadragon.Viewer=function(a,d){function e(){var b=B.style,d=a.style,e=C.style,f=D.style,g=E.style,h=F.style;d.width="100%",d.height="100%",d.position="relative",d.left="0px",d.top="0px",d.textAlign="left",b.width="100%",b.height="100%",b.overflow="hidden",b.position="absolute",b.top="0px",b.left="0px",e.position=f.position=g.position=h.position="absolute",e.top=f.top="0px",e.left=h.left="0px",f.right=g.right="0px",h.bottom=g.bottom="0px",L.clickHandler=t,L.pressHandler=u,L.dragHandler=v,L.releaseHandler=w,L.scrollHandler=x,L.setTracking(!0),O=c(z),O.style.marginRight="4px",O.style.marginBottom="4px",z.addControl(O,SeadragonControlAnchor.BOTTOM_RIGHT),M.enterHandler=q,M.exitHandler=r,M.releaseHandler=s,M.setTracking(!0),window.setTimeout(p,1),a.appendChild(B),a.appendChild(C),a.appendChild(D),a.appendChild(E),a.appendChild(F),A.innerHTML="",A.appendChild(a)}function f(a){document.createTextNode(a);B.innerHTML="",B.appendChild(document.createElement("div"))}function g(){return G&&i(),Z=Date.now(),window.setTimeout(function(){Z>$&&f(SeadragonStrings.getString("Messages.Loading"))},2e3),Z}function h(b,c,e){return $=Date.now(),Z>b?(SeadragonDebug.log("Ignoring out-of-date open."),void K.trigger("ignore",z)):c?(B.innerHTML="",Y=SeadragonUtils.getElementSize(a),0===Y.x||0===Y.y?void window.setTimeout(function(){h(b,c,e)},10):(G=c,I=new SeadragonViewport(Y,G.dimensions,z),H=new SeadragonDrawer(G,I,B,z,d),J=new SeadragonProfiler,z.source=G,z.viewport=I,z.drawer=H,z.profiler=J,bb=!1,cb=!0,K.trigger("open",z),void(z.loopId||(z.loopId=eb(k))))):(f(e),void K.trigger("error",z))}function i(){z.source=G=null,z.viewport=I=null,z.drawer=H=null,z.profiler=J=null,B.innerHTML=""}function j(){z.loopId||(z.loopId=eb(k)),cb=!0}function k(){if(z.loopId=eb(k),G){var b=SeadragonUtils.getElementSize(a);!b.equals(Y)&&b.x>0&&b.y>0&&(I.resize(b,!0),Y=b,K.trigger("resize",z));var c=I.update(),d=bb&&!c;if(!bb&&c&&(K.trigger("animationstart",z),o()),c)H.update(!0,!1),K.trigger("animation",z);else if(cb||H.needsUpdate()){var e=d||cb;H.update(e,e)}else fb(z.loopId),z.loopId=null;d&&K.trigger("animationfinish",z),bb=c,cb=!1}}function l(a){for(var b=N.length-1;b>=0;b--)if(N[b].elmt===a)return b;return-1}function m(){window.setTimeout(n,20)}function n(){if(S){var a=Date.now(),b=a-R,c=1-b/Q;c=Math.min(1,c),c=Math.max(0,c);for(var d=N.length-1;d>=0;d--)N[d].setOpacity(c);c>0&&m()}}function o(){S=!1;for(var a=N.length-1;a>=0;a--)N[a].setOpacity(1)}function p(){SeadragonConfig.autoHideControls&&(S=!0,R=Date.now()+P,window.setTimeout(m,P))}function q(){db=!0,o()}function r(a,b,c){c||(db=!1)}function s(a,b,c,d){d||(db=!1,bb||p())}function t(a,b,c,d){if(I&&c){var e=SeadragonConfig.zoomPerClick,f=d?1/e:e;I.zoomBy(f,I.pointFromPixel(b,!0)),I.applyConstraints()}}function u(a,b){I&&(_=b,ab=I.getCenter())}function v(a,b,c){if(I)if(SeadragonConfig.constrainDuringPan){var d=b.minus(_),e=I.deltaPointsFromPixels(d.negate(),!0);I.panTo(ab.plus(e)),I.applyConstraints()}else I.panBy(I.deltaPointsFromPixels(c.negate(),!0))}function w(a,b,c){c&&I&&!d&&I.applyConstraints()}function x(a,b,c){if(I){var d=Math.pow(SeadragonConfig.zoomPerScroll,c);I.zoomBy(d,I.pointFromPixel(b,!0)),I.applyConstraints()}}function y(a){a=SeadragonUtils.getEvent(a),27===a.keyCode&&z.setFullPage(!1)}Seadragon.Config.minZoomImageRatio=d?.1:.8;var z=this,A=SeadragonUtils.getElement(a);a=SeadragonUtils.makeNeutralElement("div"),z.container=a;var B=SeadragonUtils.makeNeutralElement("div");z.canvas=B;var C=SeadragonUtils.makeNeutralElement("div"),D=SeadragonUtils.makeNeutralElement("div"),E=SeadragonUtils.makeNeutralElement("div"),F=SeadragonUtils.makeNeutralElement("div"),G=null,H=null,I=null,J=null,K=new SeadragonEventManager,L=new SeadragonMouseTracker(B),M=new SeadragonMouseTracker(a),N=[],O=null,P=1e3,Q=2e3,R=null,S=!1,T=document.body.style.width,U=document.body.style.height,V=document.body.style.overflow,W=document.documentElement.style.overflow,X=new SeadragonPoint(1,1),Y=null,Z=0,$=0,_=null,ab=null,bb=!1,cb=!1,db=!1;this.container=A,this.elmt=a,this.source=null,this.drawer=null,this.viewport=null,this.profiler=null,this.tracker=L,z.loopId=null;var eb=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){var b=Date.now(),c=Math.max(0,16-(b-lastTime)),d=window.setTimeout(function(){a(b+c)},c);return lastTime=b+c,d},fb=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCanelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(a){clearTimeout(a)};this.scheduleUpdate=j,this.isOpen=function(){return!!G},this.openDzi=function(a,b){var c=g(),d=SeadragonUtils.createCallback(null,h,c);"string"==typeof a?SeadragonDziTileSource.createFromXml(a,b,d):SeadragonDziTileSource.createFromJson(a,d)},this.openTileSource=function(a){var b=g();window.setTimeout(function(){h(b,a)},1)},this.close=function(){G&&i()},this.addControl=function(c,d){if(c=SeadragonUtils.getElement(c),!(l(c)>=0)){var e=null;switch(d){case SeadragonControlAnchor.TOP_RIGHT:e=D,c.style.position="relative";break;case SeadragonControlAnchor.BOTTOM_RIGHT:e=E,c.style.position="relative";break;case SeadragonControlAnchor.BOTTOM_LEFT:e=F,c.style.position="relative";break;case SeadragonControlAnchor.TOP_LEFT:e=C,c.style.position="relative";break;case SeadragonControlAnchor.NONE:default:e=a,c.style.position="absolute"}N.push(new b(c,d,e))}},this.removeControl=function(a){a=SeadragonUtils.getElement(a);var b=l(a);b>=0&&(N[b].destroy(),N.splice(b,1))},this.clearControls=function(){for(;N.length>0;)N.pop().destroy()},this.getNavControl=function(){return O},this.isDashboardEnabled=function(){for(var a=N.length-1;a>=0;a--)if(N[a].isVisible())return!0;return!1},this.isFullPage=function(){return a.parentNode===document.body},this.isMouseNavEnabled=function(){return L.isTracking()},this.isVisible=function(){return"hidden"!==a.style.visibility},this.setDashboardEnabled=function(a){for(var b=N.length-1;b>=0;b--)N[b].setVisible(a)},this.setFullPage=function(b){if(b!==z.isFullPage()){var c=document.body,d=c.style,e=document.documentElement.style,f=a.style,g=B.style;if(b?(V=d.overflow,W=e.overflow,d.overflow="hidden",e.overflow="hidden",T=d.width,U=d.height,d.width="100%",d.height="100%",g.backgroundColor="black",g.color="white",f.position="fixed",f.zIndex="99999999",c.appendChild(a),Y=SeadragonUtils.getWindowSize(),SeadragonUtils.addEvent(document,"keydown",y),q()):(d.overflow=V,e.overflow=W,d.width=T,d.height=U,g.backgroundColor="",g.color="",f.position="relative",f.zIndex="",A.appendChild(a),Y=SeadragonUtils.getElementSize(A),SeadragonUtils.removeEvent(document,"keydown",y),r()),I){var h=I.getBounds();I.resize(Y);var i=I.getBounds();b?X=new SeadragonPoint(i.width/h.width,i.height/h.height):(I.update(),I.zoomBy(Math.max(X.x,X.y),null,!0)),cb=!0,K.trigger("resize",z),k()}}},this.setMouseNavEnabled=function(a){L.setTracking(a)},this.setVisible=function(b){a.style.visibility=b?"":"hidden"},this.showMessage=function(a,b){return b?void window.setTimeout(function(){z.isOpen()||f(a)},b):void f(a)},this.addEventListener=function(a,b){K.addListener(a,b)},this.removeEventListener=function(a,b){K.removeListener(a,b)},this.unload=function(){z.loopId&&(fb(z.loopId),z.loopId=null)},e()}}(),function(){function a(a){throw a}function b(a){return function(){return a}}function c(c){function l(a,b,c,d,f){var g=[];return a=G.j(function(){var a=b(c,f)||[];0<g.length&&(G.a.Ya(m(g),a),d&&G.r.K(d,e,[c,a,f])),g.splice(0,g.length),G.a.P(g,a)},e,{W:a,Ka:function(){return 0==g.length||!G.a.X(g[0])}}),{M:g,j:a.pa()?a:k}}function m(a){for(;a.length&&!G.a.X(a[0]);)a.splice(0,1);if(1<a.length){for(var b=a[0],c=a[a.length-1],d=[b];b!==c;){if(b=b.nextSibling,!b)return;d.push(b)}Array.prototype.splice.apply(a,[0,a.length].concat(d))}return a}function n(a,b,c,d,e){var f,g,h,i,j,k=Math.min,l=Math.max,m=[],n=a.length,o=b.length,p=o-n||1,q=n+o+1;for(f=0;n>=f;f++)for(i=h,m.push(h=[]),j=k(o,f+p),g=l(0,f-1);j>=g;g++)h[g]=g?f?a[f-1]===b[g-1]?i[g-1]:k(i[g]||q,h[g-1]||q)+1:g+1:f+1;for(k=[],l=[],p=[],f=n,g=o;f||g;)o=m[f][g]-1,g&&o===m[f][g-1]?l.push(k[k.length]={status:c,value:b[--g],index:g}):f&&o===m[f-1][g]?p.push(k[k.length]={status:d,value:a[--f],index:f}):(k.push({status:"retained",value:b[--g]}),--f);if(l.length&&p.length){a=10*n;var r;for(b=c=0;(e||a>b)&&(r=l[c]);c++){for(d=0;m=p[d];d++)if(r.value===m.value){r.moved=m.index,m.moved=r.index,p.splice(d,1),b=d=0;break}b+=d}}return k.reverse()}function o(b,c,g,h,i){i=i||{};var j=b&&p(b),j=j&&j.ownerDocument,k=i.templateEngine||W;switch(G.za.vb(g,k,j),g=k.renderTemplate(g,h,i,j),("number"!=typeof g.length||0<g.length&&"number"!=typeof g[0].nodeType)&&a(Error("Template engine must return an array of DOM nodes")),j=f,c){case"replaceChildren":G.e.N(b,g),j=d;break;case"replaceNode":G.a.Ya(b,g),j=d;break;case"ignoreTargetNode":break;default:a(Error("Unknown renderMode: "+c))}return j&&(q(g,h),i.afterRender&&G.r.K(i.afterRender,e,[g,h.$data])),g}function p(a){return a.nodeType?a:0<a.length?a[0]:e}function q(a,b){if(a.length){var c=a[0],d=a[a.length-1];r(c,d,function(a){G.Da(b,a)}),r(c,d,function(a){G.s.ib(a,[b])})}}function r(a,b,c){var d;for(b=G.e.nextSibling(b);a&&(d=a)!==b;)a=G.e.nextSibling(d),(1===d.nodeType||8===d.nodeType)&&c(d)}function s(b,c,d){b=G.g.aa(b);for(var e=G.g.Q,f=0;f<b.length;f++){var g=b[f].key;if(e.hasOwnProperty(g)){var h=e[g];"function"==typeof h?(g=h(b[f].value))&&a(Error(g)):h||a(Error("This template engine does not support the '"+g+"' binding within its templates"))}}return b="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+G.g.ba(b)+" } })()})",d.createJavaScriptEvaluatorBlock(b)+c}function t(b,c,d,f){function g(a){return function(){return i[a]}}function h(){return i}var i,j,l=0;return G.j(function(){var e=d&&d instanceof G.z?d:new G.z(G.a.d(d)),m=e.$data;if(f&&G.eb(b,e),i=("function"==typeof c?c(e,b):c)||G.J.instance.getBindings(b,e)){if(0===l){l=1;for(var n in i){var o=G.c[n];o&&8===b.nodeType&&!G.e.I[n]&&a(Error("The binding '"+n+"' cannot be used with virtual elements")),o&&"function"==typeof o.init&&(o=o.init(b,g(n),h,m,e))&&o.controlsDescendantBindings&&(j!==k&&a(Error("Multiple bindings ("+j+" and "+n+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.")),j=n)
}l=2}if(2===l)for(n in i)(o=G.c[n])&&"function"==typeof o.update&&o.update(b,g(n),h,m,e)}},e,{W:b}),{Nb:j===k}}function u(a,b,c){var f=d,g=1===b.nodeType;g&&G.e.Ta(b),(g&&c||G.J.instance.nodeHasBindings(b))&&(f=t(b,e,a,c).Nb),f&&v(a,b,!g)}function v(a,b,c){for(var d=G.e.firstChild(b);b=d;)d=G.e.nextSibling(b),u(a,b,c)}function w(a,b){var c=x(a,b);return c?0<c.length?c[c.length-1].nextSibling:a.nextSibling:e}function x(b,c){for(var d=b,f=1,g=[];d=d.nextSibling;){if(y(d)&&(f--,0===f))return g;g.push(d),z(d)&&f++}return c||a(Error("Cannot find closing comment tag to match: "+b.nodeValue)),e}function y(a){return 8==a.nodeType&&(O?a.text:a.nodeValue).match(Q)}function z(a){return 8==a.nodeType&&(O?a.text:a.nodeValue).match(P)}function A(a,b){for(var c=e;a!=c;)c=a,a=a.replace(L,function(a,c){return b[c]});return a}function B(){var a=[],b=[];this.save=function(c,d){var e=G.a.i(a,c);e>=0?b[e]=d:(a.push(c),b.push(d))},this.get=function(c){return c=G.a.i(a,c),c>=0?b[c]:k}}function C(a,b,c){function d(d){var e=b(a[d]);switch(typeof e){case"boolean":case"number":case"string":case"function":f[d]=e;break;case"object":case"undefined":var g=c.get(e);f[d]=g!==k?g:C(e,b,c)}}if(c=c||new B,a=b(a),"object"!=typeof a||a===e||a===k||a instanceof Date)return a;var f=a instanceof Array?[]:{};c.save(a,f);var g=a;if(g instanceof Array){for(var h=0;h<g.length;h++)d(h);"function"==typeof g.toJSON&&d("toJSON")}else for(h in g)d(h);return f}function D(a,b){if(a)if(8==a.nodeType){var c=G.s.Ua(a.nodeValue);c!=e&&b.push({sb:a,Fb:c})}else if(1==a.nodeType)for(var c=0,d=a.childNodes,f=d.length;f>c;c++)D(d[c],b)}function E(a,b,c,e){G.c[a]={init:function(a){return G.a.f.set(a,T,{}),{controlsDescendantBindings:d}},update:function(a,f,g,h,i){g=G.a.f.get(a,T),f=G.a.d(f()),h=!c!=!f;var j=!g.Za;(j||b||h!==g.qb)&&(j&&(g.Za=G.a.Ia(G.e.childNodes(a),d)),h?(j||G.e.N(a,G.a.Ia(g.Za)),G.Ea(e?e(i,f):i,a)):G.e.Y(a),g.qb=h)}},G.g.Q[a]=f,G.e.I[a]=d}function F(a,b,c){c&&b!==G.k.q(a)&&G.k.T(a,b),b!==G.k.q(a)&&G.r.K(G.a.Ba,e,[a,"change"])}var G="undefined"!=typeof c?c:{};G.b=function(a,b){for(var c=a.split("."),d=G,e=0;e<c.length-1;e++)d=d[c[e]];d[c[c.length-1]]=b},G.p=function(a,b,c){a[b]=c},G.version="2.2.1",G.b("version",G.version),G.a=new function(){function b(a,b){if("input"!==G.a.u(a)||!a.type||"click"!=b.toLowerCase())return f;var c=a.type;return"checkbox"==c||"radio"==c}var c=/^(\s| )+|(\s| )+$/g,l={},m={};l[/Firefox\/2/i.test(i.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"],l.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" ");for(var n in l){var o=l[n];if(o.length)for(var p=0,q=o.length;q>p;p++)m[o[p]]=n}var r,s={propertychange:d},l=3;for(n=h.createElement("div"),o=n.getElementsByTagName("i");n.innerHTML="<!--[if gt IE "+ ++l+"]><i></i><![endif]-->",o[0];);return r=l>4?l:k,{Na:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],o:function(a,b){for(var c=0,d=a.length;d>c;c++)b(a[c])},i:function(a,b){if("function"==typeof Array.prototype.indexOf)return Array.prototype.indexOf.call(a,b);for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},lb:function(a,b,c){for(var d=0,f=a.length;f>d;d++)if(b.call(c,a[d]))return a[d];return e},ga:function(a,b){var c=G.a.i(a,b);c>=0&&a.splice(c,1)},Ga:function(a){a=a||[];for(var b=[],c=0,d=a.length;d>c;c++)0>G.a.i(b,a[c])&&b.push(a[c]);return b},V:function(a,b){a=a||[];for(var c=[],d=0,e=a.length;e>d;d++)c.push(b(a[d]));return c},fa:function(a,b){a=a||[];for(var c=[],d=0,e=a.length;e>d;d++)b(a[d])&&c.push(a[d]);return c},P:function(a,b){if(b instanceof Array)a.push.apply(a,b);else for(var c=0,d=b.length;d>c;c++)a.push(b[c]);return a},extend:function(a,b){if(b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},ka:function(a){for(;a.firstChild;)G.removeNode(a.firstChild)},Hb:function(a){a=G.a.L(a);for(var b=h.createElement("div"),c=0,d=a.length;d>c;c++)b.appendChild(G.A(a[c]));return b},Ia:function(a,b){for(var c=0,e=a.length,f=[];e>c;c++){var g=a[c].cloneNode(d);f.push(b?G.A(g):g)}return f},N:function(a,b){if(G.a.ka(a),b)for(var c=0,d=b.length;d>c;c++)a.appendChild(b[c])},Ya:function(a,b){var c=a.nodeType?[a]:a;if(0<c.length){for(var d=c[0],e=d.parentNode,f=0,g=b.length;g>f;f++)e.insertBefore(b[f],d);for(f=0,g=c.length;g>f;f++)G.removeNode(c[f])}},bb:function(a,b){7>r?a.setAttribute("selected",b):a.selected=b},D:function(a){return(a||"").replace(c,"")},Rb:function(a,b){for(var c=[],d=(a||"").split(b),e=0,f=d.length;f>e;e++){var g=G.a.D(d[e]);""!==g&&c.push(g)}return c},Ob:function(a,b){return a=a||"",b.length>a.length?f:a.substring(0,b.length)===b},tb:function(a,b){if(b.compareDocumentPosition)return 16==(16&b.compareDocumentPosition(a));for(;a!=e;){if(a==b)return d;a=a.parentNode}return f},X:function(a){return G.a.tb(a,a.ownerDocument)},u:function(a){return a&&a.tagName&&a.tagName.toLowerCase()},n:function(c,e,g){var h=r&&s[e];if(h||"undefined"==typeof j)h||"function"!=typeof c.addEventListener?"undefined"!=typeof c.attachEvent?c.attachEvent("on"+e,function(a){g.call(c,a)}):a(Error("Browser doesn't support addEventListener or attachEvent")):c.addEventListener(e,g,f);else{if(b(c,e)){var i=g;g=function(a,b){var c=this.checked;b&&(this.checked=b.nb!==d),i.call(this,a),this.checked=c}}j(c).bind(e,g)}},Ba:function(c,e){if((!c||!c.nodeType)&&a(Error("element must be a DOM node when calling triggerEvent")),"undefined"!=typeof j){var i=[];b(c,e)&&i.push({nb:c.checked}),j(c).trigger(e,i)}else"function"==typeof h.createEvent?"function"==typeof c.dispatchEvent?(i=h.createEvent(m[e]||"HTMLEvents"),i.initEvent(e,d,d,g,0,0,0,0,0,f,f,f,f,0,c),c.dispatchEvent(i)):a(Error("The supplied element doesn't support dispatchEvent")):"undefined"!=typeof c.fireEvent?(b(c,e)&&(c.checked=c.checked!==d),c.fireEvent("on"+e)):a(Error("Browser doesn't support triggering events"))},d:function(a){return G.$(a)?a():a},ua:function(a){return G.$(a)?a.t():a},da:function(a,b,c){if(b){var d=/[\w-]+/g,e=a.className.match(d)||[];G.a.o(b.match(d),function(a){var b=G.a.i(e,a);b>=0?c||e.splice(b,1):c&&e.push(a)}),a.className=e.join(" ")}},cb:function(a,b){var c=G.a.d(b);if((c===e||c===k)&&(c=""),3===a.nodeType)a.data=c;else{var d=G.e.firstChild(a);!d||3!=d.nodeType||G.e.nextSibling(d)?G.e.N(a,[h.createTextNode(c)]):d.data=c,G.a.wb(a)}},ab:function(a,b){if(a.name=b,7>=r)try{a.mergeAttributes(h.createElement("<input name='"+a.name+"'/>"),f)}catch(c){}},wb:function(a){r>=9&&(a=1==a.nodeType?a:a.parentNode,a.style&&(a.style.zoom=a.style.zoom))},ub:function(a){if(r>=9){var b=a.style.width;a.style.width=0,a.style.width=b}},Lb:function(a,b){a=G.a.d(a),b=G.a.d(b);for(var c=[],d=a;b>=d;d++)c.push(d);return c},L:function(a){for(var b=[],c=0,d=a.length;d>c;c++)b.push(a[c]);return b},Pb:6===r,Qb:7===r,Z:r,Oa:function(a,b){for(var c=G.a.L(a.getElementsByTagName("input")).concat(G.a.L(a.getElementsByTagName("textarea"))),d="string"==typeof b?function(a){return a.name===b}:function(a){return b.test(a.name)},e=[],f=c.length-1;f>=0;f--)d(c[f])&&e.push(c[f]);return e},Ib:function(a){return"string"==typeof a&&(a=G.a.D(a))?g.JSON&&g.JSON.parse?g.JSON.parse(a):new Function("return "+a)():e},xa:function(b,c,d){return("undefined"==typeof JSON||"undefined"==typeof JSON.stringify)&&a(Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js")),JSON.stringify(G.a.d(b),c,d)},Jb:function(a,b,c){c=c||{};var d=c.params||{},e=c.includeFields||this.Na,f=a;if("object"==typeof a&&"form"===G.a.u(a))for(var f=a.action,g=e.length-1;g>=0;g--)for(var i=G.a.Oa(a,e[g]),j=i.length-1;j>=0;j--)d[i[j].name]=i[j].value;b=G.a.d(b);var k=h.createElement("form");k.style.display="none",k.action=f,k.method="post";for(var l in b)a=h.createElement("input"),a.name=l,a.value=G.a.xa(G.a.d(b[l])),k.appendChild(a);for(l in d)a=h.createElement("input"),a.name=l,a.value=d[l],k.appendChild(a);h.body.appendChild(k),c.submitter?c.submitter(k):k.submit(),setTimeout(function(){k.parentNode.removeChild(k)},0)}}},G.b("utils",G.a),G.b("utils.arrayForEach",G.a.o),G.b("utils.arrayFirst",G.a.lb),G.b("utils.arrayFilter",G.a.fa),G.b("utils.arrayGetDistinctValues",G.a.Ga),G.b("utils.arrayIndexOf",G.a.i),G.b("utils.arrayMap",G.a.V),G.b("utils.arrayPushAll",G.a.P),G.b("utils.arrayRemoveItem",G.a.ga),G.b("utils.extend",G.a.extend),G.b("utils.fieldsIncludedWithJsonPost",G.a.Na),G.b("utils.getFormFields",G.a.Oa),G.b("utils.peekObservable",G.a.ua),G.b("utils.postJson",G.a.Jb),G.b("utils.parseJson",G.a.Ib),G.b("utils.registerEventHandler",G.a.n),G.b("utils.stringifyJson",G.a.xa),G.b("utils.range",G.a.Lb),G.b("utils.toggleDomNodeCssClass",G.a.da),G.b("utils.triggerEvent",G.a.Ba),G.b("utils.unwrapObservable",G.a.d),Function.prototype.bind||(Function.prototype.bind=function(a){var b=this,c=Array.prototype.slice.call(arguments);return a=c.shift(),function(){return b.apply(a,c.concat(Array.prototype.slice.call(arguments)))}}),G.a.f=new function(){var a=0,b="__ko__"+(new Date).getTime(),c={};return{get:function(a,b){var c=G.a.f.la(a,f);return c===k?k:c[b]},set:function(a,b,c){c===k&&G.a.f.la(a,f)===k||(G.a.f.la(a,d)[b]=c)},la:function(d,e){var f=d[b];if(!f||"null"===f||!c[f]){if(!e)return k;f=d[b]="ko"+a++,c[f]={}}return c[f]},clear:function(a){var g=a[b];return g?(delete c[g],a[b]=e,d):f}}},G.b("utils.domData",G.a.f),G.b("utils.domData.clear",G.a.f.clear),G.a.F=new function(){function b(a,b){var c=G.a.f.get(a,e);return c===k&&b&&(c=[],G.a.f.set(a,e,c)),c}function c(a){var d=b(a,f);if(d)for(var d=d.slice(0),e=0;e<d.length;e++)d[e](a);if(G.a.f.clear(a),"function"==typeof j&&"function"==typeof j.cleanData&&j.cleanData([a]),h[a.nodeType])for(d=a.firstChild;a=d;)d=a.nextSibling,8===a.nodeType&&c(a)}var e="__ko_domNodeDisposal__"+(new Date).getTime(),g={1:d,8:d,9:d},h={1:d,9:d};return{Ca:function(c,e){"function"!=typeof e&&a(Error("Callback must be a function")),b(c,d).push(e)},Xa:function(a,c){var d=b(a,f);d&&(G.a.ga(d,c),0==d.length&&G.a.f.set(a,e,k))},A:function(a){if(g[a.nodeType]&&(c(a),h[a.nodeType])){var b=[];G.a.P(b,a.getElementsByTagName("*"));for(var d=0,e=b.length;e>d;d++)c(b[d])}return a},removeNode:function(a){G.A(a),a.parentNode&&a.parentNode.removeChild(a)}}},G.A=G.a.F.A,G.removeNode=G.a.F.removeNode,G.b("cleanNode",G.A),G.b("removeNode",G.removeNode),G.b("utils.domNodeDisposal",G.a.F),G.b("utils.domNodeDisposal.addDisposeCallback",G.a.F.Ca),G.b("utils.domNodeDisposal.removeDisposeCallback",G.a.F.Xa),G.a.ta=function(a){var b;if("undefined"!=typeof j){if(j.parseHTML)b=j.parseHTML(a);else if((b=j.clean([a]))&&b[0]){for(a=b[0];a.parentNode&&11!==a.parentNode.nodeType;)a=a.parentNode;a.parentNode&&a.parentNode.removeChild(a)}}else{var c=G.a.D(a).toLowerCase();for(b=h.createElement("div"),c=c.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","</table>"]||!c.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!c.indexOf("<td")||!c.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||[0,"",""],a="ignored<div>"+c[1]+a+c[2]+"</div>","function"==typeof g.innerShiv?b.appendChild(g.innerShiv(a)):b.innerHTML=a;c[0]--;)b=b.lastChild;b=G.a.L(b.lastChild.childNodes)}return b},G.a.ca=function(a,b){if(G.a.ka(a),b=G.a.d(b),b!==e&&b!==k)if("string"!=typeof b&&(b=b.toString()),"undefined"!=typeof j)j(a).html(b);else for(var c=G.a.ta(b),d=0;d<c.length;d++)a.appendChild(c[d])},G.b("utils.parseHtmlFragment",G.a.ta),G.b("utils.setHtml",G.a.ca);var H={};G.s={ra:function(b){"function"!=typeof b&&a(Error("You can only pass a function to ko.memoization.memoize()"));var c=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);return H[c]=b,"<!--[ko_memo:"+c+"]-->"},hb:function(b,c){var f=H[b];f===k&&a(Error("Couldn't find any memo with ID "+b+". Perhaps it's already been unmemoized."));try{return f.apply(e,c||[]),d}finally{delete H[b]}},ib:function(a,b){var c=[];D(a,c);for(var d=0,e=c.length;e>d;d++){var f=c[d].sb,g=[f];b&&G.a.P(g,b),G.s.hb(c[d].Fb,g),f.nodeValue="",f.parentNode&&f.parentNode.removeChild(f)}},Ua:function(a){return(a=a.match(/^\[ko_memo\:(.*?)\]$/))?a[1]:e}},G.b("memoization",G.s),G.b("memoization.memoize",G.s.ra),G.b("memoization.unmemoize",G.s.hb),G.b("memoization.parseMemoText",G.s.Ua),G.b("memoization.unmemoizeDomNodeAndDescendants",G.s.ib),G.Ma={throttle:function(a,b){a.throttleEvaluation=b;var c=e;return G.j({read:a,write:function(d){clearTimeout(c),c=setTimeout(function(){a(d)},b)}})},notify:function(a,c){return a.equalityComparer="always"==c?b(f):G.m.fn.equalityComparer,a}},G.b("extenders",G.Ma),G.fb=function(a,b,c){this.target=a,this.ha=b,this.rb=c,G.p(this,"dispose",this.B)},G.fb.prototype.B=function(){this.Cb=d,this.rb()},G.S=function(){this.w={},G.a.extend(this,G.S.fn),G.p(this,"subscribe",this.ya),G.p(this,"extend",this.extend),G.p(this,"getSubscriptionsCount",this.yb)},G.S.fn={ya:function(a,b,c){c=c||"change";var d=new G.fb(this,b?a.bind(b):a,function(){G.a.ga(this.w[c],d)}.bind(this));return this.w[c]||(this.w[c]=[]),this.w[c].push(d),d},notifySubscribers:function(a,b){b=b||"change",this.w[b]&&G.r.K(function(){G.a.o(this.w[b].slice(0),function(b){b&&b.Cb!==d&&b.ha(a)})},this)},yb:function(){var a,b=0;for(a in this.w)this.w.hasOwnProperty(a)&&(b+=this.w[a].length);return b},extend:function(a){var b=this;if(a)for(var c in a){var d=G.Ma[c];"function"==typeof d&&(b=d(b,a[c]))}return b}},G.Qa=function(a){return"function"==typeof a.ya&&"function"==typeof a.notifySubscribers},G.b("subscribable",G.S),G.b("isSubscribable",G.Qa);var I=[];G.r={mb:function(a){I.push({ha:a,La:[]})},end:function(){I.pop()},Wa:function(b){if(G.Qa(b)||a(Error("Only subscribable things can act as dependencies")),0<I.length){var c=I[I.length-1];c&&!(0<=G.a.i(c.La,b))&&(c.La.push(b),c.ha(b))}},K:function(a,b,c){try{return I.push(e),a.apply(b,c||[])}finally{I.pop()}}};var J={undefined:d,"boolean":d,number:d,string:d};G.m=function(a){function b(){return 0<arguments.length?(b.equalityComparer&&b.equalityComparer(c,arguments[0])||(b.H(),c=arguments[0],b.G()),this):(G.r.Wa(b),c)}var c=a;return G.S.call(b),b.t=function(){return c},b.G=function(){b.notifySubscribers(c)},b.H=function(){b.notifySubscribers(c,"beforeChange")},G.a.extend(b,G.m.fn),G.p(b,"peek",b.t),G.p(b,"valueHasMutated",b.G),G.p(b,"valueWillMutate",b.H),b},G.m.fn={equalityComparer:function(a,b){return a===e||typeof a in J?a===b:f}};var K=G.m.Kb="__ko_proto__";G.m.fn[K]=G.m,G.ma=function(a,b){return a===e||a===k||a[K]===k?f:a[K]===b?d:G.ma(a[K],b)},G.$=function(a){return G.ma(a,G.m)},G.Ra=function(a){return"function"==typeof a&&a[K]===G.m||"function"==typeof a&&a[K]===G.j&&a.zb?d:f},G.b("observable",G.m),G.b("isObservable",G.$),G.b("isWriteableObservable",G.Ra),G.R=function(b){0==arguments.length&&(b=[]),b!==e&&b!==k&&!("length"in b)&&a(Error("The argument passed when initializing an observable array must be an array, or null, or undefined."));var c=G.m(b);return G.a.extend(c,G.R.fn),c},G.R.fn={remove:function(a){for(var b=this.t(),c=[],d="function"==typeof a?a:function(b){return b===a},e=0;e<b.length;e++){var f=b[e];d(f)&&(0===c.length&&this.H(),c.push(f),b.splice(e,1),e--)}return c.length&&this.G(),c},removeAll:function(a){if(a===k){var b=this.t(),c=b.slice(0);return this.H(),b.splice(0,b.length),this.G(),c}return a?this.remove(function(b){return 0<=G.a.i(a,b)}):[]},destroy:function(a){var b=this.t(),c="function"==typeof a?a:function(b){return b===a};this.H();for(var e=b.length-1;e>=0;e--)c(b[e])&&(b[e]._destroy=d);this.G()},destroyAll:function(a){return a===k?this.destroy(b(d)):a?this.destroy(function(b){return 0<=G.a.i(a,b)}):[]},indexOf:function(a){var b=this();return G.a.i(b,a)},replace:function(a,b){var c=this.indexOf(a);c>=0&&(this.H(),this.t()[c]=b,this.G())}},G.a.o("pop push reverse shift sort splice unshift".split(" "),function(a){G.R.fn[a]=function(){var b=this.t();return this.H(),b=b[a].apply(b,arguments),this.G(),b}}),G.a.o(["slice"],function(a){G.R.fn[a]=function(){var b=this();return b[a].apply(b,arguments)}}),G.b("observableArray",G.R),G.j=function(c,g,h){function i(){G.a.o(w,function(a){a.B()}),w=[]}function j(){var a=m.throttleEvaluation;a&&a>=0?(clearTimeout(x),x=setTimeout(l,a)):l()}function l(){if(!q)if(p&&u())v();else{q=d;try{var a=G.a.V(w,function(a){return a.target});G.r.mb(function(b){var c;0<=(c=G.a.i(a,b))?a[c]=k:w.push(b.ya(j))});for(var b=r.call(g),c=a.length-1;c>=0;c--)a[c]&&w.splice(c,1)[0].B();p=d,m.notifySubscribers(o,"beforeChange"),o=b}finally{G.r.end()}m.notifySubscribers(o),q=f,w.length||v()}}function m(){return 0<arguments.length?("function"==typeof s?s.apply(g,arguments):a(Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.")),this):(p||l(),G.r.Wa(m),o)}function n(){return!p||0<w.length}var o,p=f,q=f,r=c;r&&"object"==typeof r?(h=r,r=h.read):(h=h||{},r||(r=h.read)),"function"!=typeof r&&a(Error("Pass a function that returns the value of the ko.computed"));var s=h.write,t=h.disposeWhenNodeIsRemoved||h.W||e,u=h.disposeWhen||h.Ka||b(f),v=i,w=[],x=e;if(g||(g=h.owner),m.t=function(){return p||l(),o},m.xb=function(){return w.length},m.zb="function"==typeof h.write,m.B=function(){v()},m.pa=n,G.S.call(m),G.a.extend(m,G.j.fn),G.p(m,"peek",m.t),G.p(m,"dispose",m.B),G.p(m,"isActive",m.pa),G.p(m,"getDependenciesCount",m.xb),h.deferEvaluation!==d&&l(),t&&n()){v=function(){G.a.F.Xa(t,arguments.callee),i()},G.a.F.Ca(t,v);var y=u,u=function(){return!G.a.X(t)||y()}}return m},G.Bb=function(a){return G.ma(a,G.j)},c=G.m.Kb,G.j[c]=G.m,G.j.fn={},G.j.fn[c]=G.j,G.b("dependentObservable",G.j),G.b("computed",G.j),G.b("isComputed",G.Bb),G.gb=function(b){return 0==arguments.length&&a(Error("When calling ko.toJS, pass the object you want to convert.")),C(b,function(a){for(var b=0;G.$(a)&&10>b;b++)a=a();return a})},G.toJSON=function(a,b,c){return a=G.gb(a),G.a.xa(a,b,c)},G.b("toJS",G.gb),G.b("toJSON",G.toJSON),G.k={q:function(a){switch(G.a.u(a)){case"option":return a.__ko__hasDomDataOptionValue__===d?G.a.f.get(a,G.c.options.sa):7>=G.a.Z?a.getAttributeNode("value").specified?a.value:a.text:a.value;case"select":return 0<=a.selectedIndex?G.k.q(a.options[a.selectedIndex]):k;default:return a.value}},T:function(a,b){switch(G.a.u(a)){case"option":switch(typeof b){case"string":G.a.f.set(a,G.c.options.sa,k),"__ko__hasDomDataOptionValue__"in a&&delete a.__ko__hasDomDataOptionValue__,a.value=b;break;default:G.a.f.set(a,G.c.options.sa,b),a.__ko__hasDomDataOptionValue__=d,a.value="number"==typeof b?b:""}break;case"select":for(var c=a.options.length-1;c>=0;c--)if(G.k.q(a.options[c])==b){a.selectedIndex=c;break}break;default:(b===e||b===k)&&(b=""),a.value=b}}},G.b("selectExtensions",G.k),G.b("selectExtensions.readValue",G.k.q),G.b("selectExtensions.writeValue",G.k.T);var L=/\@ko_token_(\d+)\@/g,M=["true","false"],N=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i;G.g={Q:[],aa:function(a){var b=G.a.D(a);if(3>b.length)return[];"{"===b.charAt(0)&&(b=b.substring(1,b.length-1)),a=[];for(var c,d=e,f=0;f<b.length;f++){var g=b.charAt(f);if(d===e)switch(g){case'"':case"'":case"/":d=f,c=g}else if(g==c&&"\\"!==b.charAt(f-1)){g=b.substring(d,f+1),a.push(g);var h="@ko_token_"+(a.length-1)+"@",b=b.substring(0,d)+h+b.substring(f+1),f=f-(g.length-h.length),d=e}}c=d=e;for(var i=0,j=e,f=0;f<b.length;f++){if(g=b.charAt(f),d===e)switch(g){case"{":d=f,j=g,c="}";break;case"(":d=f,j=g,c=")";break;case"[":d=f,j=g,c="]"}g===j?i++:g===c&&(i--,0===i&&(g=b.substring(d,f+1),a.push(g),h="@ko_token_"+(a.length-1)+"@",b=b.substring(0,d)+h+b.substring(f+1),f-=g.length-h.length,d=e))}for(c=[],b=b.split(","),d=0,f=b.length;f>d;d++)i=b[d],j=i.indexOf(":"),j>0&&j<i.length-1?(g=i.substring(j+1),c.push({key:A(i.substring(0,j),a),value:A(g,a)})):c.push({unknown:A(i,a)});return c},ba:function(a){var b="string"==typeof a?G.g.aa(a):a,c=[];a=[];for(var d,g=0;d=b[g];g++)if(0<c.length&&c.push(","),d.key){var h;a:{h=d.key;var i=G.a.D(h);switch(i.length&&i.charAt(0)){case"'":case'"':break a;default:h="'"+i+"'"}}d=d.value,c.push(h),c.push(":"),c.push(d),d=G.a.D(d),0<=G.a.i(M,G.a.D(d).toLowerCase())?d=f:(i=d.match(N),d=i===e?f:i[1]?"Object("+i[1]+")"+i[2]:d),d&&(0<a.length&&a.push(", "),a.push(h+" : function(__ko_value) { "+d+" = __ko_value; }"))}else d.unknown&&c.push(d.unknown);return b=c.join(""),0<a.length&&(b=b+", '_ko_property_writers' : { "+a.join("")+" } "),b},Eb:function(a,b){for(var c=0;c<a.length;c++)if(G.a.D(a[c].key)==b)return d;return f},ea:function(a,b,c,d,e){a&&G.Ra(a)?(!e||a.t()!==d)&&a(d):(a=b()._ko_property_writers)&&a[c]&&a[c](d)}},G.b("expressionRewriting",G.g),G.b("expressionRewriting.bindingRewriteValidators",G.g.Q),G.b("expressionRewriting.parseObjectLiteral",G.g.aa),G.b("expressionRewriting.preProcessBindings",G.g.ba),G.b("jsonExpressionRewriting",G.g),G.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",G.g.ba);var O="<!--test-->"===h.createComment("test").text,P=O?/^<!--\s*ko(?:\s+(.+\s*\:[\s\S]*))?\s*-->$/:/^\s*ko(?:\s+(.+\s*\:[\s\S]*))?\s*$/,Q=O?/^<!--\s*\/ko\s*-->$/:/^\s*\/ko\s*$/,R={ul:d,ol:d};G.e={I:{},childNodes:function(a){return z(a)?x(a):a.childNodes},Y:function(a){if(z(a)){a=G.e.childNodes(a);for(var b=0,c=a.length;c>b;b++)G.removeNode(a[b])}else G.a.ka(a)},N:function(a,b){if(z(a)){G.e.Y(a);for(var c=a.nextSibling,d=0,e=b.length;e>d;d++)c.parentNode.insertBefore(b[d],c)}else G.a.N(a,b)},Va:function(a,b){z(a)?a.parentNode.insertBefore(b,a.nextSibling):a.firstChild?a.insertBefore(b,a.firstChild):a.appendChild(b)},Pa:function(a,b,c){c?z(a)?a.parentNode.insertBefore(b,c.nextSibling):c.nextSibling?a.insertBefore(b,c.nextSibling):a.appendChild(b):G.e.Va(a,b)},firstChild:function(a){return z(a)?!a.nextSibling||y(a.nextSibling)?e:a.nextSibling:a.firstChild},nextSibling:function(a){return z(a)&&(a=w(a)),a.nextSibling&&y(a.nextSibling)?e:a.nextSibling},jb:function(a){return(a=z(a))?a[1]:e},Ta:function(a){if(R[G.a.u(a)]){var b=a.firstChild;if(b)do if(1===b.nodeType){var c;c=b.firstChild;var f=e;if(c)do if(f)f.push(c);else if(z(c)){var g=w(c,d);g?c=g:f=[c]}else y(c)&&(f=[c]);while(c=c.nextSibling);if(c=f)for(f=b.nextSibling,g=0;g<c.length;g++)f?a.insertBefore(c[g],f):a.appendChild(c[g])}while(b=b.nextSibling)}}},G.b("virtualElements",G.e),G.b("virtualElements.allowedBindings",G.e.I),G.b("virtualElements.emptyNode",G.e.Y),G.b("virtualElements.insertAfter",G.e.Pa),G.b("virtualElements.prepend",G.e.Va),G.b("virtualElements.setDomNodeChildren",G.e.N),G.J=function(){this.Ha={}},G.a.extend(G.J.prototype,{nodeHasBindings:function(a){switch(a.nodeType){case 1:return a.getAttribute("data-bind")!=e;case 8:return G.e.jb(a)!=e;default:return f}},getBindings:function(a,b){var c=this.getBindingsString(a,b);return c?this.parseBindingsString(c,b,a):e},getBindingsString:function(a){switch(a.nodeType){case 1:return a.getAttribute("data-bind");case 8:return G.e.jb(a);default:return e}},parseBindingsString:function(b,c,d){try{var e;if(!(e=this.Ha[b])){var f,g=this.Ha,h="with($context){with($data||{}){return{"+G.g.ba(b)+"}}}";f=new Function("$context","$element",h),e=g[b]=f}return e(c,d)}catch(i){a(Error("Unable to parse bindings.\nMessage: "+i+";\nBindings value: "+b))}}}),G.J.instance=new G.J,G.b("bindingProvider",G.J),G.c={},G.z=function(a,b,c){b?(G.a.extend(this,b),this.$parentContext=b,this.$parent=b.$data,this.$parents=(b.$parents||[]).slice(0),this.$parents.unshift(this.$parent)):(this.$parents=[],this.$root=a,this.ko=G),this.$data=a,c&&(this[c]=a)},G.z.prototype.createChildContext=function(a,b){return new G.z(a,this,b)},G.z.prototype.extend=function(a){var b=G.a.extend(new G.z,this);return G.a.extend(b,a)},G.eb=function(a,b){return 2!=arguments.length?G.a.f.get(a,"__ko_bindingContext__"):void G.a.f.set(a,"__ko_bindingContext__",b)},G.Fa=function(a,b,c){return 1===a.nodeType&&G.e.Ta(a),t(a,b,c,d)},G.Ea=function(a,b){(1===b.nodeType||8===b.nodeType)&&v(a,b,d)},G.Da=function(b,c){c&&1!==c.nodeType&&8!==c.nodeType&&a(Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node")),c=c||g.document.body,u(b,c,d)},G.ja=function(a){switch(a.nodeType){case 1:case 8:var b=G.eb(a);if(b)return b;if(a.parentNode)return G.ja(a.parentNode)}return k},G.pb=function(a){return(a=G.ja(a))?a.$data:k},G.b("bindingHandlers",G.c),G.b("applyBindings",G.Da),G.b("applyBindingsToDescendants",G.Ea),G.b("applyBindingsToNode",G.Fa),G.b("contextFor",G.ja),G.b("dataFor",G.pb);var S={"class":"className","for":"htmlFor"};G.c.attr={update:function(a,b){var c,d=G.a.d(b())||{};for(c in d)if("string"==typeof c){var g=G.a.d(d[c]),h=g===f||g===e||g===k;h&&a.removeAttribute(c),8>=G.a.Z&&c in S?(c=S[c],h?a.removeAttribute(c):a[c]=g):h||a.setAttribute(c,g.toString()),"name"===c&&G.a.ab(a,h?"":g.toString())}}},G.c.checked={init:function(a,c,e){G.a.n(a,"click",function(){var b;if("checkbox"==a.type)b=a.checked;else{if("radio"!=a.type||!a.checked)return;b=a.value}var f=c(),g=G.a.d(f);"checkbox"==a.type&&g instanceof Array?(b=G.a.i(g,a.value),a.checked&&0>b?f.push(a.value):!a.checked&&b>=0&&f.splice(b,1)):G.g.ea(f,e,"checked",b,d)}),"radio"==a.type&&!a.name&&G.c.uniqueName.init(a,b(d))},update:function(a,b){var c=G.a.d(b());"checkbox"==a.type?a.checked=c instanceof Array?0<=G.a.i(c,a.value):c:"radio"==a.type&&(a.checked=a.value==c)}},G.c.css={update:function(a,b){var c=G.a.d(b());if("object"==typeof c)for(var e in c){var g=G.a.d(c[e]);G.a.da(a,e,g)}else c=String(c||""),G.a.da(a,a.__ko__cssValue,f),a.__ko__cssValue=c,G.a.da(a,c,d)}},G.c.enable={update:function(a,b){var c=G.a.d(b());c&&a.disabled?a.removeAttribute("disabled"):!c&&!a.disabled&&(a.disabled=d)}},G.c.disable={update:function(a,b){G.c.enable.update(a,function(){return!G.a.d(b())})}},G.c.event={init:function(a,b,c,e){var g,h=b()||{};for(g in h)(function(){var h=g;"string"==typeof h&&G.a.n(a,h,function(a){var g,i=b()[h];if(i){var j=c();try{var k=G.a.L(arguments);k.unshift(e),g=i.apply(e,k)}finally{g!==d&&(a.preventDefault?a.preventDefault():a.returnValue=f)}j[h+"Bubble"]===f&&(a.cancelBubble=d,a.stopPropagation&&a.stopPropagation())}})})()}},G.c.foreach={Sa:function(a){return function(){var b=a(),c=G.a.ua(b);return c&&"number"!=typeof c.length?(G.a.d(b),{foreach:c.data,as:c.as,includeDestroyed:c.includeDestroyed,afterAdd:c.afterAdd,beforeRemove:c.beforeRemove,afterRender:c.afterRender,beforeMove:c.beforeMove,afterMove:c.afterMove,templateEngine:G.C.oa}):{foreach:b,templateEngine:G.C.oa}}},init:function(a,b){return G.c.template.init(a,G.c.foreach.Sa(b))},update:function(a,b,c,d,e){return G.c.template.update(a,G.c.foreach.Sa(b),c,d,e)}},G.g.Q.foreach=f,G.e.I.foreach=d,G.c.hasfocus={init:function(a,b,c){function g(e){a.__ko_hasfocusUpdating=d;var g=a.ownerDocument;"activeElement"in g&&(e=g.activeElement===a),g=b(),G.g.ea(g,c,"hasfocus",e,d),a.__ko_hasfocusUpdating=f}var h=g.bind(e,d),i=g.bind(e,f);G.a.n(a,"focus",h),G.a.n(a,"focusin",h),G.a.n(a,"blur",i),G.a.n(a,"focusout",i)},update:function(a,b){var c=G.a.d(b());a.__ko_hasfocusUpdating||(c?a.focus():a.blur(),G.r.K(G.a.Ba,e,[a,c?"focusin":"focusout"]))}},G.c.html={init:function(){return{controlsDescendantBindings:d}},update:function(a,b){G.a.ca(a,b())}};var T="__ko_withIfBindingData";E("if"),E("ifnot",f,d),E("with",d,f,function(a,b){return a.createChildContext(b)}),G.c.options={update:function(b,c,e){"select"!==G.a.u(b)&&a(Error("options binding applies only to SELECT elements"));for(var f=0==b.length,g=G.a.V(G.a.fa(b.childNodes,function(a){return a.tagName&&"option"===G.a.u(a)&&a.selected}),function(a){return G.k.q(a)||a.innerText||a.textContent}),i=b.scrollTop,j=G.a.d(c());0<b.length;)G.A(b.options[0]),b.remove(0);if(j){e=e();var l=e.optionsIncludeDestroyed;if("number"!=typeof j.length&&(j=[j]),e.optionsCaption){var m=h.createElement("option");G.a.ca(m,e.optionsCaption),G.k.T(m,k),b.appendChild(m)}c=0;for(var n=j.length;n>c;c++){var o=j[c];if(!o||!o._destroy||l){var m=h.createElement("option"),p=function(a,b,c){var d=typeof b;return"function"==d?b(a):"string"==d?a[b]:c},q=p(o,e.optionsValue,o);G.k.T(m,G.a.d(q)),o=p(o,e.optionsText,q),G.a.cb(m,o),b.appendChild(m)}}for(j=b.getElementsByTagName("option"),c=l=0,n=j.length;n>c;c++)0<=G.a.i(g,G.k.q(j[c]))&&(G.a.bb(j[c],d),l++);b.scrollTop=i,f&&"value"in e&&F(b,G.a.ua(e.value),d),G.a.ub(b)}}},G.c.options.sa="__ko.optionValueDomData__",G.c.selectedOptions={init:function(a,b,c){G.a.n(a,"change",function(){var d=b(),e=[];G.a.o(a.getElementsByTagName("option"),function(a){a.selected&&e.push(G.k.q(a))}),G.g.ea(d,c,"value",e)})},update:function(b,c){"select"!=G.a.u(b)&&a(Error("values binding applies only to SELECT elements"));var d=G.a.d(c());d&&"number"==typeof d.length&&G.a.o(b.getElementsByTagName("option"),function(a){var b=0<=G.a.i(d,G.k.q(a));G.a.bb(a,b)})}},G.c.style={update:function(a,b){var c,d=G.a.d(b()||{});for(c in d)if("string"==typeof c){var e=G.a.d(d[c]);a.style[c]=e||""}}},G.c.submit={init:function(b,c,e,g){"function"!=typeof c()&&a(Error("The value for a submit binding must be a function")),G.a.n(b,"submit",function(a){var e,h=c();try{e=h.call(g,b)}finally{e!==d&&(a.preventDefault?a.preventDefault():a.returnValue=f)}})}},G.c.text={update:function(a,b){G.a.cb(a,b())}},G.e.I.text=d,G.c.uniqueName={init:function(a,b){if(b()){var c="ko_unique_"+ ++G.c.uniqueName.ob;G.a.ab(a,c)}}},G.c.uniqueName.ob=0,G.c.value={init:function(a,b,c){function e(){i=f;var d=b(),e=G.k.q(a);G.g.ea(d,c,"value",e)}var g=["change"],h=c().valueUpdate,i=f;h&&("string"==typeof h&&(h=[h]),G.a.P(g,h),g=G.a.Ga(g)),!G.a.Z||"input"!=a.tagName.toLowerCase()||"text"!=a.type||"off"==a.autocomplete||a.form&&"off"==a.form.autocomplete||-1!=G.a.i(g,"propertychange")||(G.a.n(a,"propertychange",function(){i=d}),G.a.n(a,"blur",function(){i&&e()})),G.a.o(g,function(b){var c=e;G.a.Ob(b,"after")&&(c=function(){setTimeout(e,0)},b=b.substring(5)),G.a.n(a,b,c)})},update:function(a,b){var c="select"===G.a.u(a),e=G.a.d(b()),g=G.k.q(a),h=e!=g;0===e&&0!==g&&"0"!==g&&(h=d),h&&(g=function(){G.k.T(a,e)},g(),c&&setTimeout(g,0)),c&&0<a.length&&F(a,e,f)}},G.c.visible={update:function(a,b){var c=G.a.d(b()),d="none"!=a.style.display;c&&!d?a.style.display="":!c&&d&&(a.style.display="none")}},G.c.click={init:function(a,b,c,d){return G.c.event.init.call(this,a,function(){var a={};return a.click=b(),a},c,d)}},G.v=function(){},G.v.prototype.renderTemplateSource=function(){a(Error("Override renderTemplateSource"))},G.v.prototype.createJavaScriptEvaluatorBlock=function(){a(Error("Override createJavaScriptEvaluatorBlock"))},G.v.prototype.makeTemplateSource=function(b,c){if("string"==typeof b){c=c||h;var d=c.getElementById(b);return d||a(Error("Cannot find template with ID "+b)),new G.l.h(d)}return 1==b.nodeType||8==b.nodeType?new G.l.O(b):void a(Error("Unknown template type: "+b))},G.v.prototype.renderTemplate=function(a,b,c,d){return a=this.makeTemplateSource(a,d),this.renderTemplateSource(a,b,c)},G.v.prototype.isTemplateRewritten=function(a,b){return this.allowTemplateRewriting===f?d:this.makeTemplateSource(a,b).data("isRewritten")},G.v.prototype.rewriteTemplate=function(a,b,c){a=this.makeTemplateSource(a,c),b=b(a.text()),a.text(b),a.data("isRewritten",d)},G.b("templateEngine",G.v);var U=/(<[a-z]+\d*(\s+(?!data-bind=)[a-z0-9\-]+(=(\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind=(["'])([\s\S]*?)\5/gi,V=/<!--\s*ko\b\s*([\s\S]*?)\s*-->/g;G.za={vb:function(a,b,c){b.isTemplateRewritten(a,c)||b.rewriteTemplate(a,function(a){return G.za.Gb(a,b)},c)},Gb:function(a,b){return a.replace(U,function(a,c,d,e,f,g,h){return s(h,c,b)}).replace(V,function(a,c){return s(c,"<!-- ko -->",b)})},kb:function(a){return G.s.ra(function(b,c){b.nextSibling&&G.Fa(b.nextSibling,a,c)})}},G.b("__tr_ambtns",G.za.kb),G.l={},G.l.h=function(a){this.h=a},G.l.h.prototype.text=function(){var a=G.a.u(this.h),a="script"===a?"text":"textarea"===a?"value":"innerHTML";if(0==arguments.length)return this.h[a];var b=arguments[0];"innerHTML"===a?G.a.ca(this.h,b):this.h[a]=b},G.l.h.prototype.data=function(a){return 1===arguments.length?G.a.f.get(this.h,"templateSourceData_"+a):void G.a.f.set(this.h,"templateSourceData_"+a,arguments[1])
},G.l.O=function(a){this.h=a},G.l.O.prototype=new G.l.h,G.l.O.prototype.text=function(){if(0==arguments.length){var a=G.a.f.get(this.h,"__ko_anon_template__")||{};return a.Aa===k&&a.ia&&(a.Aa=a.ia.innerHTML),a.Aa}G.a.f.set(this.h,"__ko_anon_template__",{Aa:arguments[0]})},G.l.h.prototype.nodes=function(){return 0==arguments.length?(G.a.f.get(this.h,"__ko_anon_template__")||{}).ia:void G.a.f.set(this.h,"__ko_anon_template__",{ia:arguments[0]})},G.b("templateSources",G.l),G.b("templateSources.domElement",G.l.h),G.b("templateSources.anonymousTemplate",G.l.O);var W;G.wa=function(b){b!=k&&!(b instanceof G.v)&&a(Error("templateEngine must inherit from ko.templateEngine")),W=b},G.va=function(b,c,d,f,g){if(d=d||{},(d.templateEngine||W)==k&&a(Error("Set a template engine before calling renderTemplate")),g=g||"replaceChildren",f){var h=p(f);return G.j(function(){var a=c&&c instanceof G.z?c:new G.z(G.a.d(c)),e="function"==typeof b?b(a.$data,a):b,a=o(f,g,e,a,d);"replaceNode"==g&&(f=a,h=p(f))},e,{Ka:function(){return!h||!G.a.X(h)},W:h&&"replaceNode"==g?h.parentNode:h})}return G.s.ra(function(a){G.va(b,c,d,a,"replaceNode")})},G.Mb=function(a,b,c,d,f){function g(a,b){q(b,i),c.afterRender&&c.afterRender(b,a)}function h(b,d){i=f.createChildContext(G.a.d(b),c.as),i.$index=d;var g="function"==typeof a?a(b,i):a;return o(e,"ignoreTargetNode",g,i,c)}var i;return G.j(function(){var a=G.a.d(b)||[];"undefined"==typeof a.length&&(a=[a]),a=G.a.fa(a,function(a){return c.includeDestroyed||a===k||a===e||!G.a.d(a._destroy)}),G.r.K(G.a.$a,e,[d,a,h,c,g])},e,{W:d})},G.c.template={init:function(a,b){var c=G.a.d(b());return"string"==typeof c||c.name||1!=a.nodeType&&8!=a.nodeType||(c=1==a.nodeType?a.childNodes:G.e.childNodes(a),c=G.a.Hb(c),new G.l.O(a).nodes(c)),{controlsDescendantBindings:d}},update:function(a,b,c,f,g){b=G.a.d(b()),c={},f=d;var h,i=e;"string"!=typeof b&&(c=b,b=c.name,"if"in c&&(f=G.a.d(c["if"])),f&&"ifnot"in c&&(f=!G.a.d(c.ifnot)),h=G.a.d(c.data)),"foreach"in c?i=G.Mb(b||a,f&&c.foreach||[],c,a,g):f?(g="data"in c?g.createChildContext(h,c.as):g,i=G.va(b||a,g,c,a)):G.e.Y(a),g=i,(h=G.a.f.get(a,"__ko__templateComputedDomDataKey__"))&&"function"==typeof h.B&&h.B(),G.a.f.set(a,"__ko__templateComputedDomDataKey__",g&&g.pa()?g:k)}},G.g.Q.template=function(a){return a=G.g.aa(a),1==a.length&&a[0].unknown||G.g.Eb(a,"name")?e:"This template engine does not support anonymous templates nested within its templates"},G.e.I.template=d,G.b("setTemplateEngine",G.wa),G.b("renderTemplate",G.va),G.a.Ja=function(a,b,c){return a=a||[],b=b||[],a.length<=b.length?n(a,b,"added","deleted",c):n(b,a,"deleted","added",c)},G.b("utils.compareArrays",G.a.Ja),G.a.$a=function(a,b,c,e,f){function g(a,b){u=j[b],r!==b&&(x[a]=u),u.na(r++),m(u.M),p.push(u),t.push(u)}function h(a,b){if(a)for(var c=0,d=b.length;d>c;c++)b[c]&&G.a.o(b[c].M,function(d){a(d,c,b[c].U)})}b=b||[],e=e||{};var i=G.a.f.get(a,"setDomNodeChildrenFromArrayMapping_lastMappingResult")===k,j=G.a.f.get(a,"setDomNodeChildrenFromArrayMapping_lastMappingResult")||[],n=G.a.V(j,function(a){return a.U}),o=G.a.Ja(n,b),p=[],q=0,r=0,s=[],t=[];b=[];for(var u,v,w,x=[],n=[],y=0;v=o[y];y++)switch(w=v.moved,v.status){case"deleted":w===k&&(u=j[q],u.j&&u.j.B(),s.push.apply(s,m(u.M)),e.beforeRemove&&(b[y]=u,t.push(u))),q++;break;case"retained":g(y,q++);break;case"added":w!==k?g(y,w):(u={U:v.value,na:G.m(r++)},p.push(u),t.push(u),i||(n[y]=u))}h(e.beforeMove,x),G.a.o(s,e.beforeRemove?G.A:G.removeNode);for(var z,y=0,i=G.e.firstChild(a);u=t[y];y++){for(u.M||G.a.extend(u,l(a,c,u.U,f,u.na)),q=0;o=u.M[q];i=o.nextSibling,z=o,q++)o!==i&&G.e.Pa(a,o,z);!u.Ab&&f&&(f(u.U,u.M,u.na),u.Ab=d)}h(e.beforeRemove,b),h(e.afterMove,x),h(e.afterAdd,n),G.a.f.set(a,"setDomNodeChildrenFromArrayMapping_lastMappingResult",p)},G.b("utils.setDomNodeChildrenFromArrayMapping",G.a.$a),G.C=function(){this.allowTemplateRewriting=f},G.C.prototype=new G.v,G.C.prototype.renderTemplateSource=function(a){var b=9>G.a.Z||!a.nodes?e:a.nodes();return b?G.a.L(b.cloneNode(d).childNodes):(a=a.text(),G.a.ta(a))},G.C.oa=new G.C,G.wa(G.C.oa),G.b("nativeTemplateEngine",G.C),G.qa=function(){var b=this.Db=function(){if("undefined"==typeof j||!j.tmpl)return 0;try{if(0<=j.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(a){}return 1}();this.renderTemplateSource=function(c,d,f){f=f||{},2>b&&a(Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later."));var g=c.data("precompiled");return g||(g=c.text()||"",g=j.template(e,"{{ko_with $item.koBindingContext}}"+g+"{{/ko_with}}"),c.data("precompiled",g)),c=[d.$data],d=j.extend({koBindingContext:d},f.templateOptions),d=j.tmpl(g,c,d),d.appendTo(h.createElement("div")),j.fragments={},d},this.createJavaScriptEvaluatorBlock=function(a){return"{{ko_code ((function() { return "+a+" })()) }}"},this.addTemplate=function(a,b){h.write("<script type='text/html' id='"+a+"'>"+b+"</script>")},b>0&&(j.tmpl.tag.ko_code={open:"__.push($1 || '');"},j.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},G.qa.prototype=new G.v,c=new G.qa,0<c.Db&&G.wa(c),G.b("jqueryTmplTemplateEngine",G.qa)}var d=!0,e=null,f=!1,g=window,h=document,i=navigator,j=window.jQuery,k=void 0;"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?c(module.exports||exports):"function"==typeof define&&define.amd?define(["exports"],c):c(g.ko={})}();var CryptoJS=CryptoJS||function(a,b){var c={},d=c.lib={},e=function(){},f=d.Base={extend:function(a){e.prototype=this;var b=new e;return a&&b.mixIn(a),b.hasOwnProperty("init")||(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},create:function(){var a=this.extend();return a.init.apply(a,arguments),a},init:function(){},mixIn:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},g=d.WordArray=f.extend({init:function(a,c){a=this.words=a||[],this.sigBytes=c!=b?c:4*a.length},toString:function(a){return(a||i).stringify(this)},concat:function(a){var b=this.words,c=a.words,d=this.sigBytes;if(a=a.sigBytes,this.clamp(),d%4)for(var e=0;a>e;e++)b[d+e>>>2]|=(c[e>>>2]>>>24-8*(e%4)&255)<<24-8*((d+e)%4);else if(65535<c.length)for(e=0;a>e;e+=4)b[d+e>>>2]=c[e>>>2];else b.push.apply(b,c);return this.sigBytes+=a,this},clamp:function(){var b=this.words,c=this.sigBytes;b[c>>>2]&=4294967295<<32-8*(c%4),b.length=a.ceil(c/4)},clone:function(){var a=f.clone.call(this);return a.words=this.words.slice(0),a},random:function(b){for(var c=[],d=0;b>d;d+=4)c.push(4294967296*a.random()|0);return new g.init(c,b)}}),h=c.enc={},i=h.Hex={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;a>d;d++){var e=b[d>>>2]>>>24-8*(d%4)&255;c.push((e>>>4).toString(16)),c.push((15&e).toString(16))}return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d+=2)c[d>>>3]|=parseInt(a.substr(d,2),16)<<24-4*(d%8);return new g.init(c,b/2)}},j=h.Latin1={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;a>d;d++)c.push(String.fromCharCode(b[d>>>2]>>>24-8*(d%4)&255));return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d++)c[d>>>2]|=(255&a.charCodeAt(d))<<24-8*(d%4);return new g.init(c,b)}},k=h.Utf8={stringify:function(a){try{return decodeURIComponent(escape(j.stringify(a)))}catch(b){throw Error("Malformed UTF-8 data")}},parse:function(a){return j.parse(unescape(encodeURIComponent(a)))}},l=d.BufferedBlockAlgorithm=f.extend({reset:function(){this._data=new g.init,this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=k.parse(a)),this._data.concat(a),this._nDataBytes+=a.sigBytes},_process:function(b){var c=this._data,d=c.words,e=c.sigBytes,f=this.blockSize,h=e/(4*f),h=b?a.ceil(h):a.max((0|h)-this._minBufferSize,0);if(b=h*f,e=a.min(4*b,e),b){for(var i=0;b>i;i+=f)this._doProcessBlock(d,i);i=d.splice(0,b),c.sigBytes-=e}return new g.init(i,e)},clone:function(){var a=f.clone.call(this);return a._data=this._data.clone(),a},_minBufferSize:0});d.Hasher=l.extend({cfg:f.extend(),init:function(a){this.cfg=this.cfg.extend(a),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(a){return this._append(a),this._process(),this},finalize:function(a){return a&&this._append(a),this._doFinalize()},blockSize:16,_createHelper:function(a){return function(b,c){return new a.init(c).finalize(b)}},_createHmacHelper:function(a){return function(b,c){return new m.HMAC.init(a,c).finalize(b)}}});var m=c.algo={};return c}(Math);!function(){var a=CryptoJS,b=a.lib,c=b.WordArray,d=b.Hasher,e=[],b=a.algo.SHA1=d.extend({_doReset:function(){this._hash=new c.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(a,b){for(var c=this._hash.words,d=c[0],f=c[1],g=c[2],h=c[3],i=c[4],j=0;80>j;j++){if(16>j)e[j]=0|a[b+j];else{var k=e[j-3]^e[j-8]^e[j-14]^e[j-16];e[j]=k<<1|k>>>31}k=(d<<5|d>>>27)+i+e[j],k=20>j?k+((f&g|~f&h)+1518500249):40>j?k+((f^g^h)+1859775393):60>j?k+((f&g|f&h|g&h)-1894007588):k+((f^g^h)-899497514),i=h,h=g,g=f<<30|f>>>2,f=d,d=k}c[0]=c[0]+d|0,c[1]=c[1]+f|0,c[2]=c[2]+g|0,c[3]=c[3]+h|0,c[4]=c[4]+i|0},_doFinalize:function(){var a=this._data,b=a.words,c=8*this._nDataBytes,d=8*a.sigBytes;return b[d>>>5]|=128<<24-d%32,b[(d+64>>>9<<4)+14]=Math.floor(c/4294967296),b[(d+64>>>9<<4)+15]=c,a.sigBytes=4*b.length,this._process(),this._hash},clone:function(){var a=d.clone.call(this);return a._hash=this._hash.clone(),a}});a.SHA1=d._createHelper(b),a.HmacSHA1=d._createHmacHelper(b)}();var CryptoJS=CryptoJS||function(a,b){var c={},d=c.lib={},e=function(){},f=d.Base={extend:function(a){e.prototype=this;var b=new e;return a&&b.mixIn(a),b.hasOwnProperty("init")||(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},create:function(){var a=this.extend();return a.init.apply(a,arguments),a},init:function(){},mixIn:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},g=d.WordArray=f.extend({init:function(a,c){a=this.words=a||[],this.sigBytes=c!=b?c:4*a.length},toString:function(a){return(a||i).stringify(this)},concat:function(a){var b=this.words,c=a.words,d=this.sigBytes;if(a=a.sigBytes,this.clamp(),d%4)for(var e=0;a>e;e++)b[d+e>>>2]|=(c[e>>>2]>>>24-8*(e%4)&255)<<24-8*((d+e)%4);else if(65535<c.length)for(e=0;a>e;e+=4)b[d+e>>>2]=c[e>>>2];else b.push.apply(b,c);return this.sigBytes+=a,this},clamp:function(){var b=this.words,c=this.sigBytes;b[c>>>2]&=4294967295<<32-8*(c%4),b.length=a.ceil(c/4)},clone:function(){var a=f.clone.call(this);return a.words=this.words.slice(0),a},random:function(b){for(var c=[],d=0;b>d;d+=4)c.push(4294967296*a.random()|0);return new g.init(c,b)}}),h=c.enc={},i=h.Hex={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;a>d;d++){var e=b[d>>>2]>>>24-8*(d%4)&255;c.push((e>>>4).toString(16)),c.push((15&e).toString(16))}return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d+=2)c[d>>>3]|=parseInt(a.substr(d,2),16)<<24-4*(d%8);return new g.init(c,b/2)}},j=h.Latin1={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;a>d;d++)c.push(String.fromCharCode(b[d>>>2]>>>24-8*(d%4)&255));return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d++)c[d>>>2]|=(255&a.charCodeAt(d))<<24-8*(d%4);return new g.init(c,b)}},k=h.Utf8={stringify:function(a){try{return decodeURIComponent(escape(j.stringify(a)))}catch(b){throw Error("Malformed UTF-8 data")}},parse:function(a){return j.parse(unescape(encodeURIComponent(a)))}},l=d.BufferedBlockAlgorithm=f.extend({reset:function(){this._data=new g.init,this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=k.parse(a)),this._data.concat(a),this._nDataBytes+=a.sigBytes},_process:function(b){var c=this._data,d=c.words,e=c.sigBytes,f=this.blockSize,h=e/(4*f),h=b?a.ceil(h):a.max((0|h)-this._minBufferSize,0);if(b=h*f,e=a.min(4*b,e),b){for(var i=0;b>i;i+=f)this._doProcessBlock(d,i);i=d.splice(0,b),c.sigBytes-=e}return new g.init(i,e)},clone:function(){var a=f.clone.call(this);return a._data=this._data.clone(),a},_minBufferSize:0});d.Hasher=l.extend({cfg:f.extend(),init:function(a){this.cfg=this.cfg.extend(a),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(a){return this._append(a),this._process(),this},finalize:function(a){return a&&this._append(a),this._doFinalize()},blockSize:16,_createHelper:function(a){return function(b,c){return new a.init(c).finalize(b)}},_createHmacHelper:function(a){return function(b,c){return new m.HMAC.init(a,c).finalize(b)}}});var m=c.algo={};return c}(Math);!function(a){for(var b=CryptoJS,c=b.lib,d=c.WordArray,e=c.Hasher,c=b.algo,f=[],g=[],h=function(a){return 4294967296*(a-(0|a))|0},i=2,j=0;64>j;){var k;a:{k=i;for(var l=a.sqrt(k),m=2;l>=m;m++)if(!(k%m)){k=!1;break a}k=!0}k&&(8>j&&(f[j]=h(a.pow(i,.5))),g[j]=h(a.pow(i,1/3)),j++),i++}var n=[],c=c.SHA256=e.extend({_doReset:function(){this._hash=new d.init(f.slice(0))},_doProcessBlock:function(a,b){for(var c=this._hash.words,d=c[0],e=c[1],f=c[2],h=c[3],i=c[4],j=c[5],k=c[6],l=c[7],m=0;64>m;m++){if(16>m)n[m]=0|a[b+m];else{var o=n[m-15],p=n[m-2];n[m]=((o<<25|o>>>7)^(o<<14|o>>>18)^o>>>3)+n[m-7]+((p<<15|p>>>17)^(p<<13|p>>>19)^p>>>10)+n[m-16]}o=l+((i<<26|i>>>6)^(i<<21|i>>>11)^(i<<7|i>>>25))+(i&j^~i&k)+g[m]+n[m],p=((d<<30|d>>>2)^(d<<19|d>>>13)^(d<<10|d>>>22))+(d&e^d&f^e&f),l=k,k=j,j=i,i=h+o|0,h=f,f=e,e=d,d=o+p|0}c[0]=c[0]+d|0,c[1]=c[1]+e|0,c[2]=c[2]+f|0,c[3]=c[3]+h|0,c[4]=c[4]+i|0,c[5]=c[5]+j|0,c[6]=c[6]+k|0,c[7]=c[7]+l|0},_doFinalize:function(){var b=this._data,c=b.words,d=8*this._nDataBytes,e=8*b.sigBytes;return c[e>>>5]|=128<<24-e%32,c[(e+64>>>9<<4)+14]=a.floor(d/4294967296),c[(e+64>>>9<<4)+15]=d,b.sigBytes=4*c.length,this._process(),this._hash},clone:function(){var a=e.clone.call(this);return a._hash=this._hash.clone(),a}});b.SHA256=e._createHelper(c),b.HmacSHA256=e._createHmacHelper(c)}(Math),function(){var a=CryptoJS,b=a.lib.WordArray,c=a.algo,d=c.SHA256,c=c.SHA224=d.extend({_doReset:function(){this._hash=new b.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var a=d._doFinalize.call(this);return a.sigBytes-=4,a}});a.SHA224=d._createHelper(c),a.HmacSHA224=d._createHmacHelper(c)}();var CryptoJS=CryptoJS||function(a,b){var c={},d=c.lib={},e=function(){},f=d.Base={extend:function(a){e.prototype=this;var b=new e;return a&&b.mixIn(a),b.hasOwnProperty("init")||(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},create:function(){var a=this.extend();return a.init.apply(a,arguments),a},init:function(){},mixIn:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},g=d.WordArray=f.extend({init:function(a,c){a=this.words=a||[],this.sigBytes=c!=b?c:4*a.length},toString:function(a){return(a||i).stringify(this)},concat:function(a){var b=this.words,c=a.words,d=this.sigBytes;if(a=a.sigBytes,this.clamp(),d%4)for(var e=0;a>e;e++)b[d+e>>>2]|=(c[e>>>2]>>>24-8*(e%4)&255)<<24-8*((d+e)%4);else if(65535<c.length)for(e=0;a>e;e+=4)b[d+e>>>2]=c[e>>>2];else b.push.apply(b,c);return this.sigBytes+=a,this},clamp:function(){var b=this.words,c=this.sigBytes;b[c>>>2]&=4294967295<<32-8*(c%4),b.length=a.ceil(c/4)},clone:function(){var a=f.clone.call(this);return a.words=this.words.slice(0),a},random:function(b){for(var c=[],d=0;b>d;d+=4)c.push(4294967296*a.random()|0);return new g.init(c,b)}}),h=c.enc={},i=h.Hex={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;a>d;d++){var e=b[d>>>2]>>>24-8*(d%4)&255;c.push((e>>>4).toString(16)),c.push((15&e).toString(16))}return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d+=2)c[d>>>3]|=parseInt(a.substr(d,2),16)<<24-4*(d%8);return new g.init(c,b/2)}},j=h.Latin1={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;a>d;d++)c.push(String.fromCharCode(b[d>>>2]>>>24-8*(d%4)&255));return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d++)c[d>>>2]|=(255&a.charCodeAt(d))<<24-8*(d%4);return new g.init(c,b)}},k=h.Utf8={stringify:function(a){try{return decodeURIComponent(escape(j.stringify(a)))}catch(b){throw Error("Malformed UTF-8 data")}},parse:function(a){return j.parse(unescape(encodeURIComponent(a)))}},l=d.BufferedBlockAlgorithm=f.extend({reset:function(){this._data=new g.init,this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=k.parse(a)),this._data.concat(a),this._nDataBytes+=a.sigBytes},_process:function(b){var c=this._data,d=c.words,e=c.sigBytes,f=this.blockSize,h=e/(4*f),h=b?a.ceil(h):a.max((0|h)-this._minBufferSize,0);if(b=h*f,e=a.min(4*b,e),b){for(var i=0;b>i;i+=f)this._doProcessBlock(d,i);i=d.splice(0,b),c.sigBytes-=e}return new g.init(i,e)},clone:function(){var a=f.clone.call(this);return a._data=this._data.clone(),a},_minBufferSize:0});d.Hasher=l.extend({cfg:f.extend(),init:function(a){this.cfg=this.cfg.extend(a),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(a){return this._append(a),this._process(),this},finalize:function(a){return a&&this._append(a),this._doFinalize()},blockSize:16,_createHelper:function(a){return function(b,c){return new a.init(c).finalize(b)}},_createHmacHelper:function(a){return function(b,c){return new m.HMAC.init(a,c).finalize(b)}}});var m=c.algo={};return c}(Math);!function(a){for(var b=CryptoJS,c=b.lib,d=c.WordArray,e=c.Hasher,c=b.algo,f=[],g=[],h=function(a){return 4294967296*(a-(0|a))|0},i=2,j=0;64>j;){var k;a:{k=i;for(var l=a.sqrt(k),m=2;l>=m;m++)if(!(k%m)){k=!1;break a}k=!0}k&&(8>j&&(f[j]=h(a.pow(i,.5))),g[j]=h(a.pow(i,1/3)),j++),i++}var n=[],c=c.SHA256=e.extend({_doReset:function(){this._hash=new d.init(f.slice(0))},_doProcessBlock:function(a,b){for(var c=this._hash.words,d=c[0],e=c[1],f=c[2],h=c[3],i=c[4],j=c[5],k=c[6],l=c[7],m=0;64>m;m++){if(16>m)n[m]=0|a[b+m];else{var o=n[m-15],p=n[m-2];n[m]=((o<<25|o>>>7)^(o<<14|o>>>18)^o>>>3)+n[m-7]+((p<<15|p>>>17)^(p<<13|p>>>19)^p>>>10)+n[m-16]}o=l+((i<<26|i>>>6)^(i<<21|i>>>11)^(i<<7|i>>>25))+(i&j^~i&k)+g[m]+n[m],p=((d<<30|d>>>2)^(d<<19|d>>>13)^(d<<10|d>>>22))+(d&e^d&f^e&f),l=k,k=j,j=i,i=h+o|0,h=f,f=e,e=d,d=o+p|0}c[0]=c[0]+d|0,c[1]=c[1]+e|0,c[2]=c[2]+f|0,c[3]=c[3]+h|0,c[4]=c[4]+i|0,c[5]=c[5]+j|0,c[6]=c[6]+k|0,c[7]=c[7]+l|0},_doFinalize:function(){var b=this._data,c=b.words,d=8*this._nDataBytes,e=8*b.sigBytes;return c[e>>>5]|=128<<24-e%32,c[(e+64>>>9<<4)+14]=a.floor(d/4294967296),c[(e+64>>>9<<4)+15]=d,b.sigBytes=4*c.length,this._process(),this._hash},clone:function(){var a=e.clone.call(this);return a._hash=this._hash.clone(),a}});b.SHA256=e._createHelper(c),b.HmacSHA256=e._createHmacHelper(c)}(Math);var CryptoJS=CryptoJS||function(a,b){var c={},d=c.lib={},e=function(){},f=d.Base={extend:function(a){e.prototype=this;var b=new e;return a&&b.mixIn(a),b.hasOwnProperty("init")||(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},create:function(){var a=this.extend();return a.init.apply(a,arguments),a},init:function(){},mixIn:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},g=d.WordArray=f.extend({init:function(a,c){a=this.words=a||[],this.sigBytes=c!=b?c:4*a.length},toString:function(a){return(a||i).stringify(this)},concat:function(a){var b=this.words,c=a.words,d=this.sigBytes;if(a=a.sigBytes,this.clamp(),d%4)for(var e=0;a>e;e++)b[d+e>>>2]|=(c[e>>>2]>>>24-8*(e%4)&255)<<24-8*((d+e)%4);else if(65535<c.length)for(e=0;a>e;e+=4)b[d+e>>>2]=c[e>>>2];else b.push.apply(b,c);return this.sigBytes+=a,this},clamp:function(){var b=this.words,c=this.sigBytes;b[c>>>2]&=4294967295<<32-8*(c%4),b.length=a.ceil(c/4)},clone:function(){var a=f.clone.call(this);return a.words=this.words.slice(0),a},random:function(b){for(var c=[],d=0;b>d;d+=4)c.push(4294967296*a.random()|0);return new g.init(c,b)}}),h=c.enc={},i=h.Hex={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;a>d;d++){var e=b[d>>>2]>>>24-8*(d%4)&255;c.push((e>>>4).toString(16)),c.push((15&e).toString(16))}return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d+=2)c[d>>>3]|=parseInt(a.substr(d,2),16)<<24-4*(d%8);return new g.init(c,b/2)}},j=h.Latin1={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;a>d;d++)c.push(String.fromCharCode(b[d>>>2]>>>24-8*(d%4)&255));return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d++)c[d>>>2]|=(255&a.charCodeAt(d))<<24-8*(d%4);return new g.init(c,b)}},k=h.Utf8={stringify:function(a){try{return decodeURIComponent(escape(j.stringify(a)))}catch(b){throw Error("Malformed UTF-8 data")}},parse:function(a){return j.parse(unescape(encodeURIComponent(a)))}},l=d.BufferedBlockAlgorithm=f.extend({reset:function(){this._data=new g.init,this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=k.parse(a)),this._data.concat(a),this._nDataBytes+=a.sigBytes},_process:function(b){var c=this._data,d=c.words,e=c.sigBytes,f=this.blockSize,h=e/(4*f),h=b?a.ceil(h):a.max((0|h)-this._minBufferSize,0);if(b=h*f,e=a.min(4*b,e),b){for(var i=0;b>i;i+=f)this._doProcessBlock(d,i);i=d.splice(0,b),c.sigBytes-=e}return new g.init(i,e)},clone:function(){var a=f.clone.call(this);return a._data=this._data.clone(),a},_minBufferSize:0});d.Hasher=l.extend({cfg:f.extend(),init:function(a){this.cfg=this.cfg.extend(a),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(a){return this._append(a),this._process(),this},finalize:function(a){return a&&this._append(a),this._doFinalize()},blockSize:16,_createHelper:function(a){return function(b,c){return new a.init(c).finalize(b)}},_createHmacHelper:function(a){return function(b,c){return new m.HMAC.init(a,c).finalize(b)}}});var m=c.algo={};return c}(Math);!function(a){var b=CryptoJS,c=b.lib,d=c.Base,e=c.WordArray,b=b.x64={};b.Word=d.extend({init:function(a,b){this.high=a,this.low=b}}),b.WordArray=d.extend({init:function(b,c){b=this.words=b||[],this.sigBytes=c!=a?c:8*b.length},toX32:function(){for(var a=this.words,b=a.length,c=[],d=0;b>d;d++){var f=a[d];c.push(f.high),c.push(f.low)}return e.create(c,this.sigBytes)},clone:function(){for(var a=d.clone.call(this),b=a.words=this.words.slice(0),c=b.length,e=0;c>e;e++)b[e]=b[e].clone();return a}})}(),function(){function a(){return e.create.apply(e,arguments)}for(var b=CryptoJS,c=b.lib.Hasher,d=b.x64,e=d.Word,f=d.WordArray,d=b.algo,g=[a(1116352408,3609767458),a(1899447441,602891725),a(3049323471,3964484399),a(3921009573,2173295548),a(961987163,4081628472),a(1508970993,3053834265),a(2453635748,2937671579),a(2870763221,3664609560),a(3624381080,2734883394),a(310598401,1164996542),a(607225278,1323610764),a(1426881987,3590304994),a(1925078388,4068182383),a(2162078206,991336113),a(2614888103,633803317),a(3248222580,3479774868),a(3835390401,2666613458),a(4022224774,944711139),a(264347078,2341262773),a(604807628,2007800933),a(770255983,1495990901),a(1249150122,1856431235),a(1555081692,3175218132),a(1996064986,2198950837),a(2554220882,3999719339),a(2821834349,766784016),a(2952996808,2566594879),a(3210313671,3203337956),a(3336571891,1034457026),a(3584528711,2466948901),a(113926993,3758326383),a(338241895,168717936),a(666307205,1188179964),a(773529912,1546045734),a(1294757372,1522805485),a(1396182291,2643833823),a(1695183700,2343527390),a(1986661051,1014477480),a(2177026350,1206759142),a(2456956037,344077627),a(2730485921,1290863460),a(2820302411,3158454273),a(3259730800,3505952657),a(3345764771,106217008),a(3516065817,3606008344),a(3600352804,1432725776),a(4094571909,1467031594),a(275423344,851169720),a(430227734,3100823752),a(506948616,1363258195),a(659060556,3750685593),a(883997877,3785050280),a(958139571,3318307427),a(1322822218,3812723403),a(1537002063,2003034995),a(1747873779,3602036899),a(1955562222,1575990012),a(2024104815,1125592928),a(2227730452,2716904306),a(2361852424,442776044),a(2428436474,593698344),a(2756734187,3733110249),a(3204031479,2999351573),a(3329325298,3815920427),a(3391569614,3928383900),a(3515267271,566280711),a(3940187606,3454069534),a(4118630271,4000239992),a(116418474,1914138554),a(174292421,2731055270),a(289380356,3203993006),a(460393269,320620315),a(685471733,587496836),a(852142971,1086792851),a(1017036298,365543100),a(1126000580,2618297676),a(1288033470,3409855158),a(1501505948,4234509866),a(1607167915,987167468),a(1816402316,1246189591)],h=[],i=0;80>i;i++)h[i]=a();d=d.SHA512=c.extend({_doReset:function(){this._hash=new f.init([new e.init(1779033703,4089235720),new e.init(3144134277,2227873595),new e.init(1013904242,4271175723),new e.init(2773480762,1595750129),new e.init(1359893119,2917565137),new e.init(2600822924,725511199),new e.init(528734635,4215389547),new e.init(1541459225,327033209)])},_doProcessBlock:function(a,b){for(var c=this._hash.words,d=c[0],e=c[1],f=c[2],i=c[3],j=c[4],k=c[5],l=c[6],c=c[7],m=d.high,n=d.low,o=e.high,p=e.low,q=f.high,r=f.low,s=i.high,t=i.low,u=j.high,v=j.low,w=k.high,x=k.low,y=l.high,z=l.low,A=c.high,B=c.low,C=m,D=n,E=o,F=p,G=q,H=r,I=s,J=t,K=u,L=v,M=w,N=x,O=y,P=z,Q=A,R=B,S=0;80>S;S++){var T=h[S];if(16>S)var U=T.high=0|a[b+2*S],V=T.low=0|a[b+2*S+1];else{var U=h[S-15],V=U.high,W=U.low,U=(V>>>1|W<<31)^(V>>>8|W<<24)^V>>>7,W=(W>>>1|V<<31)^(W>>>8|V<<24)^(W>>>7|V<<25),X=h[S-2],V=X.high,Y=X.low,X=(V>>>19|Y<<13)^(V<<3|Y>>>29)^V>>>6,Y=(Y>>>19|V<<13)^(Y<<3|V>>>29)^(Y>>>6|V<<26),V=h[S-7],Z=V.high,$=h[S-16],_=$.high,$=$.low,V=W+V.low,U=U+Z+(W>>>0>V>>>0?1:0),V=V+Y,U=U+X+(Y>>>0>V>>>0?1:0),V=V+$,U=U+_+($>>>0>V>>>0?1:0);T.high=U,T.low=V}var Z=K&M^~K&O,$=L&N^~L&P,T=C&E^C&G^E&G,ab=D&F^D&H^F&H,W=(C>>>28|D<<4)^(C<<30|D>>>2)^(C<<25|D>>>7),X=(D>>>28|C<<4)^(D<<30|C>>>2)^(D<<25|C>>>7),Y=g[S],bb=Y.high,cb=Y.low,Y=R+((L>>>14|K<<18)^(L>>>18|K<<14)^(L<<23|K>>>9)),_=Q+((K>>>14|L<<18)^(K>>>18|L<<14)^(K<<23|L>>>9))+(R>>>0>Y>>>0?1:0),Y=Y+$,_=_+Z+($>>>0>Y>>>0?1:0),Y=Y+cb,_=_+bb+(cb>>>0>Y>>>0?1:0),Y=Y+V,_=_+U+(V>>>0>Y>>>0?1:0),V=X+ab,T=W+T+(X>>>0>V>>>0?1:0),Q=O,R=P,O=M,P=N,M=K,N=L,L=J+Y|0,K=I+_+(J>>>0>L>>>0?1:0)|0,I=G,J=H,G=E,H=F,E=C,F=D,D=Y+V|0,C=_+T+(Y>>>0>D>>>0?1:0)|0}n=d.low=n+D,d.high=m+C+(D>>>0>n>>>0?1:0),p=e.low=p+F,e.high=o+E+(F>>>0>p>>>0?1:0),r=f.low=r+H,f.high=q+G+(H>>>0>r>>>0?1:0),t=i.low=t+J,i.high=s+I+(J>>>0>t>>>0?1:0),v=j.low=v+L,j.high=u+K+(L>>>0>v>>>0?1:0),x=k.low=x+N,k.high=w+M+(N>>>0>x>>>0?1:0),z=l.low=z+P,l.high=y+O+(P>>>0>z>>>0?1:0),B=c.low=B+R,c.high=A+Q+(R>>>0>B>>>0?1:0)},_doFinalize:function(){var a=this._data,b=a.words,c=8*this._nDataBytes,d=8*a.sigBytes;return b[d>>>5]|=128<<24-d%32,b[(d+128>>>10<<5)+30]=Math.floor(c/4294967296),b[(d+128>>>10<<5)+31]=c,a.sigBytes=4*b.length,this._process(),this._hash.toX32()},clone:function(){var a=c.clone.call(this);return a._hash=this._hash.clone(),a},blockSize:32}),b.SHA512=c._createHelper(d),b.HmacSHA512=c._createHmacHelper(d)}(),function(){var a=CryptoJS,b=a.x64,c=b.Word,d=b.WordArray,b=a.algo,e=b.SHA512,b=b.SHA384=e.extend({_doReset:function(){this._hash=new d.init([new c.init(3418070365,3238371032),new c.init(1654270250,914150663),new c.init(2438529370,812702999),new c.init(355462360,4144912697),new c.init(1731405415,4290775857),new c.init(2394180231,1750603025),new c.init(3675008525,1694076839),new c.init(1203062813,3204075428)])},_doFinalize:function(){var a=e._doFinalize.call(this);return a.sigBytes-=16,a}});a.SHA384=e._createHelper(b),a.HmacSHA384=e._createHmacHelper(b)}();var CryptoJS=CryptoJS||function(a,b){var c={},d=c.lib={},e=function(){},f=d.Base={extend:function(a){e.prototype=this;var b=new e;return a&&b.mixIn(a),b.hasOwnProperty("init")||(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},create:function(){var a=this.extend();return a.init.apply(a,arguments),a},init:function(){},mixIn:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},g=d.WordArray=f.extend({init:function(a,c){a=this.words=a||[],this.sigBytes=c!=b?c:4*a.length},toString:function(a){return(a||i).stringify(this)},concat:function(a){var b=this.words,c=a.words,d=this.sigBytes;if(a=a.sigBytes,this.clamp(),d%4)for(var e=0;a>e;e++)b[d+e>>>2]|=(c[e>>>2]>>>24-8*(e%4)&255)<<24-8*((d+e)%4);else if(65535<c.length)for(e=0;a>e;e+=4)b[d+e>>>2]=c[e>>>2];else b.push.apply(b,c);return this.sigBytes+=a,this},clamp:function(){var b=this.words,c=this.sigBytes;b[c>>>2]&=4294967295<<32-8*(c%4),b.length=a.ceil(c/4)},clone:function(){var a=f.clone.call(this);return a.words=this.words.slice(0),a},random:function(b){for(var c=[],d=0;b>d;d+=4)c.push(4294967296*a.random()|0);return new g.init(c,b)}}),h=c.enc={},i=h.Hex={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;a>d;d++){var e=b[d>>>2]>>>24-8*(d%4)&255;c.push((e>>>4).toString(16)),c.push((15&e).toString(16))}return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d+=2)c[d>>>3]|=parseInt(a.substr(d,2),16)<<24-4*(d%8);return new g.init(c,b/2)}},j=h.Latin1={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;a>d;d++)c.push(String.fromCharCode(b[d>>>2]>>>24-8*(d%4)&255));return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d++)c[d>>>2]|=(255&a.charCodeAt(d))<<24-8*(d%4);return new g.init(c,b)}},k=h.Utf8={stringify:function(a){try{return decodeURIComponent(escape(j.stringify(a)))}catch(b){throw Error("Malformed UTF-8 data")}},parse:function(a){return j.parse(unescape(encodeURIComponent(a)))}},l=d.BufferedBlockAlgorithm=f.extend({reset:function(){this._data=new g.init,this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=k.parse(a)),this._data.concat(a),this._nDataBytes+=a.sigBytes},_process:function(b){var c=this._data,d=c.words,e=c.sigBytes,f=this.blockSize,h=e/(4*f),h=b?a.ceil(h):a.max((0|h)-this._minBufferSize,0);if(b=h*f,e=a.min(4*b,e),b){for(var i=0;b>i;i+=f)this._doProcessBlock(d,i);i=d.splice(0,b),c.sigBytes-=e}return new g.init(i,e)},clone:function(){var a=f.clone.call(this);return a._data=this._data.clone(),a},_minBufferSize:0});d.Hasher=l.extend({cfg:f.extend(),init:function(a){this.cfg=this.cfg.extend(a),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(a){return this._append(a),this._process(),this},finalize:function(a){return a&&this._append(a),this._doFinalize()},blockSize:16,_createHelper:function(a){return function(b,c){return new a.init(c).finalize(b)}},_createHmacHelper:function(a){return function(b,c){return new m.HMAC.init(a,c).finalize(b)}}});var m=c.algo={};return c}(Math);!function(a){var b=CryptoJS,c=b.lib,d=c.Base,e=c.WordArray,b=b.x64={};b.Word=d.extend({init:function(a,b){this.high=a,this.low=b}}),b.WordArray=d.extend({init:function(b,c){b=this.words=b||[],this.sigBytes=c!=a?c:8*b.length},toX32:function(){for(var a=this.words,b=a.length,c=[],d=0;b>d;d++){var f=a[d];c.push(f.high),c.push(f.low)}return e.create(c,this.sigBytes)},clone:function(){for(var a=d.clone.call(this),b=a.words=this.words.slice(0),c=b.length,e=0;c>e;e++)b[e]=b[e].clone();return a}})}(),function(){function a(){return e.create.apply(e,arguments)}for(var b=CryptoJS,c=b.lib.Hasher,d=b.x64,e=d.Word,f=d.WordArray,d=b.algo,g=[a(1116352408,3609767458),a(1899447441,602891725),a(3049323471,3964484399),a(3921009573,2173295548),a(961987163,4081628472),a(1508970993,3053834265),a(2453635748,2937671579),a(2870763221,3664609560),a(3624381080,2734883394),a(310598401,1164996542),a(607225278,1323610764),a(1426881987,3590304994),a(1925078388,4068182383),a(2162078206,991336113),a(2614888103,633803317),a(3248222580,3479774868),a(3835390401,2666613458),a(4022224774,944711139),a(264347078,2341262773),a(604807628,2007800933),a(770255983,1495990901),a(1249150122,1856431235),a(1555081692,3175218132),a(1996064986,2198950837),a(2554220882,3999719339),a(2821834349,766784016),a(2952996808,2566594879),a(3210313671,3203337956),a(3336571891,1034457026),a(3584528711,2466948901),a(113926993,3758326383),a(338241895,168717936),a(666307205,1188179964),a(773529912,1546045734),a(1294757372,1522805485),a(1396182291,2643833823),a(1695183700,2343527390),a(1986661051,1014477480),a(2177026350,1206759142),a(2456956037,344077627),a(2730485921,1290863460),a(2820302411,3158454273),a(3259730800,3505952657),a(3345764771,106217008),a(3516065817,3606008344),a(3600352804,1432725776),a(4094571909,1467031594),a(275423344,851169720),a(430227734,3100823752),a(506948616,1363258195),a(659060556,3750685593),a(883997877,3785050280),a(958139571,3318307427),a(1322822218,3812723403),a(1537002063,2003034995),a(1747873779,3602036899),a(1955562222,1575990012),a(2024104815,1125592928),a(2227730452,2716904306),a(2361852424,442776044),a(2428436474,593698344),a(2756734187,3733110249),a(3204031479,2999351573),a(3329325298,3815920427),a(3391569614,3928383900),a(3515267271,566280711),a(3940187606,3454069534),a(4118630271,4000239992),a(116418474,1914138554),a(174292421,2731055270),a(289380356,3203993006),a(460393269,320620315),a(685471733,587496836),a(852142971,1086792851),a(1017036298,365543100),a(1126000580,2618297676),a(1288033470,3409855158),a(1501505948,4234509866),a(1607167915,987167468),a(1816402316,1246189591)],h=[],i=0;80>i;i++)h[i]=a();
d=d.SHA512=c.extend({_doReset:function(){this._hash=new f.init([new e.init(1779033703,4089235720),new e.init(3144134277,2227873595),new e.init(1013904242,4271175723),new e.init(2773480762,1595750129),new e.init(1359893119,2917565137),new e.init(2600822924,725511199),new e.init(528734635,4215389547),new e.init(1541459225,327033209)])},_doProcessBlock:function(a,b){for(var c=this._hash.words,d=c[0],e=c[1],f=c[2],i=c[3],j=c[4],k=c[5],l=c[6],c=c[7],m=d.high,n=d.low,o=e.high,p=e.low,q=f.high,r=f.low,s=i.high,t=i.low,u=j.high,v=j.low,w=k.high,x=k.low,y=l.high,z=l.low,A=c.high,B=c.low,C=m,D=n,E=o,F=p,G=q,H=r,I=s,J=t,K=u,L=v,M=w,N=x,O=y,P=z,Q=A,R=B,S=0;80>S;S++){var T=h[S];if(16>S)var U=T.high=0|a[b+2*S],V=T.low=0|a[b+2*S+1];else{var U=h[S-15],V=U.high,W=U.low,U=(V>>>1|W<<31)^(V>>>8|W<<24)^V>>>7,W=(W>>>1|V<<31)^(W>>>8|V<<24)^(W>>>7|V<<25),X=h[S-2],V=X.high,Y=X.low,X=(V>>>19|Y<<13)^(V<<3|Y>>>29)^V>>>6,Y=(Y>>>19|V<<13)^(Y<<3|V>>>29)^(Y>>>6|V<<26),V=h[S-7],Z=V.high,$=h[S-16],_=$.high,$=$.low,V=W+V.low,U=U+Z+(W>>>0>V>>>0?1:0),V=V+Y,U=U+X+(Y>>>0>V>>>0?1:0),V=V+$,U=U+_+($>>>0>V>>>0?1:0);T.high=U,T.low=V}var Z=K&M^~K&O,$=L&N^~L&P,T=C&E^C&G^E&G,ab=D&F^D&H^F&H,W=(C>>>28|D<<4)^(C<<30|D>>>2)^(C<<25|D>>>7),X=(D>>>28|C<<4)^(D<<30|C>>>2)^(D<<25|C>>>7),Y=g[S],bb=Y.high,cb=Y.low,Y=R+((L>>>14|K<<18)^(L>>>18|K<<14)^(L<<23|K>>>9)),_=Q+((K>>>14|L<<18)^(K>>>18|L<<14)^(K<<23|L>>>9))+(R>>>0>Y>>>0?1:0),Y=Y+$,_=_+Z+($>>>0>Y>>>0?1:0),Y=Y+cb,_=_+bb+(cb>>>0>Y>>>0?1:0),Y=Y+V,_=_+U+(V>>>0>Y>>>0?1:0),V=X+ab,T=W+T+(X>>>0>V>>>0?1:0),Q=O,R=P,O=M,P=N,M=K,N=L,L=J+Y|0,K=I+_+(J>>>0>L>>>0?1:0)|0,I=G,J=H,G=E,H=F,E=C,F=D,D=Y+V|0,C=_+T+(Y>>>0>D>>>0?1:0)|0}n=d.low=n+D,d.high=m+C+(D>>>0>n>>>0?1:0),p=e.low=p+F,e.high=o+E+(F>>>0>p>>>0?1:0),r=f.low=r+H,f.high=q+G+(H>>>0>r>>>0?1:0),t=i.low=t+J,i.high=s+I+(J>>>0>t>>>0?1:0),v=j.low=v+L,j.high=u+K+(L>>>0>v>>>0?1:0),x=k.low=x+N,k.high=w+M+(N>>>0>x>>>0?1:0),z=l.low=z+P,l.high=y+O+(P>>>0>z>>>0?1:0),B=c.low=B+R,c.high=A+Q+(R>>>0>B>>>0?1:0)},_doFinalize:function(){var a=this._data,b=a.words,c=8*this._nDataBytes,d=8*a.sigBytes;return b[d>>>5]|=128<<24-d%32,b[(d+128>>>10<<5)+30]=Math.floor(c/4294967296),b[(d+128>>>10<<5)+31]=c,a.sigBytes=4*b.length,this._process(),this._hash.toX32()},clone:function(){var a=c.clone.call(this);return a._hash=this._hash.clone(),a},blockSize:32}),b.SHA512=c._createHelper(d),b.HmacSHA512=c._createHmacHelper(d)}(),function(a){var b=0;a.getScrollbarWidth=function(){if(!b)if(a.browser.msie){var c=a('<textarea cols="10" rows="2"></textarea>').css({position:"absolute",top:-1e3,left:-1e3}).appendTo("body"),d=a('<textarea cols="10" rows="2" style="overflow: hidden;"></textarea>').css({position:"absolute",top:-1e3,left:-1e3}).appendTo("body");b=c.width()-d.width(),c.add(d).remove()}else{var e=a("<div />").css({width:100,height:100,overflow:"auto",position:"absolute",top:-1e3,left:-1e3}).prependTo("body").append("<div />").find("div").css({width:"100%",height:200});b=100-e.width(),e.parent().remove()}return b}}(jQuery),function(a,b){"$:nomunge";var c,d=a.jQuery||a.Cowboy||(a.Cowboy={});d.throttle=c=function(a,c,e,f){function g(){function d(){i=+new Date,e.apply(j,l)}function g(){h=b}var j=this,k=+new Date-i,l=arguments;f&&!h&&d(),h&&clearTimeout(h),f===b&&k>a?d():c!==!0&&(h=setTimeout(f?g:d,f===b?a-k:a))}var h,i=0;return"boolean"!=typeof c&&(f=e,e=c,c=b),d.guid&&(g.guid=e.guid=e.guid||d.guid++),g},d.debounce=function(a,d,e){return e===b?c(a,d,!1):c(a,e,d!==!1)}}(this),function(a){function b(a){for(var b,c=["transform","WebkitTransform","msTransform","MozTransform","OTransform"];b=c.shift();)if(a&&"undefined"!=typeof a.style[b])return b;return"transform"}var c=null,d=a.fn.css;a.fn.css=function(e,f){if(null===c&&(c="undefined"!=typeof a.cssProps?a.cssProps:"undefined"!=typeof a.props?a.props:{}),"undefined"==typeof c.transform&&("transform"==e||"object"==typeof e&&"undefined"!=typeof e.transform)&&(c.transform=b(this.get(0))),"transform"!=c.transform)if("transform"==e){if(e=c.transform,"undefined"==typeof f&&jQuery.style)return jQuery.style(this.get(0),e)}else"object"==typeof e&&"undefined"!=typeof e.transform&&(e[c.transform]=e.transform,delete e.transform);return d.apply(this,arguments)}}(jQuery),function(a){var b="deg";a.fn.rotate=function(c){var d=a(this).css("transform")||"none";if("undefined"==typeof c){if(d){var e=d.match(/rotate\(([^)]+)\)/);if(e&&e[1])return e[1]}return 0}var e=c.toString().match(/^(-?\d+(\.\d+)?)(.+)?$/);return e&&(e[3]&&(b=e[3]),a(this).css("transform",d.replace(/none|rotate\([^)]*\)/,"")+"rotate("+e[1]+b+")")),this},a.fn.scale=function(b){var c=a(this).css("transform");if("undefined"==typeof b){if(c){var d=c.match(/scale\(([^)]+)\)/);if(d&&d[1])return d[1]}return 1}return a(this).css("transform",c.replace(/none|scale\([^)]*\)/,"")+"scale("+b+")"),this};var c=a.fx.prototype.cur;a.fx.prototype.cur=function(){return"rotate"==this.prop?parseFloat(a(this.elem).rotate()):"scale"==this.prop?parseFloat(a(this.elem).scale()):c.apply(this,arguments)},a.fx.step.rotate=function(c){a(c.elem).rotate(c.now+b)},a.fx.step.scale=function(b){a(b.elem).scale(b.now)};var d=a.fn.animate;a.fn.animate=function(a){if("undefined"!=typeof a.rotate){var c=a.rotate.toString().match(/^(([+-]=)?(-?\d+(\.\d+)?))(.+)?$/);c&&c[5]&&(b=c[5]),a.rotate=c[1]}return d.apply(this,arguments)}}(jQuery),window.jQuery&&function(a){a.extend({xml2json:function(b,c){function d(b,g){if(!b)return null;{var h="",i=null,j=null;b.nodeType,e(b.localName||b.nodeName),b.text||b.nodeValue||""}b.childNodes&&b.childNodes.length>0&&a.each(b.childNodes,function(a,b){var c=b.nodeType,g=e(b.localName||b.nodeName),j=b.text||b.nodeValue||"";if(8!=c)if(3!=c&&4!=c&&g)i=i||{},i[g]?(i[g].length||(i[g]=f(i[g])),i[g]=f(i[g]),i[g][i[g].length]=d(b,!0),i[g].length=i[g].length):i[g]=d(b);else{if(j.match(/^\s+$/))return;h+=j.replace(/^\s+/,"").replace(/\s+$/,"")}}),b.attributes&&b.attributes.length>0&&(j={},i=i||{},a.each(b.attributes,function(a,b){var c=e(b.name),d=b.value;j[c]=d,i[c]?(i[cnn]=f(i[cnn]),i[c][i[c].length]=d,i[c].length=i[c].length):i[c]=d})),i&&(i=a.extend(""!=h?new String(h):{},i||{}),h=i.text?("object"==typeof i.text?i.text:[i.text||""]).concat([h]):h,h&&(i.text=h),h="");var k=i||h;return c&&(h&&(k={}),h=k.text||h||"",h&&(k.text=h),g||(k=f(k))),k}if(!b)return{};var e=function(a){return String(a||"").replace(/-/g,"_")},f=function(b){return a.isArray(b)||(b=[b]),b.length=b.length,b};if("string"==typeof b&&(b=a.text2xml(b)),b.nodeType){if(3==b.nodeType||4==b.nodeType)return b.nodeValue;var g=9==b.nodeType?b.documentElement:b,h=d(g,!0);return b=null,g=null,h}},text2xml:function(b){var c;try{var d=a.browser.msie?new ActiveXObject("Microsoft.XMLDOM"):new DOMParser;d.async=!1}catch(e){throw new Error("XML Parser could not be instantiated")}try{c=a.browser.msie?d.loadXML(b)?d:!1:d.parseFromString(b,"text/xml")}catch(e){throw new Error("Error parsing XML string")}return c}})}(jQuery),function(a,b){"use strict";function c(){if(!d.READY){d.event.determineEventTypes();for(var a in d.gestures)d.gestures.hasOwnProperty(a)&&d.detection.register(d.gestures[a]);d.event.onTouch(d.DOCUMENT,d.EVENT_MOVE,d.detection.detect),d.event.onTouch(d.DOCUMENT,d.EVENT_END,d.detection.detect),d.READY=!0}}var d=function(a,b){return new d.Instance(a,b||{})};d.defaults={stop_browser_behavior:{userSelect:"none",touchAction:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},d.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled,d.HAS_TOUCHEVENTS="ontouchstart"in a,d.MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android/i,d.NO_MOUSEEVENTS=d.HAS_TOUCHEVENTS&&navigator.userAgent.match(d.MOBILE_REGEX),d.EVENT_TYPES={},d.DIRECTION_DOWN="down",d.DIRECTION_LEFT="left",d.DIRECTION_UP="up",d.DIRECTION_RIGHT="right",d.POINTER_MOUSE="mouse",d.POINTER_TOUCH="touch",d.POINTER_PEN="pen",d.EVENT_START="start",d.EVENT_MOVE="move",d.EVENT_END="end",d.DOCUMENT=document,d.plugins={},d.READY=!1,d.Instance=function(a,b){var e=this;return c(),this.element=a,this.enabled=!0,this.options=d.utils.extend(d.utils.extend({},d.defaults),b||{}),this.options.stop_browser_behavior&&d.utils.stopDefaultBrowserBehavior(this.element,this.options.stop_browser_behavior),d.event.onTouch(a,d.EVENT_START,function(a){e.enabled&&d.detection.startDetect(e,a)}),this},d.Instance.prototype={on:function(a,b){for(var c=a.split(" "),d=0;d<c.length;d++)this.element.addEventListener(c[d],b,!1);return this},off:function(a,b){for(var c=a.split(" "),d=0;d<c.length;d++)this.element.removeEventListener(c[d],b,!1);return this},trigger:function(a,b){var c=d.DOCUMENT.createEvent("Event");c.initEvent(a,!0,!0),c.gesture=b;var e=this.element;return d.utils.hasParent(b.target,e)&&(e=b.target),e.dispatchEvent(c),this},enable:function(a){return this.enabled=a,this}};var e=null,f=!1,g=!1;d.event={bindDom:function(a,b,c){for(var d=b.split(" "),e=0;e<d.length;e++)a.addEventListener(d[e],c,!1)},onTouch:function(a,b,c){var h=this;this.bindDom(a,d.EVENT_TYPES[b],function(i){var j=i.type.toLowerCase();if(!j.match(/mouse/)||!g){(j.match(/touch/)||j.match(/pointerdown/)||j.match(/mouse/)&&1===i.which)&&(f=!0),j.match(/touch|pointer/)&&(g=!0);var k=0;f&&(d.HAS_POINTEREVENTS&&b!=d.EVENT_END?k=d.PointerEvent.updatePointer(b,i):j.match(/touch/)?k=i.touches.length:g||(k=j.match(/up/)?0:1),k>0&&b==d.EVENT_END?b=d.EVENT_MOVE:k||(b=d.EVENT_END),k||null===e?e=i:i=e,c.call(d.detection,h.collectEventData(a,b,i)),d.HAS_POINTEREVENTS&&b==d.EVENT_END&&(k=d.PointerEvent.updatePointer(b,i))),k||(e=null,f=!1,g=!1,d.PointerEvent.reset())}})},determineEventTypes:function(){var a;a=d.HAS_POINTEREVENTS?d.PointerEvent.getEvents():d.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],d.EVENT_TYPES[d.EVENT_START]=a[0],d.EVENT_TYPES[d.EVENT_MOVE]=a[1],d.EVENT_TYPES[d.EVENT_END]=a[2]},getTouchList:function(a){return d.HAS_POINTEREVENTS?d.PointerEvent.getTouchList():a.touches?a.touches:[{identifier:1,pageX:a.pageX,pageY:a.pageY,target:a.target}]},collectEventData:function(a,b,c){var e=this.getTouchList(c,b),f=d.POINTER_TOUCH;return(c.type.match(/mouse/)||d.PointerEvent.matchType(d.POINTER_MOUSE,c))&&(f=d.POINTER_MOUSE),{center:d.utils.getCenter(e),timeStamp:(new Date).getTime(),target:c.target,touches:e,eventType:b,pointerType:f,srcEvent:c,preventDefault:function(){this.srcEvent.preventManipulation&&this.srcEvent.preventManipulation(),this.srcEvent.preventDefault&&this.srcEvent.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return d.detection.stopDetect()}}}},d.PointerEvent={pointers:{},getTouchList:function(){var a=this,b=[];return Object.keys(a.pointers).sort().forEach(function(c){b.push(a.pointers[c])}),b},updatePointer:function(a,b){return a==d.EVENT_END?this.pointers={}:(b.identifier=b.pointerId,this.pointers[b.pointerId]=b),Object.keys(this.pointers).length},matchType:function(a,b){if(!b.pointerType)return!1;var c={};return c[d.POINTER_MOUSE]=b.pointerType==b.MSPOINTER_TYPE_MOUSE||b.pointerType==d.POINTER_MOUSE,c[d.POINTER_TOUCH]=b.pointerType==b.MSPOINTER_TYPE_TOUCH||b.pointerType==d.POINTER_TOUCH,c[d.POINTER_PEN]=b.pointerType==b.MSPOINTER_TYPE_PEN||b.pointerType==d.POINTER_PEN,c[a]},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}},d.utils={extend:function(a,c,d){for(var e in c)a[e]!==b&&d||(a[e]=c[e]);return a},hasParent:function(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1},getCenter:function(a){for(var b=[],c=[],d=0,e=a.length;e>d;d++)b.push(a[d].pageX),c.push(a[d].pageY);return{pageX:(Math.min.apply(Math,b)+Math.max.apply(Math,b))/2,pageY:(Math.min.apply(Math,c)+Math.max.apply(Math,c))/2}},getVelocity:function(a,b,c){return{x:Math.abs(b/a)||0,y:Math.abs(c/a)||0}},getAngle:function(a,b){var c=b.pageY-a.pageY,d=b.pageX-a.pageX;return 180*Math.atan2(c,d)/Math.PI},getDirection:function(a,b){var c=Math.abs(a.pageX-b.pageX),e=Math.abs(a.pageY-b.pageY);return c>=e?a.pageX-b.pageX>0?d.DIRECTION_LEFT:d.DIRECTION_RIGHT:a.pageY-b.pageY>0?d.DIRECTION_UP:d.DIRECTION_DOWN},getDistance:function(a,b){var c=b.pageX-a.pageX,d=b.pageY-a.pageY;return Math.sqrt(c*c+d*d)},getScale:function(a,b){return a.length>=2&&b.length>=2?this.getDistance(b[0],b[1])/this.getDistance(a[0],a[1]):1},getRotation:function(a,b){return a.length>=2&&b.length>=2?this.getAngle(b[1],b[0])-this.getAngle(a[1],a[0]):0},isVertical:function(a){return a==d.DIRECTION_UP||a==d.DIRECTION_DOWN},stopDefaultBrowserBehavior:function(a,b){var c,d=["webkit","khtml","moz","ms","o",""];if(b&&a.style){for(var e=0;e<d.length;e++)for(var f in b)b.hasOwnProperty(f)&&(c=f,d[e]&&(c=d[e]+c.substring(0,1).toUpperCase()+c.substring(1)),a.style[c]=b[f]);"none"==b.userSelect&&(a.onselectstart=function(){return!1})}}},d.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(a,b){this.current||(this.stopped=!1,this.current={inst:a,startEvent:d.utils.extend({},b),lastEvent:!1,name:""},this.detect(b))},detect:function(a){if(this.current&&!this.stopped){a=this.extendEventData(a);for(var b=this.current.inst.options,c=0,e=this.gestures.length;e>c;c++){var f=this.gestures[c];if(!this.stopped&&b[f.name]!==!1&&f.handler.call(f,a,this.current.inst)===!1){this.stopDetect();break}}return this.current&&(this.current.lastEvent=a),a.eventType==d.EVENT_END&&!a.touches.length-1&&this.stopDetect(),a}},stopDetect:function(){this.previous=d.utils.extend({},this.current),this.current=null,this.stopped=!0},extendEventData:function(a){var b=this.current.startEvent;if(b&&(a.touches.length!=b.touches.length||a.touches===b.touches)){b.touches=[];for(var c=0,e=a.touches.length;e>c;c++)b.touches.push(d.utils.extend({},a.touches[c]))}var f=a.timeStamp-b.timeStamp,g=a.center.pageX-b.center.pageX,h=a.center.pageY-b.center.pageY,i=d.utils.getVelocity(f,g,h);return d.utils.extend(a,{deltaTime:f,deltaX:g,deltaY:h,velocityX:i.x,velocityY:i.y,distance:d.utils.getDistance(b.center,a.center),angle:d.utils.getAngle(b.center,a.center),direction:d.utils.getDirection(b.center,a.center),scale:d.utils.getScale(b.touches,a.touches),rotation:d.utils.getRotation(b.touches,a.touches),startEvent:b}),a},register:function(a){var c=a.defaults||{};return c[a.name]===b&&(c[a.name]=!0),d.utils.extend(d.defaults,c,!0),a.index=a.index||1e3,this.gestures.push(a),this.gestures.sort(function(a,b){return a.index<b.index?-1:a.index>b.index?1:0}),this.gestures}},d.gestures=d.gestures||{},d.gestures.Hold={name:"hold",index:10,defaults:{hold_timeout:500,hold_threshold:1},timer:null,handler:function(a,b){switch(a.eventType){case d.EVENT_START:clearTimeout(this.timer),d.detection.current.name=this.name,this.timer=setTimeout(function(){"hold"==d.detection.current.name&&b.trigger("hold",a)},b.options.hold_timeout);break;case d.EVENT_MOVE:a.distance>b.options.hold_threshold&&clearTimeout(this.timer);break;case d.EVENT_END:clearTimeout(this.timer)}}},d.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,tap_always:!0,doubletap_distance:20,doubletap_interval:300},handler:function(a,b){if(a.eventType==d.EVENT_END){var c=d.detection.previous,e=!1;if(a.deltaTime>b.options.tap_max_touchtime||a.distance>b.options.tap_max_distance)return;c&&"tap"==c.name&&a.timeStamp-c.lastEvent.timeStamp<b.options.doubletap_interval&&a.distance<b.options.doubletap_distance&&(b.trigger("doubletap",a),e=!0),(!e||b.options.tap_always)&&(d.detection.current.name="tap",b.trigger(d.detection.current.name,a))}}},d.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_max_touches:1,swipe_velocity:.7},handler:function(a,b){if(a.eventType==d.EVENT_END){if(b.options.swipe_max_touches>0&&a.touches.length>b.options.swipe_max_touches)return;(a.velocityX>b.options.swipe_velocity||a.velocityY>b.options.swipe_velocity)&&(b.trigger(this.name,a),b.trigger(this.name+a.direction,a))}}},d.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,drag_max_touches:1,drag_block_horizontal:!1,drag_block_vertical:!1,drag_lock_to_axis:!1,drag_lock_min_distance:25},triggered:!1,handler:function(a,b){if(d.detection.current.name!=this.name&&this.triggered)return b.trigger(this.name+"end",a),void(this.triggered=!1);if(!(b.options.drag_max_touches>0&&a.touches.length>b.options.drag_max_touches))switch(a.eventType){case d.EVENT_START:this.triggered=!1;break;case d.EVENT_MOVE:if(a.distance<b.options.drag_min_distance&&d.detection.current.name!=this.name)return;d.detection.current.name=this.name,(d.detection.current.lastEvent.drag_locked_to_axis||b.options.drag_lock_to_axis&&b.options.drag_lock_min_distance<=a.distance)&&(a.drag_locked_to_axis=!0);var c=d.detection.current.lastEvent.direction;a.drag_locked_to_axis&&c!==a.direction&&(a.direction=d.utils.isVertical(c)?a.deltaY<0?d.DIRECTION_UP:d.DIRECTION_DOWN:a.deltaX<0?d.DIRECTION_LEFT:d.DIRECTION_RIGHT),this.triggered||(b.trigger(this.name+"start",a),this.triggered=!0),b.trigger(this.name,a),b.trigger(this.name+a.direction,a),(b.options.drag_block_vertical&&d.utils.isVertical(a.direction)||b.options.drag_block_horizontal&&!d.utils.isVertical(a.direction))&&a.preventDefault();break;case d.EVENT_END:this.triggered&&b.trigger(this.name+"end",a),this.triggered=!1}}},d.gestures.Transform={name:"transform",index:45,defaults:{transform_min_scale:.01,transform_min_rotation:1,transform_always_block:!1},triggered:!1,handler:function(a,b){if(d.detection.current.name!=this.name&&this.triggered)return b.trigger(this.name+"end",a),void(this.triggered=!1);if(!(a.touches.length<2))switch(b.options.transform_always_block&&a.preventDefault(),a.eventType){case d.EVENT_START:this.triggered=!1;break;case d.EVENT_MOVE:var c=Math.abs(1-a.scale),e=Math.abs(a.rotation);if(c<b.options.transform_min_scale&&e<b.options.transform_min_rotation)return;d.detection.current.name=this.name,this.triggered||(b.trigger(this.name+"start",a),this.triggered=!0),b.trigger(this.name,a),e>b.options.transform_min_rotation&&b.trigger("rotate",a),c>b.options.transform_min_scale&&(b.trigger("pinch",a),b.trigger("pinch"+(a.scale<1?"in":"out"),a));break;case d.EVENT_END:this.triggered&&b.trigger(this.name+"end",a),this.triggered=!1}}},d.gestures.Touch={name:"touch",index:-1/0,defaults:{prevent_default:!1,prevent_mouseevents:!1},handler:function(a,b){return b.options.prevent_mouseevents&&a.pointerType==d.POINTER_MOUSE?void a.stopDetect():(b.options.prevent_default&&a.preventDefault(),void(a.eventType==d.EVENT_START&&b.trigger(this.name,a)))}},d.gestures.Release={name:"release",index:1/0,handler:function(a,b){a.eventType==d.EVENT_END&&b.trigger(this.name,a)}},"object"==typeof module&&"object"==typeof module.exports?module.exports=d:(a.Hammer=d,"function"==typeof a.define&&a.define.amd&&a.define("hammer",[],function(){return d}))}(this),function(a,b){"use strict";a!==b&&(Hammer.event.bindDom=function(c,d,e){a(c).on(d,function(a){var c=a.originalEvent||a;c.pageX===b&&(c.pageX=a.pageX,c.pageY=a.pageY),c.target||(c.target=a.target),c.which===b&&(c.which=c.button),c.preventDefault||(c.preventDefault=a.preventDefault),c.stopPropagation||(c.stopPropagation=a.stopPropagation),e.call(this,c)})},Hammer.Instance.prototype.on=function(b,c){return a(this.element).on(b,c)},Hammer.Instance.prototype.off=function(b,c){return a(this.element).off(b,c)},Hammer.Instance.prototype.trigger=function(b,c){var d=a(this.element);return d.has(c.target).length&&(d=a(c.target)),d.trigger({type:b,gesture:c})},a.fn.hammer=function(b){return this.each(function(){var c=a(this),d=c.data("hammer");d?d&&b&&Hammer.utils.extend(d.options,b):c.data("hammer",new Hammer(this,b||{}))})})}(window.jQuery||window.Zepto),function(a,b){"use strict";function c(){if(!d.READY){d.event.determineEventTypes();for(var a in d.gestures)d.gestures.hasOwnProperty(a)&&d.detection.register(d.gestures[a]);d.event.onTouch(d.DOCUMENT,d.EVENT_MOVE,d.detection.detect),d.event.onTouch(d.DOCUMENT,d.EVENT_END,d.detection.detect),d.READY=!0}}var d=function(a,b){return new d.Instance(a,b||{})};d.defaults={stop_browser_behavior:{userSelect:"none",touchAction:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},d.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled,d.HAS_TOUCHEVENTS="ontouchstart"in a,d.MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android/i,d.NO_MOUSEEVENTS=d.HAS_TOUCHEVENTS&&navigator.userAgent.match(d.MOBILE_REGEX),d.EVENT_TYPES={},d.DIRECTION_DOWN="down",d.DIRECTION_LEFT="left",d.DIRECTION_UP="up",d.DIRECTION_RIGHT="right",d.POINTER_MOUSE="mouse",d.POINTER_TOUCH="touch",d.POINTER_PEN="pen",d.EVENT_START="start",d.EVENT_MOVE="move",d.EVENT_END="end",d.DOCUMENT=document,d.plugins={},d.READY=!1,d.Instance=function(a,b){var e=this;return c(),this.element=a,this.enabled=!0,this.options=d.utils.extend(d.utils.extend({},d.defaults),b||{}),this.options.stop_browser_behavior&&d.utils.stopDefaultBrowserBehavior(this.element,this.options.stop_browser_behavior),d.event.onTouch(a,d.EVENT_START,function(a){e.enabled&&d.detection.startDetect(e,a)}),this},d.Instance.prototype={on:function(a,b){for(var c=a.split(" "),d=0;d<c.length;d++)this.element.addEventListener(c[d],b,!1);return this},off:function(a,b){for(var c=a.split(" "),d=0;d<c.length;d++)this.element.removeEventListener(c[d],b,!1);return this},trigger:function(a,b){var c=d.DOCUMENT.createEvent("Event");c.initEvent(a,!0,!0),c.gesture=b;var e=this.element;return d.utils.hasParent(b.target,e)&&(e=b.target),"drag"===a&&console.log("drag"),e.dispatchEvent(c),this},enable:function(a){return this.enabled=a,this}};var e=null,f=!1,g=!1;d.event={bindDom:function(a,b,c){for(var d=b.split(" "),e=0;e<d.length;e++)a.addEventListener(d[e],c,!1)},onTouch:function(a,b,c){var h=this;this.bindDom(a,d.EVENT_TYPES[b],function(i){var j=i.type.toLowerCase();if(!j.match(/mouse/)||!g){(j.match(/touch/)||j.match(/pointerdown/)||j.match(/mouse/)&&1===i.which)&&(f=!0),j.match(/touch|pointer/)&&(g=!0);var k=0;f&&(d.HAS_POINTEREVENTS&&b!=d.EVENT_END?k=d.PointerEvent.updatePointer(b,i):j.match(/touch/)?k=i.touches.length:g||(k=j.match(/up/)?0:1),k>0&&b==d.EVENT_END?b=d.EVENT_MOVE:k||(b=d.EVENT_END),k||null===e?e=i:i=e,c.call(d.detection,h.collectEventData(a,b,i)),d.HAS_POINTEREVENTS&&b==d.EVENT_END&&(k=d.PointerEvent.updatePointer(b,i))),k||(e=null,f=!1,g=!1,d.PointerEvent.reset())}})},determineEventTypes:function(){var a;a=d.HAS_POINTEREVENTS?d.PointerEvent.getEvents():d.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],d.EVENT_TYPES[d.EVENT_START]=a[0],d.EVENT_TYPES[d.EVENT_MOVE]=a[1],d.EVENT_TYPES[d.EVENT_END]=a[2]},getTouchList:function(a){return d.HAS_POINTEREVENTS?d.PointerEvent.getTouchList():a.touches?a.touches:[{identifier:1,pageX:a.pageX,pageY:a.pageY,target:a.target}]},collectEventData:function(a,b,c){var e=this.getTouchList(c,b),f=d.POINTER_TOUCH;return(c.type.match(/mouse/)||d.PointerEvent.matchType(d.POINTER_MOUSE,c))&&(f=d.POINTER_MOUSE),{center:d.utils.getCenter(e),timeStamp:(new Date).getTime(),target:c.target,touches:e,eventType:b,pointerType:f,srcEvent:c,preventDefault:function(){this.srcEvent.preventManipulation&&this.srcEvent.preventManipulation(),this.srcEvent.preventDefault&&this.srcEvent.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return d.detection.stopDetect()}}}},d.PointerEvent={pointers:{},getTouchList:function(){var a=this,b=[];return Object.keys(a.pointers).sort().forEach(function(c){b.push(a.pointers[c])}),b},updatePointer:function(a,b){return a==d.EVENT_END?this.pointers={}:(b.identifier=b.pointerId,this.pointers[b.pointerId]=b),Object.keys(this.pointers).length},matchType:function(a,b){if(!b.pointerType)return!1;var c={};return c[d.POINTER_MOUSE]=b.pointerType==b.MSPOINTER_TYPE_MOUSE||b.pointerType==d.POINTER_MOUSE,c[d.POINTER_TOUCH]=b.pointerType==b.MSPOINTER_TYPE_TOUCH||b.pointerType==d.POINTER_TOUCH,c[d.POINTER_PEN]=b.pointerType==b.MSPOINTER_TYPE_PEN||b.pointerType==d.POINTER_PEN,c[a]},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}},d.utils={extend:function(a,c,d){for(var e in c)a[e]!==b&&d||(a[e]=c[e]);return a},hasParent:function(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1},getCenter:function(a){for(var b=[],c=[],d=0,e=a.length;e>d;d++)b.push(a[d].pageX),c.push(a[d].pageY);return{pageX:(Math.min.apply(Math,b)+Math.max.apply(Math,b))/2,pageY:(Math.min.apply(Math,c)+Math.max.apply(Math,c))/2}},getVelocity:function(a,b,c){return{x:Math.abs(b/a)||0,y:Math.abs(c/a)||0}},getAngle:function(a,b){var c=b.pageY-a.pageY,d=b.pageX-a.pageX;return 180*Math.atan2(c,d)/Math.PI},getDirection:function(a,b){var c=Math.abs(a.pageX-b.pageX),e=Math.abs(a.pageY-b.pageY);return c>=e?a.pageX-b.pageX>0?d.DIRECTION_LEFT:d.DIRECTION_RIGHT:a.pageY-b.pageY>0?d.DIRECTION_UP:d.DIRECTION_DOWN},getDistance:function(a,b){var c=b.pageX-a.pageX,d=b.pageY-a.pageY;return Math.sqrt(c*c+d*d)},getScale:function(a,b){return a.length>=2&&b.length>=2?this.getDistance(b[0],b[1])/this.getDistance(a[0],a[1]):1},getRotation:function(a,b){return a.length>=2&&b.length>=2?this.getAngle(b[1],b[0])-this.getAngle(a[1],a[0]):0},isVertical:function(a){return a==d.DIRECTION_UP||a==d.DIRECTION_DOWN},stopDefaultBrowserBehavior:function(a,b){var c,d=["webkit","khtml","moz","ms","o",""];if(b&&a.style){for(var e=0;e<d.length;e++)for(var f in b)b.hasOwnProperty(f)&&(c=f,d[e]&&(c=d[e]+c.substring(0,1).toUpperCase()+c.substring(1)),a.style[c]=b[f]);"none"==b.userSelect&&(a.onselectstart=function(){return!1})}}},d.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(a,b){this.current||(this.stopped=!1,this.current={inst:a,startEvent:d.utils.extend({},b),lastEvent:!1,name:""},this.detect(b))},detect:function(a){if(this.current&&!this.stopped){a=this.extendEventData(a);for(var b=this.current.inst.options,c=0,e=this.gestures.length;e>c;c++){var f=this.gestures[c];if(!this.stopped&&b[f.name]!==!1&&f.handler.call(f,a,this.current.inst)===!1){this.stopDetect();break}}return this.current&&(this.current.lastEvent=a),a.eventType==d.EVENT_END&&!a.touches.length-1&&this.stopDetect(),a}},stopDetect:function(){this.previous=d.utils.extend({},this.current),this.current=null,this.stopped=!0},extendEventData:function(a){var b=this.current.startEvent;if(b&&(a.touches.length!=b.touches.length||a.touches===b.touches)){b.touches=[];for(var c=0,e=a.touches.length;e>c;c++)b.touches.push(d.utils.extend({},a.touches[c]))}var f=a.timeStamp-b.timeStamp,g=a.center.pageX-b.center.pageX,h=a.center.pageY-b.center.pageY,i=d.utils.getVelocity(f,g,h);return d.utils.extend(a,{deltaTime:f,deltaX:g,deltaY:h,velocityX:i.x,velocityY:i.y,distance:d.utils.getDistance(b.center,a.center),angle:d.utils.getAngle(b.center,a.center),direction:d.utils.getDirection(b.center,a.center),scale:d.utils.getScale(b.touches,a.touches),rotation:d.utils.getRotation(b.touches,a.touches),startEvent:b}),a},register:function(a){var c=a.defaults||{};return c[a.name]===b&&(c[a.name]=!0),d.utils.extend(d.defaults,c,!0),a.index=a.index||1e3,this.gestures.push(a),this.gestures.sort(function(a,b){return a.index<b.index?-1:a.index>b.index?1:0}),this.gestures}},d.gestures=d.gestures||{},d.gestures.Hold={name:"hold",index:10,defaults:{hold_timeout:500,hold_threshold:1},timer:null,handler:function(a,b){switch(a.eventType){case d.EVENT_START:clearTimeout(this.timer),d.detection.current.name=this.name,this.timer=setTimeout(function(){"hold"==d.detection.current.name&&b.trigger("hold",a)},b.options.hold_timeout);break;case d.EVENT_MOVE:a.distance>b.options.hold_threshold&&clearTimeout(this.timer);break;case d.EVENT_END:clearTimeout(this.timer)}}},d.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,tap_always:!0,doubletap_distance:20,doubletap_interval:300},handler:function(a,b){if(a.eventType==d.EVENT_END){var c=d.detection.previous,e=!1;if(a.deltaTime>b.options.tap_max_touchtime||a.distance>b.options.tap_max_distance)return;c&&"tap"==c.name&&a.timeStamp-c.lastEvent.timeStamp<b.options.doubletap_interval&&a.distance<b.options.doubletap_distance&&(b.trigger("doubletap",a),e=!0),(!e||b.options.tap_always)&&(d.detection.current.name="tap",b.trigger(d.detection.current.name,a))}}},d.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_max_touches:1,swipe_velocity:.7},handler:function(a,b){if(a.eventType==d.EVENT_END){if(b.options.swipe_max_touches>0&&a.touches.length>b.options.swipe_max_touches)return;(a.velocityX>b.options.swipe_velocity||a.velocityY>b.options.swipe_velocity)&&(b.trigger(this.name,a),b.trigger(this.name+a.direction,a))}}},d.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,drag_max_touches:1,drag_block_horizontal:!1,drag_block_vertical:!1,drag_lock_to_axis:!1,drag_lock_min_distance:25},triggered:!1,handler:function(a,b){if(d.detection.current.name!=this.name&&this.triggered)return b.trigger(this.name+"end",a),void(this.triggered=!1);if(!(b.options.drag_max_touches>0&&a.touches.length>b.options.drag_max_touches))switch(a.eventType){case d.EVENT_START:this.triggered=!1;break;case d.EVENT_MOVE:if(a.distance<b.options.drag_min_distance&&d.detection.current.name!=this.name)return;d.detection.current.name=this.name,(d.detection.current.lastEvent.drag_locked_to_axis||b.options.drag_lock_to_axis&&b.options.drag_lock_min_distance<=a.distance)&&(a.drag_locked_to_axis=!0);var c=d.detection.current.lastEvent.direction;a.drag_locked_to_axis&&c!==a.direction&&(a.direction=d.utils.isVertical(c)?a.deltaY<0?d.DIRECTION_UP:d.DIRECTION_DOWN:a.deltaX<0?d.DIRECTION_LEFT:d.DIRECTION_RIGHT),this.triggered||(b.trigger(this.name+"start",a),this.triggered=!0),b.trigger(this.name,a),b.trigger(this.name+a.direction,a),(b.options.drag_block_vertical&&d.utils.isVertical(a.direction)||b.options.drag_block_horizontal&&!d.utils.isVertical(a.direction))&&a.preventDefault();break;case d.EVENT_END:this.triggered&&b.trigger(this.name+"end",a),this.triggered=!1}}},d.gestures.Transform={name:"transform",index:45,defaults:{transform_min_scale:.01,transform_min_rotation:1,transform_always_block:!1},triggered:!1,handler:function(a,b){if(d.detection.current.name!=this.name&&this.triggered)return b.trigger(this.name+"end",a),void(this.triggered=!1);if(!(a.touches.length<2))switch(b.options.transform_always_block&&a.preventDefault(),a.eventType){case d.EVENT_START:this.triggered=!1;break;case d.EVENT_MOVE:var c=Math.abs(1-a.scale),e=Math.abs(a.rotation);if(c<b.options.transform_min_scale&&e<b.options.transform_min_rotation)return;d.detection.current.name=this.name,this.triggered||(b.trigger(this.name+"start",a),this.triggered=!0),b.trigger(this.name,a),e>b.options.transform_min_rotation&&b.trigger("rotate",a),c>b.options.transform_min_scale&&(b.trigger("pinch",a),b.trigger("pinch"+(a.scale<1?"in":"out"),a));break;case d.EVENT_END:this.triggered&&b.trigger(this.name+"end",a),this.triggered=!1}}},d.gestures.Touch={name:"touch",index:-1/0,defaults:{prevent_default:!1,prevent_mouseevents:!1},handler:function(a,b){return b.options.prevent_mouseevents&&a.pointerType==d.POINTER_MOUSE?void a.stopDetect():(b.options.prevent_default&&a.preventDefault(),void(a.eventType==d.EVENT_START&&b.trigger(this.name,a)))}},d.gestures.Release={name:"release",index:1/0,handler:function(a,b){a.eventType==d.EVENT_END&&b.trigger(this.name,a)}},"object"==typeof module&&"object"==typeof module.exports?module.exports=d:(a.Hammer=d,"function"==typeof a.define&&a.define.amd&&a.define("hammer",[],function(){return d}))}(this),AVLTree.prototype.add=function(a){if(this._root){var b=this._root.add(a);return this._root=b[0],b[1]&&b[0]||console.log("failed to add data"),b[1]}return this._root=new AVLNode(a,this._comparator),this._root},AVLTree.prototype.remove=function(a){if(this._root){var b=this._root.remove(a);
return this._root=b[0],b[1]}return null},AVLTree.prototype.find=function(a){var b=this._find(a);return b?b._value:null},AVLTree.prototype.isEmpty=function(){return null===this._root||void 0===this._root},AVLTree.prototype.map=function(a){var b,c=this.getContents();for(b=0;b<c.length;b++)a(c[b])},AVLTree.prototype.getContents=function(){var a=[],b=[];if(!this._root)return[];for(var c=this._root;b.length>0||null!=c;)c?(b.push(c),c=c._left):(c=b.pop(),a.push(c._value),c=c._right);return a},AVLTree.prototype.printAVL=function(){for(var a=this.getContents(),b=0;b<a.length;b++)console.log(a[b].key)},AVLTree.prototype.clone=function(a){var b,c=a||this.getContents(),d=new AVLTree(this._comparator,this._valuation);for(b=0;b<c.length;b++)d.add(c[b]);return d},AVLTree.prototype.clear=function(a){var b=this.getNodesPostorder();a&&b.map(a),b.map(function(a){a._left=null,a._right=null}),this._current=null,this._root=null,this._intermediates=[]},AVLTree.prototype.getNodesPostorder=function(){var a=[];if(!this._root)return[];var b=this._root;return this.postorderHelper(b,a),a},AVLTree.prototype.postorderHelper=function(a,b){a&&(this.postorderHelper(a._left,b),this.postorderHelper(a._right,b),b.push(a))},AVLTree.prototype.nearestNeighbors=function(a,b){for(var c,d,e=this._root;e;){var f=this._valuation(a,e._value);if(0===f)return-1===b?[this.findPrevious(e._value),e._value]:1===b?[e._value,this.findNext(e._value)]:[this.findPrevious(e._value),this.findNext(e._value)];f>0?(c=e._value,e=e._right):(d=e._value,e=e._left)}return[c,d]},AVLTree.prototype.debugNN=function(a){var b=this.nearestNeighbors(a),c=b[0]?b[0].key:"is null",d=b[1]?b[1].key:"is null";console.log(c+", "+d)},AVLTree.prototype.findNext=function(a){var b=this._find(a,!0),c=this._next(b);return c?c._value:null},AVLTree.prototype.findPrevious=function(a){var b=this._find(a,!0),c=this._previous(b);return c?c._value:null},AVLTree.prototype.max=function(){var a=this._max();return a?a._value:null},AVLTree.prototype.min=function(){var a=this._min();return a?a._value:null},AVLTree.prototype.next=function(){return this._current=this._next(this._current),this._current?this._current._value:null},AVLTree.prototype.previous=function(){return this._current=this._previous(this._current),this._current?this._current._value:null},AVLTree.prototype.isSolo=function(){return this._root._left||this._root._right?!1:!0},AVLTree.prototype._find=function(a,b){b=b||!1;var c=this._root;for(b&&(this._intermediates=[]);null!==c;){var d=this._comparator(a,c._value);if(0===d)break;b&&this._intermediates.push(c),c=0>d?c._left:c._right}return c},AVLTree.prototype._min=function(a,b){var c=a||this._root;if(b=b||!1,c)for(;c._left;)b&&this._intermediates.push(a),c=c._left;return c},AVLTree.prototype._max=function(a,b){var c=a||this._root;if(b=b||!1,c)for(;c._right;)b&&this._intermediates.push(a),c=c._right;return c},AVLTree.prototype._next=function(a){if(a)if(a._right)this._intermediates.push(a),a=this._min(a._right,!0);else{for(var b=this._intermediates,c=b.pop();c&&c._right===a;)a=c,c=b.pop();a=c}else this._intermediates=[],a=this._min(this._root,!0);return a},AVLTree.prototype._previous=function(a){if(a)if(a._left)this._intermediates.push(a),a=this._max(a._left,!0);else{for(var b=this._intermediates,c=b.pop();c&&c._left===a;)a=c,c=b.pop();a=c}else this._intermediates=[],a=this._max(this._root,!0);return a},AVLNode.prototype.add=function(a){var b,c,d=this._comparator(a,this._value);return 0!==d?(0>d?this._left?(b=this._left.add(a),this._left=b[0],c=b[1]):(this._left=new AVLNode(a,this._comparator),c=this._left):d>0&&(this._right?(b=this._right.add(a),this._right=b[0],c=b[1]):(this._right=new AVLNode(a,this._comparator),c=this._right)),[this.balanceTree(),c]):[this,this]},AVLNode.prototype.remove=function(a){var b,c,d,e=this._comparator(a,this._value);return e?(0>e?this._left?(b=this._left.remove(a),this._left=b[0],c=b[1]):c=null:this._right?(b=this._right.remove(a),this._right=b[0],c=b[1]):c=null,d=this):(c=this,null==this._left?d=this._right:null==this._right?d=this._left:(d=this._left.merge(this._right),this._left=null,this._right=null)),c?d?[d.balanceTree(),c]:[d,c]:[this,null]},AVLNode.prototype.balanceTree=function(){var a=null!=this._left?this._left._height:0,b=null!=this._right?this._right._height:0;return a>b+1?this.swingRight():b>a+1?this.swingLeft():(this.setHeight(),this)},AVLNode.prototype.merge=function(a){if(null==a)return this;var b;return this._height>a._height?(b=this,b._right=a.merge(b._right)):(b=a,b._left=this.merge(b._left)),b.balanceTree()},AVLNode.prototype.moveLeft=function(){var a=this._right,b=a._left;return this._right=b,a._left=this,this.setHeight(),a.setHeight(),a},AVLNode.prototype.moveRight=function(){var a=this._left,b=a._right;return this._left=b,a._right=this,this.setHeight(),a.setHeight(),a},AVLNode.prototype.setHeight=function(){var a=this._left?this._left._height:0,b=this._right?this._right._height:0;this._height=b>a?b+1:a+1},AVLNode.prototype.swingLeft=function(){var a=this._right,b=a._left,c=a._right,d=this._left,e=(d?d._height:0,b?b._height:0),f=c?c._height:0;return e>f&&(this._right=a.moveRight()),this.moveLeft()},AVLNode.prototype.swingRight=function(){var a=this._left,b=a._right,c=a._left,d=this._right,e=(null!=d?d._height:0,null!=b?b._height:0),f=null!=c?c._height:0;return e>f&&(this._left=a.moveLeft()),this.moveRight()},AVLNode.prototype.traverse=function(a){this._left&&this._left.traverse(a),a(this),this._right&&this._right.traverse(a)},AVLNode.prototype.toString=function(){return this._value.toString()},binaryHeap.prototype={push:function(a){this.content.push(a),this.bubbleUp(this.content.length-1)},pop:function(){var a=this.content[0],b=this.content.pop();return this.content.length>0&&(this.content[0]=b,this.sinkDown(0)),a},peek:function(){return this.content[0]},remove:function(a){for(var b=this.content.length,c=0;b>c;c++)if(this.content[c]===a){var d=this.content.pop();if(c==b-1)break;this.content[c]=d,this.bubbleUp(c),this.sinkDown(c);break}},size:function(){return this.content.length},findValue:function(a,b){for(var c,d=this.content.length,e=0;d>e;e++)if(b(this.content[e])===a){var f=this.content.pop();if(e==d-1){c=f;break}this.content[e]=f,this.bubbleUp(e),this.sinkDown(e);break}return c},bubbleUp:function(a){for(var b=this.content[a],c=this.scoreFunction(b);a>0;){var d=Math.floor((a+1)/2)-1,e=this.content[d];if(c>=this.scoreFunction(e))break;this.content[d]=b,this.content[a]=e,a=d}},sinkDown:function(a){for(var b=this.content.length,c=this.content[a],d=this.scoreFunction(c);;){var e=2*(a+1),f=e-1,g=null;if(b>f){var h=this.content[f],i=this.scoreFunction(h);d>i&&(g=f)}if(b>e){var j=this.content[e],k=this.scoreFunction(j);(null==g?d:i)>k&&(g=e)}if(null==g)break;this.content[a]=this.content[g],this.content[g]=c,a=g}},find:function(a){for(var b,c=this.content.length,d=0;c>d;d++)if(this.content[d]===a){var e=this.content.pop();if(d==c-1){b=e;break}this.content[d]=e,this.bubbleUp(d),this.sinkDown(d);break}return b}},DataHolder.prototype.reInitHeaps=function(){this._leftExternal=new binaryHeap(this._scoreFunctionMin),this._leftInternal=new binaryHeap(this._scoreFunctionMin),this._rightExternal=new binaryHeap(this._scoreFunctionMin),this._rightInternal=new binaryHeap(this._scoreFunctionMin)},DataHolder.prototype.insertTrack=function(a,b){var c={track:a,displays:new AVLTree(this._dispComparator,this._dispValuation)};return a.setStorageContainer(c),"undefined"==typeof b||null===b?this._trackArray.push(c):this._trackArray.splice(b,0,c),this.mapTracks(function(a,b){a.track.updatePos(b)}),c},DataHolder.prototype.removeTrack=function(a){var b=this._trackArray[a.getPos()];return this._trackArray.splice(a.getPos(),1),this.mapTracks(function(a,b){a.track.updatePos(b)}),b},DataHolder.prototype.selectTrack=function(a){this._selectedTrack=a},DataHolder.prototype.getSelectedTrack=function(){return this._selectedTrack},DataHolder.prototype.indexOfTrack=function(a){var b;for(b=0;b<this._trackArray.length;b++){var c=this._trackArray[b];if(c.track=a)return b}return!1},DataHolder.prototype.mapTracks=function(a){this._trackArray.map(a)},DataHolder.prototype.getType=function(a){return a.getType()},DataHolder.prototype.getInkEnabled=function(a){return a.getInkEnabled()},DataHolder.prototype.getInkLink=function(a){return a.getInkLink()},DataHolder.prototype.getTracks=function(){return this._trackArray},DataHolder.prototype.numTracks=function(){return this._trackArray.length},DataHolder.prototype.findTrackByTitle=function(a){var b;for(b=0;b<this._trackArray.length;b++)if(this._trackArray[b].track.getTitle()===a)return this._trackArray[b].track;return null},DataHolder.prototype.addDisplay=function(a,b){var c=this._trackArray[a],d=new AVLTree(this._kfComparator,this._kfValuation),e={display:b,keyframes:d,displayTree:c.displays,hostTrack:c.track};return c.displays.add(e),b.setStorageContainer(e),b.setKeyframeTree(d),this.mapDisplays(c,function(a,b){a.display.setID(b)}),e},DataHolder.prototype.mapDisplays=function(a,b){a.displays.map(b)},DataHolder.prototype.removeDisplay=function(a,b){var c=this._trackArray[a],d=b.getStorageContainer();return c.displays.remove(d)},DataHolder.prototype.findDisplay=function(a,b){var c=this._trackArray[a],d=b.getStorageContainer();return c.displays.find(d)},DataHolder.prototype.findPreviousDisplay=function(a,b){var c=this._trackArray[a],d=b.getStorageContainer();return c.displays.findPrevious(d)},DataHolder.prototype.findNextDisplay=function(a,b){var c=this._trackArray[a],d=b.getStorageContainer();return c.displays.findNext(d)},DataHolder.prototype.minDisplay=function(a){var b=this._trackArray[a];return b.displays.min()},DataHolder.prototype.maxDisplay=function(a){var b=this._trackArray[a];return b.displays.max()},DataHolder.prototype.replaceKeyframes=function(a,b){a.getStorageContainer().keyframes=b},DataHolder.prototype.getDisplays=function(a){return this._trackArray[a]&&this._trackArray[a].displays},DataHolder.prototype.addKeyframe=function(a,b){var c=a.getStorageContainer();return c.keyframes.add(b),newKeyframe},DataHolder.prototype.removeKeyframe=function(a,b){var c=a.getStorageContainer();return c.keyframes.remove(b)},DataHolder.prototype.findKeyframe=function(a,b){var c=a.getStorageContainer();return c.keyframes.find(b)},DataHolder.prototype.findPrevKeyframe=function(a,b){var c=a.getStorageContainer();return c.keyframes.findPrevious(b)},DataHolder.prototype.findNextKeyframe=function(a,b){var c=a.getStorageContainer();return c.keyframes.findNext(b)},DataHolder.prototype.firstKeyframe=function(a){var b=a.getStorageContainer();return b.keyframes.min()},DataHolder.prototype.lastKeyframe=function(a){var b=a.getStorageContainer();return b.keyframes.max()},DataHolder.prototype.mapKeyframes=function(a,b){a.keyframes.map(b)},DataHolder.prototype.getKeyframes=function(a){return a.keyframes},TwoStageTimer.prototype.start=function(){this._s1TimeoutID=setTimeout(this._fireS1,this._s1d),this._started=!0},TwoStageTimer.prototype.kill=function(){this._started&&(clearTimeout(this._s1TimeoutID),clearTimeout(this._s2TimeoutID),this._started=!1)},TwoStageTimer.prototype.isStopped=function(){return this._started},TwoStageTimer.prototype.restartS1=function(){this._started&&(clearTimeout(this._s1TimeoutID),this._s1TimeoutID=setTimeout(this._fireS1,this._s1d))},TwoStageTimer.prototype.restartS2=function(){this._started&&(clearTimeout(this._s2TimeoutID),this._s1TimeoutID=setTimeout(this._fireS1,this._s1d))},TwoStageTimer.prototype.reinitialize=function(a,b){clearTimeout(this._s1TimeoutID),clearTimeout(this._s2TimeoutID),this._s1d=a.duration,this._s1p=a.payload,this._s2d=b.duration,this._s2p=b.payload,this._s1TimeoutID=null,this._s2TimeoutID=null,this._started=!1},TwoStageTimer.prototype._fireS1=function(){this._s1p(),this._s2TimeoutID=setTimeout(this._fireS2,this._s2d)},TwoStageTimer.prototype._fireS2=function(){this._s2p(),this._started=!1},DoublyLinkedList.prototype._createNewNode=function(a){var b={data:a,next:null,prev:null};return b},DoublyLinkedList.prototype.append=function(a){var b=this._createNewNode(a);return 0===this._length?(this._head=b,this._tail=b):(this._tail.next=b,b.prev=this._tail,this._tail=b),this._length++,b},DoublyLinkedList.prototype.prepend=function(a){var b=this._createNewNode(a);return null===this.first?void this.append(b):(this._head.prev=b,b.next=this._head,this._head=b,this._length++,b)},DoublyLinkedList.prototype.item=function(a){if(a>=0&&a<this._length){for(var b=this._head;a--;)b=b.next;return b}},DoublyLinkedList.prototype.search=function(a){for(var b=this._head;null!=b;){if(b.data===a)return b;b=b.next}return null},DoublyLinkedList.prototype.findNext=function(a){for(var b=this._head;null!=b;){if(b.data>=a)return b;b=b.next}return null},DoublyLinkedList.prototype.findPrev=function(a){for(var b=this._head;null!=b;){if(b.data>=a)return null===b.prev?null:b.prev;b=b.next}return null},DoublyLinkedList.prototype.head=function(){return this._head},DoublyLinkedList.prototype.tail=function(){return this._tail},DoublyLinkedList.prototype.size=function(){return this._length},DoublyLinkedList.prototype.printList=function(){var a=this._head;if(null===a)console.log("Empty List\n");else{console.log("Printing List...");for(var b=0;b<this._length;b++)console.log(a.data+" "),a=a.next;console.log("\n")}},DoublyLinkedList.prototype.remove=function(a){if(!(0>a||a>=this._length||0===this._length)){var b=this.item(a),c=b.next,d=b.prev;return null!=c&&null!=d?(d.next=c,c.prev=d):null===c&&null!=d?(d.next=null,this._tail=d):null===d&&null!=c?(c.prev=null,this._head=c):(this._head=null,this._tail=null),this._length--,b}console.log("index is out of bounds")},HashTable.prototype.insert=function(a,b){var c=void 0;return this._hasItem(a)?c=this._items[a]:this._length++,this._items[a]=b,c},HashTable.prototype.getLength=function(){return this._length},HashTable.prototype.lookup=function(a){return this._hasItem(a)?this._items[a]:void 0},HashTable.prototype._hasItem=function(a){return this._items.hasOwnProperty(a)},HashTable.prototype.removeItem=function(a){return this._hasItem(a)?(previous=this._items[a],this._length--,delete this._items[a],previous):void 0},HashTable.prototype.keys=function(){var a=[];for(var b in this._items)this._hasItem(b)&&a.push(b);return a},HashTable.prototype.values=function(){var a=[];for(var b in this._items)this._hasItem(b)&&a.push(this._items[b]);return a},HashTable.prototype.each=function(a){for(var b in this._items)this._hasItem(b)&&a(b,this._items[b])},HashTable.prototype.clear=function(){this._items={},this._length=0},function(){function a(a,b){try{for(var c in b)Object.defineProperty(a.prototype,c,{value:b[c],enumerable:!1})}catch(d){a.prototype=b}}function b(a){for(var b=-1,c=a.length,d=[];++b<c;)d.push(a[b]);return d}function c(a){return Array.prototype.slice.call(a)}function d(){}function e(a){return a}function f(){return this}function g(){return!0}function h(a){return"function"==typeof a?a:function(){return a}}function i(a,b,c){return function(){var d=c.apply(b,arguments);return arguments.length?a:d}}function j(a){return null!=a&&!isNaN(a)}function k(a){return a.length}function l(a){return null==a}function m(a){return a.replace(/^\s+|\s+$/g,"").replace(/\s+/g," ")}function n(a){for(var b=1;a*b%1;)b*=10;return b}function o(){}function p(a){function b(){for(var b,d=c,e=-1,f=d.length;++e<f;)(b=d[e].on)&&b.apply(this,arguments);return a}var c=[],e=new d;return b.on=function(b,d){var f,g=e.get(b);return arguments.length<2?g&&g.on:(g&&(g.on=null,c=c.slice(0,f=c.indexOf(g)).concat(c.slice(f+1)),e.remove(b)),d&&c.push(e.set(b,{on:d})),a)},b}function q(a,b){return b-(a?1+Math.floor(Math.log(a+Math.pow(10,1+Math.floor(Math.log(a)/Math.LN10)-b))/Math.LN10):1)}function r(a){return a+""}function s(a){for(var b=a.lastIndexOf("."),c=b>=0?a.substring(b):(b=a.length,""),d=[];b>0;)d.push(a.substring(b-=3,b+3));return d.reverse().join(",")+c}function t(a,b){var c=Math.pow(10,3*Math.abs(8-b));return{scale:b>8?function(a){return a/c}:function(a){return a*c},symbol:a}}function u(a){return function(b){return 0>=b?0:b>=1?1:a(b)}}function v(a){return function(b){return 1-a(1-b)}}function w(a){return function(b){return.5*(.5>b?a(2*b):2-a(2-2*b))}}function x(a){return a}function y(a){return function(b){return Math.pow(b,a)}}function z(a){return 1-Math.cos(a*Math.PI/2)}function A(a){return Math.pow(2,10*(a-1))}function B(a){return 1-Math.sqrt(1-a*a)}function C(a,b){var c;return arguments.length<2&&(b=.45),arguments.length<1?(a=1,c=b/4):c=b/(2*Math.PI)*Math.asin(1/a),function(d){return 1+a*Math.pow(2,10*-d)*Math.sin(2*(d-c)*Math.PI/b)}}function D(a){return a||(a=1.70158),function(b){return b*b*((a+1)*b-a)}}function E(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}function F(){d3.event.stopPropagation(),d3.event.preventDefault()}function G(){for(var a,b=d3.event;a=b.sourceEvent;)b=a;return b}function H(a){for(var b=new o,c=0,d=arguments.length;++c<d;)b[arguments[c]]=p(b);return b.of=function(c,d){return function(e){try{var f=e.sourceEvent=d3.event;e.target=a,d3.event=e,b[e.type].apply(c,d)}finally{d3.event=f}}},b}function I(a){return"transform"==a?d3.interpolateTransform:d3.interpolate}function J(a,b){return b=b-(a=+a)?1/(b-a):0,function(c){return(c-a)*b}}function K(a,b){return b=b-(a=+a)?1/(b-a):0,function(c){return Math.max(0,Math.min(1,(c-a)*b))}}function L(a,b,c){return new M(a,b,c)}function M(a,b,c){this.r=a,this.g=b,this.b=c}function N(a){return 16>a?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function O(a,b,c){var d,e,f,g=0,h=0,i=0;if(d=/([a-z]+)\((.*)\)/i.exec(a))switch(e=d[2].split(","),d[1]){case"hsl":return c(parseFloat(e[0]),parseFloat(e[1])/100,parseFloat(e[2])/100);case"rgb":return b(Q(e[0]),Q(e[1]),Q(e[2]))}return(f=Ne.get(a))?b(f.r,f.g,f.b):(null!=a&&"#"===a.charAt(0)&&(4===a.length?(g=a.charAt(1),g+=g,h=a.charAt(2),h+=h,i=a.charAt(3),i+=i):7===a.length&&(g=a.substring(1,3),h=a.substring(3,5),i=a.substring(5,7)),g=parseInt(g,16),h=parseInt(h,16),i=parseInt(i,16)),b(g,h,i))}function P(a,b,c){var d,e,f=Math.min(a/=255,b/=255,c/=255),g=Math.max(a,b,c),h=g-f,i=(g+f)/2;return h?(e=.5>i?h/(g+f):h/(2-g-f),d=a==g?(b-c)/h+(c>b?6:0):b==g?(c-a)/h+2:(a-b)/h+4,d*=60):e=d=0,R(d,e,i)}function Q(a){var b=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*b):b}function R(a,b,c){return new S(a,b,c)}function S(a,b,c){this.h=a,this.s=b,this.l=c}function T(a,b,c){function d(a){return a>360?a-=360:0>a&&(a+=360),60>a?f+(g-f)*a/60:180>a?g:240>a?f+(g-f)*(240-a)/60:f}function e(a){return Math.round(255*d(a))}var f,g;return a%=360,0>a&&(a+=360),b=0>b?0:b>1?1:b,c=0>c?0:c>1?1:c,g=.5>=c?c*(1+b):c+b-c*b,f=2*c-g,L(e(a+120),e(a),e(a-120))}function U(a){return ye(a,Te),a}function V(a){return function(){return Oe(a,this)}}function W(a){return function(){return Pe(a,this)}}function X(a,b){function c(){if(b=this.classList)return b.add(a);var b=this.className,c=null!=b.baseVal,d=c?b.baseVal:b;f.lastIndex=0,f.test(d)||(d=m(d+" "+a),c?b.baseVal=d:this.className=d)}function d(){if(b=this.classList)return b.remove(a);var b=this.className,c=null!=b.baseVal,d=c?b.baseVal:b;d=m(d.replace(f," ")),c?b.baseVal=d:this.className=d}function e(){(b.apply(this,arguments)?c:d).call(this)}var f=new RegExp("(^|\\s+)"+d3.requote(a)+"(\\s+|$)","g");if(arguments.length<2){var g=this.node();if(h=g.classList)return h.contains(a);var h=g.className;return f.lastIndex=0,f.test(null!=h.baseVal?h.baseVal:h)}return this.each("function"==typeof b?e:b?c:d)}function Y(a){return{__data__:a}}function Z(a){return function(){return Se(this,a)}}function $(a){return arguments.length||(a=d3.ascending),function(b,c){return a(b&&b.__data__,c&&c.__data__)}}function _(a,b){for(var c=0,d=a.length;d>c;c++)for(var e,f=a[c],g=0,h=f.length;h>g;g++)(e=f[g])&&b(e,g,c);return a}function ab(a){return ye(a,Ve),a}function bb(a,b,c){ye(a,Xe);var e=new d,f=d3.dispatch("start","end"),g=df;return a.id=b,a.time=c,a.tween=function(b,c){return arguments.length<2?e.get(b):(null==c?e.remove(b):e.set(b,c),a)},a.ease=function(b){return arguments.length?(g="function"==typeof b?b:d3.ease.apply(d3,arguments),a):g},a.each=function(b,c){return arguments.length<2?eb.call(a,b):(f.on(b,c),a)},d3.timer(function(d){return _(a,function(a,h){function i(d){return o.active>b?k():(o.active=b,e.forEach(function(b,c){(c=c.call(a,p,h))&&l.push(c)}),f.start.call(a,p,h),j(d)||d3.timer(j,0,c),1)}function j(c){if(o.active!==b)return k();for(var d=(c-m)/n,e=g(d),i=l.length;i>0;)l[--i].call(a,e);return d>=1?(k(),Ze=b,f.end.call(a,p,h),Ze=0,1):void 0}function k(){return--o.count||delete a.__transition__,1}var l=[],m=a.delay,n=a.duration,o=(a=a.node).__transition__||(a.__transition__={active:0,count:0}),p=a.__data__;++o.count,d>=m?i(d):d3.timer(i,m,c)})},0,c),a}function cb(a,b,c){return""!=c&&We}function db(a,b){function c(a,c,d){var f=b.call(this,a,c);return null==f?""!=d&&We:d!=f&&e(d,f)}function d(a,c,d){return d!=b&&e(d,b)}var e=I(a);return"function"==typeof b?c:null==b?cb:(b+="",d)}function eb(a){var b=Ze,c=df,d=bf,e=cf;return Ze=this.id,df=this.ease(),_(this,function(b,c,d){bf=b.delay,cf=b.duration,a.call(b=b.node,b.__data__,c,d)}),Ze=b,df=c,bf=d,cf=e,this}function fb(){for(var a,b=Date.now(),c=gf;c;)a=b-c.then,a>=c.delay&&(c.flush=c.callback(a)),c=c.next;var d=gb()-b;d>24?(isFinite(d)&&(clearTimeout(ff),ff=setTimeout(fb,d)),ef=0):(ef=1,hf(fb))}function gb(){for(var a=null,b=gf,c=1/0;b;)b.flush?b=a?a.next=b.next:gf=b.next:(c=Math.min(c,b.then+b.delay),b=(a=b).next);return c}function hb(a){var b=[a.a,a.b],c=[a.c,a.d],d=jb(b),e=ib(b,c),f=jb(kb(c,b,-e))||0;b[0]*c[1]<c[0]*b[1]&&(b[0]*=-1,b[1]*=-1,d*=-1,e*=-1),this.rotate=(d?Math.atan2(b[1],b[0]):Math.atan2(-c[0],c[1]))*jf,this.translate=[a.e,a.f],this.scale=[d,f],this.skew=f?Math.atan2(e,f)*jf:0}function ib(a,b){return a[0]*b[0]+a[1]*b[1]}function jb(a){var b=Math.sqrt(ib(a,a));return b&&(a[0]/=b,a[1]/=b),b}function kb(a,b,c){return a[0]+=c*b[0],a[1]+=c*b[1],a}function lb(a,b){var c=a.ownerSVGElement||a;if(c.createSVGPoint){var d=c.createSVGPoint();if(0>kf&&(window.scrollX||window.scrollY)){c=d3.select(document.body).append("svg").style("position","absolute").style("top",0).style("left",0);var e=c[0][0].getScreenCTM();kf=!(e.f||e.e),c.remove()}return kf?(d.x=b.pageX,d.y=b.pageY):(d.x=b.clientX,d.y=b.clientY),d=d.matrixTransform(a.getScreenCTM().inverse()),[d.x,d.y]}var f=a.getBoundingClientRect();return[b.clientX-f.left-a.clientLeft,b.clientY-f.top-a.clientTop]}function mb(a){var b=a[0],c=a[a.length-1];return c>b?[b,c]:[c,b]}function nb(a){return a.rangeExtent?a.rangeExtent():mb(a.range())}function ob(a,b){var c,d=0,e=a.length-1,f=a[d],g=a[e];return f>g&&(c=d,d=e,e=c,c=f,f=g,g=c),(c=g-f)&&(b=b(c),a[d]=b.floor(f),a[e]=b.ceil(g)),a}function pb(){return Math}function qb(a,b,c,d){function e(){var e=Math.min(a.length,b.length)>2?xb:wb,i=d?K:J;return g=e(a,b,i,c),h=e(b,a,i,d3.interpolate),f}function f(a){return g(a)}var g,h;return f.invert=function(a){return h(a)},f.domain=function(b){return arguments.length?(a=b.map(Number),e()):a},f.range=function(a){return arguments.length?(b=a,e()):b},f.rangeRound=function(a){return f.range(a).interpolate(d3.interpolateRound)},f.clamp=function(a){return arguments.length?(d=a,e()):d},f.interpolate=function(a){return arguments.length?(c=a,e()):c},f.ticks=function(b){return ub(a,b)},f.tickFormat=function(b){return vb(a,b)},f.nice=function(){return ob(a,sb),e()},f.copy=function(){return qb(a,b,c,d)},e()}function rb(a,b){return d3.rebind(a,b,"range","rangeRound","interpolate","clamp")}function sb(a){return a=Math.pow(10,Math.round(Math.log(a)/Math.LN10)-1),{floor:function(b){return Math.floor(b/a)*a},ceil:function(b){return Math.ceil(b/a)*a}}}function tb(a,b){var c=mb(a),d=c[1]-c[0],e=Math.pow(10,Math.floor(Math.log(d/b)/Math.LN10)),f=b/d*e;return.15>=f?e*=10:.35>=f?e*=5:.75>=f&&(e*=2),c[0]=Math.ceil(c[0]/e)*e,c[1]=Math.floor(c[1]/e)*e+.5*e,c[2]=e,c}function ub(a,b){return d3.range.apply(d3,tb(a,b))}function vb(a,b){return d3.format(",."+Math.max(0,-Math.floor(Math.log(tb(a,b)[2])/Math.LN10+.01))+"f")}function wb(a,b,c,d){var e=c(a[0],a[1]),f=d(b[0],b[1]);return function(a){return f(e(a))}}function xb(a,b,c,d){var e=[],f=[],g=0,h=Math.min(a.length,b.length)-1;for(a[h]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());++g<=h;)e.push(c(a[g-1],a[g])),f.push(d(b[g-1],b[g]));return function(b){var c=d3.bisect(a,b,1,h)-1;return f[c](e[c](b))}}function yb(a,b){function c(c){return a(b(c))}var d=b.pow;return c.invert=function(b){return d(a.invert(b))},c.domain=function(e){return arguments.length?(b=e[0]<0?Ab:zb,d=b.pow,a.domain(e.map(b)),c):a.domain().map(d)},c.nice=function(){return a.domain(ob(a.domain(),pb)),c},c.ticks=function(){var c=mb(a.domain()),e=[];if(c.every(isFinite)){var f=Math.floor(c[0]),g=Math.ceil(c[1]),h=d(c[0]),i=d(c[1]);if(b===Ab)for(e.push(d(f));f++<g;)for(var j=9;j>0;j--)e.push(d(f)*j);else{for(;g>f;f++)for(var j=1;10>j;j++)e.push(d(f)*j);e.push(d(f))}for(f=0;e[f]<h;f++);for(g=e.length;e[g-1]>i;g--);e=e.slice(f,g)}return e},c.tickFormat=function(a,e){if(arguments.length<2&&(e=lf),arguments.length<1)return e;var f,g=Math.max(.1,a/c.ticks().length),h=b===Ab?(f=-1e-12,Math.floor):(f=1e-12,Math.ceil);return function(a){return a/d(h(b(a)+f))<=g?e(a):""}},c.copy=function(){return yb(a.copy(),b)},rb(c,a)}function zb(a){return Math.log(0>a?0:a)/Math.LN10}function Ab(a){return-Math.log(a>0?0:-a)/Math.LN10}function Bb(a,b){function c(b){return a(d(b))}var d=Cb(b),e=Cb(1/b);return c.invert=function(b){return e(a.invert(b))},c.domain=function(b){return arguments.length?(a.domain(b.map(d)),c):a.domain().map(e)},c.ticks=function(a){return ub(c.domain(),a)},c.tickFormat=function(a){return vb(c.domain(),a)},c.nice=function(){return c.domain(ob(c.domain(),sb))},c.exponent=function(a){if(!arguments.length)return b;var f=c.domain();return d=Cb(b=a),e=Cb(1/b),c.domain(f)},c.copy=function(){return Bb(a.copy(),b)},rb(c,a)}function Cb(a){return function(b){return 0>b?-Math.pow(-b,a):Math.pow(b,a)}}function Db(a,b){function c(b){return g[((f.get(b)||f.set(b,a.push(b)))-1)%g.length]}function e(b,c){return d3.range(a.length).map(function(a){return b+c*a})}var f,g,h;return c.domain=function(e){if(!arguments.length)return a;a=[],f=new d;for(var g,h=-1,i=e.length;++h<i;)f.has(g=e[h])||f.set(g,a.push(g));return c[b.t](b.x,b.p)},c.range=function(a){return arguments.length?(g=a,h=0,b={t:"range",x:a},c):g},c.rangePoints=function(d,f){arguments.length<2&&(f=0);var i=d[0],j=d[1],k=(j-i)/(a.length-1+f);return g=e(a.length<2?(i+j)/2:i+k*f/2,k),h=0,b={t:"rangePoints",x:d,p:f},c},c.rangeBands=function(d,f){arguments.length<2&&(f=0);var i=d[1]<d[0],j=d[i-0],k=d[1-i],l=(k-j)/(a.length+f);return g=e(j+l*f,l),i&&g.reverse(),h=l*(1-f),b={t:"rangeBands",x:d,p:f},c},c.rangeRoundBands=function(d,f){arguments.length<2&&(f=0);var i=d[1]<d[0],j=d[i-0],k=d[1-i],l=Math.floor((k-j)/(a.length+f)),m=k-j-(a.length-f)*l;return g=e(j+Math.round(m/2),l),i&&g.reverse(),h=Math.round(l*(1-f)),b={t:"rangeRoundBands",x:d,p:f},c},c.rangeBand=function(){return h},c.rangeExtent=function(){return mb(b.x)},c.copy=function(){return Db(a,b)},c.domain(a)}function Eb(a,b){function c(){var c=0,f=(a.length,b.length);for(e=[];++c<f;)e[c-1]=d3.quantile(a,c/f);return d}function d(a){return isNaN(a=+a)?0/0:b[d3.bisect(e,a)]}var e;return d.domain=function(b){return arguments.length?(a=b.filter(function(a){return!isNaN(a)}).sort(d3.ascending),c()):a},d.range=function(a){return arguments.length?(b=a,c()):b},d.quantiles=function(){return e},d.copy=function(){return Eb(a,b)},c()}function Fb(a,b,c){function d(b){return c[Math.max(0,Math.min(g,Math.floor(f*(b-a))))]}function e(){return f=c.length/(b-a),g=c.length-1,d}var f,g;return d.domain=function(c){return arguments.length?(a=+c[0],b=+c[c.length-1],e()):[a,b]},d.range=function(a){return arguments.length?(c=a,e()):c},d.copy=function(){return Fb(a,b,c)},e()}function Gb(a){function b(a){return+a}return b.invert=b,b.domain=b.range=function(c){return arguments.length?(a=c.map(b),b):a},b.ticks=function(b){return ub(a,b)},b.tickFormat=function(b){return vb(a,b)},b.copy=function(){return Gb(a)},b}function Hb(a){return a.innerRadius}function Ib(a){return a.outerRadius}function Jb(a){return a.startAngle}function Kb(a){return a.endAngle}function Lb(a){function b(b){function f(){k.push("M",i(a(l),j))}for(var g,k=[],l=[],m=-1,n=b.length,o=h(c),p=h(d);++m<n;)e.call(this,g=b[m],m)?l.push([+o.call(this,g,m),+p.call(this,g,m)]):l.length&&(f(),l=[]);return l.length&&f(),k.length?k.join(""):null}var c=Mb,d=Nb,e=g,f=sf,i=Ob,j=.7;return b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?(d=a,b):d},b.defined=function(a){return arguments.length?(e=a,b):e},b.interpolate=function(a){return arguments.length?(tf.has(a+="")||(a=sf),i=tf.get(f=a),b):f},b.tension=function(a){return arguments.length?(j=a,b):j},b}function Mb(a){return a[0]}function Nb(a){return a[1]}function Ob(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("L",(d=a[b])[0],",",d[1]);return e.join("")}function Pb(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("V",(d=a[b])[1],"H",d[0]);return e.join("")}function Qb(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d=a[b])[0],"V",d[1]);return e.join("")}function Rb(a,b){return a.length<4?Ob(a):a[1]+Ub(a.slice(1,a.length-1),Vb(a,b))}function Sb(a,b){return a.length<3?Ob(a):a[0]+Ub((a.push(a[0]),a),Vb([a[a.length-2]].concat(a,[a[1]]),b))}function Tb(a,b){return a.length<3?Ob(a):a[0]+Ub(a,Vb(a,b))}function Ub(a,b){if(b.length<1||a.length!=b.length&&a.length!=b.length+2)return Ob(a);var c=a.length!=b.length,d="",e=a[0],f=a[1],g=b[0],h=g,i=1;if(c&&(d+="Q"+(f[0]-2*g[0]/3)+","+(f[1]-2*g[1]/3)+","+f[0]+","+f[1],e=a[1],i=2),b.length>1){h=b[1],f=a[i],i++,d+="C"+(e[0]+g[0])+","+(e[1]+g[1])+","+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1];for(var j=2;j<b.length;j++,i++)f=a[i],h=b[j],d+="S"+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1]}if(c){var k=a[i];d+="Q"+(f[0]+2*h[0]/3)+","+(f[1]+2*h[1]/3)+","+k[0]+","+k[1]}return d}function Vb(a,b){for(var c,d=[],e=(1-b)/2,f=a[0],g=a[1],h=1,i=a.length;++h<i;)c=f,f=g,g=a[h],d.push([e*(g[0]-c[0]),e*(g[1]-c[1])]);return d}function Wb(a){if(a.length<3)return Ob(a);var b=1,c=a.length,d=a[0],e=d[0],f=d[1],g=[e,e,e,(d=a[1])[0]],h=[f,f,f,d[1]],i=[e,",",f];for(_b(i,g,h);++b<c;)d=a[b],g.shift(),g.push(d[0]),h.shift(),h.push(d[1]),_b(i,g,h);for(b=-1;++b<2;)g.shift(),g.push(d[0]),h.shift(),h.push(d[1]),_b(i,g,h);return i.join("")}function Xb(a){if(a.length<4)return Ob(a);for(var b,c=[],d=-1,e=a.length,f=[0],g=[0];++d<3;)b=a[d],f.push(b[0]),g.push(b[1]);for(c.push($b(wf,f)+","+$b(wf,g)),--d;++d<e;)b=a[d],f.shift(),f.push(b[0]),g.shift(),g.push(b[1]),_b(c,f,g);return c.join("")}function Yb(a){for(var b,c,d=-1,e=a.length,f=e+4,g=[],h=[];++d<4;)c=a[d%e],g.push(c[0]),h.push(c[1]);for(b=[$b(wf,g),",",$b(wf,h)],--d;++d<f;)c=a[d%e],g.shift(),g.push(c[0]),h.shift(),h.push(c[1]),_b(b,g,h);return b.join("")}function Zb(a,b){var c=a.length-1;if(c)for(var d,e,f=a[0][0],g=a[0][1],h=a[c][0]-f,i=a[c][1]-g,j=-1;++j<=c;)d=a[j],e=j/c,d[0]=b*d[0]+(1-b)*(f+e*h),d[1]=b*d[1]+(1-b)*(g+e*i);return Wb(a)}function $b(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function _b(a,b,c){a.push("C",$b(uf,b),",",$b(uf,c),",",$b(vf,b),",",$b(vf,c),",",$b(wf,b),",",$b(wf,c))}function ac(a,b){return(b[1]-a[1])/(b[0]-a[0])}function bc(a){for(var b=0,c=a.length-1,d=[],e=a[0],f=a[1],g=d[0]=ac(e,f);++b<c;)d[b]=g+(g=ac(e=f,f=a[b+1]));return d[b]=g,d}function cc(a){for(var b,c,d,e,f=[],g=bc(a),h=-1,i=a.length-1;++h<i;)b=ac(a[h],a[h+1]),Math.abs(b)<1e-6?g[h]=g[h+1]=0:(c=g[h]/b,d=g[h+1]/b,e=c*c+d*d,e>9&&(e=3*b/Math.sqrt(e),g[h]=e*c,g[h+1]=e*d));for(h=-1;++h<=i;)e=(a[Math.min(i,h+1)][0]-a[Math.max(0,h-1)][0])/(6*(1+g[h]*g[h])),f.push([e||0,g[h]*e||0]);return f}function dc(a){return a.length<3?Ob(a):a[0]+Ub(a,cc(a))}function ec(a){for(var b,c,d,e=-1,f=a.length;++e<f;)b=a[e],c=b[0],d=b[1]+qf,b[0]=c*Math.cos(d),b[1]=c*Math.sin(d);
return a}function fc(a){function b(b){function g(){q.push("M",k(a(s),n),m,l(a(r.reverse()),n),"Z")}for(var j,o,p,q=[],r=[],s=[],t=-1,u=b.length,v=h(c),w=h(e),x=c===d?function(){return o}:h(d),y=e===f?function(){return p}:h(f);++t<u;)i.call(this,j=b[t],t)?(r.push([o=+v.call(this,j,t),p=+w.call(this,j,t)]),s.push([+x.call(this,j,t),+y.call(this,j,t)])):r.length&&(g(),r=[],s=[]);return r.length&&g(),q.length?q.join(""):null}var c=Mb,d=Mb,e=0,f=Nb,i=g,j=sf,k=Ob,l=Ob,m="L",n=.7;return b.x=function(a){return arguments.length?(c=d=a,b):d},b.x0=function(a){return arguments.length?(c=a,b):c},b.x1=function(a){return arguments.length?(d=a,b):d},b.y=function(a){return arguments.length?(e=f=a,b):f},b.y0=function(a){return arguments.length?(e=a,b):e},b.y1=function(a){return arguments.length?(f=a,b):f},b.defined=function(a){return arguments.length?(i=a,b):i},b.interpolate=function(a){return arguments.length?(tf.has(a+="")||(a=sf),k=tf.get(j=a),l=k.reverse||k,m=/-closed$/.test(a)?"M":"L",b):j},b.tension=function(a){return arguments.length?(n=a,b):n},b}function gc(a){return a.source}function hc(a){return a.target}function ic(a){return a.radius}function jc(a){return[a.x,a.y]}function kc(a){return function(){var b=a.apply(this,arguments),c=b[0],d=b[1]+qf;return[c*Math.cos(d),c*Math.sin(d)]}}function lc(){return 64}function mc(){return"circle"}function nc(a){var b=Math.sqrt(a/Math.PI);return"M0,"+b+"A"+b+","+b+" 0 1,1 0,"+-b+"A"+b+","+b+" 0 1,1 0,"+b+"Z"}function oc(a,b){a.attr("transform",function(a){return"translate("+b(a)+",0)"})}function pc(a,b){a.attr("transform",function(a){return"translate(0,"+b(a)+")"})}function qc(a,b,c){if(d=[],c&&b.length>1){for(var d,e,f,g=mb(a.domain()),h=-1,i=b.length,j=(b[1]-b[0])/++c;++h<i;)for(e=c;--e>0;)(f=+b[h]-e*j)>=g[0]&&d.push(f);for(--h,e=0;++e<c&&(f=+b[h]+e*j)<g[1];)d.push(f)}return d}function rc(){Cf||(Cf=d3.select("body").append("div").style("visibility","hidden").style("top",0).style("height",0).style("width",0).style("overflow-y","scroll").append("div").style("height","2000px").node().parentNode);var a,b=d3.event;try{Cf.scrollTop=1e3,Cf.dispatchEvent(b),a=1e3-Cf.scrollTop}catch(c){a=b.wheelDelta||5*-b.detail}return a}function sc(a){for(var b=a.source,c=a.target,d=uc(b,c),e=[b];b!==d;)b=b.parent,e.push(b);for(var f=e.length;c!==d;)e.splice(f,0,c),c=c.parent;return e}function tc(a){for(var b=[],c=a.parent;null!=c;)b.push(a),a=c,c=c.parent;return b.push(a),b}function uc(a,b){if(a===b)return a;for(var c=tc(a),d=tc(b),e=c.pop(),f=d.pop(),g=null;e===f;)g=e,e=c.pop(),f=d.pop();return g}function vc(a){a.fixed|=2}function wc(a){a!==Ff&&(a.fixed&=1)}function xc(){Ff.fixed&=1,Ef=Ff=null}function yc(){Ff.px=d3.event.x,Ff.py=d3.event.y,Ef.resume()}function zc(a,b,c){var d=0,e=0;if(a.charge=0,!a.leaf)for(var f,g=a.nodes,h=g.length,i=-1;++i<h;)f=g[i],null!=f&&(zc(f,b,c),a.charge+=f.charge,d+=f.charge*f.cx,e+=f.charge*f.cy);if(a.point){a.leaf||(a.point.x+=Math.random()-.5,a.point.y+=Math.random()-.5);var j=b*c[a.point.index];a.charge+=a.pointCharge=j,d+=j*a.point.x,e+=j*a.point.y}a.cx=d/a.charge,a.cy=e/a.charge}function Ac(){return 20}function Bc(){return 1}function Cc(a){return a.x}function Dc(a){return a.y}function Ec(a,b,c){a.y0=b,a.y=c}function Fc(a){return d3.range(a.length)}function Gc(a){for(var b=-1,c=a[0].length,d=[];++b<c;)d[b]=0;return d}function Hc(a){for(var b,c=1,d=0,e=a[0][1],f=a.length;f>c;++c)(b=a[c][1])>e&&(d=c,e=b);return d}function Ic(a){return a.reduce(Jc,0)}function Jc(a,b){return a+b[1]}function Kc(a,b){return Lc(a,Math.ceil(Math.log(b.length)/Math.LN2+1))}function Lc(a,b){for(var c=-1,d=+a[0],e=(a[1]-d)/b,f=[];++c<=b;)f[c]=e*c+d;return f}function Mc(a){return[d3.min(a),d3.max(a)]}function Nc(a,b){return d3.rebind(a,b,"sort","children","value"),a.links=Rc,a.nodes=function(b){return Jf=!0,(a.nodes=a)(b)},a}function Oc(a){return a.children}function Pc(a){return a.value}function Qc(a,b){return b.value-a.value}function Rc(a){return d3.merge(a.map(function(a){return(a.children||[]).map(function(b){return{source:a,target:b}})}))}function Sc(a,b){return a.value-b.value}function Tc(a,b){var c=a._pack_next;a._pack_next=b,b._pack_prev=a,b._pack_next=c,c._pack_prev=b}function Uc(a,b){a._pack_next=b,b._pack_prev=a}function Vc(a,b){var c=b.x-a.x,d=b.y-a.y,e=a.r+b.r;return e*e-c*c-d*d>.001}function Wc(a){function b(a){h=Math.min(a.x-a.r,h),i=Math.max(a.x+a.r,i),j=Math.min(a.y-a.r,j),k=Math.max(a.y+a.r,k)}var c,d,e,f,g,h=1/0,i=-1/0,j=1/0,k=-1/0,l=a.length;if(a.forEach(Xc),c=a[0],c.x=-c.r,c.y=0,b(c),l>1&&(d=a[1],d.x=d.r,d.y=0,b(d),l>2)){e=a[2],_c(c,d,e),b(e),Tc(c,e),c._pack_prev=e,Tc(e,d),d=c._pack_next;for(var m=3;l>m;m++){_c(c,d,e=a[m]);var n=0,o=1,p=1;for(f=d._pack_next;f!==d;f=f._pack_next,o++)if(Vc(f,e)){n=1;break}if(1==n)for(g=c._pack_prev;g!==f._pack_prev&&!Vc(g,e);g=g._pack_prev,p++);n?(p>o||o==p&&d.r<c.r?Uc(c,d=f):Uc(c=g,d),m--):(Tc(c,e),d=e,b(e))}}for(var q=(h+i)/2,r=(j+k)/2,s=0,m=0;l>m;m++){var t=a[m];t.x-=q,t.y-=r,s=Math.max(s,t.r+Math.sqrt(t.x*t.x+t.y*t.y))}return a.forEach(Yc),s}function Xc(a){a._pack_next=a._pack_prev=a}function Yc(a){delete a._pack_next,delete a._pack_prev}function Zc(a){var b=a.children;b&&b.length?(b.forEach(Zc),a.r=Wc(b)):a.r=Math.sqrt(a.value)}function $c(a,b,c,d){var e=a.children;if(a.x=b+=d*a.x,a.y=c+=d*a.y,a.r*=d,e)for(var f=-1,g=e.length;++f<g;)$c(e[f],b,c,d)}function _c(a,b,c){var d=a.r+c.r,e=b.x-a.x,f=b.y-a.y;if(d&&(e||f)){var g=b.r+c.r,h=Math.sqrt(e*e+f*f),i=Math.max(-1,Math.min(1,(d*d+h*h-g*g)/(2*d*h))),j=Math.acos(i),k=i*(d/=h),l=Math.sin(j)*d;c.x=a.x+k*e+l*f,c.y=a.y+k*f-l*e}else c.x=a.x+d,c.y=a.y}function ad(a){return 1+d3.max(a,function(a){return a.y})}function bd(a){return a.reduce(function(a,b){return a+b.x},0)/a.length}function cd(a){var b=a.children;return b&&b.length?cd(b[0]):a}function dd(a){var b,c=a.children;return c&&(b=c.length)?dd(c[b-1]):a}function ed(a,b){return a.parent==b.parent?1:2}function fd(a){var b=a.children;return b&&b.length?b[0]:a._tree.thread}function gd(a){var b,c=a.children;return c&&(b=c.length)?c[b-1]:a._tree.thread}function hd(a,b){var c=a.children;if(c&&(e=c.length))for(var d,e,f=-1;++f<e;)b(d=hd(c[f],b),a)>0&&(a=d);return a}function id(a,b){return a.x-b.x}function jd(a,b){return b.x-a.x}function kd(a,b){return a.depth-b.depth}function ld(a,b){function c(a,d){var e=a.children;if(e&&(g=e.length))for(var f,g,h=null,i=-1;++i<g;)f=e[i],c(f,h),h=f;b(a,d)}c(a,null)}function md(a){for(var b,c=0,d=0,e=a.children,f=e.length;--f>=0;)b=e[f]._tree,b.prelim+=c,b.mod+=c,c+=b.shift+(d+=b.change)}function nd(a,b,c){a=a._tree,b=b._tree;var d=c/(b.number-a.number);a.change+=d,b.change-=d,b.shift+=c,b.prelim+=c,b.mod+=c}function od(a,b,c){return a._tree.ancestor.parent==b.parent?a._tree.ancestor:c}function pd(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function qd(a,b){var c=a.x+b[3],d=a.y+b[0],e=a.dx-b[1]-b[3],f=a.dy-b[0]-b[2];return 0>e&&(c+=e/2,e=0),0>f&&(d+=f/2,f=0),{x:c,y:d,dx:e,dy:f}}function rd(a){return a.map(sd).join(",")}function sd(a){return/[",\n]/.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}function td(a,b){return function(c){return c&&a.hasOwnProperty(c.type)?a[c.type](c):b}}function ud(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function vd(a,b){Lf.hasOwnProperty(a.type)&&Lf[a.type](a,b)}function wd(a,b){vd(a.geometry,b)}function xd(a,b){for(var c=a.features,d=0,e=c.length;e>d;d++)vd(c[d].geometry,b)}function yd(a,b){for(var c=a.geometries,d=0,e=c.length;e>d;d++)vd(c[d],b)}function zd(a,b){for(var c=a.coordinates,d=0,e=c.length;e>d;d++)b.apply(null,c[d])}function Ad(a,b){for(var c=a.coordinates,d=0,e=c.length;e>d;d++)for(var f=c[d],g=0,h=f.length;h>g;g++)b.apply(null,f[g])}function Bd(a,b){for(var c=a.coordinates,d=0,e=c.length;e>d;d++)for(var f=c[d][0],g=0,h=f.length;h>g;g++)b.apply(null,f[g])}function Cd(a,b){b.apply(null,a.coordinates)}function Dd(a,b){for(var c=a.coordinates[0],d=0,e=c.length;e>d;d++)b.apply(null,c[d])}function Ed(a){return a.source}function Fd(a){return a.target}function Gd(){function a(a){var b=Math.sin(a*=n)*o,c=Math.sin(n-a)*o,d=c*f+b*l,h=c*g+b*m,i=c*e+b*k;return[Math.atan2(h,d)/Kf,Math.atan2(i,Math.sqrt(d*d+h*h))/Kf]}var b,c,d,e,f,g,h,i,j,k,l,m,n,o;return a.distance=function(){return null==n&&(o=1/Math.sin(n=Math.acos(Math.max(-1,Math.min(1,e*k+d*j*Math.cos(h-b)))))),n},a.source=function(h){var i=Math.cos(b=h[0]*Kf),j=Math.sin(b);return d=Math.cos(c=h[1]*Kf),e=Math.sin(c),f=d*i,g=d*j,n=null,a},a.target=function(b){var c=Math.cos(h=b[0]*Kf),d=Math.sin(h);return j=Math.cos(i=b[1]*Kf),k=Math.sin(i),l=j*c,m=j*d,n=null,a},a}function Hd(a,b){var c=Gd().source(a).target(b);return c.distance(),c}function Id(a){for(var b=0,c=0;;){if(a(b,c))return[b,c];0===b?(b=c+1,c=0):(b-=1,c+=1)}}function Jd(a,b,c,d){var e,f,g,h,i,j,k;return e=d[a],f=e[0],g=e[1],e=d[b],h=e[0],i=e[1],e=d[c],j=e[0],k=e[1],(k-g)*(h-f)-(i-g)*(j-f)>0}function Kd(a,b,c){return(c[0]-b[0])*(a[1]-b[1])<(c[1]-b[1])*(a[0]-b[0])}function Ld(a,b,c,d){var e=a[0],f=b[0],g=c[0],h=d[0],i=a[1],j=b[1],k=c[1],l=d[1],m=e-g,n=f-e,o=h-g,p=i-k,q=j-i,r=l-k,s=(o*p-r*m)/(r*n-o*q);return[e+s*n,i+s*q]}function Md(a,b){var c={list:a.map(function(a,b){return{index:b,x:a[0],y:a[1]}}).sort(function(a,b){return a.y<b.y?-1:a.y>b.y?1:a.x<b.x?-1:a.x>b.x?1:0}),bottomSite:null},d={list:[],leftEnd:null,rightEnd:null,init:function(){d.leftEnd=d.createHalfEdge(null,"l"),d.rightEnd=d.createHalfEdge(null,"l"),d.leftEnd.r=d.rightEnd,d.rightEnd.l=d.leftEnd,d.list.unshift(d.leftEnd,d.rightEnd)},createHalfEdge:function(a,b){return{edge:a,side:b,vertex:null,l:null,r:null}},insert:function(a,b){b.l=a,b.r=a.r,a.r.l=b,a.r=b},leftBound:function(a){var b=d.leftEnd;do b=b.r;while(b!=d.rightEnd&&e.rightOf(b,a));return b=b.l},del:function(a){a.l.r=a.r,a.r.l=a.l,a.edge=null},right:function(a){return a.r},left:function(a){return a.l},leftRegion:function(a){return null==a.edge?c.bottomSite:a.edge.region[a.side]},rightRegion:function(a){return null==a.edge?c.bottomSite:a.edge.region[Of[a.side]]}},e={bisect:function(a,b){var c={region:{l:a,r:b},ep:{l:null,r:null}},d=b.x-a.x,e=b.y-a.y,f=d>0?d:-d,g=e>0?e:-e;return c.c=a.x*d+a.y*e+.5*(d*d+e*e),f>g?(c.a=1,c.b=e/d,c.c/=d):(c.b=1,c.a=d/e,c.c/=e),c},intersect:function(a,b){var c=a.edge,d=b.edge;if(!c||!d||c.region.r==d.region.r)return null;var e=c.a*d.b-c.b*d.a;if(Math.abs(e)<1e-10)return null;var f,g,h=(c.c*d.b-d.c*c.b)/e,i=(d.c*c.a-c.c*d.a)/e,j=c.region.r,k=d.region.r;j.y<k.y||j.y==k.y&&j.x<k.x?(f=a,g=c):(f=b,g=d);var l=h>=g.region.r.x;return l&&"l"===f.side||!l&&"r"===f.side?null:{x:h,y:i}},rightOf:function(a,b){var c=a.edge,d=c.region.r,e=b.x>d.x;if(e&&"l"===a.side)return 1;if(!e&&"r"===a.side)return 0;if(1===c.a){var f=b.y-d.y,g=b.x-d.x,h=0,i=0;if(!e&&c.b<0||e&&c.b>=0?i=h=f>=c.b*g:(i=b.x+b.y*c.b>c.c,c.b<0&&(i=!i),i||(h=1)),!h){var j=d.x-c.region.l.x;i=c.b*(g*g-f*f)<j*f*(1+2*g/j+c.b*c.b),c.b<0&&(i=!i)}}else{var k=c.c-c.a*b.x,l=b.y-k,m=b.x-d.x,n=k-d.y;i=l*l>m*m+n*n}return"l"===a.side?i:!i},endPoint:function(a,c,d){a.ep[c]=d,a.ep[Of[c]]&&b(a)},distance:function(a,b){var c=a.x-b.x,d=a.y-b.y;return Math.sqrt(c*c+d*d)}},f={list:[],insert:function(a,b,c){a.vertex=b,a.ystar=b.y+c;for(var d=0,e=f.list,g=e.length;g>d;d++){var h=e[d];if(!(a.ystar>h.ystar||a.ystar==h.ystar&&b.x>h.vertex.x))break}e.splice(d,0,a)},del:function(a){for(var b=0,c=f.list,d=c.length;d>b&&c[b]!=a;++b);c.splice(b,1)},empty:function(){return 0===f.list.length},nextEvent:function(a){for(var b=0,c=f.list,d=c.length;d>b;++b)if(c[b]==a)return c[b+1];return null},min:function(){var a=f.list[0];return{x:a.vertex.x,y:a.ystar}},extractMin:function(){return f.list.shift()}};d.init(),c.bottomSite=c.list.shift();for(var g,h,i,j,k,l,m,n,o,p,q,r,s,t=c.list.shift();;)if(f.empty()||(g=f.min()),t&&(f.empty()||t.y<g.y||t.y==g.y&&t.x<g.x))h=d.leftBound(t),i=d.right(h),m=d.rightRegion(h),r=e.bisect(m,t),l=d.createHalfEdge(r,"l"),d.insert(h,l),p=e.intersect(h,l),p&&(f.del(h),f.insert(h,p,e.distance(p,t))),h=l,l=d.createHalfEdge(r,"r"),d.insert(h,l),p=e.intersect(l,i),p&&f.insert(l,p,e.distance(p,t)),t=c.list.shift();else{if(f.empty())break;h=f.extractMin(),j=d.left(h),i=d.right(h),k=d.right(i),m=d.leftRegion(h),n=d.rightRegion(i),q=h.vertex,e.endPoint(h.edge,h.side,q),e.endPoint(i.edge,i.side,q),d.del(h),f.del(i),d.del(i),s="l",m.y>n.y&&(o=m,m=n,n=o,s="r"),r=e.bisect(m,n),l=d.createHalfEdge(r,s),d.insert(j,l),e.endPoint(r,Of[s],q),p=e.intersect(j,l),p&&(f.del(j),f.insert(j,p,e.distance(p,m))),p=e.intersect(l,k),p&&f.insert(l,p,e.distance(p,m))}for(h=d.right(d.leftEnd);h!=d.rightEnd;h=d.right(h))b(h.edge)}function Nd(){return{leaf:!0,nodes:[],point:null}}function Od(a,b,c,d,e,f){if(!a(b,c,d,e,f)){var g=.5*(c+e),h=.5*(d+f),i=b.nodes;i[0]&&Od(a,i[0],c,d,g,h),i[1]&&Od(a,i[1],g,d,e,h),i[2]&&Od(a,i[2],c,h,g,f),i[3]&&Od(a,i[3],g,h,e,f)}}function Pd(a){return{x:a[0],y:a[1]}}function Qd(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Rd(a,b,c,d){for(var e,f,g=0,h=b.length,i=c.length;h>g;){if(d>=i)return-1;if(e=b.charCodeAt(g++),37==e){if(f=Wf[b.charAt(g++)],!f||(d=f(a,c,d))<0)return-1}else if(e!=c.charCodeAt(d++))return-1}return d}function Sd(a,b,c){return Xf.test(b.substring(c,c+=3))?c:-1}function Td(a,b,c){Yf.lastIndex=0;var d=Yf.exec(b.substring(c,c+10));return d?c+=d[0].length:-1}function Ud(a,b,c){var d=$f.get(b.substring(c,c+=3).toLowerCase());return null==d?-1:(a.m=d,c)}function Vd(a,b,c){_f.lastIndex=0;var d=_f.exec(b.substring(c,c+12));return d?(a.m=ag.get(d[0].toLowerCase()),c+=d[0].length):-1}function Wd(a,b,c){return Rd(a,Vf.c.toString(),b,c)}function Xd(a,b,c){return Rd(a,Vf.x.toString(),b,c)}function Yd(a,b,c){return Rd(a,Vf.X.toString(),b,c)}function Zd(a,b,c){cg.lastIndex=0;var d=cg.exec(b.substring(c,c+4));return d?(a.y=+d[0],c+=d[0].length):-1}function $d(a,b,c){cg.lastIndex=0;var d=cg.exec(b.substring(c,c+2));return d?(a.y=_d()+ +d[0],c+=d[0].length):-1}function _d(){return 1e3*~~((new Date).getFullYear()/1e3)}function ae(a,b,c){cg.lastIndex=0;var d=cg.exec(b.substring(c,c+2));return d?(a.m=d[0]-1,c+=d[0].length):-1}function be(a,b,c){cg.lastIndex=0;var d=cg.exec(b.substring(c,c+2));return d?(a.d=+d[0],c+=d[0].length):-1}function ce(a,b,c){cg.lastIndex=0;var d=cg.exec(b.substring(c,c+2));return d?(a.H=+d[0],c+=d[0].length):-1}function de(a,b,c){cg.lastIndex=0;var d=cg.exec(b.substring(c,c+2));return d?(a.M=+d[0],c+=d[0].length):-1}function ee(a,b,c){cg.lastIndex=0;var d=cg.exec(b.substring(c,c+2));return d?(a.S=+d[0],c+=d[0].length):-1}function fe(a,b,c){cg.lastIndex=0;var d=cg.exec(b.substring(c,c+3));return d?(a.L=+d[0],c+=d[0].length):-1}function ge(a,b,c){var d=dg.get(b.substring(c,c+=2).toLowerCase());return null==d?-1:(a.p=d,c)}function he(a){var b=a.getTimezoneOffset(),c=b>0?"-":"+",d=~~(Math.abs(b)/60),e=Math.abs(b)%60;return c+Rf(d)+Rf(e)}function ie(a){return a.toISOString()}function je(a,b,c){function d(b){var c=a(b),d=f(c,1);return d-b>b-c?c:d}function e(c){return b(c=a(new Pf(c-1)),1),c}function f(a,c){return b(a=new Pf(+a),c),a}function g(a,d,f){var g=e(a),h=[];if(f>1)for(;d>g;)c(g)%f||h.push(new Date(+g)),b(g,1);else for(;d>g;)h.push(new Date(+g)),b(g,1);return h}function h(a,b,c){try{Pf=Qd;var d=new Qd;return d._=a,g(d,b,c)}finally{Pf=Date}}a.floor=a,a.round=d,a.ceil=e,a.offset=f,a.range=g;var i=a.utc=ke(a);return i.floor=i,i.round=ke(d),i.ceil=ke(e),i.offset=ke(f),i.range=h,a}function ke(a){return function(b,c){try{Pf=Qd;var d=new Qd;return d._=b,a(d,c)._}finally{Pf=Date}}}function le(a,b,c){function d(b){return a(b)}return d.invert=function(b){return ne(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain(b),d):a.domain().map(ne)},d.nice=function(a){var b=me(d.domain());return d.domain([a.floor(b[0]),a.ceil(b[1])])},d.ticks=function(c,e){var f=me(d.domain());if("function"!=typeof c){var g=f[1]-f[0],h=g/c,i=d3.bisect(fg,h);if(i==fg.length)return b.year(f,c);if(!i)return a.ticks(c).map(ne);Math.log(h/fg[i-1])<Math.log(fg[i]/h)&&--i,c=b[i],e=c[1],c=c[0].range}return c(f[0],new Date(+f[1]+1),e)},d.tickFormat=function(){return c},d.copy=function(){return le(a.copy(),b,c)},d3.rebind(d,a,"range","rangeRound","interpolate","clamp")}function me(a){var b=a[0],c=a[a.length-1];return c>b?[b,c]:[c,b]}function ne(a){return new Date(a)}function oe(a){return function(b){for(var c=a.length-1,d=a[c];!d[1](b);)d=a[--c];return d[0](b)}}function pe(a){var b=new Date(a,0,1);return b.setFullYear(a),b}function qe(a){var b=a.getFullYear(),c=pe(b),d=pe(b+1);return b+(a-c)/(d-c)}function re(a){var b=new Date(Date.UTC(a,0,1));return b.setUTCFullYear(a),b}function se(a){var b=a.getUTCFullYear(),c=re(b),d=re(b+1);return b+(a-c)/(d-c)}Date.now||(Date.now=function(){return+new Date});try{document.createElement("div").style.setProperty("opacity",0,"")}catch(te){var ue=CSSStyleDeclaration.prototype,ve=ue.setProperty;ue.setProperty=function(a,b,c){ve.call(this,a,b+"",c)}}d3={version:"2.9.6"};var we=c;try{we(document.documentElement.childNodes)[0].nodeType}catch(xe){we=b}var ye=[].__proto__?function(a,b){a.__proto__=b}:function(a,b){for(var c in b)a[c]=b[c]};d3.map=function(a){var b=new d;for(var c in a)b.set(c,a[c]);return b},a(d,{has:function(a){return ze+a in this},get:function(a){return this[ze+a]},set:function(a,b){return this[ze+a]=b},remove:function(a){return a=ze+a,a in this&&delete this[a]},keys:function(){var a=[];return this.forEach(function(b){a.push(b)}),a},values:function(){var a=[];return this.forEach(function(b,c){a.push(c)}),a},entries:function(){var a=[];return this.forEach(function(b,c){a.push({key:b,value:c})}),a},forEach:function(a){for(var b in this)b.charCodeAt(0)===Ae&&a.call(this,b.substring(1),this[b])}});var ze="\x00",Ae=ze.charCodeAt(0);d3.functor=h,d3.rebind=function(a,b){for(var c,d=1,e=arguments.length;++d<e;)a[c=arguments[d]]=i(a,b,b[c]);return a},d3.ascending=function(a,b){return b>a?-1:a>b?1:a>=b?0:0/0},d3.descending=function(a,b){return a>b?-1:b>a?1:b>=a?0:0/0},d3.mean=function(a,b){var c,d=a.length,e=0,f=-1,g=0;if(1===arguments.length)for(;++f<d;)j(c=a[f])&&(e+=(c-e)/++g);else for(;++f<d;)j(c=b.call(a,a[f],f))&&(e+=(c-e)/++g);return g?e:void 0},d3.median=function(a,b){return arguments.length>1&&(a=a.map(b)),a=a.filter(j),a.length?d3.quantile(a.sort(d3.ascending),.5):void 0},d3.min=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f&&(null==(c=a[e])||c!=c);)c=void 0;for(;++e<f;)null!=(d=a[e])&&c>d&&(c=d)}else{for(;++e<f&&(null==(c=b.call(a,a[e],e))||c!=c);)c=void 0;for(;++e<f;)null!=(d=b.call(a,a[e],e))&&c>d&&(c=d)}return c},d3.max=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f&&(null==(c=a[e])||c!=c);)c=void 0;for(;++e<f;)null!=(d=a[e])&&d>c&&(c=d)}else{for(;++e<f&&(null==(c=b.call(a,a[e],e))||c!=c);)c=void 0;for(;++e<f;)null!=(d=b.call(a,a[e],e))&&d>c&&(c=d)}return c},d3.extent=function(a,b){var c,d,e,f=-1,g=a.length;if(1===arguments.length){for(;++f<g&&(null==(c=e=a[f])||c!=c);)c=e=void 0;for(;++f<g;)null!=(d=a[f])&&(c>d&&(c=d),d>e&&(e=d))}else{for(;++f<g&&(null==(c=e=b.call(a,a[f],f))||c!=c);)c=void 0;for(;++f<g;)null!=(d=b.call(a,a[f],f))&&(c>d&&(c=d),d>e&&(e=d))}return[c,e]},d3.random={normal:function(a,b){return arguments.length<2&&(b=1),arguments.length<1&&(a=0),function(){var c,d,e;do c=2*Math.random()-1,d=2*Math.random()-1,e=c*c+d*d;while(!e||e>1);return a+b*c*Math.sqrt(-2*Math.log(e)/e)}}},d3.sum=function(a,b){var c,d=0,e=a.length,f=-1;if(1===arguments.length)for(;++f<e;)isNaN(c=+a[f])||(d+=c);else for(;++f<e;)isNaN(c=+b.call(a,a[f],f))||(d+=c);return d},d3.quantile=function(a,b){var c=(a.length-1)*b+1,d=Math.floor(c),e=a[d-1],f=c-d;return f?e+f*(a[d]-e):e},d3.transpose=function(a){return d3.zip.apply(d3,a)},d3.zip=function(){if(!(d=arguments.length))return[];for(var a=-1,b=d3.min(arguments,k),c=new Array(b);++a<b;)for(var d,e=-1,f=c[a]=new Array(d);++e<d;)f[e]=arguments[e][a];return c},d3.bisector=function(a){return{left:function(b,c,d,e){for(arguments.length<3&&(d=0),arguments.length<4&&(e=b.length);e>d;){var f=d+e>>1;a.call(b,b[f],f)<c?d=f+1:e=f}return d},right:function(b,c,d,e){for(arguments.length<3&&(d=0),arguments.length<4&&(e=b.length);e>d;){var f=d+e>>1;c<a.call(b,b[f],f)?e=f:d=f+1}return d}}};var Be=d3.bisector(function(a){return a});d3.bisectLeft=Be.left,d3.bisect=d3.bisectRight=Be.right,d3.first=function(a,b){var c,d=0,e=a.length,f=a[0];for(1===arguments.length&&(b=d3.ascending);++d<e;)b.call(a,f,c=a[d])>0&&(f=c);return f},d3.last=function(a,b){var c,d=0,e=a.length,f=a[0];for(1===arguments.length&&(b=d3.ascending);++d<e;)b.call(a,f,c=a[d])<=0&&(f=c);return f},d3.nest=function(){function a(b,h){if(h>=g.length)return e?e.call(f,b):c?b.sort(c):b;for(var i,j,k,l=-1,m=b.length,n=g[h++],o=new d,p={};++l<m;)(k=o.get(i=n(j=b[l])))?k.push(j):o.set(i,[j]);return o.forEach(function(b){p[b]=a(o.get(b),h)}),p}function b(a,c){if(c>=g.length)return a;var d,e=[],f=h[c++];for(d in a)e.push({key:d,values:b(a[d],c)});return f&&e.sort(function(a,b){return f(a.key,b.key)}),e}var c,e,f={},g=[],h=[];return f.map=function(b){return a(b,0)},f.entries=function(c){return b(a(c,0),0)},f.key=function(a){return g.push(a),f},f.sortKeys=function(a){return h[g.length-1]=a,f},f.sortValues=function(a){return c=a,f},f.rollup=function(a){return e=a,f},f},d3.keys=function(a){var b=[];for(var c in a)b.push(c);return b},d3.values=function(a){var b=[];for(var c in a)b.push(a[c]);return b},d3.entries=function(a){var b=[];for(var c in a)b.push({key:c,value:a[c]});return b},d3.permute=function(a,b){for(var c=[],d=-1,e=b.length;++d<e;)c[d]=a[b[d]];return c},d3.merge=function(a){return Array.prototype.concat.apply([],a)},d3.split=function(a,b){var c,d=[],e=[],f=-1,g=a.length;for(arguments.length<2&&(b=l);++f<g;)b.call(e,c=a[f],f)?e=[]:(e.length||d.push(e),e.push(c));return d},d3.range=function(a,b,c){if(arguments.length<3&&(c=1,arguments.length<2&&(b=a,a=0)),(b-a)/c===1/0)throw new Error("infinite range");var d,e=[],f=n(Math.abs(c)),g=-1;if(a*=f,b*=f,c*=f,0>c)for(;(d=a+c*++g)>b;)e.push(d/f);else for(;(d=a+c*++g)<b;)e.push(d/f);return e},d3.requote=function(a){return a.replace(Ce,"\\$&")};var Ce=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;d3.round=function(a,b){return b?Math.round(a*(b=Math.pow(10,b)))/b:Math.round(a)},d3.xhr=function(a,b,c){var d=new XMLHttpRequest;arguments.length<3?(c=b,b=null):b&&d.overrideMimeType&&d.overrideMimeType(b),d.open("GET",a,!0),b&&d.setRequestHeader("Accept",b),d.onreadystatechange=function(){if(4===d.readyState){var a=d.status;c(!a&&d.response||a>=200&&300>a||304===a?d:null)}},d.send(null)},d3.text=function(a,b,c){function d(a){c(a&&a.responseText)}arguments.length<3&&(c=b,b=null),d3.xhr(a,b,d)},d3.json=function(a,b){d3.text(a,"application/json",function(a){b(a?JSON.parse(a):null)})},d3.html=function(a,b){d3.text(a,"text/html",function(a){if(null!=a){var c=document.createRange();c.selectNode(document.body),a=c.createContextualFragment(a)}b(a)})},d3.xml=function(a,b,c){function d(a){c(a&&a.responseXML)}arguments.length<3&&(c=b,b=null),d3.xhr(a,b,d)};var De={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};d3.ns={prefix:De,qualify:function(a){var b=a.indexOf(":"),c=a;return b>=0&&(c=a.substring(0,b),a=a.substring(b+1)),De.hasOwnProperty(c)?{space:De[c],local:a}:a}},d3.dispatch=function(){for(var a=new o,b=-1,c=arguments.length;++b<c;)a[arguments[b]]=p(a);return a},o.prototype.on=function(a,b){var c=a.indexOf("."),d="";return c>0&&(d=a.substring(c+1),a=a.substring(0,c)),arguments.length<2?this[a].on(d):this[a].on(d,b)},d3.format=function(a){var b=Ee.exec(a),c=b[1]||" ",d=b[3]||"",e=b[5],f=+b[6],g=b[7],h=b[8],i=b[9],j=1,k="",l=!1;switch(h&&(h=+h.substring(1)),e&&(c="0",g&&(f-=Math.floor((f-1)/4))),i){case"n":g=!0,i="g";break;case"%":j=100,k="%",i="f";break;case"p":j=100,k="%",i="r";break;case"d":l=!0,h=0;break;case"s":j=-1,i="r"}return"r"!=i||h||(i="g"),i=Fe.get(i)||r,function(a){if(l&&a%1)return"";var b=0>a&&(a=-a)?"−":d;if(0>j){var m=d3.formatPrefix(a,h);a=m.scale(a),k=m.symbol}else a*=j;if(a=i(a,h),e){var n=a.length+b.length;f>n&&(a=new Array(f-n+1).join(c)+a),g&&(a=s(a)),a=b+a}else{g&&(a=s(a)),a=b+a;var n=a.length;f>n&&(a=new Array(f-n+1).join(c)+a)}return a+k}};var Ee=/(?:([^{])?([<>=^]))?([+\- ])?(#)?(0)?([0-9]+)?(,)?(\.[0-9]+)?([a-zA-Z%])?/,Fe=d3.map({g:function(a,b){return a.toPrecision(b)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},r:function(a,b){return d3.round(a,b=q(a,b)).toFixed(Math.max(0,Math.min(20,b)))}}),Ge=["y","z","a","f","p","n","μ","m","","k","M","G","T","P","E","Z","Y"].map(t);d3.formatPrefix=function(a,b){var c=0;return a&&(0>a&&(a*=-1),b&&(a=d3.round(a,q(a,b))),c=1+Math.floor(1e-12+Math.log(a)/Math.LN10),c=Math.max(-24,Math.min(24,3*Math.floor((0>=c?c+1:c-1)/3)))),Ge[8+c/3]};var He=y(2),Ie=y(3),Je=function(){return x},Ke=d3.map({linear:Je,poly:y,quad:function(){return He},cubic:function(){return Ie},sin:function(){return z},exp:function(){return A},circle:function(){return B},elastic:C,back:D,bounce:function(){return E}}),Le=d3.map({"in":x,out:v,"in-out":w,"out-in":function(a){return w(v(a))}});d3.ease=function(a){var b=a.indexOf("-"),c=b>=0?a.substring(0,b):a,d=b>=0?a.substring(b+1):"in";return c=Ke.get(c)||Je,d=Le.get(d)||x,u(d(c.apply(null,Array.prototype.slice.call(arguments,1))))},d3.event=null,d3.interpolate=function(a,b){for(var c,d=d3.interpolators.length;--d>=0&&!(c=d3.interpolators[d](a,b)););return c},d3.interpolateNumber=function(a,b){return b-=a,function(c){return a+b*c}},d3.interpolateRound=function(a,b){return b-=a,function(c){return Math.round(a+b*c)}},d3.interpolateString=function(a,b){var c,d,e,f,g,h=0,i=0,j=[],k=[];for(Me.lastIndex=0,d=0;c=Me.exec(b);++d)c.index&&j.push(b.substring(h,i=c.index)),k.push({i:j.length,x:c[0]}),j.push(null),h=Me.lastIndex;for(h<b.length&&j.push(b.substring(h)),d=0,f=k.length;(c=Me.exec(a))&&f>d;++d)if(g=k[d],g.x==c[0]){if(g.i)if(null==j[g.i+1])for(j[g.i-1]+=g.x,j.splice(g.i,1),e=d+1;f>e;++e)k[e].i--;else for(j[g.i-1]+=g.x+j[g.i+1],j.splice(g.i,2),e=d+1;f>e;++e)k[e].i-=2;else if(null==j[g.i+1])j[g.i]=g.x;else for(j[g.i]=g.x+j[g.i+1],j.splice(g.i+1,1),e=d+1;f>e;++e)k[e].i--;k.splice(d,1),f--,d--}else g.x=d3.interpolateNumber(parseFloat(c[0]),parseFloat(g.x));for(;f>d;)g=k.pop(),null==j[g.i+1]?j[g.i]=g.x:(j[g.i]=g.x+j[g.i+1],j.splice(g.i+1,1)),f--;return 1===j.length?null==j[0]?k[0].x:function(){return b}:function(a){for(d=0;f>d;++d)j[(g=k[d]).i]=g.x(a);return j.join("")}},d3.interpolateTransform=function(a,b){var c,d=[],e=[],f=d3.transform(a),g=d3.transform(b),h=f.translate,i=g.translate,j=f.rotate,k=g.rotate,l=f.skew,m=g.skew,n=f.scale,o=g.scale;return h[0]!=i[0]||h[1]!=i[1]?(d.push("translate(",null,",",null,")"),e.push({i:1,x:d3.interpolateNumber(h[0],i[0])},{i:3,x:d3.interpolateNumber(h[1],i[1])})):d.push(i[0]||i[1]?"translate("+i+")":""),j!=k?(j-k>180?k+=360:k-j>180&&(j+=360),e.push({i:d.push(d.pop()+"rotate(",null,")")-2,x:d3.interpolateNumber(j,k)})):k&&d.push(d.pop()+"rotate("+k+")"),l!=m?e.push({i:d.push(d.pop()+"skewX(",null,")")-2,x:d3.interpolateNumber(l,m)}):m&&d.push(d.pop()+"skewX("+m+")"),n[0]!=o[0]||n[1]!=o[1]?(c=d.push(d.pop()+"scale(",null,",",null,")"),e.push({i:c-4,x:d3.interpolateNumber(n[0],o[0])},{i:c-2,x:d3.interpolateNumber(n[1],o[1])})):(1!=o[0]||1!=o[1])&&d.push(d.pop()+"scale("+o+")"),c=e.length,function(a){for(var b,f=-1;++f<c;)d[(b=e[f]).i]=b.x(a);return d.join("")}},d3.interpolateRgb=function(a,b){a=d3.rgb(a),b=d3.rgb(b);var c=a.r,d=a.g,e=a.b,f=b.r-c,g=b.g-d,h=b.b-e;return function(a){return"#"+N(Math.round(c+f*a))+N(Math.round(d+g*a))+N(Math.round(e+h*a))}},d3.interpolateHsl=function(a,b){a=d3.hsl(a),b=d3.hsl(b);var c=a.h,d=a.s,e=a.l,f=b.h-c,g=b.s-d,h=b.l-e;return f>180?f-=360:-180>f&&(f+=360),function(a){return T(c+f*a,d+g*a,e+h*a).toString()}},d3.interpolateArray=function(a,b){var c,d=[],e=[],f=a.length,g=b.length,h=Math.min(a.length,b.length);for(c=0;h>c;++c)d.push(d3.interpolate(a[c],b[c]));for(;f>c;++c)e[c]=a[c];for(;g>c;++c)e[c]=b[c];return function(a){for(c=0;h>c;++c)e[c]=d[c](a);return e}},d3.interpolateObject=function(a,b){var c,d={},e={};for(c in a)c in b?d[c]=I(c)(a[c],b[c]):e[c]=a[c];for(c in b)c in a||(e[c]=b[c]);return function(a){for(c in d)e[c]=d[c](a);return e}};var Me=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;d3.interpolators=[d3.interpolateObject,function(a,b){return b instanceof Array&&d3.interpolateArray(a,b)},function(a,b){return("string"==typeof a||"string"==typeof b)&&d3.interpolateString(a+"",b+"")},function(a,b){return("string"==typeof b?Ne.has(b)||/^(#|rgb\(|hsl\()/.test(b):b instanceof M||b instanceof S)&&d3.interpolateRgb(a,b)},function(a,b){return!isNaN(a=+a)&&!isNaN(b=+b)&&d3.interpolateNumber(a,b)}],d3.rgb=function(a,b,c){return 1===arguments.length?a instanceof M?L(a.r,a.g,a.b):O(""+a,L,T):L(~~a,~~b,~~c)},M.prototype.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);var b=this.r,c=this.g,d=this.b,e=30;return b||c||d?(b&&e>b&&(b=e),c&&e>c&&(c=e),d&&e>d&&(d=e),L(Math.min(255,Math.floor(b/a)),Math.min(255,Math.floor(c/a)),Math.min(255,Math.floor(d/a)))):L(e,e,e)},M.prototype.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),L(Math.floor(a*this.r),Math.floor(a*this.g),Math.floor(a*this.b))},M.prototype.hsl=function(){return P(this.r,this.g,this.b)},M.prototype.toString=function(){return"#"+N(this.r)+N(this.g)+N(this.b)};var Ne=d3.map({aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"});
Ne.forEach(function(a,b){Ne.set(a,O(b,L,T))}),d3.hsl=function(a,b,c){return 1===arguments.length?a instanceof S?R(a.h,a.s,a.l):O(""+a,P,R):R(+a,+b,+c)},S.prototype.brighter=function(a){return a=Math.pow(.7,arguments.length?a:1),R(this.h,this.s,this.l/a)},S.prototype.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),R(this.h,this.s,a*this.l)},S.prototype.rgb=function(){return T(this.h,this.s,this.l)},S.prototype.toString=function(){return this.rgb().toString()};var Oe=function(a,b){return b.querySelector(a)},Pe=function(a,b){return b.querySelectorAll(a)},Qe=document.documentElement,Re=Qe.matchesSelector||Qe.webkitMatchesSelector||Qe.mozMatchesSelector||Qe.msMatchesSelector||Qe.oMatchesSelector,Se=function(a,b){return Re.call(a,b)};"function"==typeof Sizzle&&(Oe=function(a,b){return Sizzle(a,b)[0]||null},Pe=function(a,b){return Sizzle.uniqueSort(Sizzle(a,b))},Se=Sizzle.matchesSelector);var Te=[];d3.selection=function(){return Ue},d3.selection.prototype=Te,Te.select=function(a){var b,c,d,e,f=[];"function"!=typeof a&&(a=V(a));for(var g=-1,h=this.length;++g<h;){f.push(b=[]),b.parentNode=(d=this[g]).parentNode;for(var i=-1,j=d.length;++i<j;)(e=d[i])?(b.push(c=a.call(e,e.__data__,i)),c&&"__data__"in e&&(c.__data__=e.__data__)):b.push(null)}return U(f)},Te.selectAll=function(a){var b,c,d=[];"function"!=typeof a&&(a=W(a));for(var e=-1,f=this.length;++e<f;)for(var g=this[e],h=-1,i=g.length;++h<i;)(c=g[h])&&(d.push(b=we(a.call(c,c.__data__,h))),b.parentNode=c);return U(d)},Te.attr=function(a,b){function c(){this.removeAttribute(a)}function d(){this.removeAttributeNS(a.space,a.local)}function e(){this.setAttribute(a,b)}function f(){this.setAttributeNS(a.space,a.local,b)}function g(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}function h(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}if(a=d3.ns.qualify(a),arguments.length<2){var i=this.node();return a.local?i.getAttributeNS(a.space,a.local):i.getAttribute(a)}return this.each(null==b?a.local?d:c:"function"==typeof b?a.local?h:g:a.local?f:e)},Te.classed=function(a,b){var c=m(a).split(" "),d=c.length,e=-1;if(arguments.length>1){for(;++e<d;)X.call(this,c[e],b);return this}for(;++e<d;)if(!X.call(this,c[e]))return!1;return!0},Te.style=function(a,b,c){function d(){this.style.removeProperty(a)}function e(){this.style.setProperty(a,b,c)}function f(){var d=b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}return arguments.length<3&&(c=""),arguments.length<2?window.getComputedStyle(this.node(),null).getPropertyValue(a):this.each(null==b?d:"function"==typeof b?f:e)},Te.property=function(a,b){function c(){delete this[a]}function d(){this[a]=b}function e(){var c=b.apply(this,arguments);null==c?delete this[a]:this[a]=c}return arguments.length<2?this.node()[a]:this.each(null==b?c:"function"==typeof b?e:d)},Te.text=function(a){return arguments.length<1?this.node().textContent:this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}:null==a?function(){this.textContent=""}:function(){this.textContent=a})},Te.html=function(a){return arguments.length<1?this.node().innerHTML:this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}:null==a?function(){this.innerHTML=""}:function(){this.innerHTML=a})},Te.append=function(a){function b(){return this.appendChild(document.createElementNS(this.namespaceURI,a))}function c(){return this.appendChild(document.createElementNS(a.space,a.local))}return a=d3.ns.qualify(a),this.select(a.local?c:b)},Te.insert=function(a,b){function c(){return this.insertBefore(document.createElementNS(this.namespaceURI,a),Oe(b,this))}function d(){return this.insertBefore(document.createElementNS(a.space,a.local),Oe(b,this))}return a=d3.ns.qualify(a),this.select(a.local?d:c)},Te.remove=function(){return this.each(function(){var a=this.parentNode;a&&a.removeChild(this)})},Te.data=function(a,b){function c(a,c){var e,f,g,h=a.length,l=c.length,m=Math.min(h,l),n=Math.max(h,l),o=[],p=[],q=[];if(b){var r,s=new d,t=[],u=c.length;for(e=-1;++e<h;)r=b.call(f=a[e],f.__data__,e),s.has(r)?q[u++]=f:s.set(r,f),t.push(r);for(e=-1;++e<l;)r=b.call(c,g=c[e],e),s.has(r)?(o[e]=f=s.get(r),f.__data__=g,p[e]=q[e]=null):(p[e]=Y(g),o[e]=q[e]=null),s.remove(r);for(e=-1;++e<h;)s.has(t[e])&&(q[e]=a[e])}else{for(e=-1;++e<m;)f=a[e],g=c[e],f?(f.__data__=g,o[e]=f,p[e]=q[e]=null):(p[e]=Y(g),o[e]=q[e]=null);for(;l>e;++e)p[e]=Y(c[e]),o[e]=q[e]=null;for(;n>e;++e)q[e]=a[e],p[e]=o[e]=null}p.update=o,p.parentNode=o.parentNode=q.parentNode=a.parentNode,i.push(p),j.push(o),k.push(q)}var e,f,g=-1,h=this.length;if(!arguments.length){for(a=new Array(h=(e=this[0]).length);++g<h;)(f=e[g])&&(a[g]=f.__data__);return a}var i=ab([]),j=U([]),k=U([]);if("function"==typeof a)for(;++g<h;)c(e=this[g],a.call(e,e.parentNode.__data__,g));else for(;++g<h;)c(e=this[g],a);return j.enter=function(){return i},j.exit=function(){return k},j},Te.datum=Te.map=function(a){return arguments.length<1?this.property("__data__"):this.property("__data__",a)},Te.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=Z(a));for(var f=0,g=this.length;g>f;f++){e.push(b=[]),b.parentNode=(c=this[f]).parentNode;for(var h=0,i=c.length;i>h;h++)(d=c[h])&&a.call(d,d.__data__,h)&&b.push(d)}return U(e)},Te.order=function(){for(var a=-1,b=this.length;++a<b;)for(var c,d=this[a],e=d.length-1,f=d[e];--e>=0;)(c=d[e])&&(f&&f!==c.nextSibling&&f.parentNode.insertBefore(c,f),f=c);return this},Te.sort=function(a){a=$.apply(this,arguments);for(var b=-1,c=this.length;++b<c;)this[b].sort(a);return this.order()},Te.on=function(a,b,c){arguments.length<3&&(c=!1);var d="__on"+a,e=a.indexOf(".");return e>0&&(a=a.substring(0,e)),arguments.length<2?(e=this.node()[d])&&e._:this.each(function(e,f){function g(a){var c=d3.event;d3.event=a;try{b.call(h,h.__data__,f)}finally{d3.event=c}}var h=this,i=h[d];i&&(h.removeEventListener(a,i,i.$),delete h[d]),b&&(h.addEventListener(a,h[d]=g,g.$=c),g._=b)})},Te.each=function(a){return _(this,function(b,c,d){a.call(b,b.__data__,c,d)})},Te.call=function(a){return a.apply(this,(arguments[0]=this,arguments)),this},Te.empty=function(){return!this.node()},Te.node=function(){for(var a=0,b=this.length;b>a;a++)for(var c=this[a],d=0,e=c.length;e>d;d++){var f=c[d];if(f)return f}return null},Te.transition=function(){for(var a,b,c=[],d=-1,e=this.length;++d<e;){c.push(a=[]);for(var f=this[d],g=-1,h=f.length;++g<h;)a.push((b=f[g])?{node:b,delay:bf,duration:cf}:null)}return bb(c,Ze||++Ye,Date.now())};var Ue=U([[document]]);Ue[0].parentNode=Qe,d3.select=function(a){return"string"==typeof a?Ue.select(a):U([[a]])},d3.selectAll=function(a){return"string"==typeof a?Ue.selectAll(a):U([we(a)])};var Ve=[];d3.selection.enter=ab,d3.selection.enter.prototype=Ve,Ve.append=Te.append,Ve.insert=Te.insert,Ve.empty=Te.empty,Ve.node=Te.node,Ve.select=function(a){for(var b,c,d,e,f,g=[],h=-1,i=this.length;++h<i;){d=(e=this[h]).update,g.push(b=[]),b.parentNode=e.parentNode;for(var j=-1,k=e.length;++j<k;)(f=e[j])?(b.push(d[j]=c=a.call(e.parentNode,f.__data__,j)),c.__data__=f.__data__):b.push(null)}return U(g)};var We={},Xe=[],Ye=0,Ze=0,$e=0,_e=250,af=d3.ease("cubic-in-out"),bf=$e,cf=_e,df=af;Xe.call=Te.call,d3.transition=function(a){return arguments.length?Ze?a.transition():a:Ue.transition()},d3.transition.prototype=Xe,Xe.select=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=V(a));for(var f=-1,g=this.length;++f<g;){e.push(b=[]);for(var h=this[f],i=-1,j=h.length;++i<j;)(d=h[i])&&(c=a.call(d.node,d.node.__data__,i))?("__data__"in d.node&&(c.__data__=d.node.__data__),b.push({node:c,delay:d.delay,duration:d.duration})):b.push(null)}return bb(e,this.id,this.time).ease(this.ease())},Xe.selectAll=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=W(a));for(var f=-1,g=this.length;++f<g;)for(var h=this[f],i=-1,j=h.length;++i<j;)if(d=h[i]){c=a.call(d.node,d.node.__data__,i),e.push(b=[]);for(var k=-1,l=c.length;++k<l;)b.push({node:c[k],delay:d.delay,duration:d.duration})}return bb(e,this.id,this.time).ease(this.ease())},Xe.attr=function(a,b){return this.attrTween(a,db(a,b))},Xe.attrTween=function(a,b){function c(a,c){var d=b.call(this,a,c,this.getAttribute(e));return d===We?(this.removeAttribute(e),null):d&&function(a){this.setAttribute(e,d(a))}}function d(a,c){var d=b.call(this,a,c,this.getAttributeNS(e.space,e.local));return d===We?(this.removeAttributeNS(e.space,e.local),null):d&&function(a){this.setAttributeNS(e.space,e.local,d(a))}}var e=d3.ns.qualify(a);return this.tween("attr."+a,e.local?d:c)},Xe.style=function(a,b,c){return arguments.length<3&&(c=""),this.styleTween(a,db(a,b),c)},Xe.styleTween=function(a,b,c){return arguments.length<3&&(c=""),this.tween("style."+a,function(d,e){var f=b.call(this,d,e,window.getComputedStyle(this,null).getPropertyValue(a));return f===We?(this.style.removeProperty(a),null):f&&function(b){this.style.setProperty(a,f(b),c)}})},Xe.text=function(a){return this.tween("text",function(b,c){this.textContent="function"==typeof a?a.call(this,b,c):a})},Xe.remove=function(){return this.each("end.transition",function(){var a;!this.__transition__&&(a=this.parentNode)&&a.removeChild(this)})},Xe.delay=function(a){return _(this,"function"==typeof a?function(b,c,d){b.delay=0|a.call(b=b.node,b.__data__,c,d)}:(a=0|a,function(b){b.delay=a}))},Xe.duration=function(a){return _(this,"function"==typeof a?function(b,c,d){b.duration=Math.max(1,0|a.call(b=b.node,b.__data__,c,d))}:(a=Math.max(1,0|a),function(b){b.duration=a}))},Xe.transition=function(){return this.select(f)};var ef,ff,gf=null;d3.timer=function(a,b,c){var d,e=!1,f=gf;if(arguments.length<3){if(arguments.length<2)b=0;else if(!isFinite(b))return;c=Date.now()}for(;f;){if(f.callback===a){f.then=c,f.delay=b,e=!0;break}d=f,f=f.next}e||(gf={callback:a,then:c,delay:b,next:gf}),ef||(ff=clearTimeout(ff),ef=1,hf(fb))},d3.timer.flush=function(){for(var a,b=Date.now(),c=gf;c;)a=b-c.then,c.delay||(c.flush=c.callback(a)),c=c.next;gb()};var hf=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){setTimeout(a,17)};d3.transform=function(a){var b=document.createElementNS(d3.ns.prefix.svg,"g"),c={a:1,b:0,c:0,d:1,e:0,f:0};return(d3.transform=function(a){b.setAttribute("transform",a);var d=b.transform.baseVal.consolidate();return new hb(d?d.matrix:c)})(a)},hb.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var jf=180/Math.PI;d3.mouse=function(a){return lb(a,G())};var kf=/WebKit/.test(navigator.userAgent)?-1:0;d3.touches=function(a,b){return arguments.length<2&&(b=G().touches),b?we(b).map(function(b){var c=lb(a,b);return c.identifier=b.identifier,c}):[]},d3.scale={},d3.scale.linear=function(){return qb([0,1],[0,1],d3.interpolate,!1)},d3.scale.log=function(){return yb(d3.scale.linear(),zb)};var lf=d3.format(".0e");zb.pow=function(a){return Math.pow(10,a)},Ab.pow=function(a){return-Math.pow(10,-a)},d3.scale.pow=function(){return Bb(d3.scale.linear(),1)},d3.scale.sqrt=function(){return d3.scale.pow().exponent(.5)},d3.scale.ordinal=function(){return Db([],{t:"range",x:[]})},d3.scale.category10=function(){return d3.scale.ordinal().range(mf)},d3.scale.category20=function(){return d3.scale.ordinal().range(nf)},d3.scale.category20b=function(){return d3.scale.ordinal().range(of)},d3.scale.category20c=function(){return d3.scale.ordinal().range(pf)};var mf=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],nf=["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"],of=["#393b79","#5254a3","#6b6ecf","#9c9ede","#637939","#8ca252","#b5cf6b","#cedb9c","#8c6d31","#bd9e39","#e7ba52","#e7cb94","#843c39","#ad494a","#d6616b","#e7969c","#7b4173","#a55194","#ce6dbd","#de9ed6"],pf=["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"];d3.scale.quantile=function(){return Eb([],[])},d3.scale.quantize=function(){return Fb(0,1,[0,1])},d3.scale.identity=function(){return Gb([0,1])},d3.svg={},d3.svg.arc=function(){function a(){var a=b.apply(this,arguments),f=c.apply(this,arguments),g=d.apply(this,arguments)+qf,h=e.apply(this,arguments)+qf,i=(g>h&&(i=g,g=h,h=i),h-g),j=i<Math.PI?"0":"1",k=Math.cos(g),l=Math.sin(g),m=Math.cos(h),n=Math.sin(h);return i>=rf?a?"M0,"+f+"A"+f+","+f+" 0 1,1 0,"+-f+"A"+f+","+f+" 0 1,1 0,"+f+"M0,"+a+"A"+a+","+a+" 0 1,0 0,"+-a+"A"+a+","+a+" 0 1,0 0,"+a+"Z":"M0,"+f+"A"+f+","+f+" 0 1,1 0,"+-f+"A"+f+","+f+" 0 1,1 0,"+f+"Z":a?"M"+f*k+","+f*l+"A"+f+","+f+" 0 "+j+",1 "+f*m+","+f*n+"L"+a*m+","+a*n+"A"+a+","+a+" 0 "+j+",0 "+a*k+","+a*l+"Z":"M"+f*k+","+f*l+"A"+f+","+f+" 0 "+j+",1 "+f*m+","+f*n+"L0,0Z"}var b=Hb,c=Ib,d=Jb,e=Kb;return a.innerRadius=function(c){return arguments.length?(b=h(c),a):b},a.outerRadius=function(b){return arguments.length?(c=h(b),a):c},a.startAngle=function(b){return arguments.length?(d=h(b),a):d},a.endAngle=function(b){return arguments.length?(e=h(b),a):e},a.centroid=function(){var a=(b.apply(this,arguments)+c.apply(this,arguments))/2,f=(d.apply(this,arguments)+e.apply(this,arguments))/2+qf;return[Math.cos(f)*a,Math.sin(f)*a]},a};var qf=-Math.PI/2,rf=2*Math.PI-1e-6;d3.svg.line=function(){return Lb(e)};var sf="linear",tf=d3.map({linear:Ob,"step-before":Pb,"step-after":Qb,basis:Wb,"basis-open":Xb,"basis-closed":Yb,bundle:Zb,cardinal:Tb,"cardinal-open":Rb,"cardinal-closed":Sb,monotone:dc}),uf=[0,2/3,1/3,0],vf=[0,1/3,2/3,0],wf=[0,1/6,2/3,1/6];d3.svg.line.radial=function(){var a=Lb(ec);return a.radius=a.x,delete a.x,a.angle=a.y,delete a.y,a},Pb.reverse=Qb,Qb.reverse=Pb,d3.svg.area=function(){return fc(Object)},d3.svg.area.radial=function(){var a=fc(ec);return a.radius=a.x,delete a.x,a.innerRadius=a.x0,delete a.x0,a.outerRadius=a.x1,delete a.x1,a.angle=a.y,delete a.y,a.startAngle=a.y0,delete a.y0,a.endAngle=a.y1,delete a.y1,a},d3.svg.chord=function(){function a(a,h){var i=b(this,f,a,h),j=b(this,g,a,h);return"M"+i.p0+d(i.r,i.p1,i.a1-i.a0)+(c(i,j)?e(i.r,i.p1,i.r,i.p0):e(i.r,i.p1,j.r,j.p0)+d(j.r,j.p1,j.a1-j.a0)+e(j.r,j.p1,i.r,i.p0))+"Z"}function b(a,b,c,d){var e=b.call(a,c,d),f=i.call(a,e,d),g=j.call(a,e,d)+qf,h=k.call(a,e,d)+qf;return{r:f,a0:g,a1:h,p0:[f*Math.cos(g),f*Math.sin(g)],p1:[f*Math.cos(h),f*Math.sin(h)]}}function c(a,b){return a.a0==b.a0&&a.a1==b.a1}function d(a,b,c){return"A"+a+","+a+" 0 "+ +(c>Math.PI)+",1 "+b}function e(a,b,c,d){return"Q 0,0 "+d}var f=gc,g=hc,i=ic,j=Jb,k=Kb;return a.radius=function(b){return arguments.length?(i=h(b),a):i},a.source=function(b){return arguments.length?(f=h(b),a):f},a.target=function(b){return arguments.length?(g=h(b),a):g},a.startAngle=function(b){return arguments.length?(j=h(b),a):j},a.endAngle=function(b){return arguments.length?(k=h(b),a):k},a},d3.svg.diagonal=function(){function a(a,e){var f=b.call(this,a,e),g=c.call(this,a,e),h=(f.y+g.y)/2,i=[f,{x:f.x,y:h},{x:g.x,y:h},g];return i=i.map(d),"M"+i[0]+"C"+i[1]+" "+i[2]+" "+i[3]}var b=gc,c=hc,d=jc;return a.source=function(c){return arguments.length?(b=h(c),a):b},a.target=function(b){return arguments.length?(c=h(b),a):c},a.projection=function(b){return arguments.length?(d=b,a):d},a},d3.svg.diagonal.radial=function(){var a=d3.svg.diagonal(),b=jc,c=a.projection;return a.projection=function(a){return arguments.length?c(kc(b=a)):b},a},d3.svg.mouse=d3.mouse,d3.svg.touches=d3.touches,d3.svg.symbol=function(){function a(a,d){return(xf.get(b.call(this,a,d))||nc)(c.call(this,a,d))}var b=mc,c=lc;return a.type=function(c){return arguments.length?(b=h(c),a):b},a.size=function(b){return arguments.length?(c=h(b),a):c},a};var xf=d3.map({circle:nc,cross:function(a){var b=Math.sqrt(a/5)/2;return"M"+-3*b+","+-b+"H"+-b+"V"+-3*b+"H"+b+"V"+-b+"H"+3*b+"V"+b+"H"+b+"V"+3*b+"H"+-b+"V"+b+"H"+-3*b+"Z"},diamond:function(a){var b=Math.sqrt(a/(2*zf)),c=b*zf;return"M0,"+-b+"L"+c+",0 0,"+b+" "+-c+",0Z"},square:function(a){var b=Math.sqrt(a)/2;return"M"+-b+","+-b+"L"+b+","+-b+" "+b+","+b+" "+-b+","+b+"Z"},"triangle-down":function(a){var b=Math.sqrt(a/yf),c=b*yf/2;return"M0,"+c+"L"+b+","+-c+" "+-b+","+-c+"Z"},"triangle-up":function(a){var b=Math.sqrt(a/yf),c=b*yf/2;return"M0,"+-c+"L"+b+","+c+" "+-b+","+c+"Z"}});d3.svg.symbolTypes=xf.keys();var yf=Math.sqrt(3),zf=Math.tan(30*Math.PI/180);d3.svg.axis=function(){function a(a){a.each(function(){var a,l=d3.select(this),m=null==j?c.ticks?c.ticks.apply(c,i):c.domain():j,n=null==b?c.tickFormat?c.tickFormat.apply(c,i):String:b,o=qc(c,m,k),p=l.selectAll(".minor").data(o,String),q=p.enter().insert("line","g").attr("class","tick minor").style("opacity",1e-6),r=d3.transition(p.exit()).style("opacity",1e-6).remove(),s=d3.transition(p).style("opacity",1),t=l.selectAll("g").data(m,String),u=t.enter().insert("g","path").style("opacity",1e-6),v=d3.transition(t.exit()).style("opacity",1e-6).remove(),w=d3.transition(t).style("opacity",1),x=nb(c),y=l.selectAll(".domain").data([0]),z=(y.enter().append("path").attr("class","domain"),d3.transition(y)),A=c.copy(),B=this.__chart__||A;this.__chart__=A,u.append("line").attr("class","tick"),u.append("text");var C=u.select("line"),D=w.select("line"),E=t.select("text").text(n),F=u.select("text"),G=w.select("text");switch(d){case"bottom":a=oc,q.attr("y2",f),s.attr("x2",0).attr("y2",f),C.attr("y2",e),F.attr("y",Math.max(e,0)+h),D.attr("x2",0).attr("y2",e),G.attr("x",0).attr("y",Math.max(e,0)+h),E.attr("dy",".71em").attr("text-anchor","middle"),z.attr("d","M"+x[0]+","+g+"V0H"+x[1]+"V"+g);break;case"top":a=oc,q.attr("y2",-f),s.attr("x2",0).attr("y2",-f),C.attr("y2",-e),F.attr("y",-(Math.max(e,0)+h)),D.attr("x2",0).attr("y2",-e),G.attr("x",0).attr("y",-(Math.max(e,0)+h)),E.attr("dy","0em").attr("text-anchor","middle"),z.attr("d","M"+x[0]+","+-g+"V0H"+x[1]+"V"+-g);break;case"left":a=pc,q.attr("x2",-f),s.attr("x2",-f).attr("y2",0),C.attr("x2",-e),F.attr("x",-(Math.max(e,0)+h)),D.attr("x2",-e).attr("y2",0),G.attr("x",-(Math.max(e,0)+h)).attr("y",0),E.attr("dy",".32em").attr("text-anchor","end"),z.attr("d","M"+-g+","+x[0]+"H0V"+x[1]+"H"+-g);break;case"right":a=pc,q.attr("x2",f),s.attr("x2",f).attr("y2",0),C.attr("x2",e),F.attr("x",Math.max(e,0)+h),D.attr("x2",e).attr("y2",0),G.attr("x",Math.max(e,0)+h).attr("y",0),E.attr("dy",".32em").attr("text-anchor","start"),z.attr("d","M"+g+","+x[0]+"H0V"+x[1]+"H"+g)}if(c.ticks)u.call(a,B),w.call(a,A),v.call(a,A),q.call(a,B),s.call(a,A),r.call(a,A);else{var H=A.rangeBand()/2,I=function(a){return A(a)+H};u.call(a,I),w.call(a,I)}})}var b,c=d3.scale.linear(),d="bottom",e=6,f=6,g=6,h=3,i=[10],j=null,k=0;return a.scale=function(b){return arguments.length?(c=b,a):c},a.orient=function(b){return arguments.length?(d=b,a):d},a.ticks=function(){return arguments.length?(i=arguments,a):i},a.tickValues=function(b){return arguments.length?(j=b,a):j},a.tickFormat=function(c){return arguments.length?(b=c,a):b},a.tickSize=function(b,c){if(!arguments.length)return e;var d=arguments.length-1;return e=+b,f=d>1?+c:e,g=d>0?+arguments[d]:e,a},a.tickPadding=function(b){return arguments.length?(h=+b,a):h},a.tickSubdivide=function(b){return arguments.length?(k=+b,a):k},a},d3.svg.brush=function(){function a(f){f.each(function(){var f,g=d3.select(this),k=g.selectAll(".background").data([0]),l=g.selectAll(".extent").data([0]),m=g.selectAll(".resize").data(j,String);g.style("pointer-events","all").on("mousedown.brush",e).on("touchstart.brush",e),k.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),l.enter().append("rect").attr("class","extent").style("cursor","move"),m.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return Af[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),m.style("display",a.empty()?"none":null),m.exit().remove(),h&&(f=nb(h),k.attr("x",f[0]).attr("width",f[1]-f[0]),c(g)),i&&(f=nb(i),k.attr("y",f[0]).attr("height",f[1]-f[0]),d(g)),b(g)})}function b(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+k[+/e$/.test(a)][0]+","+k[+/^s/.test(a)][1]+")"})}function c(a){a.select(".extent").attr("x",k[0][0]),a.selectAll(".extent,.n>rect,.s>rect").attr("width",k[1][0]-k[0][0])}function d(a){a.select(".extent").attr("y",k[0][1]),a.selectAll(".extent,.e>rect,.w>rect").attr("height",k[1][1]-k[0][1])}function e(){function e(){var a=d3.event.changedTouches;return a?d3.touches(r,a)[0]:d3.mouse(r)}function j(){32==d3.event.keyCode&&(y||(p=null,z[0]-=k[1][0],z[1]-=k[1][1],y=2),F())}function l(){32==d3.event.keyCode&&2==y&&(z[0]+=k[1][0],z[1]+=k[1][1],y=0,F())}function m(){var a=e(),f=!1;q&&(a[0]+=q[0],a[1]+=q[1]),y||(d3.event.altKey?(p||(p=[(k[0][0]+k[1][0])/2,(k[0][1]+k[1][1])/2]),z[0]=k[+(a[0]<p[0])][0],z[1]=k[+(a[1]<p[1])][1]):p=null),w&&n(a,h,0)&&(c(u),f=!0),x&&n(a,i,1)&&(d(u),f=!0),f&&(b(u),t({type:"brush",mode:y?"move":"resize"}))}function n(a,b,c){var d,e,g=nb(b),h=g[0],i=g[1],j=z[c],l=k[1][c]-k[0][c];return y&&(h-=j,i-=l+j),d=Math.max(h,Math.min(i,a[c])),y?e=(d+=j)+l:(p&&(j=Math.max(h,Math.min(i,2*p[c]-d))),d>j?(e=d,d=j):e=j),k[0][c]!==d||k[1][c]!==e?(f=null,k[0][c]=d,k[1][c]=e,!0):void 0}function o(){m(),u.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null),d3.select("body").style("cursor",null),A.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),t({type:"brushend"}),F()}var p,q,r=this,s=d3.select(d3.event.target),t=g.of(r,arguments),u=d3.select(r),v=s.datum(),w=!/^(n|s)$/.test(v)&&h,x=!/^(e|w)$/.test(v)&&i,y=s.classed("extent"),z=e(),A=d3.select(window).on("mousemove.brush",m).on("mouseup.brush",o).on("touchmove.brush",m).on("touchend.brush",o).on("keydown.brush",j).on("keyup.brush",l);if(y)z[0]=k[0][0]-z[0],z[1]=k[0][1]-z[1];else if(v){var B=+/w$/.test(v),C=+/^n/.test(v);q=[k[1-B][0]-z[0],k[1-C][1]-z[1]],z[0]=k[B][0],z[1]=k[C][1]}else d3.event.altKey&&(p=z.slice());u.style("pointer-events","none").selectAll(".resize").style("display",null),d3.select("body").style("cursor",s.style("cursor")),t({type:"brushstart"}),m(),F()}var f,g=H(a,"brushstart","brush","brushend"),h=null,i=null,j=Bf[0],k=[[0,0],[0,0]];return a.x=function(b){return arguments.length?(h=b,j=Bf[!h<<1|!i],a):h},a.y=function(b){return arguments.length?(i=b,j=Bf[!h<<1|!i],a):i},a.extent=function(b){var c,d,e,g,j;return arguments.length?(f=[[0,0],[0,0]],h&&(c=b[0],d=b[1],i&&(c=c[0],d=d[0]),f[0][0]=c,f[1][0]=d,h.invert&&(c=h(c),d=h(d)),c>d&&(j=c,c=d,d=j),k[0][0]=0|c,k[1][0]=0|d),i&&(e=b[0],g=b[1],h&&(e=e[1],g=g[1]),f[0][1]=e,f[1][1]=g,i.invert&&(e=i(e),g=i(g)),e>g&&(j=e,e=g,g=j),k[0][1]=0|e,k[1][1]=0|g),a):(b=f||k,h&&(c=b[0][0],d=b[1][0],f||(c=k[0][0],d=k[1][0],h.invert&&(c=h.invert(c),d=h.invert(d)),c>d&&(j=c,c=d,d=j))),i&&(e=b[0][1],g=b[1][1],f||(e=k[0][1],g=k[1][1],i.invert&&(e=i.invert(e),g=i.invert(g)),e>g&&(j=e,e=g,g=j))),h&&i?[[c,e],[d,g]]:h?[c,d]:i&&[e,g])},a.clear=function(){return f=null,k[0][0]=k[0][1]=k[1][0]=k[1][1]=0,a},a.empty=function(){return h&&k[0][0]===k[1][0]||i&&k[0][1]===k[1][1]},d3.rebind(a,g,"on")};var Af={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Bf=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];d3.behavior={},d3.behavior.drag=function(){function a(){this.on("mousedown.drag",b).on("touchstart.drag",b)}function b(){function a(){var a=h.parentNode,b=d3.event.changedTouches;return b?d3.touches(a,b)[0]:d3.mouse(a)}function b(){if(!h.parentNode)return e();var b=a(),c=b[0]-k[0],d=b[1]-k[1];l|=c|d,k=b,F(),i({type:"drag",x:b[0]+g[0],y:b[1]+g[1],dx:c,dy:d})}function e(){i({type:"dragend"}),l&&(F(),d3.event.target===j&&m.on("click.drag",f,!0)),m.on("mousemove.drag",null).on("touchmove.drag",null).on("mouseup.drag",null).on("touchend.drag",null)}function f(){F(),m.on("click.drag",null)}var g,h=this,i=c.of(h,arguments),j=d3.event.target,k=a(),l=0,m=d3.select(window).on("mousemove.drag",b).on("touchmove.drag",b).on("mouseup.drag",e,!0).on("touchend.drag",e,!0);d?(g=d.apply(h,arguments),g=[g.x-k[0],g.y-k[1]]):g=[0,0],F(),i({type:"dragstart"})}var c=H(a,"drag","dragstart","dragend"),d=null;return a.origin=function(b){return arguments.length?(d=b,a):d},d3.rebind(a,c,"on")},d3.behavior.zoom=function(){function a(){this.on("mousedown.zoom",g).on("mousewheel.zoom",h).on("mousemove.zoom",i).on("DOMMouseScroll.zoom",h).on("dblclick.zoom",j).on("touchstart.zoom",k).on("touchmove.zoom",l).on("touchend.zoom",k)}function b(a){return[(a[0]-t[0])/u,(a[1]-t[1])/u]}function c(a){return[a[0]*u+t[0],a[1]*u+t[1]]}function d(a){u=Math.max(v[0],Math.min(v[1],a))}function e(a,b){b=c(b),t[0]+=a[0]-b[0],t[1]+=a[1]-b[1]}function f(a){p&&p.domain(o.range().map(function(a){return(a-t[0])/u}).map(o.invert)),r&&r.domain(q.range().map(function(a){return(a-t[1])/u}).map(q.invert)),d3.event.preventDefault(),a({type:"zoom",scale:u,translate:t})}function g(){function a(){j=1,e(d3.mouse(g),l),f(h)}function c(){j&&F(),k.on("mousemove.zoom",null).on("mouseup.zoom",null),j&&d3.event.target===i&&k.on("click.zoom",d,!0)}function d(){F(),k.on("click.zoom",null)}var g=this,h=w.of(g,arguments),i=d3.event.target,j=0,k=d3.select(window).on("mousemove.zoom",a).on("mouseup.zoom",c),l=b(d3.mouse(g));window.focus(),F()}function h(){m||(m=b(d3.mouse(this))),d(Math.pow(2,.002*rc())*u),e(d3.mouse(this),m),f(w.of(this,arguments))}function i(){m=null}function j(){var a=d3.mouse(this),c=b(a);d(d3.event.shiftKey?u/2:2*u),e(a,c),f(w.of(this,arguments))}function k(){var a=d3.touches(this),c=Date.now();if(n=u,m={},a.forEach(function(a){m[a.identifier]=b(a)}),F(),1===a.length&&500>c-s){var g=a[0],h=b(a[0]);d(2*u),e(g,h),f(w.of(this,arguments))}s=c}function l(){var a=d3.touches(this),b=a[0],c=m[b.identifier];if(g=a[1]){var g,h=m[g.identifier];b=[(b[0]+g[0])/2,(b[1]+g[1])/2],c=[(c[0]+h[0])/2,(c[1]+h[1])/2],d(d3.event.scale*n)}e(b,c),f(w.of(this,arguments))}var m,n,o,p,q,r,s,t=[0,0],u=1,v=Df,w=H(a,"zoom");return a.translate=function(b){return arguments.length?(t=b.map(Number),a):t},a.scale=function(b){return arguments.length?(u=+b,a):u},a.scaleExtent=function(b){return arguments.length?(v=null==b?Df:b.map(Number),a):v},a.x=function(b){return arguments.length?(p=b,o=b.copy(),a):p},a.y=function(b){return arguments.length?(r=b,q=b.copy(),a):r},d3.rebind(a,w,"on")};var Cf,Df=[0,1/0];d3.layout={},d3.layout.bundle=function(){return function(a){for(var b=[],c=-1,d=a.length;++c<d;)b.push(sc(a[c]));return b}},d3.layout.chord=function(){function a(){var a,j,l,m,n,o={},p=[],q=d3.range(f),r=[];for(c=[],d=[],a=0,m=-1;++m<f;){for(j=0,n=-1;++n<f;)j+=e[m][n];p.push(j),r.push(d3.range(f)),a+=j}for(g&&q.sort(function(a,b){return g(p[a],p[b])}),h&&r.forEach(function(a,b){a.sort(function(a,c){return h(e[b][a],e[b][c])})}),a=(2*Math.PI-k*f)/a,j=0,m=-1;++m<f;){for(l=j,n=-1;++n<f;){var s=q[m],t=r[s][n],u=e[s][t],v=j,w=j+=u*a;o[s+"-"+t]={index:s,subindex:t,startAngle:v,endAngle:w,value:u}}d[s]={index:s,startAngle:l,endAngle:j,value:(j-l)/a},j+=k}for(m=-1;++m<f;)for(n=m-1;++n<f;){var x=o[m+"-"+n],y=o[n+"-"+m];(x.value||y.value)&&c.push(x.value<y.value?{source:y,target:x}:{source:x,target:y})}i&&b()}function b(){c.sort(function(a,b){return i((a.source.value+a.target.value)/2,(b.source.value+b.target.value)/2)})}var c,d,e,f,g,h,i,j={},k=0;return j.matrix=function(a){return arguments.length?(f=(e=a)&&e.length,c=d=null,j):e},j.padding=function(a){return arguments.length?(k=a,c=d=null,j):k},j.sortGroups=function(a){return arguments.length?(g=a,c=d=null,j):g},j.sortSubgroups=function(a){return arguments.length?(h=a,c=null,j):h},j.sortChords=function(a){return arguments.length?(i=a,c&&b(),j):i},j.chords=function(){return c||a(),c},j.groups=function(){return d||a(),d},j},d3.layout.force=function(){function a(a){return function(b,c,d,e){if(b.point!==a){var f=b.cx-a.x,g=b.cy-a.y,h=1/Math.sqrt(f*f+g*g);if(r>(e-c)*h){var i=b.charge*h*h;return a.px-=f*i,a.py-=g*i,!0}if(b.point&&isFinite(h)){var i=b.pointCharge*h*h;a.px-=f*i,a.py-=g*i}}return!b.charge}}function b(a){vc(Ff=a),Ef=j}var c,d,f,g,i,j={},k=d3.dispatch("start","tick","end"),l=[1,1],m=.9,n=Ac,o=Bc,p=-30,q=.1,r=.8,s=[],t=[];return j.tick=function(){if((d*=.99)<.005)return k.end({type:"end",alpha:d=0}),!0;var b,c,e,h,j,n,o,r,u,v=s.length,w=t.length;for(c=0;w>c;++c)e=t[c],h=e.source,j=e.target,r=j.x-h.x,u=j.y-h.y,(n=r*r+u*u)&&(n=d*g[c]*((n=Math.sqrt(n))-f[c])/n,r*=n,u*=n,j.x-=r*(o=h.weight/(j.weight+h.weight)),j.y-=u*o,h.x+=r*(o=1-o),h.y+=u*o);if((o=d*q)&&(r=l[0]/2,u=l[1]/2,c=-1,o))for(;++c<v;)e=s[c],e.x+=(r-e.x)*o,e.y+=(u-e.y)*o;if(p)for(zc(b=d3.geom.quadtree(s),d,i),c=-1;++c<v;)(e=s[c]).fixed||b.visit(a(e));for(c=-1;++c<v;)e=s[c],e.fixed?(e.x=e.px,e.y=e.py):(e.x-=(e.px-(e.px=e.x))*m,e.y-=(e.py-(e.py=e.y))*m);k.tick({type:"tick",alpha:d})},j.nodes=function(a){return arguments.length?(s=a,j):s},j.links=function(a){return arguments.length?(t=a,j):t},j.size=function(a){return arguments.length?(l=a,j):l},j.linkDistance=function(a){return arguments.length?(n=h(a),j):n},j.distance=j.linkDistance,j.linkStrength=function(a){return arguments.length?(o=h(a),j):o},j.friction=function(a){return arguments.length?(m=a,j):m},j.charge=function(a){return arguments.length?(p="function"==typeof a?a:+a,j):p},j.gravity=function(a){return arguments.length?(q=a,j):q},j.theta=function(a){return arguments.length?(r=a,j):r},j.alpha=function(a){return arguments.length?(d?d=a>0?a:0:a>0&&(k.start({type:"start",alpha:d=a}),d3.timer(j.tick)),j):d},j.start=function(){function a(a,d){for(var e,f=b(c),g=-1,h=f.length;++g<h;)if(!isNaN(e=f[g][a]))return e;return Math.random()*d}function b(){if(!e){for(e=[],d=0;k>d;++d)e[d]=[];for(d=0;m>d;++d){var a=t[d];e[a.source.index].push(a.target),e[a.target.index].push(a.source)}}return e[c]}var c,d,e,h,k=s.length,m=t.length,q=l[0],r=l[1];for(c=0;k>c;++c)(h=s[c]).index=c,h.weight=0;for(f=[],g=[],c=0;m>c;++c)h=t[c],"number"==typeof h.source&&(h.source=s[h.source]),"number"==typeof h.target&&(h.target=s[h.target]),f[c]=n.call(this,h,c),g[c]=o.call(this,h,c),++h.source.weight,++h.target.weight;for(c=0;k>c;++c)h=s[c],isNaN(h.x)&&(h.x=a("x",q)),isNaN(h.y)&&(h.y=a("y",r)),isNaN(h.px)&&(h.px=h.x),isNaN(h.py)&&(h.py=h.y);if(i=[],"function"==typeof p)for(c=0;k>c;++c)i[c]=+p.call(this,s[c],c);else for(c=0;k>c;++c)i[c]=p;return j.resume()},j.resume=function(){return j.alpha(.1)},j.stop=function(){return j.alpha(0)},j.drag=function(){c||(c=d3.behavior.drag().origin(e).on("dragstart",b).on("drag",yc).on("dragend",xc)),this.on("mouseover.force",vc).on("mouseout.force",wc).call(c)},d3.rebind(j,k,"on")};var Ef,Ff;d3.layout.partition=function(){function a(b,c,d,e){var f=b.children;if(b.x=c,b.y=b.depth*e,b.dx=d,b.dy=e,f&&(g=f.length)){var g,h,i,j=-1;for(d=b.value?d/b.value:0;++j<g;)a(h=f[j],c,i=h.value*d,e),c+=i}}function b(a){var c=a.children,d=0;if(c&&(e=c.length))for(var e,f=-1;++f<e;)d=Math.max(d,b(c[f]));return 1+d}function c(c,f){var g=d.call(this,c,f);return a(g[0],0,e[0],e[1]/b(g[0])),g}var d=d3.layout.hierarchy(),e=[1,1];return c.size=function(a){return arguments.length?(e=a,c):e},Nc(c,d)},d3.layout.pie=function(){function a(f){var g=f.map(function(c,d){return+b.call(a,c,d)}),h=+("function"==typeof d?d.apply(this,arguments):d),i=(("function"==typeof e?e.apply(this,arguments):e)-d)/d3.sum(g),j=d3.range(f.length);null!=c&&j.sort(c===Gf?function(a,b){return g[b]-g[a]}:function(a,b){return c(f[a],f[b])});var k=[];return j.forEach(function(a){var b;k[a]={data:f[a],value:b=g[a],startAngle:h,endAngle:h+=b*i}}),k}var b=Number,c=Gf,d=0,e=2*Math.PI;return a.value=function(c){return arguments.length?(b=c,a):b
},a.sort=function(b){return arguments.length?(c=b,a):c},a.startAngle=function(b){return arguments.length?(d=b,a):d},a.endAngle=function(b){return arguments.length?(e=b,a):e},a};var Gf={};d3.layout.stack=function(){function a(e,i){var j=e.map(function(c,d){return b.call(a,c,d)}),k=j.map(function(b){return b.map(function(b,c){return[g.call(a,b,c),h.call(a,b,c)]})}),l=c.call(a,k,i);j=d3.permute(j,l),k=d3.permute(k,l);var m,n,o,p=d.call(a,k,i),q=j.length,r=j[0].length;for(n=0;r>n;++n)for(f.call(a,j[0][n],o=p[n],k[0][n][1]),m=1;q>m;++m)f.call(a,j[m][n],o+=k[m-1][n][1],k[m][n][1]);return e}var b=e,c=Fc,d=Gc,f=Ec,g=Cc,h=Dc;return a.values=function(c){return arguments.length?(b=c,a):b},a.order=function(b){return arguments.length?(c="function"==typeof b?b:Hf.get(b)||Fc,a):c},a.offset=function(b){return arguments.length?(d="function"==typeof b?b:If.get(b)||Gc,a):d},a.x=function(b){return arguments.length?(g=b,a):g},a.y=function(b){return arguments.length?(h=b,a):h},a.out=function(b){return arguments.length?(f=b,a):f},a};var Hf=d3.map({"inside-out":function(a){var b,c,d=a.length,e=a.map(Hc),f=a.map(Ic),g=d3.range(d).sort(function(a,b){return e[a]-e[b]}),h=0,i=0,j=[],k=[];for(b=0;d>b;++b)c=g[b],i>h?(h+=f[c],j.push(c)):(i+=f[c],k.push(c));return k.reverse().concat(j)},reverse:function(a){return d3.range(a.length).reverse()},"default":Fc}),If=d3.map({silhouette:function(a){var b,c,d,e=a.length,f=a[0].length,g=[],h=0,i=[];for(c=0;f>c;++c){for(b=0,d=0;e>b;b++)d+=a[b][c][1];d>h&&(h=d),g.push(d)}for(c=0;f>c;++c)i[c]=(h-g[c])/2;return i},wiggle:function(a){var b,c,d,e,f,g,h,i,j,k=a.length,l=a[0],m=l.length,n=[];for(n[0]=i=j=0,c=1;m>c;++c){for(b=0,e=0;k>b;++b)e+=a[b][c][1];for(b=0,f=0,h=l[c][0]-l[c-1][0];k>b;++b){for(d=0,g=(a[b][c][1]-a[b][c-1][1])/(2*h);b>d;++d)g+=(a[d][c][1]-a[d][c-1][1])/h;f+=g*a[b][c][1]}n[c]=i-=e?f/e*h:0,j>i&&(j=i)}for(c=0;m>c;++c)n[c]-=j;return n},expand:function(a){var b,c,d,e=a.length,f=a[0].length,g=1/e,h=[];for(c=0;f>c;++c){for(b=0,d=0;e>b;b++)d+=a[b][c][1];if(d)for(b=0;e>b;b++)a[b][c][1]/=d;else for(b=0;e>b;b++)a[b][c][1]=g}for(c=0;f>c;++c)h[c]=0;return h},zero:Gc});d3.layout.histogram=function(){function a(a,f){for(var g,h,i=[],j=a.map(c,this),k=d.call(this,j,f),l=e.call(this,k,j,f),f=-1,m=j.length,n=l.length-1,o=b?1:1/m;++f<n;)g=i[f]=[],g.dx=l[f+1]-(g.x=l[f]),g.y=0;if(n>0)for(f=-1;++f<m;)h=j[f],h>=k[0]&&h<=k[1]&&(g=i[d3.bisect(l,h,1,n)-1],g.y+=o,g.push(a[f]));return i}var b=!0,c=Number,d=Mc,e=Kc;return a.value=function(b){return arguments.length?(c=b,a):c},a.range=function(b){return arguments.length?(d=h(b),a):d},a.bins=function(b){return arguments.length?(e="number"==typeof b?function(a){return Lc(a,b)}:h(b),a):e},a.frequency=function(c){return arguments.length?(b=!!c,a):b},a},d3.layout.hierarchy=function(){function a(b,g,h){var i=e.call(c,b,g),j=Jf?b:{data:b};if(j.depth=g,h.push(j),i&&(k=i.length)){for(var k,l,m=-1,n=j.children=[],o=0,p=g+1;++m<k;)l=a(i[m],p,h),l.parent=j,n.push(l),o+=l.value;d&&n.sort(d),f&&(j.value=o)}else f&&(j.value=+f.call(c,b,g)||0);return j}function b(a,d){var e=a.children,g=0;if(e&&(h=e.length))for(var h,i=-1,j=d+1;++i<h;)g+=b(e[i],j);else f&&(g=+f.call(c,Jf?a:a.data,d)||0);return f&&(a.value=g),g}function c(b){var c=[];return a(b,0,c),c}var d=Qc,e=Oc,f=Pc;return c.sort=function(a){return arguments.length?(d=a,c):d},c.children=function(a){return arguments.length?(e=a,c):e},c.value=function(a){return arguments.length?(f=a,c):f},c.revalue=function(a){return b(a,0),a},c};var Jf=!1;d3.layout.pack=function(){function a(a,d){var e=b.call(this,a,d),f=e[0];f.x=0,f.y=0,Zc(f);var g=c[0],h=c[1],i=1/Math.max(2*f.r/g,2*f.r/h);return $c(f,g/2,h/2,i),e}var b=d3.layout.hierarchy().sort(Sc),c=[1,1];return a.size=function(b){return arguments.length?(c=b,a):c},Nc(a,b)},d3.layout.cluster=function(){function a(a,e){var f,g=b.call(this,a,e),h=g[0],i=0;ld(h,function(a){var b=a.children;b&&b.length?(a.x=bd(b),a.y=ad(b)):(a.x=f?i+=c(a,f):0,a.y=0,f=a)});var j=cd(h),k=dd(h),l=j.x-c(j,k)/2,m=k.x+c(k,j)/2;return ld(h,function(a){a.x=(a.x-l)/(m-l)*d[0],a.y=(1-(h.y?a.y/h.y:1))*d[1]}),g}var b=d3.layout.hierarchy().sort(null).value(null),c=ed,d=[1,1];return a.separation=function(b){return arguments.length?(c=b,a):c},a.size=function(b){return arguments.length?(d=b,a):d},Nc(a,b)},d3.layout.tree=function(){function a(a,e){function f(a,b){var d=a.children,e=a._tree;if(d&&(g=d.length)){for(var g,i,j,k=d[0],l=k,m=-1;++m<g;)j=d[m],f(j,i),l=h(j,i,l),i=j;md(a);var n=.5*(k._tree.prelim+j._tree.prelim);b?(e.prelim=b._tree.prelim+c(a,b),e.mod=e.prelim-n):e.prelim=n}else b&&(e.prelim=b._tree.prelim+c(a,b))}function g(a,b){a.x=a._tree.prelim+b;var c=a.children;if(c&&(d=c.length)){var d,e=-1;for(b+=a._tree.mod;++e<d;)g(c[e],b)}}function h(a,b,d){if(b){for(var e,f=a,g=a,h=b,i=a.parent.children[0],j=f._tree.mod,k=g._tree.mod,l=h._tree.mod,m=i._tree.mod;h=gd(h),f=fd(f),h&&f;)i=fd(i),g=gd(g),g._tree.ancestor=a,e=h._tree.prelim+l-f._tree.prelim-j+c(h,f),e>0&&(nd(od(h,a,d),a,e),j+=e,k+=e),l+=h._tree.mod,j+=f._tree.mod,m+=i._tree.mod,k+=g._tree.mod;h&&!gd(g)&&(g._tree.thread=h,g._tree.mod+=l-k),f&&!fd(i)&&(i._tree.thread=f,i._tree.mod+=j-m,d=a)}return d}var i=b.call(this,a,e),j=i[0];ld(j,function(a,b){a._tree={ancestor:a,prelim:0,mod:0,change:0,shift:0,number:b?b._tree.number+1:0}}),f(j),g(j,-j._tree.prelim);var k=hd(j,jd),l=hd(j,id),m=hd(j,kd),n=k.x-c(k,l)/2,o=l.x+c(l,k)/2,p=m.depth||1;return ld(j,function(a){a.x=(a.x-n)/(o-n)*d[0],a.y=a.depth/p*d[1],delete a._tree}),i}var b=d3.layout.hierarchy().sort(null).value(null),c=ed,d=[1,1];return a.separation=function(b){return arguments.length?(c=b,a):c},a.size=function(b){return arguments.length?(d=b,a):d},Nc(a,b)},d3.layout.treemap=function(){function a(a,b){for(var c,d,e=-1,f=a.length;++e<f;)d=(c=a[e]).value*(0>b?0:b),c.area=isNaN(d)||0>=d?0:d}function b(c){var f=c.children;if(f&&f.length){var g,h,i,j=l(c),k=[],m=f.slice(),n=1/0,o=Math.min(j.dx,j.dy);for(a(m,j.dx*j.dy/c.value),k.area=0;(i=m.length)>0;)k.push(g=m[i-1]),k.area+=g.area,(h=d(k,o))<=n?(m.pop(),n=h):(k.area-=k.pop().area,e(k,o,j,!1),o=Math.min(j.dx,j.dy),k.length=k.area=0,n=1/0);k.length&&(e(k,o,j,!0),k.length=k.area=0),f.forEach(b)}}function c(b){var d=b.children;if(d&&d.length){var f,g=l(b),h=d.slice(),i=[];for(a(h,g.dx*g.dy/b.value),i.area=0;f=h.pop();)i.push(f),i.area+=f.area,null!=f.z&&(e(i,f.z?g.dx:g.dy,g,!h.length),i.length=i.area=0);d.forEach(c)}}function d(a,b){for(var c,d=a.area,e=0,f=1/0,g=-1,h=a.length;++g<h;)(c=a[g].area)&&(f>c&&(f=c),c>e&&(e=c));return d*=d,b*=b,d?Math.max(b*e*n/d,d/(b*f*n)):1/0}function e(a,b,c,d){var e,f=-1,g=a.length,h=c.x,j=c.y,k=b?i(a.area/b):0;if(b==c.dx){for((d||k>c.dy)&&(k=c.dy);++f<g;)e=a[f],e.x=h,e.y=j,e.dy=k,h+=e.dx=Math.min(c.x+c.dx-h,k?i(e.area/k):0);e.z=!0,e.dx+=c.x+c.dx-h,c.y+=k,c.dy-=k}else{for((d||k>c.dx)&&(k=c.dx);++f<g;)e=a[f],e.x=h,e.y=j,e.dx=k,j+=e.dy=Math.min(c.y+c.dy-j,k?i(e.area/k):0);e.z=!1,e.dy+=c.y+c.dy-j,c.x+=k,c.dx-=k}}function f(d){var e=g||h(d),f=e[0];return f.x=0,f.y=0,f.dx=j[0],f.dy=j[1],g&&h.revalue(f),a([f],f.dx*f.dy/f.value),(g?c:b)(f),m&&(g=e),e}var g,h=d3.layout.hierarchy(),i=Math.round,j=[1,1],k=null,l=pd,m=!1,n=.5*(1+Math.sqrt(5));return f.size=function(a){return arguments.length?(j=a,f):j},f.padding=function(a){function b(b){var c=a.call(f,b,b.depth);return null==c?pd(b):qd(b,"number"==typeof c?[c,c,c,c]:c)}function c(b){return qd(b,a)}if(!arguments.length)return k;var d;return l=null==(k=a)?pd:"function"==(d=typeof a)?b:"number"===d?(a=[a,a,a,a],c):c,f},f.round=function(a){return arguments.length?(i=a?Math.round:Number,f):i!=Number},f.sticky=function(a){return arguments.length?(m=a,g=null,f):m},f.ratio=function(a){return arguments.length?(n=a,f):n},Nc(f,h)},d3.csv=function(a,b){d3.text(a,"text/csv",function(a){b(a&&d3.csv.parse(a))})},d3.csv.parse=function(a){var b;return d3.csv.parseRows(a,function(a,c){if(c){for(var d={},e=-1,f=b.length;++e<f;)d[b[e]]=a[e];return d}return b=a,null})},d3.csv.parseRows=function(a,b){function c(){if(i.lastIndex>=a.length)return g;if(e)return e=!1,f;var b=i.lastIndex;if(34===a.charCodeAt(b)){for(var c=b;c++<a.length;)if(34===a.charCodeAt(c)){if(34!==a.charCodeAt(c+1))break;c++}i.lastIndex=c+2;var d=a.charCodeAt(c+1);return 13===d?(e=!0,10===a.charCodeAt(c+2)&&i.lastIndex++):10===d&&(e=!0),a.substring(b+1,c).replace(/""/g,'"')}var h=i.exec(a);return h?(e=44!==h[0].charCodeAt(0),a.substring(b,h.index)):(i.lastIndex=a.length,a.substring(b))}var d,e,f={},g={},h=[],i=/\r\n|[,\r\n]/g,j=0;for(i.lastIndex=0;(d=c())!==g;){for(var k=[];d!==f&&d!==g;)k.push(d),d=c();(!b||(k=b(k,j++)))&&h.push(k)}return h},d3.csv.format=function(a){return a.map(rd).join("\n")},d3.geo={};var Kf=Math.PI/180;d3.geo.azimuthal=function(){function a(a){var b,d=a[0]*Kf-c,j=a[1]*Kf,k=Math.cos(d),l=Math.sin(d),m=Math.cos(j),n=Math.sin(j),o="orthographic"!==g?f*n+e*m*k:null,p="stereographic"===g?1/(1+o):"gnomonic"===g?1/o:"equidistant"===g?(b=Math.acos(o),b?b/Math.sin(b):0):"equalarea"===g?Math.sqrt(2/(1+o)):1,q=p*m*l,r=p*(f*m*k-e*n);return[h*q+i[0],h*r+i[1]]}var b,c,d,e,f,g="orthographic",h=200,i=[480,250];return a.invert=function(a){var b=(a[0]-i[0])/h,d=(a[1]-i[1])/h,j=Math.sqrt(b*b+d*d),k="stereographic"===g?2*Math.atan(j):"gnomonic"===g?Math.atan(j):"equidistant"===g?j:"equalarea"===g?2*Math.asin(.5*j):Math.asin(j),l=Math.sin(k),m=Math.cos(k);return[(c+Math.atan2(b*l,j*e*m+d*f*l))/Kf,Math.asin(m*f-(j?d*l*e/j:0))/Kf]},a.mode=function(b){return arguments.length?(g=b+"",a):g},a.origin=function(g){return arguments.length?(b=g,c=b[0]*Kf,d=b[1]*Kf,e=Math.cos(d),f=Math.sin(d),a):b},a.scale=function(b){return arguments.length?(h=+b,a):h},a.translate=function(b){return arguments.length?(i=[+b[0],+b[1]],a):i},a.origin([0,0])},d3.geo.albers=function(){function a(a){var b=d*(Kf*a[0]-c),g=Math.sqrt(e-2*d*Math.sin(Kf*a[1]))/d;return[i*g*Math.sin(b)+j[0],i*(g*Math.cos(b)-f)+j[1]]}function b(){var b=Kf*h[0],i=Kf*h[1],j=Kf*g[1],k=Math.sin(b),l=Math.cos(b);return c=Kf*g[0],d=.5*(k+Math.sin(i)),e=l*l+2*d*k,f=Math.sqrt(e-2*d*Math.sin(j))/d,a}var c,d,e,f,g=[-98,38],h=[29.5,45.5],i=1e3,j=[480,250];return a.invert=function(a){var b=(a[0]-j[0])/i,g=(a[1]-j[1])/i,h=f+g,k=Math.atan2(b,h),l=Math.sqrt(b*b+h*h);return[(c+k/d)/Kf,Math.asin((e-l*l*d*d)/(2*d))/Kf]},a.origin=function(a){return arguments.length?(g=[+a[0],+a[1]],b()):g},a.parallels=function(a){return arguments.length?(h=[+a[0],+a[1]],b()):h},a.scale=function(b){return arguments.length?(i=+b,a):i},a.translate=function(b){return arguments.length?(j=[+b[0],+b[1]],a):j},b()},d3.geo.albersUsa=function(){function a(a){var f=a[0],g=a[1];return(g>50?c:-140>f?d:21>g?e:b)(a)}var b=d3.geo.albers(),c=d3.geo.albers().origin([-160,60]).parallels([55,65]),d=d3.geo.albers().origin([-160,20]).parallels([8,18]),e=d3.geo.albers().origin([-60,10]).parallels([8,18]);return a.scale=function(f){return arguments.length?(b.scale(f),c.scale(.6*f),d.scale(f),e.scale(1.5*f),a.translate(b.translate())):b.scale()},a.translate=function(f){if(!arguments.length)return b.translate();var g=b.scale()/1e3,h=f[0],i=f[1];return b.translate(f),c.translate([h-400*g,i+170*g]),d.translate([h-190*g,i+200*g]),e.translate([h+580*g,i+430*g]),a},a.scale(b.scale())},d3.geo.bonne=function(){function a(a){var h=a[0]*Kf-b,i=a[1]*Kf-c;if(d){var j=e+d-i,k=h*Math.cos(i)/j;h=j*Math.sin(k),i=j*Math.cos(k)-e}else h*=Math.cos(i),i*=-1;return[f*h+g[0],f*i+g[1]]}var b,c,d,e,f=200,g=[480,250];return a.invert=function(a){var c=(a[0]-g[0])/f,h=(a[1]-g[1])/f;if(d){var i=e+h,j=Math.sqrt(c*c+i*i);h=e+d-j,c=b+j*Math.atan2(c,i)/Math.cos(h)}else h*=-1,c/=Math.cos(h);return[c/Kf,h/Kf]},a.parallel=function(b){return arguments.length?(e=1/Math.tan(d=b*Kf),a):d/Kf},a.origin=function(d){return arguments.length?(b=d[0]*Kf,c=d[1]*Kf,a):[b/Kf,c/Kf]},a.scale=function(b){return arguments.length?(f=+b,a):f},a.translate=function(b){return arguments.length?(g=[+b[0],+b[1]],a):g},a.origin([0,0]).parallel(45)},d3.geo.equirectangular=function(){function a(a){var d=a[0]/360,e=-a[1]/360;return[b*d+c[0],b*e+c[1]]}var b=500,c=[480,250];return a.invert=function(a){var d=(a[0]-c[0])/b,e=(a[1]-c[1])/b;return[360*d,-360*e]},a.scale=function(c){return arguments.length?(b=+c,a):b},a.translate=function(b){return arguments.length?(c=[+b[0],+b[1]],a):c},a},d3.geo.mercator=function(){function a(a){var d=a[0]/360,e=-(Math.log(Math.tan(Math.PI/4+a[1]*Kf/2))/Kf)/360;return[b*d+c[0],b*Math.max(-.5,Math.min(.5,e))+c[1]]}var b=500,c=[480,250];return a.invert=function(a){var d=(a[0]-c[0])/b,e=(a[1]-c[1])/b;return[360*d,2*Math.atan(Math.exp(-360*e*Kf))/Kf-90]},a.scale=function(c){return arguments.length?(b=+c,a):b},a.translate=function(b){return arguments.length?(c=[+b[0],+b[1]],a):c},a},d3.geo.path=function(){function a(a){"function"==typeof f&&(g=ud(f.apply(this,arguments))),j(a);var b=i.length?i.join(""):null;return i=[],b}function b(a){return h(a).join(",")}function c(a){for(var b=e(a[0]),c=0,d=a.length;++c<d;)b-=e(a[c]);return b}function d(a){for(var b=d3.geom.polygon(a[0].map(h)),c=b.area(),d=b.centroid(0>c?(c*=-1,1):-1),e=d[0],f=d[1],g=c,i=0,j=a.length;++i<j;)b=d3.geom.polygon(a[i].map(h)),c=b.area(),d=b.centroid(0>c?(c*=-1,1):-1),e-=d[0],f-=d[1],g-=c;return[e,f,6*g]}function e(a){return Math.abs(d3.geom.polygon(a.map(h)).area())}var f=4.5,g=ud(f),h=d3.geo.albersUsa(),i=[],j=td({FeatureCollection:function(a){for(var b=a.features,c=-1,d=b.length;++c<d;)i.push(j(b[c].geometry))},Feature:function(a){j(a.geometry)},Point:function(a){i.push("M",b(a.coordinates),g)},MultiPoint:function(a){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)i.push("M",b(c[d]),g)},LineString:function(a){var c=a.coordinates,d=-1,e=c.length;for(i.push("M");++d<e;)i.push(b(c[d]),"L");i.pop()},MultiLineString:function(a){for(var c,d,e,f=a.coordinates,g=-1,h=f.length;++g<h;){for(c=f[g],d=-1,e=c.length,i.push("M");++d<e;)i.push(b(c[d]),"L");i.pop()}},Polygon:function(a){for(var c,d,e,f=a.coordinates,g=-1,h=f.length;++g<h;)if(c=f[g],d=-1,(e=c.length-1)>0){for(i.push("M");++d<e;)i.push(b(c[d]),"L");i[i.length-1]="Z"}},MultiPolygon:function(a){for(var c,d,e,f,g,h,j=a.coordinates,k=-1,l=j.length;++k<l;)for(c=j[k],d=-1,e=c.length;++d<e;)if(f=c[d],g=-1,(h=f.length-1)>0){for(i.push("M");++g<h;)i.push(b(f[g]),"L");i[i.length-1]="Z"}},GeometryCollection:function(a){for(var b=a.geometries,c=-1,d=b.length;++c<d;)i.push(j(b[c]))}}),k=a.area=td({FeatureCollection:function(a){for(var b=0,c=a.features,d=-1,e=c.length;++d<e;)b+=k(c[d]);return b},Feature:function(a){return k(a.geometry)},Polygon:function(a){return c(a.coordinates)},MultiPolygon:function(a){for(var b=0,d=a.coordinates,e=-1,f=d.length;++e<f;)b+=c(d[e]);return b},GeometryCollection:function(a){for(var b=0,c=a.geometries,d=-1,e=c.length;++d<e;)b+=k(c[d]);return b}},0),l=a.centroid=td({Feature:function(a){return l(a.geometry)},Polygon:function(a){var b=d(a.coordinates);return[b[0]/b[2],b[1]/b[2]]},MultiPolygon:function(a){for(var b,c=a.coordinates,e=0,f=0,g=0,h=-1,i=c.length;++h<i;)b=d(c[h]),e+=b[0],f+=b[1],g+=b[2];return[e/g,f/g]}});return a.projection=function(b){return h=b,a},a.pointRadius=function(b){return"function"==typeof b?f=b:(f=+b,g=ud(f)),a},a},d3.geo.bounds=function(a){var b=1/0,c=1/0,d=-1/0,e=-1/0;return vd(a,function(a,f){b>a&&(b=a),a>d&&(d=a),c>f&&(c=f),f>e&&(e=f)}),[[b,c],[d,e]]};var Lf={Feature:wd,FeatureCollection:xd,GeometryCollection:yd,LineString:zd,MultiLineString:Ad,MultiPoint:zd,MultiPolygon:Bd,Point:Cd,Polygon:Dd};d3.geo.circle=function(){function a(){}function b(a){return i.distance(a)<h}function c(a){for(var b,c,e,f,g,j=-1,k=a.length,l=[];++j<k;)g=i.distance(e=a[j]),h>g?(c&&l.push(Hd(c,e)((f-h)/(f-g))),l.push(e),b=c=null):(c=e,!b&&l.length&&(l.push(Hd(l[l.length-1],c)((h-f)/(g-f))),b=c)),f=g;return b=a[0],c=l[0],!c||e[0]!==b[0]||e[1]!==b[1]||e[0]===c[0]&&e[1]===c[1]||l.push(c),d(l)}function d(a){for(var b,c,d,e=0,f=a.length,g=f?[a[0]]:a,h=i.source();++e<f;)for(d=i.source(a[e-1])(a[e]).coordinates,b=0,c=d.length;++b<c;)g.push(d[b]);return i.source(h),g}var f=[0,0],g=89.99,h=g*Kf,i=d3.geo.greatArc().source(f).target(e);a.clip=function(a){return"function"==typeof f&&i.source(f.apply(this,arguments)),j(a)||null};var j=td({FeatureCollection:function(a){var b=a.features.map(j).filter(e);return b&&(a=Object.create(a),a.features=b,a)},Feature:function(a){var b=j(a.geometry);return b&&(a=Object.create(a),a.geometry=b,a)},Point:function(a){return b(a.coordinates)&&a},MultiPoint:function(a){var c=a.coordinates.filter(b);return c.length&&{type:a.type,coordinates:c}},LineString:function(a){var b=c(a.coordinates);return b.length&&(a=Object.create(a),a.coordinates=b,a)},MultiLineString:function(a){var b=a.coordinates.map(c).filter(function(a){return a.length});return b.length&&(a=Object.create(a),a.coordinates=b,a)},Polygon:function(a){var b=a.coordinates.map(c);return b[0].length&&(a=Object.create(a),a.coordinates=b,a)},MultiPolygon:function(a){var b=a.coordinates.map(function(a){return a.map(c)}).filter(function(a){return a[0].length});return b.length&&(a=Object.create(a),a.coordinates=b,a)},GeometryCollection:function(a){var b=a.geometries.map(j).filter(e);return b.length&&(a=Object.create(a),a.geometries=b,a)}});return a.origin=function(b){return arguments.length?(f=b,"function"!=typeof f&&i.source(f),a):f},a.angle=function(b){return arguments.length?(h=(g=+b)*Kf,a):g},d3.rebind(a,i,"precision")},d3.geo.greatArc=function(){function a(){for(var d=a.distance.apply(this,arguments),e=0,h=f/d,i=[b];(e+=h)<1;)i.push(g(e));return i.push(c),{type:"LineString",coordinates:i}}var b,c,d=Ed,e=Fd,f=6*Kf,g=Gd();return a.distance=function(){return"function"==typeof d&&g.source(b=d.apply(this,arguments)),"function"==typeof e&&g.target(c=e.apply(this,arguments)),g.distance()},a.source=function(c){return arguments.length?(d=c,"function"!=typeof d&&g.source(b=d),a):d},a.target=function(b){return arguments.length?(e=b,"function"!=typeof e&&g.target(c=e),a):e},a.precision=function(b){return arguments.length?(f=b*Kf,a):f/Kf},a},d3.geo.greatCircle=d3.geo.circle,d3.geom={},d3.geom.contour=function(a,b){var c=b||Id(a),d=[],e=c[0],f=c[1],g=0,h=0,i=0/0,j=0/0,k=0;do k=0,a(e-1,f-1)&&(k+=1),a(e,f-1)&&(k+=2),a(e-1,f)&&(k+=4),a(e,f)&&(k+=8),6===k?(g=-1===j?-1:1,h=0):9===k?(g=0,h=1===i?-1:1):(g=Mf[k],h=Nf[k]),g!=i&&h!=j&&(d.push([e,f]),i=g,j=h),e+=g,f+=h;while(c[0]!=e||c[1]!=f);return d};var Mf=[1,0,1,1,-1,0,-1,1,0,0,0,0,-1,0,-1,0/0],Nf=[0,-1,0,0,0,-1,0,0,1,-1,1,1,0,-1,0,0/0];d3.geom.hull=function(a){if(a.length<3)return[];var b,c,d,e,f,g,h,i,j,k,l=a.length,m=l-1,n=[],o=[],p=0;for(b=1;l>b;++b)a[b][1]<a[p][1]?p=b:a[b][1]==a[p][1]&&(p=a[b][0]<a[p][0]?b:p);for(b=0;l>b;++b)b!==p&&(e=a[b][1]-a[p][1],d=a[b][0]-a[p][0],n.push({angle:Math.atan2(e,d),index:b}));for(n.sort(function(a,b){return a.angle-b.angle}),j=n[0].angle,i=n[0].index,h=0,b=1;m>b;++b)c=n[b].index,j==n[b].angle?(d=a[i][0]-a[p][0],e=a[i][1]-a[p][1],f=a[c][0]-a[p][0],g=a[c][1]-a[p][1],d*d+e*e>=f*f+g*g?n[b].index=-1:(n[h].index=-1,j=n[b].angle,h=b,i=c)):(j=n[b].angle,h=b,i=c);for(o.push(p),b=0,c=0;2>b;++c)-1!==n[c].index&&(o.push(n[c].index),b++);for(k=o.length;m>c;++c)if(-1!==n[c].index){for(;!Jd(o[k-2],o[k-1],n[c].index,a);)--k;o[k++]=n[c].index}var q=[];for(b=0;k>b;++b)q.push(a[o[b]]);return q},d3.geom.polygon=function(a){return a.area=function(){for(var b=0,c=a.length,d=a[c-1][0]*a[0][1],e=a[c-1][1]*a[0][0];++b<c;)d+=a[b-1][0]*a[b][1],e+=a[b-1][1]*a[b][0];return.5*(e-d)},a.centroid=function(b){var c,d,e=-1,f=a.length,g=0,h=0,i=a[f-1];for(arguments.length||(b=-1/(6*a.area()));++e<f;)c=i,i=a[e],d=c[0]*i[1]-i[0]*c[1],g+=(c[0]+i[0])*d,h+=(c[1]+i[1])*d;return[g*b,h*b]},a.clip=function(b){for(var c,d,e,f,g,h,i=-1,j=a.length,k=a[j-1];++i<j;){for(c=b.slice(),b.length=0,f=a[i],g=c[(e=c.length)-1],d=-1;++d<e;)h=c[d],Kd(h,k,f)?(Kd(g,k,f)||b.push(Ld(g,h,k,f)),b.push(h)):Kd(g,k,f)&&b.push(Ld(g,h,k,f)),g=h;k=f}return b},a},d3.geom.voronoi=function(a){var b=a.map(function(){return[]});return Md(a,function(a){var c,d,e,f,g,h;1===a.a&&a.b>=0?(c=a.ep.r,d=a.ep.l):(c=a.ep.l,d=a.ep.r),1===a.a?(g=c?c.y:-1e6,e=a.c-a.b*g,h=d?d.y:1e6,f=a.c-a.b*h):(e=c?c.x:-1e6,g=a.c-a.a*e,f=d?d.x:1e6,h=a.c-a.a*f);var i=[e,g],j=[f,h];b[a.region.l.index].push(i,j),b[a.region.r.index].push(i,j)}),b.map(function(b,c){var d=a[c][0],e=a[c][1];return b.forEach(function(a){a.angle=Math.atan2(a[0]-d,a[1]-e)}),b.sort(function(a,b){return a.angle-b.angle}).filter(function(a,c){return!c||a.angle-b[c-1].angle>1e-10})})};var Of={l:"r",r:"l"};d3.geom.delaunay=function(a){var b=a.map(function(){return[]}),c=[];return Md(a,function(c){b[c.region.l.index].push(a[c.region.r.index])}),b.forEach(function(b,d){var e=a[d],f=e[0],g=e[1];b.forEach(function(a){a.angle=Math.atan2(a[0]-f,a[1]-g)}),b.sort(function(a,b){return a.angle-b.angle});for(var h=0,i=b.length-1;i>h;h++)c.push([e,b[h],b[h+1]])}),c},d3.geom.quadtree=function(a,b,c,d,e){function f(a,b,c,d,e,f){if(!isNaN(b.x)&&!isNaN(b.y))if(a.leaf){var h=a.point;h?Math.abs(h.x-b.x)+Math.abs(h.y-b.y)<.01?g(a,b,c,d,e,f):(a.point=null,g(a,h,c,d,e,f),g(a,b,c,d,e,f)):a.point=b}else g(a,b,c,d,e,f)}function g(a,b,c,d,e,g){var h=.5*(c+e),i=.5*(d+g),j=b.x>=h,k=b.y>=i,l=(k<<1)+j;a.leaf=!1,a=a.nodes[l]||(a.nodes[l]=Nd()),j?c=h:e=h,k?d=i:g=i,f(a,b,c,d,e,g)}var h,i=-1,j=a.length;if(j&&isNaN(a[0].x)&&(a=a.map(Pd)),arguments.length<5)if(3===arguments.length)e=d=c,c=b;else{for(b=c=1/0,d=e=-1/0;++i<j;)h=a[i],h.x<b&&(b=h.x),h.y<c&&(c=h.y),h.x>d&&(d=h.x),h.y>e&&(e=h.y);var k=d-b,l=e-c;k>l?e=c+k:d=b+l}var m=Nd();return m.add=function(a){f(m,a,b,c,d,e)},m.visit=function(a){Od(a,m,b,c,d,e)},a.forEach(m.add),m},d3.time={};var Pf=Date;Qd.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Qf.setUTCDate.apply(this._,arguments)},setDay:function(){Qf.setUTCDay.apply(this._,arguments)},setFullYear:function(){Qf.setUTCFullYear.apply(this._,arguments)},setHours:function(){Qf.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Qf.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Qf.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Qf.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Qf.setUTCSeconds.apply(this._,arguments)},setTime:function(){Qf.setTime.apply(this._,arguments)}};var Qf=Date.prototype;d3.time.format=function(a){function b(b){for(var d,e,f=[],g=-1,h=0;++g<c;)37==a.charCodeAt(g)&&(f.push(a.substring(h,g),(e=Vf[d=a.charAt(++g)])?e(b):d),h=g+1);return f.push(a.substring(h,g)),f.join("")}var c=a.length;return b.parse=function(b){var c={y:1900,m:0,d:1,H:0,M:0,S:0,L:0},d=Rd(c,a,b,0);if(d!=b.length)return null;"p"in c&&(c.H=c.H%12+12*c.p);var e=new Pf;return e.setFullYear(c.y,c.m,c.d),e.setHours(c.H,c.M,c.S,c.L),e},b.toString=function(){return a},b};var Rf=d3.format("02d"),Sf=d3.format("03d"),Tf=d3.format("04d"),Uf=d3.format("2d"),Vf={a:function(a){return Zf[a.getDay()].substring(0,3)},A:function(a){return Zf[a.getDay()]},b:function(a){return bg[a.getMonth()].substring(0,3)},B:function(a){return bg[a.getMonth()]},c:d3.time.format("%a %b %e %H:%M:%S %Y"),d:function(a){return Rf(a.getDate())},e:function(a){return Uf(a.getDate())},H:function(a){return Rf(a.getHours())},I:function(a){return Rf(a.getHours()%12||12)},j:function(a){return Sf(1+d3.time.dayOfYear(a))},L:function(a){return Sf(a.getMilliseconds())},m:function(a){return Rf(a.getMonth()+1)},M:function(a){return Rf(a.getMinutes())},p:function(a){return a.getHours()>=12?"PM":"AM"},S:function(a){return Rf(a.getSeconds())},U:function(a){return Rf(d3.time.sundayOfYear(a))},w:function(a){return a.getDay()},W:function(a){return Rf(d3.time.mondayOfYear(a))},x:d3.time.format("%m/%d/%y"),X:d3.time.format("%H:%M:%S"),y:function(a){return Rf(a.getFullYear()%100)},Y:function(a){return Tf(a.getFullYear()%1e4)},Z:he,"%":function(){return"%"}},Wf={a:Sd,A:Td,b:Ud,B:Vd,c:Wd,d:be,e:be,H:ce,I:ce,L:fe,m:ae,M:de,p:ge,S:ee,x:Xd,X:Yd,y:$d,Y:Zd},Xf=/^(?:sun|mon|tue|wed|thu|fri|sat)/i,Yf=/^(?:Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday)/i,Zf=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],$f=d3.map({jan:0,feb:1,mar:2,apr:3,may:4,jun:5,jul:6,aug:7,sep:8,oct:9,nov:10,dec:11}),_f=/^(?:January|February|March|April|May|June|July|August|September|October|November|December)/gi,ag=d3.map({january:0,february:1,march:2,april:3,may:4,june:5,july:6,august:7,september:8,october:9,november:10,december:11}),bg=["January","February","March","April","May","June","July","August","September","October","November","December"],cg=/\s*\d+/,dg=d3.map({am:0,pm:1});d3.time.format.utc=function(a){function b(a){try{Pf=Qd;var b=new Pf;return b._=a,c(b)}finally{Pf=Date}}var c=d3.time.format(a);return b.parse=function(a){try{Pf=Qd;var b=c.parse(a);return b&&b._}finally{Pf=Date}},b.toString=c.toString,b};var eg=d3.time.format.utc("%Y-%m-%dT%H:%M:%S.%LZ");d3.time.format.iso=Date.prototype.toISOString?ie:eg,ie.parse=function(a){var b=new Date(a);return isNaN(b)?null:b},ie.toString=eg.toString,d3.time.second=je(function(a){return new Pf(1e3*Math.floor(a/1e3))},function(a,b){a.setTime(a.getTime()+1e3*Math.floor(b))},function(a){return a.getSeconds()}),d3.time.seconds=d3.time.second.range,d3.time.seconds.utc=d3.time.second.utc.range,d3.time.minute=je(function(a){return new Pf(6e4*Math.floor(a/6e4))},function(a,b){a.setTime(a.getTime()+6e4*Math.floor(b))},function(a){return a.getMinutes()}),d3.time.minutes=d3.time.minute.range,d3.time.minutes.utc=d3.time.minute.utc.range,d3.time.hour=je(function(a){var b=a.getTimezoneOffset()/60;return new Pf(36e5*(Math.floor(a/36e5-b)+b))},function(a,b){a.setTime(a.getTime()+36e5*Math.floor(b))},function(a){return a.getHours()}),d3.time.hours=d3.time.hour.range,d3.time.hours.utc=d3.time.hour.utc.range,d3.time.day=je(function(a){return new Pf(a.getFullYear(),a.getMonth(),a.getDate())},function(a,b){a.setDate(a.getDate()+b)},function(a){return a.getDate()-1}),d3.time.days=d3.time.day.range,d3.time.days.utc=d3.time.day.utc.range,d3.time.dayOfYear=function(a){var b=d3.time.year(a);return Math.floor((a-b)/864e5-(a.getTimezoneOffset()-b.getTimezoneOffset())/1440)},Zf.forEach(function(a,b){a=a.toLowerCase(),b=7-b;var c=d3.time[a]=je(function(a){return(a=d3.time.day(a)).setDate(a.getDate()-(a.getDay()+b)%7),a},function(a,b){a.setDate(a.getDate()+7*Math.floor(b))},function(a){var c=d3.time.year(a).getDay();return Math.floor((d3.time.dayOfYear(a)+(c+b)%7)/7)-(c!==b)});d3.time[a+"s"]=c.range,d3.time[a+"s"].utc=c.utc.range,d3.time[a+"OfYear"]=function(a){var c=d3.time.year(a).getDay();return Math.floor((d3.time.dayOfYear(a)+(c+b)%7)/7)}}),d3.time.week=d3.time.sunday,d3.time.weeks=d3.time.sunday.range,d3.time.weeks.utc=d3.time.sunday.utc.range,d3.time.weekOfYear=d3.time.sundayOfYear,d3.time.month=je(function(a){return new Pf(a.getFullYear(),a.getMonth(),1)},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()}),d3.time.months=d3.time.month.range,d3.time.months.utc=d3.time.month.utc.range,d3.time.year=je(function(a){return new Pf(a.getFullYear(),0,1)},function(a,b){a.setFullYear(a.getFullYear()+b)},function(a){return a.getFullYear()}),d3.time.years=d3.time.year.range,d3.time.years.utc=d3.time.year.utc.range;var fg=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],gg=[[d3.time.second,1],[d3.time.second,5],[d3.time.second,15],[d3.time.second,30],[d3.time.minute,1],[d3.time.minute,5],[d3.time.minute,15],[d3.time.minute,30],[d3.time.hour,1],[d3.time.hour,3],[d3.time.hour,6],[d3.time.hour,12],[d3.time.day,1],[d3.time.day,2],[d3.time.week,1],[d3.time.month,1],[d3.time.month,3],[d3.time.year,1]],hg=[[d3.time.format("%Y"),function(){return!0}],[d3.time.format("%B"),function(a){return a.getMonth()}],[d3.time.format("%b %d"),function(a){return 1!=a.getDate()}],[d3.time.format("%a %d"),function(a){return a.getDay()&&1!=a.getDate()}],[d3.time.format("%I %p"),function(a){return a.getHours()}],[d3.time.format("%I:%M"),function(a){return a.getMinutes()}],[d3.time.format(":%S"),function(a){return a.getSeconds()}],[d3.time.format(".%L"),function(a){return a.getMilliseconds()}]],ig=d3.scale.linear(),jg=oe(hg);gg.year=function(a,b){return ig.domain(a.map(qe)).ticks(b).map(pe)},d3.time.scale=function(){return le(d3.scale.linear(),gg,jg)};var kg=gg.map(function(a){return[a[0].utc,a[1]]}),lg=[[d3.time.format.utc("%Y"),function(){return!0}],[d3.time.format.utc("%B"),function(a){return a.getUTCMonth()}],[d3.time.format.utc("%b %d"),function(a){return 1!=a.getUTCDate()}],[d3.time.format.utc("%a %d"),function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],[d3.time.format.utc("%I %p"),function(a){return a.getUTCHours()}],[d3.time.format.utc("%I:%M"),function(a){return a.getUTCMinutes()}],[d3.time.format.utc(":%S"),function(a){return a.getUTCSeconds()}],[d3.time.format.utc(".%L"),function(a){return a.getUTCMilliseconds()}]],mg=oe(lg);kg.year=function(a,b){return ig.domain(a.map(se)).ticks(b).map(re)},d3.time.scale.utc=function(){return le(d3.scale.linear(),kg,mg)}}();var LADS=LADS||{};LADS.Util=function(){"use strict";function a(a,b,c){var d,e,f,g=c.center_h||!1,h=c.center_v||!1,i=a,j=b;e=c.max_height?Math.min(c.height*j,c.max_height):c.height*j,f=c.max_width?Math.min(c.width*i,c.max_width):c.width*i;var k,l;return k=g?c.x_max_offset?.5*(i-f)+Math.min(c.x_offset*i,c.x_max_offset):.5*(i-f):c.x_max_offset?c.align_right?i-Math.min(c.x_offset*i,c.x_max_offset)-f:Math.min(c.x_offset*i,c.x_max_offset):c.x_offset*i,l=h?c.y_max_offset?.5*(j-e)+Math.min(c.y_offset*j,c.y_max_offset):.5*(j-e):c.y_max_offset?c.align_bottom?j-Math.min(c.y_offset*j,c.y_max_offset)-e:Math.min(c.y_offset*j,c.y_max_offset):c.y_offset*j,d={height:e,width:f,x:k,y:l}}function b(a,b,d,e){b.val(a),d&&b.focus(function(){b.val()===a&&b.val("").change()}),b.blur(function(){""===b.val()&&(b.val(a).change(),c("",".artButton",e))})}function c(a,b,c){$.each($(b),function(b,e){var f=$(e).data(),g=!1;$.each(f,function(b,e){-1===$.inArray(b,c)&&d(e,a)&&(g=!0)}),f.visible===!1&&(g=!1),g?$(e).show():$(e).hide()})}function d(a,b){return a?-1!==a.toLowerCase().indexOf(b.toLowerCase()):!0}function e(){}function f(){return{_timer:null,_queue:[],add:function(a,b,c){var d=function(a,b){b._timer=setTimeout(function(){a=b.add(),b._queue.length&&d(a,b)},a||2)};if(a)return this._queue.push([a,b,c]),void(1===this._queue.length&&d(c,this));var e=this._queue.shift();return e?(e[0].call(e[1]||window),e[2]):0},clear:function(){clearTimeout(this._timer),this._queue=[]}}}function g(a){return a=a.replace("http://",""),a=a.split(":")[0]}function h(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];a&&"function"==typeof a&&a.apply(null,b)}function i(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];return function(){a&&"function"==typeof a&&a.apply(null,b)}}function j(){var a=arguments;return function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];var d;if(a&&a.length)for(var e=0;e<a.length;e++)d=[a[e]].concat(b),h.apply(null,d)}}function k(a,b){return a&&a.indexOf?-1!==a.indexOf(b):!1}function l(a,b){for(var c=m(a),d=0;d<c.length;d++)if(c[d].childNodes[0].textContent===b){var e=c[d].childNodes[1].childNodes[0];return e?e:(c[d].childNodes[1].appendChild(a.createTextNode("")),c[d].childNodes[1].childNodes[0])}return null}function m(a){return a.getElementsByTagName("Metadata")[0].childNodes[0].childNodes[0].childNodes[1].childNodes[0].childNodes}function n(a){var b=document.createElement("div");return b.innerText=b.textContent=a,a=b.innerHTML}function o(a){return a?a.replace(/\n/g,"<br>").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\'/g,"&apos;").replace(/\"/g,"&quot;"):""}function p(a,b,c){var d=setInterval(function(){C($(a))&&($(a).fitText(b,c),clearInterval(d))
})}function q(a){var b=$(a),c=b.attr("src"),d=b.attr("id"),e=b.attr("class"),f=b.attr("style");$.get(c,function(a){var c=$(a).find("svg");return"undefined"!=typeof d&&(c=c.attr("id",d)),"undefined"!=typeof e&&(c=c.attr("class",e)),"undefined"!=typeof f&&(c=c.attr("style",f)),c=c.removeAttr("xmlns:a"),b.replaceWith(c),b})}function r(a,b,c,d){var e={position:"absolute","z-index":"50",height:"auto",width:"10%",left:"50%",top:"50%"};(c||d)&&(e.top=c,e.left=d);var f="0px",g="0px";b&&(e.width=b);var h=$(a).css("background-color"),i=h.substring(h.indexOf("(")+1,h.lastIndexOf(")")).split(/, \s*/),j="rgba("+i[0]+","+i[1]+","+i[2]+",0.5)";a.css({"background-color":j});u($(a),e,f,g,!1)}function s(a){var b=$(a).css("background-color"),c=b.substring(b.indexOf("(")+1,b.lastIndexOf(")")).split(/, \s*/),d="rgba("+c[0]+","+c[1]+","+c[2]+",1)";a.css({"background-color":d});var e=a.find(".progressCircle");t(e)}function t(a){a.remove(),a=null}function u(a,b,c,d,e){var f=$(document.createElement("img"));return f.addClass("progressCircle"),a.append(f),f.attr("src","images/icons/progress-circle.gif"),f.css(b||{position:"absolute",left:"5%","z-index":"50",height:"auto",bottom:"10%",width:"10%"}),e&&f.css({top:d-.5*f.height(),left:c-.5*f.width()}),f}function v(a){return a*(window.innerWidth/1920)+"%"}function w(a){var b,c=a.childNodes;for(b in c)c[b].__data__=a.__data__,w(c[b])}function x(a){var b=a.split("."),c=window,d="",e=0;"LADS"===b[0]?(LADS=LADS||{},c=LADS,e=1):"Worktop"===b[0]&&(Worktop=Worktop||{},c=Worktop,e=1);for(var f=e,g=b.length;g>f;f++)d=b[f],c[d]=c[d]||{},c=c[d];return c}function y(a,b){return $.extend({},b,a)}function z(a,b,c,d,e){var f=$(document.createElement("div")),g=$("#"+M)||$("body");e=e||.1;var h=b;if(f.css({position:"absolute",visibility:"hidden",height:"auto",width:"auto","font-size":b+"em"}),f.text(a),g.append(f),f.width()>=c||f.height()>=d)return b+"em";for(;f.width()<c&&f.height()<d;)h+=e,f.css("font-size",h+"em");return f.remove(),h+"em"}function A(){var a=new Windows.UI.Input.GestureRecognizer;return a.gestureSettings=Windows.UI.Input.GestureSettings.manipulationRotate|Windows.UI.Input.GestureSettings.manipulationTranslateX|Windows.UI.Input.GestureSettings.manipulationTranslateY|Windows.UI.Input.GestureSettings.manipulationScale|Windows.UI.Input.GestureSettings.manipulationRotateInertia|Windows.UI.Input.GestureSettings.manipulationScaleInertia|Windows.UI.Input.GestureSettings.manipulationTranslateInertia|Windows.UI.Input.GestureSettings.hold|Windows.UI.Input.GestureSettings.holdWithMouse|Windows.UI.Input.GestureSettings.rightTap|Windows.UI.Input.GestureSettings.tap,a}function B(a){var b=new XMLHttpRequest;b.open("GET",a,!1),b.send(null);return b}function C(a){for(a=$(a)[0];a;){if(a===document)return!0;a=a.parentNode}return!1}function D(a){a.attr("ondragstart","return false")}function E(a,b){return{_minComp:a,_maxComp:b,_maxheap:new binaryHeap(b),_minheap:new binaryHeap(a),add:function(a){return this._maxheap.push(a),this._minheap.push(a),a},getMin:function(){return this._minheap.peek()},getMax:function(){return this._maxheap.peek()},removeMin:function(){return this._minheap.pop()},removeMax:function(){return this._maxheap.pop()},remove:function(a){this._maxheap.remove(a),this._minheap.remove(a)},size:function(){return this._maxheap.size()},clear:function(){this._maxheap=new binaryHeap(this._maxComp),this._minheap=new binaryHeap(this._minComp)},find:function(a){return this._maxheap.find(a)}}}function F(a,b,c,d){function e(a){var c;if(a.gesture){l(a,!0);var e={x:a.gesture.center.pageX-t.offset().left,y:a.gesture.center.pageY-t.offset().top},f=a.gesture.rotation;c=u.x||0===u.x?{x:a.gesture.center.pageX-u.x,y:a.gesture.center.pageY-u.y}:{x:a.gesture.deltaX,y:a.gesture.deltaY};var g=a.gesture.scale-w;w=a.gesture.scale,u.x=a.gesture.center.pageX,u.y=a.gesture.center.pageY,n=a,"function"==typeof b.onManipulate&&b.onManipulate({pivot:e,translation:c,rotation:f,scale:1+g},a),clearTimeout(o),o=setTimeout(function(){var b=l(a);"mouse"===a.gesture.pointerType||d||i(30*b.vx,30*b.vy,null,v)},5)}else{l(a,!0);var e={x:a.pageX-t.offset().left,y:a.pageY-t.offset().top};c={x:a.pageX-u.x,y:a.pageY-u.y},console.log("translation.y = "+c.y);var g=a.gesture.scale-w;w=a.gesture.scale,u.x=a.pageX,u.y=a.pageY,n=a,"function"==typeof b.onManipulate&&b.onManipulate({pivot:e,translation:c,rotation:f,scale:1+g},a),clearTimeout(o),o=setTimeout(function(){var b=l(a);"mouse"===a.gesture.pointerType||d||i(30*b.vx,30*b.vy,null,v)},5)}}function f(a){var c,d={x:a.gesture.center.pageX-t.offset().left,y:a.gesture.center.pageY-t.offset().top},e=a.gesture.scale-w,f=a.gesture.rotation;c=u.x||0===u.x?{x:a.gesture.center.pageX-u.x,y:a.gesture.center.pageY-u.y}:{x:0,y:0},u.x=a.gesture.center.pageX,u.y=a.gesture.center.pageY,l(a,!0),e!==w&&"function"==typeof b.onScroll&&b.onScroll(1+e,d),"function"==typeof b.onManipulate&&b.onManipulate({pivot:d,translation:c,rotation:f,scale:1},a),w=a.gesture.scale}function g(a){w=1,s=!0,p=a.gesture.center,n=null,r=a.srcElement,v++,k(),clearTimeout(o)}function h(a){e(a)}function i(a,c,d,e){if(n&&v===e&&!(Math.abs(a)<=4&&Math.abs(c)<=4)){var f=t.offset();d=d||5;var g={x:n.gesture.center.pageX-f.left,y:n.gesture.center.pageY-f.top},h=0,j={x:a,y:c},k=1;"function"==typeof b.onManipulate&&b.onManipulate({pivot:g,translation:j,rotation:h,scale:k},n),o=setTimeout(function(){i(.95*a,.95*c,d,e)},d)}}function j(a){s=!1,u={};var c=l(a);"mouse"!==a.gesture.pointerType||d||i(30*c.vx,30*c.vy,null,v),"function"==typeof b.onRelease&&b.onRelease(a)}function k(){x=null,y=null,z=0,A=0,B=null}function l(a,b){if(x)a.gesture.deltaX>B.gesture.deltaX&&1!==x.currentDir?(x=a,x.currentDir=1):a.gesture.deltaX<B.gesture.deltaX&&-1!==x.currentDir&&(x=a,x.currentDir=-1);else if(x=a,x.currentDir=x.gesture.deltaX/Math.abs(x.gesture.deltaX)||0,!B)return B=a,{vx:0,vy:0};return y?a.gesture.deltaY>B.gesture.deltaY&&1!==y.currentDir?(y=a,y.currentDir=1):a.gesture.deltaY<B.gesture.deltaY&&-1!==y.currentDir&&(y=a,y.currentDir=-1):(y=a,y.currentDir=y.gesture.deltaY/Math.abs(y.gesture.deltaY)||0),B=a,b?void 0:{vx:(a.gesture.deltaX-x.gesture.deltaX)/(a.gesture.timeStamp-x.gesture.timeStamp)||0,vy:(a.gesture.deltaY-y.gesture.deltaY)/(a.gesture.timeStamp-y.gesture.timeStamp)||0}}function m(a){var c={x:a.x-t.offset().left,y:a.y-t.offset().top},d=a.wheelDelta;d=a.wheelDelta<0?1/1.1:1.1,a.cancelBubble=!0,"function"==typeof b.onScroll&&b.onScroll(d,c)}var n,o,p,q=new Hammer(a,{hold_threshold:3,drag_min_distance:9,drag_max_touches:10,hold_timeout:600,tap_max_distance:15,doubletap_distance:17,doubletap_interval:200,swipe:!1}),r=null,s=!1,t=$(a),u={},v=0,w=1;!function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=Date.now(),d=Math.max(0,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);return a=c+d,e}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}();var x,y,z,A,B;q.on("touch",g),q.on("drag",function(a){h(a)}),q.on("pinch",f),q.on("release",j),a.onmousewheel=m;var C,D;"function"==typeof b.onDoubleTapped&&(C=function(c){c.gesture.srcEvent.button>0||2==c.gesture.srcEvent.buttons||(D={},D.position={},D.position.x=c.gesture.center.pageX-$(a).offset().left,D.position.y=c.gesture.center.pageY-$(a).offset().top,b.onDoubleTapped(D))},q.on("doubletap",C));var E=null;"function"==typeof b.onTapped&&(E=function(c){return c.gesture.srcEvent.button>0?(c.stopPropagation(),D={},D.gesture=c.gesture,D.position={},D.position.x=c.gesture.center.pageX-$(a).offset().left,D.position.y=c.gesture.center.pageY-$(a).offset().top,void(b.onTappedRight&&b.onTappedRight(D))):(D={},D.position={},D.button=c.button,D.gesture=c.gesture,D.position.x=c.gesture.center.pageX-$(a).offset().left,D.position.y=c.gesture.center.pageY-$(a).offset().top,void b.onTapped(D))},q.on("tap",E));var F=null;"function"==typeof b.onRelease&&(F=function(c){D={},D.position={},D.position.x=c.gesture.center.pageX-$(a).offset().left,D.position.y=c.gesture.center.pageY-$(a).offset().top,b.onRelease(D)},q.on("release",F));var G=null,H=null,I=!1;return"function"==typeof b.onTappedRight&&(G=function(a){a.stopPropagation(),I=!0,D={},D.gesture=a.gesture,D.position={},D.position.x=a.gesture.center.pageX-t.offset().left,D.position.y=a.gesture.center.pageY-t.offset().top,b.onTappedRight(D)},H=function(a){a.stopPropagation(),D={},D.button=a.button,D.gesture=a.gesture,D.position={},D.position.x=a.pageX-t.offset().left,D.position.y=a.pageY-t.offset().top,b.onTappedRight(D)},a.addEventListener("MSPointerDown",function(a){return console.log(a),I?(console.log("STOPPING CLICK"),a.stopPropagation(),void setTimeout(function(){I=!1},1)):void 0},!0),a.addEventListener("mouseup",function(a){return console.log("CLICK"),I?(console.log("STOPPING CLICK"),a.stopPropagation(),void setTimeout(function(){I=!1},1)):void(2===a.button&&H(a))},!0),q.on("hold",G)),{cancelAccel:function(){v++,clearTimeout(o)}}}function G(a,b,c){function d(a){if(a.delta){var c={x:a.position.x,y:a.position.y},d=a.delta.rotation/180*Math.PI,e={x:a.delta.translation.x,y:a.delta.translation.y},f=a.delta.scale;"function"==typeof b.onManipulate&&b.onManipulate({pivot:c,translation:e,rotation:d,scale:f})}}function e(b){l=b.srcElement;var c=b.currentPoint;try{m.processDownEvent(c),a.msSetPointerCapture(b.pointerId),b.cancelBubble=!0}catch(d){{d.message}}}function f(b){if(!c||!(b.x<0||b.y<0||b.x>$(a).width()||b.y>$(a).height())){var d=b.intermediatePoints;try{m.processMoveEvents(d)}catch(e){{e.message}}}}function g(a){var b=a.currentPoint;try{m.processUpEvent(b)}catch(c){{c.message}}}function h(a){var c={x:a.x,y:a.y},d=a.wheelDelta;d=a.wheelDelta<0?1/1.1:1.1,a.cancelBubble=!0,"function"==typeof b.onScroll&&b.onScroll(d,c)}function i(a){n=!0,d(a)}function j(a){d(a)}function k(a){n=!1,d(a)}var l=null,m=LADS.Util.getGestureRecognizer(),n=!1;a.addEventListener("MSPointerDown",e,!1),a.addEventListener("MSPointerMove",f,!1),a.addEventListener("MSPointerUp",g,!1),a.onmousewheel=h,m.addEventListener("manipulationstarted",i),m.addEventListener("manipulationupdated",j),m.addEventListener("manipulationcompleted",k);var o=null;"function"==typeof b.onTapped&&(o=function(c){var d={};d.position={},d.position.x=c.position.x<50?$(l).offset().left-$(a).offset().left+c.position.x:c.position.x,d.position.y=$(l).offset().top-$(a).offset().top+c.position.y,b.onTapped(d)},m.addEventListener("tapped",o));var p=null;return"function"==typeof b.onTappedRight&&(rightTapHandler=function(a){var c={};c.position={},c.position.x=a.position.x,c.position.y=a.position.y,b.onTappedRight(c)},m.addEventListener("righttapped",p)),m}function H(a){return a?$("<div />").text(escape(a)).html():""}function I(a){return a?unescape($("<div />").html(a).text()):""}function J(a,b){return function(c){var d="";switch(c.target.error.code){case c.target.error.MEDIA_ERR_ABORTED:d="Video playback aborted. Please see FAQs on the TAG website.";break;case c.target.error.MEDIA_ERR_NETWORK:d="Network error during video upload. Please see FAQs on the TAG website.";break;case c.target.error.MEDIA_ERR_DECODE:d="Error decoding video. Please see FAQs on the TAG website.";break;case c.target.error.MEDIA_ERR_SRC_NOT_SUPPORTED:d="Either the video format is not supported or a network or server error occurred. Please see FAQs on the TAG website.";break;default:d="Error: please see FAQs on the TAG website."}console.log("video error: "+d);var e=$(document.createElement("div"));e.css({position:"absolute",width:"80%",left:"10%",top:"50%",color:"white","text-align":"center","font-size":LADS.Util.getMaxFontSizeEM(d,2,.8*b.width(),.2*b.height(),.1)}),e.text(d),a.hide(),b.append(e),a[0].onerror=function(){}}}function K(a){var b;return $.ajax({async:!1,cache:!1,url:"html/"+a,success:function(a){b=$(a)},error:function(c){console.log("url = "+htmlDir+a),console.log("error: "+c.statusText),b=null},dataType:"html"}),b}var L=new Array("#","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"),M="tagRoot";return{makeNamespace:x,setToDefaults:y,getGestureRecognizer:A,makeXmlRequest:B,makeManipulatable:F,makeManipulatableWin:G,alphabet:L,applyD3DataRec:w,elementInDocument:C,fitText:p,encodeText:n,disableDrag:D,getFontSize:v,showLoading:r,hideLoading:s,removeProgressCircle:t,showProgressCircle:u,createQueue:f,createDoubleEndedPQ:E,replaceSVGImg:q,getMaxFontSizeEM:z,encodeXML:o,constrainAndPosition:a,getFieldValueFromMetadata:l,formatAddress:g,safeCall:h,safeCallHandler:i,multiFnHandler:j,contains:k,defaultVal:b,searchData:c,searchString:d,saveThumbnail:e,htmlEntityEncode:H,htmlEntityDecode:I,videoErrorHandler:J,getHtmlAjax:K}}(),LADS.Util.UI=function(){"use strict";function a(){}function b(a){var b,c,e,f,g,h=a.x,i=a.fadeIn,j=a.fadeOut,k=a.mainLength,l=(a.fadeColor||"#ff7700",a.mainColor||"#81ad62"),m=a.height||"100%",n=a.container;return b=$(document.createElement("div")),b.addClass("inRect"),b.css({position:"absolute",left:h+"px",top:"0px",width:i+"px",height:m,"border-left":"1px solid black","border-right":"1px solid black",background:"linear-gradient(to right,white, "+l+")"}),c=$(document.createElement("div")),c.addClass("mainRect"),c.css({position:"absolute",left:h+i+"px",top:"0px",width:k+"px",height:m,"background-color":l}),e=$(document.createElement("div")),e.addClass("outRect"),e.css({position:"absolute",left:h+i+k+"px",top:"0px",width:j+"px",height:m,"border-left":"1px solid black","border-right":"1px solid black",background:"linear-gradient(to right, "+l+",white)"}),f=d(h,48,15,5,"#000000","#ffffff"),f.addClass("inHandle"),g=d(h+k+i+j,48,15,5,"#000000","#ffffff"),g.addClass("outHandle"),n&&n.append(c).append(b).append(e).append(f).append(g),{inRect:b,mainRect:c,outRect:e,inHandle:f,outHandle:g}}function c(a){var b=a.x,c=a.y||48,f=a.container,g=e(b);g.addClass("keyframeLine");var h=d(b,c);h.addClass("keyframeCirc");var i=d(b,c,17,0,"#ff0000","#ffffff");return g.css("z-index",2),h.css("z-index",3),i.css("z-index",3),i.addClass("keyframeInnerCirc"),f&&f.append(g),f&&f.append(h),f&&f.append(i),{line:g,circ:h,innerCirc:i}}function d(a,b,c,d,e,f){var g=$(document.createElement("div"));return c=c||21,d=0===d||d?d:5,e=e||"#296b2f",f=f||"#ffffff",g.css({border:d+"px solid "+e,"-webkit-border-radius":2*c+"px","-moz-border-radius":2*c+"px","border-radius":2*c+"px",width:2*c+"px",height:2*c+"px","background-color":f,position:"absolute",left:a-c-d+"px",top:b-c-d+"px"}),g}function e(a,b,c){var d=$(document.createElement("div"));return b=b||3,c=c||"#296b2f",d.css({width:b+"px",height:"100%","background-color":c,position:"absolute",left:a-b/2+"px",top:"0px"}),d}function f(){function a(){var a=g.val();if("tag"===a){var b=$(document.createElement("img"));return b.attr("src","images/unicorn.jpg"),b.css({width:"100%",height:"100%","z-index":2147483647,display:"none",position:"absolute"}),c.append(b),b.fadeIn(500),void setTimeout(function(){$("img").attr("src","images/unicorn.jpg"),$(".background").css("background-image",'url("images/unicorn.jpg")'),b.fadeOut(500,function(){b.remove()})},5e3)}"tagtest"===a?a="tagtestserver.cloudapp.net":"taglive"===a?a="browntagserver.com":"taglocal"===a&&(a="10.116.71.58"),l.hide(),j.hide(),k.html("Connecting..."),k.show(),LADS.Worktop.Database.changeServer(a,!1,function(){LADS.Layout.StartPage(null,function(a){LADS.Util.UI.slidePageRight(a)})},function(){l.show(),j.show(),k.html("Could not connet to the specified address. Please try again."),k.show()})}var b=$(document.createElement("div")),c=$("#"+H)||$("body");b.attr("id","serverDialogOverlay"),b.css({display:"block",position:"absolute",top:0,left:0,width:"100%",height:"100%","background-color":"rgba(0,0,0,0.6)","z-index":1e9+5});var d=$(document.createElement("div"));d.attr("id","serverDialog");var e=LADS.Util.constrainAndPosition($(c).width(),$(c).height(),{center_h:!0,center_v:!0,width:.5,height:.35,max_width:560,max_height:230});d.css({position:"absolute",left:e.x+"px",top:e.y+"px",width:e.width+"px",height:e.height+"px",border:"3px double white","background-color":"black"}),b.append(d);var f=$(document.createElement("div"));f.attr("id","dialogTitle"),f.css({color:"white",width:"80%",height:"15%",left:"10%",top:"12.5%","font-size":"1.25em",position:"relative","text-align":"center"}),f.text("TAG Server Address:"),d.append(f);var g=$(document.createElement("input"));g.attr("id","serverDialogInput"),g.css({display:"block",margin:"auto","margin-bottom":"1%",width:"60%",position:"relative",top:"15%"}),g.val(localStorage.ip),g.focus(function(){g.select()}),d.append(g),g.on("keydown",function(b){13===b.which&&a()});var h=$(document.createElement("div"));h.css({"margin-top":"7%",color:"white","margin-left":"10%"}),h.html("Contact us for server setup at <a href='mailto:brown.touchartgallery@outlook.com'>brown.touchartgallery@outlook.com</a>."),d.append(h);var i=$(document.createElement("div"));i.css({"margin-top":"5%"}),d.append(i);var j=$(document.createElement("button"));j.css({padding:"1%",border:"1px solid white",width:"auto",position:"relative","margin-top":"1%","float":"left","margin-left":"7%"}),j.text("Save");var k=$(document.createElement("div"));k.attr("id","serverErrorMessage"),k.css({color:"white","margin-bottom":"10px",left:"10%",width:"80%","text-align":"center",bottom:"30%",position:"absolute"}),k.html("Could not connet to the specified address. Please try again."),i.append(k),k.hide();var l=$(document.createElement("button"));l.css({padding:"1%",border:"1px solid white",width:"auto",position:"relative","margin-top":"1%","float":"right","margin-right":"7%"}),l.text("Cancel"),l.attr("type","button"),i.append(l),i.append(j),l.click(function(){$("#serverDialogOverlay").remove()}),j.on("click",a);var m=$(document.createElement("img"));m.css({width:"20px",height:"auto",display:"none","margin-right":"3%","margin-top":"2.5%","float":"right"}),m.attr("src","images/icons/progress-circle.gif");var n=$(document.createElement("div"));n.attr("id","serverPasswordErrorMessage"),n.css({color:"white","font-size":"1.25em","margin-bottom":"10px"}),n.html("Invalid authoring password entered. Please try again."),n.hide(),c.append(b),g.focus()}function g(a,b){function c(){var c="function"==typeof a?a():a,d="function"==typeof b?b():b;LADS.Worktop.Database.createFeedback($(k).val(),c,d),$(e).css({display:"none"}),$(k).val("");var g=LADS.Util.UI.popUpMessage(null,"Your feedback has been submitted, thank you for your feedback.",null,null,null,!0);f.append(g),$(g).css("z-index",1e6),$(g).show()}function d(){$(k).val(""),$(e).css({display:"none"})}var e=$(document.createElement("div")),f=$("#"+H)||$("body");$(e).attr("id","dialogOverlay"),$(e).css({display:"none",position:"absolute",top:0,left:0,width:"100%",height:"100%","background-color":"rgba(0,0,0,0.6)","z-index":1e7});var g=$(document.createElement("div"));$(g).addClass("feedbackBox");var h=LADS.Util.constrainAndPosition($(window).width(),$(window).height(),{center_h:!0,center_v:!0,width:.5,height:.35,max_width:560,max_height:210}),i=.5*($("#tagRoot").width()-h.width);$(g).css({position:"absolute",left:i+"px",top:h.y+"px",width:h.width+"px",height:h.height+"px",border:"3px double white","background-color":"black"}),$(e).append(g),$(e).click(d),$(g).click(function(a){a.stopPropagation()});var j=$(document.createElement("label"));$(j).addClass("feedbackLabel"),$(j).text("Send Feedback"),$(j).css({left:"9%",top:"12.5%",width:"80%",height:"15%","text-align":"left",color:"white",position:"absolute"});var k=$(document.createElement("textarea"));$(k).addClass("commentBox"),$(k).css({"border-color":"gray",color:"gray",position:"relative","min-width":0,left:"9%",top:"7%",width:"77%",height:"30%"}),$(k).attr("placeholder","Questions or Comments");var l=$(document.createElement("div"));$(l).css({position:"relative",width:"80%",left:"10%",bottom:"-68%",display:"inline-block"});var m=$(document.createElement("button"));$(m).css({padding:"1%",border:"1px solid white",width:"auto",position:"relative","margin-top":"1%","margin-left":"-2%",display:"inline-block"}),$(m).text("Send "),$(m).on("click",c);var n=$(document.createElement("button"));return $(n).css({padding:"1%",border:"1px solid white",width:"auto",position:"relative","margin-top":"1%","float":"right","margin-right":"-2%",display:"inline-block"}),$(n).text("Cancel"),$(n).click(d),$(g).append(l),$(l).append(m),$(l).append(n),$(g).append(k),$(g).append(j),e}function h(){var a=document.createElement("div");return $(a).attr("id","overlay"),$(a).css({display:"none",position:"absolute",top:0,left:0,width:"100%",height:"100%","background-color":"rgba(0,0,0,0.6)","z-index":"10000000"}),a}function i(a,b,c,d,e,f){function g(){d?($(i).hide(),$(i).remove()):$(i).fadeOut(500,function(){$(i).remove()})}var i=h(),j=document.createElement("div"),k=LADS.Util.constrainAndPosition($(window).width(),$(window).height(),{center_h:!0,center_v:!0,width:.5,height:.35,max_width:560,max_height:200}),l=.5*($("#tagRoot").width()-k.width);$(j).css({position:"absolute",left:l+"px",top:k.y+"px",width:k.width+"px",height:k.height+"px",border:"3px double white","background-color":"black"}),f&&($(i).click(g),$(j).click(function(a){a.stopPropagation()}));var m=document.createElement("div");$(m).css({color:"white",width:"80%",height:"15%",left:"10%",top:"12.5%","font-size":"1.25em",position:"relative","text-align":"center","word-wrap":"break-word"}),e?$(m).html(b):$(m).text(b);var n=document.createElement("div");$(n).addClass("optionButtonDiv"),$(n).css({height:"10%",width:"100%",position:"absolute",bottom:"12%",right:"2%"});var o=document.createElement("button");return $(o).css({padding:"1%",border:"1px solid white",width:"auto",position:"relative","float":"right","margin-right":"3%","margin-top":"-3%"}),c=c&&""!==c?c:"OK",$(o).text(c),o.onclick=function(){a&&a(),g()},$(n).append(o),$(j).append(m),$(j).append(n),$(i).append(j),i}function j(a,b,c,d,e,f){function g(){d?($(i).hide(),$(i).remove()):$(i).fadeOut(500,function(){$(i).remove()})}var i=h();f=f||window;var j=document.createElement("div"),k=LADS.Util.constrainAndPosition($(f).width(),$(f).height(),{center_h:!0,center_v:!0,width:.5,height:.35,max_width:560,max_height:200});$(j).css({position:"absolute",left:k.x+"px",top:k.y+"px",width:k.width+"px",height:k.height+"px",border:"3px double white","background-color":"black"});var l=document.createElement("div");$(l).css({color:"white",width:"80%",height:"15%",left:"10%",top:"12.5%","font-size":"1.25em",position:"relative","text-align":"center","word-wrap":"break-word"}),$(l).text(b);var m=document.createElement("div");$(m).addClass("optionButtonDiv"),$(m).css({height:"20%",width:"100%",position:"absolute",bottom:"10%",right:"5%"});var n=document.createElement("button");$(n).css({padding:"1%",border:"1px solid white",width:"auto",position:"relative","float":"left","margin-left":"12%","margin-top":"-1%"}),c=c&&""!==c?c:"Confirm",$(n).text(c),n.onclick=function(){g(),a()};var o=document.createElement("button");return $(o).css({padding:"1%",border:"1px solid white",width:"auto",position:"relative","float":"right","margin-right":"3%","margin-top":"-1%"}),$(o).text("Cancel"),o.onclick=function(){g(),e&&e()},$(m).append(o),$(m).append(n),$(j).append(l),$(j).append(m),$(i).append(j),i}function k(a,b,c){switch(a){case"backButton":$(b).css(c?{"background-color":"transparent","border-radius":"999px"}:{"background-color":"gray","border-radius":"999px"});break;case"labelButton":$(b).css({"background-color":"white",color:"black"});break;case"forwardButton":$(b).css({"background-color":"gray"})}}function l(a,b,c){function d(){e&&f&&c&&c()}var e=!1,f=!1,g=a.parent(),h=p(),i=p(),j=g.children();j.remove(),j.appendTo($(h)),$(h).css({left:"0%","float":"left"}),$(i).append(b),$(i).css({left:"120%",display:"inline"}),g.append(h),g.append(i),$(h).animate({left:"-120%"},1e3,"easeOutQuad",function(){$(h).remove(),e=!0,d()}),$(i).animate({left:"0%"},1e3,"easeOutQuad",function(){$(i).detach(),g.append(b),f=!0,d()})}function m(a,b,c){function d(){e&&f&&c&&c()}var e=!1,f=!1,g=a.parent(),h=p(),i=p(),j=g.children();j.detach(),j.appendTo($(h)),$(h).css({left:"0%","float":"left"}),$(i).append(b),$(i).css({left:"-120%",display:"inline"}),g.append(h),g.append(i),$(h).animate({left:"120%"},1e3,"easeOutQuad",function(){$(h).remove(),e=!0,d()}),$(i).animate({left:"0%"},1e3,"easeOutQuad",function(){$(i).detach(),g.append(b),f=!0,d()})}function n(a,b){function c(){d&&e&&b&&b()}var d=!1,e=!1,f=$("#"+H)||$("body"),g=f.children();g.remove();var h=p();g.appendTo($(h)),$(h).css({left:"0%","float":"left"});var i=p();$(i).append(a),$(i).css({left:"120%",display:"inline"}),f.append(h),f.append(i),$(h).animate({left:"-120%"},1e3,"easeOutQuad",function(){$(h).remove(),d=!0,c()}),$(i).animate({left:"0%"},1e3,"easeOutQuad",function(){$(i).detach(),f.append(a),e=!0,c()})}function o(a,b){function c(){d&&e&&b&&b()}var d=!1,e=!1,f=$("#"+H)||$("body"),g=f.children();g.remove();var h=p();g.appendTo($(h)),$(h).css({left:"0%","float":"left"});var i=p();$(i).append(a),$(i).css({left:"-120%",display:"inline"}),f.append(h),f.append(i),$(h).animate({left:"120%"},1e3,"easeOutQuad",function(){$(h).remove(),d=!0,c()}),$(i).animate({left:"0%"},1e3,"easeOutQuad",function(){$(i).detach(),f.append(a),e=!0,c()})}function p(){var a=document.createElement("div");return $(a).css({height:"100%",width:"100%",position:"absolute"}),a}function q(a){return"rgba("+r(a)+","+s(a)+","+t(a)+","}function r(a){return parseInt(u(a).substring(0,2),16)}function s(a){return parseInt(u(a).substring(2,4),16)}function t(a){return parseInt(u(a).substring(4,6),16)}function u(a){return"#"===a.charAt(0)?a.substring(1,7):a}function v(a){function b(a){var b=("0"+parseInt(a,10).toString(16)).toUpperCase();return b.slice(-2)}var c=a.match(/(rgb|rgba)\((\d+),\s*(\d+),\s*(\d+)\,*\s*((\d+\.\d+)|\d+)*\)$/);return null!==c&&void 0!==c?b(c[2])+b(c[3])+b(c[4]):"transparent"===a?"000000":"000000"}function w(a,b,c){var d=parseInt(a.css("font-size"),10);if(parseInt(a.parent()[0].scrollHeight,10)>a.parent().height())for(;parseInt(a.parent()[0].scrollHeight,10)>a.parent().height()&&d>c;)d--,a.css("font-size",d+"px");else if(parseInt(a.height(),10)<a.parent().height())for(;parseInt(a.height(),10)<a.parent().height()&&b>d;)if(d++,a.css("font-size",d+"px"),parseInt(a.parent()[0].scrollHeight,10)>a.parent().height()){d--,a.css("font-size",d);break}}function x(){var a=h(),b=document.createElement("div");$(b).addClass("noArtworksOptionBox"),$(b).css({width:"45%",position:"absolute",top:"40%",left:"25%",padding:"2% 2%","background-color":"black",border:"3px double white","z-index":"10000",id:"deleteOptionBox"});var c=document.createElement("p");$(c).css({"font-size":"150%",color:"white"}),$(c).text("There are no artworks present in this collection.");var d=document.createElement("button");return $(d).css({"float":"right"}),$(d).text("OK"),d.onclick=function(){$(a).fadeOut(500,function(){$(a).remove()})},$(b).append(c),$(b).append(d),$(a).append(b),a}function y(a,b){b.entities.clear();for(var c=0;c<a.length;c++){var d,e=a[c];if(e.resource.latitude)d=e.resource;else{var f=e.resource.point.coordinates[0],g=e.resource.point.coordinates[1];d=new Microsoft.Maps.Location(f,g)}var h={text:String(c+1),icon:"/images/icons/locationPin.png",width:20,height:30},i=new Microsoft.Maps.Pushpin(d,h);i.location=e.address,i.description="",e.info&&(i.description=e.info),b.entities.push(i)}}function z(a,b){var c={text:String(b),icon:"/images/icons/locationPin.png",width:20,height:30},d=new Microsoft.Maps.Pushpin(a.resource,c);d.location=a.address,d.description="",a.info&&(d.description=a.info),a.pushpin=d}function A(a,b){if(a.resource.latitude)return void z(a,b);var c=a.resource.point.coordinates[0],d=a.resource.point.coordinates[1],e=new Microsoft.Maps.Location(c,d),f={text:String(b),icon:"/images/icons/locationPin.png",width:20,height:30},g=new Microsoft.Maps.Pushpin(e,f);g.location=a.address,g.description="",a.info&&(g.description=a.info),a.pushpin=g}function B(a){var b,c=a.Location;try{b=JSON.parse(c)}catch(d){console.log("artwork location metadata cannot be parsed."),b=[]}for(var e=0;e<b.length;e++){var f=b[e];if(f.date){if(f.date.getFullYear){var g=date.getUTCFullYear(),h=date.getUTCMonth(),i=date.getUTCDay();f.date={year:g,month:h,day:i}}f.pushpin.date=f.date}}return b}function C(a,b,c,d,e,f,g){function i(a){return function(){if(J.clear(),M=LADS.Util.showProgressCircle(L,N),x.attr("value",""),A.empty(),$(".tab").css({"border-top":"1px solid black","border-right":"1px solid black","border-left":"1px solid black","border-bottom":"1px solid white"}),$("#tab"+a).css({"border-top":"1px solid white","border-right":"1px solid white","border-left":"1px solid white","border-bottom":"1px solid black"}),I[a].cached)j(I[a].comps);else{var b=(e[a].args||[]).concat([function(b){I[a].cached=!0,I[a].comps=b,j(b)},k,l]);e[a].getObjs.apply(null,b)}}}function j(a){for(var b=[],c=0;c<a.length;c++)("artwork"!==d||"VideoArtwork"!==a[c].Metadata.Type)&&b.push(a[c]);m(b,p),LADS.Util.removeProgressCircle(M)}function k(){console.log("ERROR IN TABHELPER")}function l(){k()}function m(a,b){if(a){B.length=0,C.length=0,D.length=0,a.sort(function(a,b){return a.Name.toLowerCase()<b.Name.toLowerCase()?-1:1});for(var c=0;c<a.length;c++)J.add(n(a[c],b))}}function n(a,b){return function(){var c=$(document.createElement("div"));c.addClass("compHolder"),c.attr("id",a.Identifier),c.data({type:a.Metadata.ContentType,guid:a.Identifier,name:a.Name,duration:a.Metadata.Duration,comp:a});var d=H.indexOf(a.Identifier)>=0;d&&console.log("is selected"),c.data("selected",d),c.css({"float":"left",background:d?"#999":"#222",width:"15%",height:"30%",padding:"1%",margin:"1%","text-align":"center",border:"1px solid white",color:"white"}),A.append(c);var e=$(document.createElement("div"));e.addClass("compHolderDiv"),e.css({position:"relative",height:"80%",margin:"2%",width:"96%"}),c.append(e);var f=$(document.createElement("img"));f.addClass("compHolderImage");var g=$(document.createElement("img"));g.addClass("typeIndicatorImage");var h=LADS.Worktop.Database.fixPath,i=!1;"Audio"===a.Metadata.ContentType?f.attr("src","images/audio_icon.svg"):"Video"===a.Metadata.ContentType||"Video"===a.Type||"VideoArtwork"===a.Metadata.Type?(f.attr("src",a.Metadata.Thumbnail&&!a.Metadata.Thumbnail.match(/.mp4/)?h(a.Metadata.Thumbnail):"images/video_icon.svg"),i=!0,g.attr("src","images/icons/catalog_video_icon.svg")):"Image"===a.Metadata.ContentType||"Image"===a.Type?f.attr("src",a.Metadata.Thumbnail?h(a.Metadata.Thumbnail):"images/image_icon.svg"):"Empty"===a.Type?(f.attr("src",a.Metadata.Thumbnail?h(a.Metadata.Thumbnail):"images/icons/catalog_tour_icon.svg"),i=!0,g.attr("src","images/icons/catalog_tour_icon.svg")):f.attr("src","images/text_icon.svg"),f.css({width:"100%",height:"100%","max-width":"100%","max-height":"100%"}),f.removeAttr("width"),f.removeAttr("height"),e.append(f),i&&(g.css({position:"absolute",width:"20%",height:"auto",left:"75%",bottom:"5%","z-index":2}),g.removeAttr("width"),g.removeAttr("height"),e.append(g));var j=$(document.createElement("div"));j.addClass("compHolderText");var k=a.Name;j.text(k),j.css({"padding-left":"3%","font-size":"110%",margin:"0% 2% 0% 2%",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}),c.append(j),b(c)}}function o(a,b){var c,d=b.data("guid"),e=H.indexOf(d);b.data("selected")?(b.data("selected",!1),b.css("background","#222"),e>=0?D.push(d):(c=B.indexOf(d),B.splice(c,1),C.splice(c,1))):(b.data("selected",!0),b.css("background","#999"),e>=0?D.remove(d):(B.push(d),C.push(b.data("comp"))))}function p(a){a.click(function(b){var c=this;setTimeout(function(){var d=parseInt($(c).data("double"),10);d>0?$(c).data("double",d-1):o.call(c,b,a)},300)})}function q(){var a={};if("artwork"===d&&"artwork"===c.type)for(var b=0;b<B.length;b++)G.indexOf(B[b])<0&&(G.push(B[b]),F.push(C[b]));
B.length&&(a.AddIDs=B.join(",")),D.length&&(a.RemoveIDs=D.join(",")),B.length||D.length?"artwork"===d&&"artwork"===c.type?LADS.Worktop.Database.changeArtwork(c.comp.Identifier,a,function(){g(),r.fadeOut(),r.empty(),r.remove()},function(a){console.log(a.message)},function(a){console.log(a.message)},function(a){console.log(a.message)}):"artwork"===d&&"media"===c.type?LADS.Worktop.Database.changeHotspot(c.comp.Identifier,a,function(){g(),r.fadeOut(),r.empty(),r.remove()},function(a){console.log(a.message)},function(a){console.log(a.message)},function(a){console.log(a.message)}):"exhib"===d&&"exhib"===c.type&&LADS.Worktop.Database.changeExhibition(c.comp.Identifier,a,function(){g(),r.fadeOut(),r.empty(),r.remove()},function(a){console.log(a.message)},function(a){console.log(a.message)},function(a){console.log(a.message)}):(g(),r.fadeOut(),r.empty(),r.remove())}var r,s,t,u,v,w,x,y,z,A,B=[],C=[],D=[],H=[],I=[],J=LADS.Util.createQueue();for(w=0;w<e.length;w++)I.push({cached:!1,comps:[]});var K=(f.args||[]).concat([function(a){for(w=0;w<a.length;w++)H.push(a[w].Identifier)},k,l]);if(f.getObjs.apply(null,K),r=$(h()),r.addClass("pickerOverlay"),r.css("z-index",1e7),r.appendTo($(a)),r.fadeIn(),s=$(document.createElement("div")),s.addClass("picker"),s.css({position:"absolute",width:"70%",height:"60%",padding:"1%","background-color":"black",border:"3px double white",top:"19%",left:"19%"}),r.append(s),t=$(document.createElement("div")),t.addClass("pickerHeading"),t.text(b),t.css({width:"100%",color:"white","font-size":"200%","margin-bottom":"10px"}),s.append(t),e.length>=2){for(u=$(document.createElement("div")),u.css({width:"100%",height:"30px",left:"5%"}),u.attr("id","tabBanner"),s.append(u),w=0;w<e.length;w++)v=$(document.createElement("div")),v.addClass("tab"),v.attr("id","tab"+w),v.css({display:"inline-block",width:"20%",height:"100%",color:"white","border-top":"1px solid "+(0===w?"white":"black"),"border-right":"1px solid "+(0===w?"white":"black"),"border-left":"1px solid "+(0===w?"white":"black"),"border-bottom":"1px solid "+(0===w?"black":"white"),"text-align":"center"}),v.text(e[w].name),v.on("click",i(w)),u.append(v);v=$(document.createElement("div")),v.attr("id","extraSpaceAwwwwwYeahhhh"),v.css({display:"inline-block",color:"black",width:90-20*e.length+"%",height:"100%","border-bottom":"1px solid white","border-left":"1px solid black"}),v.text("_"),u.append(v)}x=$(document.createElement("input")),x.attr("type","text"),x.css({"margin-left":"3%","margin-top":"2%",width:"30%"}),x.on("keyup",function(a){a.stopPropagation()}),x.attr("placeholder","Search by Name..."),x.keyup(function(){LADS.Util.searchData(x.val(),".compHolder",E)}),x.change(function(){""!==x.val()&&LADS.Util.searchData(x.val(),".compHolder",E)}),s.append(x),y=$(document.createElement("div")),y.attr("id","selectAllLabel"),y.css({color:"#aaaaaa",display:"inline-block","margin-left":"30px"}),y.text("Select All"),y.on("click",function(){var a,b,c;$.each($(".compHolder"),function(d,e){a=$(e),a.data("selected")||"none"===a.css("display")||(a.css("background","#999"),a.data("selected",!0),b=a.data("guid"),c=H.indexOf(b),c>=0?D.remove(b):(B.push(b),C.push(a.data("comp"))))})}),s.append(y),z=$(document.createElement("div")),z.attr("id","deselectAllLabel"),z.css({color:"#aaaaaa",display:"inline-block","margin-left":"30px"}),z.text("Deselect All"),z.on("click",function(){var a,b,c,d;$.each($(".compHolder"),function(e,f){a=$(f),a.data("selected")&&"none"!==a.css("display")&&(a.css("background","#222"),a.data("selected",!1),b=a.data("guid"),c=H.indexOf(b),c>=0?D.push(b):(d=B.indexOf(b),B.splice(d,1),C.splice(d,1)))})}),s.append(z),A=$(document.createElement("div")),A.attr("id","mainThumbnailContainer"),A.css({"overflow-y":"scroll","margin-top":"10px",width:"100%"}),s.append(A),A.css({height:s.height()-A.offset().top+s.offset().top-30+"px"});var L=$(document.createElement("div"));L.addClass("optionButtonDiv"),L.css({height:"5%",width:"100%"});var M,N={left:"5%",top:"15px",width:"40px",height:"auto",position:"relative","z-index":50},O=$(document.createElement("button"));O.css({margin:"1%",border:"1px solid white",width:"auto",position:"relative","float":"right"}),O.text("Save Changes"),O.on("click",function(){M=LADS.Util.showProgressCircle(L,N),q()});var P=$(document.createElement("button"));P.css({margin:"1%",border:"1px solid white",width:"auto",position:"relative","float":"right","margin-right":"3%"}),P.text("Cancel"),P.on("click",function(){r.fadeOut(function(){r.empty(),r.remove()})}),L.append(P),L.append(O),s.append(L),i(0)()}function D(a){a(F)}var E=["visible","exhibits","selected","guid","url","comp"],F=[],G=[],H="tagRoot";return{slidePageLeftSplit:l,slidePageRightSplit:m,slidePageLeft:n,slidePageRight:o,hexToR:r,hexToG:s,hexToB:t,hexToRGB:q,colorToHex:v,fitTextInDiv:w,makeNoArtworksOptionBox:x,drawPushpins:y,addPushpinToLoc:A,getLocationList:B,popUpMessage:i,PopUpConfirmation:j,cgBackColor:k,blockInteractionOverlay:h,FeedbackBox:g,ChangeServerDialog:f,createAssociationPicker:C,getRecentlyAssociated:D,createCirc:d,createLine:e,createKeyframe:c,createDisplay:b,createTrack:a}}(),Function.prototype.method=function(a,b){return this.prototype[a]?void 0:(this.prototype[a]=b,this)},Function.method("curry",function(){var a=Array.prototype.slice,b=a.apply(arguments),c=this;return function(){return c.apply(null,b.concat(a.apply(arguments)))}}),Array.method("remove",function(a){var b=this.indexOf(a);return-1!==b?(this.splice(b,1),!0):!1}),Array.method("insert",function(a,b){var c;for(c=0;c<this.length;c++)if(b(this[c],a))return this.splice(c,0,a),c;return this.push(a),this.length-1}),Math.constrain||(Math.constrain=function(a,b,c){return Math.min(c,Math.max(b,a))}),function(a){"use strict";a.contracts=a.contracts||{},a.contracts.Event=function(){var a={},b=function(a,b){setTimeout(function(){a.callback.call(a.context,b)},0)};return{subscribe:function(b,c,d){if("function"!=typeof b)throw new Error("Event callback needs to be a function");a[c||b]={callback:b,context:d||this}},unsubscribe:function(b){delete a[b]},publish:function(c,d){for(var e in a){var f=a[e];d?b(f,c):f.callback.call(f.context,c)}}}},a.contracts.experienceStreamState={closed:"closed",buffering:"buffering",ready:"ready",error:"error"},a.contracts.ESStateChangedEventArgs=function(a,b,c){this.fromState=a,this.toState=b,this.source=c},a.contracts.experienceStreamLayer={background:"background",foreground:"foreground",overlay:"overlay",projection:"projection"},a.contracts.esEventIds={stateTransitionEventId:"stateTransitionEvent",playerConfigurationChanged:"playerConfigurationChanged",popupDisplayEvent:"popupDisplayEvent",resumeTransitionEvent:"resumeTransition",setTimeMarkers:"setTimeMarkers"},a.contracts.interactionControlNames={panZoomControl:"MicrosoftResearch.Rin.InteractionControls.PanZoomControl",mediaControl:"MicrosoftResearch.Rin.InteractionControls.MediaControl"},a.contracts.systemFactoryTypes={esFactory:"ESFactory",interactionControlFactory:"InteractionControlFactory",behaviorFactory:"BehaviorFactory"},a.ext=function(){var a={},b="MicrosoftResearch.Rin.DefaultFactoryProvider";return{registerFactory:function(b,c,d,e){var f=a[b]||(a[b]=[]);f.push({providerTypeId:c,factoryFunction:d,isSupportedCheckFunction:e})},getFactory:function(c,d,e){var f=a[c];if(!f)return null;for(var g=f.length-1;g>=0;g--){var h=f[g];if(h.providerTypeId===d&&(!e||"function"!=typeof h.isSupportedCheckFunction||h.isSupportedCheckFunction(e)))return h.factoryFunction}return f[b]},setDefaultFactory:function(c,d){var e=a[c]||(a[c]=[]);e[b]=d}}}()}(window.rin=window.rin||{}),function(a){"use strict";a.contracts=a.contracts||{},a.contracts.playerState={stopped:"stopped",pausedForBuffering:"pausedForBuffering",pausedForExplore:"pausedForExplore",playing:"playing",inTransition:"inTransition"},a.contracts.playerMode={Demo:"demo",Published:"published",AuthorerPreview:"authorerPreview",AuthorerEditor:"authorerEditor"},a.contracts.playerStartupAction={play:"play",pause:"pause",none:"none"},a.contracts.narrativeAspectRatio={none:"none",normal:"normal",wideScreen:"wideScreen"},a.contracts.PlayerStateChangedEventArgs=function(a,b){this.previousState=a,this.currentState=b},a.contracts.PlayerStateChangedEventArgs.prototype={previousState:a.contracts.playerState.stopped,currentState:a.contracts.playerState.stopped},a.contracts.PlayerESEventArgs=function(a,b,c){this.sender=a,this.eventId=b,this.eventData=c}}(window.rin=window.rin||{}),function(a){"use strict";a.contracts=a.contracts||{},a.contracts.DiscreteKeyframeESBase=function(b,c){this._esData=c,this._orchestrator=b,this._keyframes=new a.internal.List,this.stateChangedEvent=new a.contracts.Event,this._state=a.contracts.experienceStreamState.closed},a.contracts.DiscreteKeyframeESBase.prototype={stateChangedEvent:null,displayKeyframe:function(){},resetUserInterface:function(){},load:function(a){if(!this._esData||!this._orchestrator)throw new Error("orchestrator and esData should not be null. Make sure the base ES is instantiated using non-empty constructor during run time");this._initKeyframes(a)},play:function(b,c){if(this.getState()!==a.contracts.experienceStreamState.error&&(this.isLastActionPlay=!0,this._taskTimer)){var d=this._seek(b,c);if(this._taskTimer.play(),!d&&this._lastKeyframe){var e=this._getNextKeyframe(this._lastKeyframe),f=b-this._lastKeyframe.offset;a.internal.debug.assert(f>=0),this._loadKeyframe(this._lastKeyframe,e,f)}}},pause:function(a,b){this.isLastActionPlay=!1,this._taskTimer&&(this._seek(a,b),this._taskTimer.pause())},unload:function(){this.pause()},getState:function(){return this._state},setState:function(b){if(this._state!==b){var c=this._state;this._state=b,this.stateChangedEvent.publish(new a.contracts.ESStateChangedEventArgs(c,b,this)),this._taskTimer&&this._state===a.contracts.experienceStreamState.ready&&c!==a.contracts.experienceStreamState.ready&&this._loadKeyframeAtOffset(this._taskTimer.getCurrentTimeOffset())}},getUserInterfaceControl:function(){return this._userInterfaceControl},isLastActionPlay:!1,_initKeyframes:function(b){var c=b;if(this._isValidExperienceStreamId(c)){var d=this;if(this._keyframes=this._esData.experienceStreams[b].keyframes,this._taskTimer&&this._taskTimer.pause(),this._taskTimer=new a.internal.TaskTimer,this._taskTimer.taskTriggeredEvent.subscribe(function(a){d._taskTimer_taskTriggered(a)}),this._keyframes&&null!==this._keyframes){this._keyframes.sort(function(a,b){return a.offset-b.offset});for(var e=0,f=this._keyframes.length;f>e;e++){var g=this._keyframes[e];this._taskTimer.add(parseFloat(g.offset),g)}}this._lastKeyframe=null,this._currentExperienceStreamId=c}else a.internal.debug.assert(!1,"invalid experience stream id"),this._orchestrator.eventLogger.logErrorEvent("Requested experience stream {0} missing in datamodel",c)},_isValidExperienceStreamId:function(a){return a&&this._esData.experienceStreams[a]},_taskTimer_taskTriggered:function(a){var b=a.lastOrDefault(),c=this._getNextKeyframe(b);this._loadKeyframe(b,c)},_loadKeyframe:function(a,b,c){this._lastKeyframe=a,a?this.displayKeyframe(a,b,c||0):this.resetUserInterface()},_seek:function(a,b){var c=!1;b!==this._currentExperienceStreamId&&this._isValidExperienceStreamId(b)&&(this.resetUserInterface(),this._initKeyframes(b),c=!0),this._currentExperienceStreamId=b;var d=.05,e=this._taskTimer.getCurrentTimeOffset();return this._taskTimer&&(c||Math.abs(e-a)>d)&&(this._taskTimer.seek(a),this._loadKeyframeAtOffset(a),c=!0),c},_loadKeyframeAtOffset:function(b){var c=this._taskTimer.getCurrentOrPrevious(b);if(!c)return!0;var d=this._getNextKeyframe(c),e=b-c.offset;a.internal.debug.assert(e>=0),this._loadKeyframe(c,d,e)},_getNextKeyframe:function(a){var b=a?this._keyframes.indexOf(a):-1;return b>=0&&b+1<this._keyframes.length?this._keyframes[b+1]:null},_keyframes:null,_lastKeyframe:null,_currentExperienceStreamId:null,_taskTimer:null,_userInterfaceControl:null,_orchestrator:null,_esData:null}}(window.rin=window.rin||{}),function(a){"use strict";a.contracts=a.contracts||{},a.contracts.InterpolatedKeyframeESBase=function(b,c){this._esData=c,this._orchestrator=b,this.stateChangedEvent=new a.contracts.Event},a.contracts.InterpolatedKeyframeESBase.prototype={stateChangedEvent:null,displayKeyframe:function(){},resetUserInterface:function(){},load:function(a){if(!this._esData||!this._orchestrator)throw new Error("orchestrator and esData should not be null. Make sure the base ES is instantiated using non-empty constructor during run time");this._initKeyframes(a)},play:function(b,c){this._updateActiveES(b,c),this.getState()===a.contracts.experienceStreamState.ready&&this._interpolationStoryBoard&&this._currentStreamTrajectory&&this._interpolationStoryBoard.play(this._currentStreamTrajectory,b)},pause:function(b,c){this._updateActiveES(b,c),this.getState()===a.contracts.experienceStreamState.ready&&this._interpolationStoryBoard&&this._currentStreamTrajectory&&this._interpolationStoryBoard.pause(this._currentStreamTrajectory,b)},unload:function(){this.pause(),this._interpolationStoryBoard&&this._interpolationStoryBoard.stop()},getState:function(){return this._state},setState:function(b){if(this._state!==b){var c=this._state;this._state=b,this.stateChangedEvent.publish(new a.contracts.ESStateChangedEventArgs(c,b,this))}},getUserInterfaceControl:function(){return this._userInterfaceControl},addSliverInterpolator:function(a,b){this._sliverInterpolators[a]=b},getKeyframes:function(a,b,c){for(var d,e=[],f=0;b>=f;f+=c)d=this._interpolationStoryBoard.getFrameAt(a+f,this._currentStreamTrajectory),null!==d&&e.push(d);return e},getKeyframeAt:function(a,b){return this._updateActiveES(a,b),this._interpolationStoryBoard&&this._currentStreamTrajectory?this._interpolationStoryBoard.getFrameAt(a,this._currentStreamTrajectory):void 0},_initKeyframes:function(b){var c=this,d=!1;if(this._esData.experienceStreams[b]&&this._esData.experienceStreams[b].keyframes&&this._esData.experienceStreams[b].keyframes.length){var e=this._trajectoryBuilder;e||(e=a.Ext.Trajectory.newTrajectoryBuilder(this._esData),e.sliverInterpolator=function(a,b){return"function"==typeof c._sliverInterpolators[a]?c._sliverInterpolators[a](a,b):null},e.storyboardHelper.startAnimation=function(){function b(){c._interpolationStoryBoard&&c._interpolationStoryBoard.render(),d&&a.internal.requestAnimFrame(b)}d=!0,b()},e.storyboardHelper.stopAnimation=function(){d=!1},e.renderKeyframe=function(a){c.displayKeyframe(a)},c.overrideTransientTrajectoryFunction&&(e.storyboardHelper.buildTransitionTrajectory=function(b,d,f,g,h){if(f&&f.es&&("noZoomOut"===f.es.transitionType||"noAnimation"===f.es.transitionType)){var i=c.captureKeyframe(),j={duration:f.duration,renderAt:function(){c.displayKeyframe(i)},sampleAt:function(){return i}};return h||(c._playCalled=!0),j}if(h&&b&&f.targetExperienceStreamId&&b.targetExperienceStreamId===f.targetExperienceStreamId&&Math.abs(d-g)<.1){var i=c.captureKeyframe(),k={duration:0,keyframes:[i]};return e.buildTrajectoryFromExperienceStream(k)}var l=f.es&&f.es.transitionType&&"adaptiveFirstDuration"===f.es.transitionType;if(a.internal.debug.assert(!l||l&&f.es.keyframes.length>=2),l&&f.es.keyframes.length>=2&&!h&&c._playCalled){a.internal.debug.assert(g<=f.duration);var i=c.captureKeyframe();i.offset=g,i.holdDuration=0;var m,n;if(g>f.es.keyframes[f.es.keyframes.length-1].offset||Math.abs(g-f.es.keyframes[f.es.keyframes.length-1].offset)<1e-5)n=a.util.deepCopy(f.es.keyframes[f.es.keyframes.length-1]),n.offset=f.es.duration,m=[i,n];else{var o=null;for(var p in f.es.keyframes)if(f.es.keyframes[p].offset>g){o=f.es.keyframes[p];break}a.internal.debug.assert(null!==o);var q;null===o?(q=f.es.keyframes.length-1,o=f.es.keyframes[q]):q=f.es.keyframes.indexOf(o),m=f.es.keyframes.slice(q);var r;if(q>=1){var s=f.es.keyframes[q-1];r=c._tryGoToPreviousKeyframe(i,s,o,f,g)||c._tryGoToIntermediateKeyframe(i,s,o,f,g)}else r=null;r?m.unshift(i,r):m.unshift(i)}var t={duration:f.duration,keyframes:m};return e.buildTrajectoryFromExperienceStream(t)}var u=null,v=null,w=null,x=null,y=1,z=2,A=[];b?b.sampleAt&&(v=b.sampleAt(d-y),u=b.sampleAt(d),u.holdDuration=0):u=c.captureKeyframe(),v&&(v.offset=g-y,v.offset<0?v=null:A.push(v)),u&&(u.offset=g,A.push(u)),f.sampleAt&&(h?w=f.sampleAt(g):(w=f.sampleAt(g+z),x=f.sampleAt(g+z+y)),w&&(w.offset=g+z,A.push(w)),x&&(x.offset=g+z+y,A.push(x)));var B;if(u&&w&&!h&&c._playCalled){var C={duration:z,keyframes:A},l=f.es&&f.es.transitionType&&"adaptiveFirstDuration"===f.es.transitionType,D=1e-5>g&&f.es&&f.es.keyframes&&f.es.keyframes.length>0;if(D){var E=f.es.keyframes.slice(0);if(a.internal.debug.assert(!l||l&&E.length>=2),1===E.length)w=f.sampleAt(f.duration),w.offset=f.duration,E=[u,w];else if(E[0]=u,l&&"function"==typeof c.calculateAdaptiveOffset){var F=a.util.deepCopy(E[1]),G=c.calculateAdaptiveOffset(E[0],F,f.es);F.offset=G,F.holdDuration&&0!==F.holdDuration||(F.holdDuration=1),E[1]=F}C.keyframes=E,C.duration=f.duration}var H=e.buildTrajectoryFromExperienceStream(C);B=D?H:{renderAt:function(a){g+z>a?H.renderAt(a):(h&&(a=g),f.renderAt(a))},sampleAt:f.sampleAt?function(a){return g+z>a?H.sampleAt(a):(h&&(a=g),f.sampleAt(a))}:null,duration:h?z:f.duration}}else B=f,h?B={renderAt:function(){f.renderAt(g)},sampleAt:f.sampleAt?function(a,b){return f.sampleAt(g,b)}:null,duration:0}:c._playCalled=!0;return B}),c._trajectoryBuilder=e,c._interpolationStoryBoard=a.Ext.NonLinearStoryboard.buildStoryboard(e.storyboardHelper)),c._currentStreamTrajectory=e.buildTrajectoryFromExperienceStreamId(b)}},_MIN_HOLDDURATION:.2,_MIN_TRANSITION_TO_NEXTKF:6,_TRANSITION_TIME:3,_tryGoToPreviousKeyframe:function(b,c,d,e,f){var g=this,h=null;if(f<c.offset+c.holdDuration){var i=g._TRANSITION_TIME;if("function"==typeof g.calculateAdaptiveDuration){var j=g.calculateAdaptiveDuration(b,c,e.es);j>=0&&(i=j)}f+i+g._MIN_HOLDDURATION<c.offset+c.holdduration&&(h=a.util.deepCopy(c),h.offset=f+i,h.holdDuration=c.offset+c.holdDuration-h.offset)}return h},_tryGoToIntermediateKeyframe:function(a,b,c,d,e){if("function"!=typeof d.sampleAt)return null;var f=this,g=null;if(g=d.sampleAt(e+f._TRANSITION_TIME),null===g)return null;var h=f._TRANSITION_TIME;if("function"==typeof f.calculateAdaptiveDuration){var i=f.calculateAdaptiveDuration(a,g,d.es);i>=0&&(h=i)}return e+h+f._MIN_HOLDDURATION+f._MIN_TRANSITION_TO_NEXTKF<c.offset&&(g.offset=e+h,g.holdDuration=f._MIN_HOLDDURATION),g},_getExperienceStreamFromId:function(a){return this._esData.experienceStreams[a]},_updateActiveES:function(a,b){var c=!1;return b!==this._currentExperienceStreamId&&this._getExperienceStreamFromId(b)&&(this.resetUserInterface(),this._initKeyframes(b),this._currentExperienceStreamId=b,c=!0),c},_sliverInterpolators:{},_currentExperienceStreamId:null,_currentStreamTrajectory:null,_interpolationStoryBoard:null,_trajectoryBuilder:null,_userInterfaceControl:null,_orchestrator:null,_playCalled:!1,_esData:null}}(window.rin=window.rin||{});var rin;!function(a){!function(a){!function(a){"use strict";var b=function(){function a(a){this.sliverId="viewport",this.iState=a}return a.prototype.interpolate=function(a,b){if(!b)return null;var c=b.state[this.sliverId];if(this.iState.postKf&&this.iState.preKf){var d=this.iState.postKf.state[this.sliverId],e=this.iState.preKf.state[this.sliverId],f=this.iState.postKf.offset-this.iState.preKf.offset,g=a-this.iState.preKf.offset,h=function(a,b){return(b-a)*g/f+a};c.region.center.x=h(e.region.center.x,d.region.center.x),c.region.center.y=h(e.region.center.y,d.region.center.y),c.region.span.x=h(e.region.span.x,d.region.span.x),c.region.span.y=h(e.region.span.y,d.region.span.y),d.rotation&&e.rotation&&(c.rotation=h(e.rotation,d.rotation))}else{var i=this.iState.preKf||this.iState.postKf,j=i.state[this.sliverId];c.region.center.x=j.region.center.x,c.region.center.y=j.region.center.y,c.region.span.x=j.region.span.x,c.region.span.y=j.region.span.y,c.rotation=j.rotation}return b},a}();a.linearViewportInterpolator=b;var c=function(){function a(a,b){this.sliverId=a,this.sliverId=a,this.iState=b}return a.prototype.interpolate=function(a,b){if(!b)return null;if(this.iState.postKf&&this.iState.preKf){var c=this.iState.postKf.state[this.sliverId],d=this.iState.preKf.state[this.sliverId],e=c-d,f=a-this.iState.preKf.offset,g=d,h=this.iState.postKf.offset-this.iState.preKf.offset,i=e*f/h+g;b.state[this.sliverId]=i}else{var j=this.iState.preKf||this.iState.postKf;b.state[this.sliverId]=j.state[this.sliverId]}return b},a}();a.linearDoubleInterpolator=c;var d=function(){function a(a,b){this.sliverId=a,this.sliverId=a,this.iState=b}return a.prototype.interpolate=function(a,b){return b&&this.iState.preKf&&(b.state[this.sliverId]=this.iState.preKf.state[this.sliverId]),b},a}();a.discreteInterpolator=d}(a.Interpolators||(a.Interpolators={}));a.Interpolators}(a.Ext||(a.Ext={}));a.Ext}(rin||(rin={}));var rin;!function(a){!function(a){!function(a){"use strict";function b(a){function b(a){var b=0,d=!1;i!==c&&(b=k+(a-j),0>b||(b>l.duration&&(b=l.duration,d=!0),l.renderAt(b),d&&g()))}function f(a,b){return a>b.duration&&(a=b.duration),b.sampleAt(a)}function g(){i=c,l=null,k=0,j=0,a.stopAnimation()}function h(b,c,d){var e=a.getCurrentTime(),f=0;null!=l&&(f=k+(e-j)),j=e,k=c,l=a.buildTransitionTrajectory(l,f,b,c,d),l.targetExperienceStreamId=b.targetExperienceStreamId,a.startAnimation()}var i=c,j=0,k=0,l=null;return{play:function(a,b){i=d,h(a,b,!1)},pause:function(a,b){i=e,h(a,b,!0)},renderAt:b,getFrameAt:f,render:function(){b(a.getCurrentTime())},stop:g}}var c=0,d=1,e=2;a.buildStoryboard=b}(a.NonLinearStoryboard||(a.NonLinearStoryboard={}));a.NonLinearStoryboard}(a.Ext||(a.Ext={}));a.Ext}(rin||(rin={}));var rin;!function(a){!function(b){!function(b){"use strict";function c(a){console.log(a)}function d(a){if("object"!=typeof a||null===a)return a;var b=a.constructor();for(var c in a)b[c]=d(a[c]);return b}function e(b){new Date;return{keyframeInterpolatorPre:function(){return null},sliverInterpolator:function(){return null},keyframeInterpolatorPost:function(){return null},renderKeyframe:function(){},storyboardHelper:{buildTransitionTrajectory:function(a,b,c,d,e){var f=c;return e&&(f=new j(0),f.renderAt=function(){c.renderAt(d)},f.sampleAt=c.sampleAt?function(a,b){return c.sampleAt(d,b)}:null),f},getCurrentTime:function(){return Date.now()/1e3},startAnimation:function(){c("START ANIMATION")},stopAnimation:function(){c("STOP ANIMATION")}},buildTrajectoryFromExperienceStreamId:function(a){var c=b.experienceStreams[a],d=this.buildTrajectoryFromExperienceStream(c);return d.targetExperienceStreamId=a,d},buildTrajectoryFromExperienceStream:function(c){var e,i=new j(c.duration),k=this,l={es:c},m=f(c),n=[],o=null,p={},q=null;e=b.data.defaultKeyframe?d(b.data.defaultKeyframe):{offset:0,holdDuration:0,data:null,state:null},i.sampleAt=function(e,f){if(0>e&&(e=0),!c.keyframes||0===c.keyframes.length)return null;f||(f=b.data.defaultKeyframe?d(b.data.defaultKeyframe):{offset:0,holdDuration:0,data:null,state:null}),f.offset=e;var i=!1;return g(k,c,l,e)&&(i=!0),i&&(o=k.keyframeInterpolatorPre(l),p={},m.forEach(function(b){if(i){var d=c.keyframes.filter(function(a){return a.state&&void 0!==a.state[b]}),f=n[b]||{};h(k,c,d,f,e),p[b]=k.sliverInterpolator(b,f)||new a.Ext.Interpolators.discreteInterpolator(b,f)}}),q=k.keyframeInterpolatorPost(l)),o&&o.interpolate(e,f),m.forEach(function(a){p[a]&&p[a].interpolate(e,f)}),q&&q.interpolate(e,f),f},i.renderAt=function(a){i.sampleAt(a,e),e&&k.renderKeyframe(e)};var r=i;return r.es=c,i}}}function f(a){var b={};return a.keyframes.forEach(function(a){var c,d=a&&a.state||{};for(c in d)void 0===b[c]&&(b[c]=c)}),i(b,function(a){return"string"==typeof a})}function g(a,b,c,d){return h(a,b,b.keyframes,c,d)}function h(a,b,c,d,e){if(d.es||(d.es=b,d.time=0/0,d.preKf=d.prePreKf=d.postKf=d.postPostKf=null),!c||0===c.length)return!1;if(d.preKf&&d.postKf&&d.preKf.offset<=e&&d.postKf.offset>=e||d.preKf&&!d.postKf&&d.preKf.offset<=e||d.postKf&&!d.preKf&&d.postKf.offset>=e)return!1;d.time=e,d.prePreKf=d.postKf=d.postPostKf=null;var f=0/0,g=0/0;if(e<c[0].offset)g=0;else{for(f=1;f<c.length&&!(c[f].offset>e);f++);f--,f<c.length-1&&(g=f+1)}return isNaN(f)||(d.preKf=c[f],f>0&&(d.prePreKf=c[f-1])),isNaN(g)||(d.postKf=c[g],g<c.length-1&&(d.postPostKf=c[g+1])),!0}function i(a,b){var c,d=[];for(c in a)b(a[c])&&d.push(c);return d}var j=function(){function a(a){this.duration=a}return a.prototype.renderAt=function(){c("EMPTY RENDER AT")},a.prototype.sampleAt=function(){return c("EMPTY SAMPLE AT"),null},a}();b.newTrajectoryBuilder=e}(b.Trajectory||(b.Trajectory={}));b.Trajectory}(a.Ext||(a.Ext={}));a.Ext}(rin||(rin={}));var rin;!function(a){!function(a){!function(a){"use strict";var b=function(){function a(a){return(3-2*a)*a*a}return a}(),c=function(){function a(b,c){this.q1={x:0,y:0,z:0,w:0},this.q2={x:0,y:0,z:0,w:0},this.qOrtho={x:0,y:0,z:0,w:0},this.q={x:0,y:0,z:0,w:0},this.halfTheta=0,this.normalizer=.5,this.collinear=!1;var d,e=this.q1,f=this.q2;a.centerToQuaternion(b.center,e),a.centerToQuaternion(c.center,f);var g=e.x*f.x+e.y*f.y+e.z*f.z+e.w*f.w;if(0>g&&(g=-g,f.x=-f.x,f.y=-f.y,f.z=-f.z,f.w=-f.w),g>1&&(g=1),g>.9999)this.collinear=!0;else{d=Math.sqrt(1-g*g),this.halfTheta=Math.acos(g),this.normalizer=1/d,this.qOrtho.x=f.x-e.x*g,this.qOrtho.y=f.y-e.y*g,this.qOrtho.z=f.z-e.z*g,this.qOrtho.w=f.w-e.w*g;var h=Math.sqrt(this.qOrtho.x*this.qOrtho.x+this.qOrtho.y*this.qOrtho.y+this.qOrtho.z*this.qOrtho.z+this.qOrtho.w*this.qOrtho.w),i=1/h;this.qOrtho.x*=i,this.qOrtho.y*=i,this.qOrtho.z*=i,this.qOrtho.w*=i}}return a.prototype.interpolateCenter=function(b,c){var d=this.q,e=this.q1,f=this.q2,g=this.qOrtho;if(this.collinear){var h,i;h=1-b,i=b,d.x=e.x*h+f.x*i,d.y=e.y*h+f.y*i,d.z=e.z*h+f.z*i,d.w=e.w*h+f.w*i}else{var j=this.halfTheta*b,k=Math.cos(j),l=Math.sqrt(1-k*k);d.x=e.x*k+g.x*l,d.y=e.y*k+g.y*l,d.z=e.z*k+g.z*l,d.w=e.w*k+g.w*l}a.quaternionToCenter(d,c)},a.centerToQuaternion=function(a,b){var c=Math.cos(a.y),d=Math.sin(a.y),e=Math.cos(a.x),f=Math.sin(a.x);b.z=d,b.x=c*f,b.y=c*e,b.w=0},a.quaternionToCenter=function(a,b){0!==a.w&&"undefined"!=typeof console&&console&&console.log&&console.log("vectorBased interpolation: quaternions with q.w = 0?");var c=Math.asin(a.z),d=Math.atan2(a.x,a.y);b.x=d,b.y=c},a}();a.QuaternionHelperVectorBased=c,function(a){a._map=[],a._map[0]="noEasing",a.noEasing=0,a._map[1]="inEasing",a.inEasing=1,a._map[2]="outEasing",a.outEasing=2,a._map[3]="inOutEasing",a.inOutEasing=3}(a.EasingOption||(a.EasingOption={}));var d=a.EasingOption,e=function(){function a(a,b,c){this.linearEasing=function(a){return a},this.inCubicEasing=function(a){return a*a*a},this.outCubicEasing=function(a){return a*(a*(a-3)+3)},this.inOutCubicEasing=function(a){return(3-2*a)*a*a},this.constantEasing=function(){return 0},this.piecewiseInOutCubicEasing=function(a){var b=a;if(a<this.inTransitionEndNormalized)b=this.constMultiplier*a*a*a;else if(a>this.outTransitionStartNormalized){var c=1-a;b=1-this.constMultiplier*c*c*c}else b=this.lineoffset+this.lineSlope*(a-this.inTransitionEndNormalized);return b};var e=a.preKf.holdDuration?a.preKf.holdDuration:0,f=a.postKf.offset-a.preKf.offset-e,g=.1;if(g>=f)return void(this.ease=this.constantEasing);switch(c){case d.inOutEasing:this.ease=g>b?this.linearEasing:2*b>f?this.inOutCubicEasing:this.piecewiseInOutCubicEasing;break;case d.inEasing:this.ease=this.inCubicEasing;break;case d.outEasing:this.ease=this.outCubicEasing;break;default:this.ease=this.linearEasing}if(this.ease===this.piecewiseInOutCubicEasing){var h=1/f;this.inTransitionEndNormalized=b*h,this.outTransitionStartNormalized=(f-b)*h;var i=this.inTransitionEndNormalized*this.inTransitionEndNormalized,j=i*this.inTransitionEndNormalized;this.constMultiplier=1/(3*i-4*j),this.lineSlope=(1-2*this.constMultiplier*j)/(1-2*this.inTransitionEndNormalized),this.lineoffset=this.constMultiplier*j}}return a}(),f=function(){function a(a,f){this.sliverId="viewport",this.interpolatorType="vectorBased",this.easingHelper=null,this.usePiecewiseCubicEasing=!0,this.defaultEasingDuation=2;var g=a.postKf?a.postKf.state[this.sliverId]:null,h=a.preKf?a.preKf.state[this.sliverId]:null;if(f&&(this.interpolatorType=f),!a.postKf||!a.preKf){var i=a.preKf||a.postKf,j=i.state[this.sliverId];return void(this.interpolateRegion=function(a,b){b.center.x=j.region.center.x,b.center.y=j.region.center.y,b.span.x=j.region.span.x,b.span.y=j.region.span.y})}var k=a.preKf.holdDuration?a.preKf.holdDuration:0,l=h.region,m=g.region,n=l.span.x,o=l.span.y,p=m.span.x,q=m.span.y,r=a.preKf.offset+k,s=a.postKf.offset-r,t=.1;t>s&&(s=0);var u,v;if("vectorBased"===this.interpolatorType&&(u=new c(l,m),this.usePiecewiseCubicEasing)){var w=d.noEasing,x=void 0!==a.preKf.holdDuration&&a.preKf.holdDuration>1e-5||!a.prePreKf,y=void 0!==a.postKf.holdDuration&&a.postKf.holdDuration>1e-5||!a.postPostKf;w=x?y?d.inOutEasing:d.inEasing:y?d.outEasing:d.noEasing,v=new e(a,a.preKf.easingDuration?a.preKf.easingDuration:this.defaultEasingDuation,w)}var z=function(a){if(r>a||t>s)return 0;var c=(a-r)/s;return v?v.ease(c):new b(c)},A=function(a){if(r>a||t>s)return 0;var c=(a-r)/s;return v?v.ease(c):new b(c)};this.interpolateRegion=function(a,b){var c=z(a);b.span.x=n*(1-c)+p*c,b.span.y=o*(1-c)+q*c;var d=A(a);u.interpolateCenter(d,b.center)}}return a.prototype.interpolateRegion=function(){},a.prototype.interpolate=function(a,b){if(!b)return null;var c=b.state[this.sliverId];this.interpolateRegion(a,c.region)},a.prototype.interpolateRegion=function(){},a}();a.viewportInterpolator2D=f}(a.Interpolators||(a.Interpolators={}));a.Interpolators}(a.Ext||(a.Ext={}));a.Ext}(rin||(rin={}));var rin;!function(a){!function(a){"use strict";function b(a){var b=!(!console||!console.log);return{log:function(){for(var a=[],c=0;c<arguments.length-0;c++)a[c]=arguments[c+0];b&&console.log.apply(console,a)},assert:function(b,c){if(!b)throw{name:"assertionFailureException",message:"MODULE: "+a+" ASSERTION: "+c}},throwDuplicateException:function(b){throw{name:"duplicateObjectException",message:"MODULE: "+a+" ASSERTION: "+b}}}}a.newDiagnosticsModule=b}(a.diagnostics||(a.diagnostics={}));a.diagnostics}(rin||(rin={}));var rin;!function(a){!function(a){!function(a){!function(a){"use strict";function b(a,b){function c(a,b){var c=a.center.x-a.span.x/2,d=a.center.y-a.span.y/2,e=a.center.x+a.span.x/2,f=a.center.y+a.span.y/2,g=b.center.x-b.span.x/2,h=b.center.y-b.span.y/2,i=b.center.x+b.span.x/2,j=b.center.y+b.span.y/2;return i>=c&&e>=g&&j>=d&&f>=h}function d(a,b){b.x=a.x,b.y=a.y}function e(a,b){d(a.center,b.center),d(a.span,b.span)}function f(){return{display:{position:{center:{x:0/0,y:0/0},span:{x:0/0,y:0/0}},level:0,scale:null}}}var g=1,h={center:{x:0,y:0},span:{x:0,y:0}},i={x:0,y:0},j={x:0,y:0},k={center:{x:0,y:0},span:{x:0,y:0}},l=[],m=.24,n=(b.convertRegionToWorld2D||function(){return!1},b.convertRegionToScreen2D||function(a,c){var d;return d=b.convertPointToScreen2D(a.center,c.center),d&&(i.x=a.center.x-a.span.x/2,i.y=a.center.y-a.span.y/2,d=b.convertPointToScreen2D(i,j),d&&(c.span.x=2*Math.abs(c.center.x-j.x),c.span.y=2*Math.abs(c.center.y-j.y))),d||(c.center.x=c.center.y=c.span.x=c.span.y=0/0),d});return{evaluate:function(d){var i=b.currentLinearParameter?b.currentLinearParameter():0/0,j=b.currentNormalizedZoom?b.currentNormalizedZoom():0/0;b.getScreenDimensions(k),d.forEach(function(a,b){if(a.active)a.inactiveCount=0;else{var c=a.inactiveCount||0;a.inactiveCount=c+1,a.inactiveCount>g&&l.push(b)}a.active=!1}),l.length>0&&(l.forEach(function(a){delete d[a]}),l=[]),a.forEach(function(a,b){var g,l=d[b],o=!0,p=null,q=a.maxScaleZoom||0/0;isNaN(i)||(g=a.parameterRange,g&&(o=i>=g.from&&i<=g.to)),o&&!isNaN(j)&&(g=a.zoomRange,g&&(o=j>=g.from&&j<=g.to)),o=o&&n(a.region,h),o=o&&c(k,h),o&&(l?(l.active=!0,l.sourceItem!==a&&(l.sourceItem=a,l.hostContext=null,l.state=f())):(l={active:!0,sourceItem:a,hostContext:null,state:f()},d[b]=l),e(h,l.state.display.position),isNaN(j)||isNaN(q)||(p=Math.max(m,Math.min(1,j/q)),l.state.display.scale=p)),o||l&&(l.active=!1)})}}}a.newInstance=b}(a.base2DGroupPolicy||(a.base2DGroupPolicy={}));
a.base2DGroupPolicy}(a.BuiltinPolicies||(a.BuiltinPolicies={}));a.BuiltinPolicies}(a.embeddedArtifacts||(a.embeddedArtifacts={}));a.embeddedArtifacts}(rin||(rin={}));var rin;!function(a){!function(a){!function(a){!function(a){"use strict";function b(){return{level:0}}function c(a){return a.span.x*a.span.y}function d(a,b){var c=a.center.x-a.span.x/2,d=a.center.y-a.span.y/2,e=a.center.x+a.span.x/2,f=a.center.y+a.span.y/2,g=b.center.x-b.span.x/2,h=b.center.y-b.span.y/2,i=b.center.x+b.span.x/2,j=b.center.y+b.span.y/2,k=Math.max(0,Math.min(e,i)-Math.max(c,g)),l=Math.max(0,Math.min(f,j)-Math.max(d,h));return k*l}function e(a,b){var c=a.x-b.x,d=a.y-b.y;return Math.sqrt(c*c+d*d)}function f(a,f){function h(a){f.getScreenDimensions(i);var h=c(i),j=e(i.center,new g);a.forEach(function(a){if(a.state.sound||(a.state.sound=b()),a.active){var c={center:new g,span:new g};l(a.sourceItem.region,c);var f=d(i,c),k=f/h*((j-e(c.center,i.center))/j);a.state.sound.level=k}else a.state.sound.level=0})}var i={center:new g,span:new g},j=new g,k=new g,l=f.convertRegionToScreen2D||function(a,b){var c;return c=f.convertPointToScreen2D(a.center,b.center),c&&(j.x=a.center.x-a.span.x/2,j.y=a.center.y-a.span.y/2,c=f.convertPointToScreen2D(j,k),c&&(b.span.x=2*Math.abs(b.center.x-k.x),b.span.y=2*Math.abs(b.center.y-k.y))),c||(b.center.x=b.center.y=b.span.x=b.span.y=0/0),c};return{evaluate:h}}var g=function(){function a(){return{x:0,y:0}}return a}();a.newInstance=f}(a.ambientAudioPolicy||(a.ambientAudioPolicy={}));a.ambientAudioPolicy}(a.BuiltinPolicies||(a.BuiltinPolicies={}));a.BuiltinPolicies}(a.embeddedArtifacts||(a.embeddedArtifacts={}));a.embeddedArtifacts}(rin||(rin={}));var rin;!function(a){!function(a){!function(){"use strict"}(a.BuiltinPolicies||(a.BuiltinPolicies={}));a.BuiltinPolicies}(a.embeddedArtifacts||(a.embeddedArtifacts={}));a.embeddedArtifacts}(rin||(rin={}));var rin;!function(a){!function(b){"use strict";function c(a){var b={};return{addPipeline:function(c,d,e,g){var i=c.collectionId;b.hasOwnProperty(i)&&f.throwDuplicateException("Already have pipeline with collection id "+c.collectionId);var j=new h(a,c,d,e,g);b[i]=j},deletePipeline:function(a){b.hasOwnProperty(a)&&delete b[a]},render:function(a){e(b,function(b){b.process(a)})}}}function d(b,c,d){var e=a.embeddedArtifacts.BuiltinPolicies[b];return e&&e.newInstance(c,d)}function e(a,b){var c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];b(d,c,a)}}var f=a.diagnostics.newDiagnosticsModule("EA-LE"),g=function(){function a(){}return a.prototype.forEach=function(a){e(this,a)},a}(),h=function(){function a(a,b,c,d,e){var f=this;this.collection=b,this.workingItems=new g,this.host=e,this.provider=d,this.groupPolicies=[],c.forEach(function(c){var e=a.newGroupPolicy(c,b,d);f.groupPolicies.push(e)})}return a.prototype.process=function(a){var b=this;this.groupPolicies.forEach(function(c){c.evaluate(b.workingItems,a)}),this.host.update(this.workingItems)},a.prototype.extractItemStateFromExperienceState=function(){return{}},a}();b.newLayoutEngine=c,b.newDefaultGroupPolicy=d}(a.embeddedArtifacts||(a.embeddedArtifacts={}));a.embeddedArtifacts}(rin||(rin={})),function(a){"use strict";a.embeddedArtifacts=a.embeddedArtifacts||{},a.InteractionBehaviorArgs=function(a,b,c){this.orchestrator=a,this.sourceES=b,this.sourceEA=c},a.interactionBehaviorService={_behaviors:[],registerInteractionBehavior:function(a,b){b&&a&&"function"==typeof b.execute&&this._behaviors.push({key:a,value:b})},executeInteractionBehavior:function(a,b,c){if(a&&b)for(var d=function(){},e=this._behaviors.length-1;e>=0;e--)if(this._behaviors[e].key===a){this._behaviors[e].value.execute(b,c||d);break}}}}(window.rin=window.rin||{}),function(a){"use strict";a.embeddedArtifacts=a.embeddedArtifacts||{},a.embeddedArtifacts.artifactManager=function(){var a={},b=function(a){var b=document.getElementsByTagName("head")[0],c=document.createElement("style");c.innerHTML=a,c.setAttribute("rel","stylesheet"),c.setAttribute("type","text/css"),b.appendChild(c)},c=function(c,d,e){var f=function(a){a.style.position="absolute",a.height=a.attributes.height?parseFloat(a.attributes.height.value):0,a.width=a.attributes.height?parseFloat(a.attributes.width.value):0,a.anchorX=a.attributes.anchorX?parseFloat(a.attributes.anchorX.value):0,a.anchorY=a.attributes.anchorY?parseFloat(a.attributes.anchorY.value):0,"function"==typeof e&&e(a)},g=function(){{var a=document.createElement("div");c.visualLoadHelper.getContent(function(b){a.innerHTML=b,f(a.firstChild,c)},d)}},h=c.styleLoadHelper.getSource();h&&(a.hasOwnProperty(h)?g():c.styleLoadHelper.getContent(function(a){b(a),g()},d))};return{loadArtifactVisual:c}}(),a.embeddedArtifacts.ArtifactHost=function(b,c){var d=this,e={visible:"block",hidden:"none"},f={},g=c.getResourceResolver();if(b){var h=document.createElement("div");h.setAttribute("class","rinDefault2DHost"),h.style.width="100%",h.style.height="100%",h.style.background="transparent",h.style.top="0px",h.style.left="0px",h.style.pointerEvents="none",b.appendChild(h),c.playerStateChangedEvent.subscribe(function(a){for(var b in f)f.hasOwnProperty(b)&&f[b].actualEA.onPlayerStateChanged(a)});var i=function(b){var e;for(var g in f)if(f.hasOwnProperty(g)&&f[g].actualEA===b.actualEA){e=f[g].sourceItem;break}e&&e.defaultInteractionBehavior&&(b.orchestrator=c,b.host=d,b.sourceItem=e,a.interactionBehaviorService.executeInteractionBehavior(e.defaultInteractionBehavior,b))};this.updateLayout=function(){for(var a in f)if(f.hasOwnProperty(a)){var b=f[a];if(b.actualEA.visual&&b.actualEA.visual.style){var c=b.actualEA.getAnchoredOffset();b.actualEA.visual.style.left=b.state.display.position.center.x-c.x+"px",b.actualEA.visual.style.top=b.state.display.position.center.y-c.y+"px",b.actualEA.visual.style.opacity=b.actualEA.visual.clientWidth>0&&b.actualEA.visual.clientHeight>0?b.state.display.opacity||1:0,b.actualEA.visual.style.display=b.active?e.visible:e.hidden,b.state.display.scale&&(b.actualEA.visual.style.transform="scale("+b.state.display.scale+","+b.state.display.scale+")")}b.actualEA.setVolume(b.active&&b.state.sound?b.state.sound.level:0)}},this.update=function(a){for(var b in f)f.hasOwnProperty(b)&&!a.hasOwnProperty(b)&&d.removeArtifact(f[b]);for(b in a){var c=a[b];a.hasOwnProperty(b)&&!f.hasOwnProperty(b)&&d.addArtifact(c)}this.updateLayout()},this.checkOverlap=function(){return!1},this.addArtifact=function(b){if(b){f[b.sourceItem.id]=b;for(var d=window,e=0,j=b.sourceItem.eaTypeId.split(".");e<j.length;++e)d=d[j[e]];"function"==typeof d&&(b.actualEA=new d(b.sourceItem,g),b.actualEA.isInPlayMode=c.getPlayerState()===a.contracts.playerState.playing,a.embeddedArtifacts.artifactManager.loadArtifactVisual(b.actualEA,g,function(a){a.eaid=b.sourceItem.id,a.style.display="none",f.hasOwnProperty(b.sourceItem.id)&&(b.actualEA.visual=a,ko.applyBindings(b.actualEA,a),b.actualEA.interactionRequested.subscribe(i,null,this),h.appendChild(a),b.actualEA.visualLoadComplete&&b.actualEA.visualLoadComplete())}))}},this.removeArtifact=function(a){if(f.hasOwnProperty(a.sourceItem.id)){delete f[a.sourceItem.id],a.actualEA.interactionRequested.unsubscribe(i);for(var b=0;b<h.children.length;b++){var c=h.children[b];if(c.eaid===a.sourceItem.id)return void h.removeChild(c)}}},this.removeAll=function(a){for(var b in f)f.hasOwnProperty(b)&&d.removeArtifact(f[b]);a===!0&&h.parentElement&&"function"==typeof h.parentElement.removeChild&&h.parentElement.removeChild(h)},this.show=function(){h.style.display="block"},this.hide=function(){h.style.display="none"},this.updateLayout()}}}(window.rin=window.rin||{}),function(a){"use strict";a.embeddedArtifacts=a.embeddedArtifacts||{},a.embeddedArtifacts.embeddedArtifactsController=function(b){function c(a,b){var c={collectionId:b,forEach:function(b){a.forEach(function(a){b(a,a.id,c)})}};return c}var d=this;b.currentESItemsChanged.subscribe(function(a){var b,c;if(a.removedItems)for(b=0;b<a.removedItems.length;b++)c=a.removedItems[b],c&&c.experienceStream&&c.esData&&c.esData.data&&c.esData.data.EmbeddedArtifacts&&(c.experienceStream&&c.experienceStream.embeddedArtifacts&&null==c.experienceStream.embeddedArtifacts||d.removeEAComponents(c));if(a.addedItems)for(b=0;b<a.addedItems.length;b++)c=a.addedItems[b],c&&c.experienceStream&&c.experienceStream.getEmbeddedArtifactsProxy&&c.esData&&c.esData.data&&c.esData.data.EmbeddedArtifacts&&(c.experienceStream&&c.experienceStream.embeddedArtifacts&&null!=c.experienceStream.embeddedArtifacts||d.addEAComponents(c))},"eaController"),this.unload=function(){var a=b.getCurrentESItems();if(a)for(var c=0;c<a.length;c++){var e=a[c];e&&e.experienceStream&&e.esData&&e.esData.data.EmbeddedArtifacts&&(e.experienceStream&&e.experienceStream.embeddedArtifacts&&null!=e.experienceStream.embeddedArtifacts||d.removeEAComponents(e))}};var e={newGroupPolicy:function(c,d,e){return a.embeddedArtifacts.newDefaultGroupPolicy(c,d,e,b)}};this.addEAComponents=function(d){if(d&&d.experienceStream){var f=a.embeddedArtifacts.newLayoutEngine(e,b);d.experienceStream.embeddedArtifacts={layoutEngine:f,host:null,updateLoopTimerID:null};var g=new a.internal.AjaxDownloadHelper(b.getResourceResolver().resolveResource(d.esData.data.EmbeddedArtifacts.datasource));g.getContent(function(e){function g(){if("ready"===d.experienceStream.getState()){var c=d.experienceStream.getEmbeddedArtifactsProxy(f),e=c.getEmbeddedArtifactsContainer(),h=new a.embeddedArtifacts.ArtifactHost(e,new a.internal.OrchestratorProxy(b));d.experienceStream.embeddedArtifacts.host=h,d.esData.data.EmbeddedArtifacts.hideDuringPlay&&d.esData.data.EmbeddedArtifacts.hideDuringPlay===!0&&(b.getPlayerState()===a.contracts.playerState.playing&&h.hide(),b.playerStateChangedEvent.subscribe(function(b){b.currentState===a.contracts.playerState.pausedForExplore?h.show():b.currentState===a.contracts.playerState.playing&&h.hide()},d.id),b.playerESEvent.subscribe(function(b){b&&b.eventId===a.contracts.esEventIds.resumeTransitionEvent&&b.sender._esData.experienceId===d.experienceId&&("started"===b.eventData.transitionState?h.hide():"interrupted"===b.eventData.transitionState&&h.show())},d.id)),f.addPipeline(i,d.esData.data.EmbeddedArtifacts.policies,c,h);var j=function(){a.internal.debug.assert(b.getIsOnStage(d.experienceStream)),f.render({})};d.experienceStream.embeddedArtifacts.updateLoopTimerID=setInterval(j,500)}else"error"!==d.experienceStream.getState()&&setTimeout(g,500)}var h=JSON.parse(e),i=c(h,"eaDataCollection");g()})}},this.removeEAComponents=function(a){a&&a.experienceStream&&a.experienceStream.embeddedArtifacts&&a.experienceStream.embeddedArtifacts.host&&(clearInterval(a.experienceStream.embeddedArtifacts.updateLoopTimerID),b.playerStateChangedEvent.unsubscribe(a.id),b.playerESEvent.unsubscribe(a.id),a.experienceStream.embeddedArtifacts.host.removeAll(!0),a.experienceStream.embeddedArtifacts=null)}}}(window.rin=window.rin||{}),window.rin=window.rin||{},function(a){"use strict";a.internal=a.internal||{},a.defaults=a.defaults||{},a.internal.requestAnimFrame=function(){var a=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)};return function(b){a.call(window,b)}}(),a.internal.AjaxDownloadHelper=function(a,b){this.getSource=function(){return a?a:b},this.getContent=function(c,d){if(b)c(b);else{if(!a)throw new Error("Neither Url nor content is provided.");var e=d?d.resolveSystemResource(a):a;$.get(e,null,function(a){c(a)})}}},a.util={extend:function(a,b){function c(){}c.prototype=a.prototype,b.prototype=new c,b.baseConstructor=b.prototype.constructor,b.prototype.constructor=b,b.parentConstructor=a,b.parentPrototype=a.prototype},stringFormat:function(a){var b=arguments;return a.replace(/\{(\d+)\}/g,function(a,c){return b[parseInt(c,10)+1]})},trim:function(a){return(a||"").replace(/^\s+|\s+$/g,"")},startsWith:function(a,b){return!a||!b||a.length<b.length?!1:a.substr(0,b.length)===b},endsWith:function(a,b){return!a||!b||a.length<b.length?!1:a.substr(a.length-b.length)===b},isAbsoluteUrl:function(a){return/^[a-z]{1,5}:\/\//i.test(a)},setElementOpacity:function(a,b){a&&a.style&&(a.style.opacity=b,a.style.filter="alpha(opacity="+100*b+")")},hasChildElement:function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return!0;return!1},assignAsInnerHTMLUnsafe:function(a,b){void 0!==window.MSApp&&window.MSApp.execUnsafeLocalFunction?window.MSApp.execUnsafeLocalFunction(function(){a.innerHTML=b}):a.innerHTML=b},createElementWithHtml:function(b){var c=document.createElement("div");return a.util.assignAsInnerHTMLUnsafe(c,b),c},expando:"rin"+Date.now(),uuid:0,getUniqueIdIfObject:function(a){if("object"!=typeof a)return a;var b=a[this.expando];return b||(b=a[this.expando]=++this.uuid),b},overrideProperties:function(a,b){for(var c in a)b[c]=a[c];return b},shallowCopy:function(a){var b={};return this.overrideProperties(a,b),b},deepCopy:function(a){if("object"!=typeof a||null===a)return a;var b=a.constructor();for(var c in a)b[c]=this.deepCopy(a[c]);return b},getQueryStringParams:function(a){var b,c,d,e,f={},g="undefined"==typeof a?document.location.search:a,h=g.indexOf("?");for(h>=0&&(g=g.substr(h+1)),b=g.split("&"),d=0,e=b.length;e>d;d++)c=b[d].split("="),2===c.length&&(f[c[0]]=c[1]);return f},removeQueryStringParam:function(a,b){var c,d,e,f,g="",h="undefined"==typeof a?document.location.search:a,i=h.indexOf("?");for(i>=0&&(g=h.substr(0,i+1),h=h.substr(i+1)),c=h.split("&"),e=0,f=c.length;f>e;e++)d=c[e].split("="),d[0]!==b&&(g+=(0===e?"":"&")+c[e]);return g},buildQueryString:function(a){var b="http://default/?",c=!0;for(var d in a)a.hasOwnProperty(d)&&(b+=(c?"":"&")+d+"="+a[d],c=!1);return b},rand:function(a,b){return Math.random()*(b-a)+a},randInt:function(b,c){return~~a.util.rand(b,c)},hideElementByOpacity:function(a){this.setElementOpacity(a,0)},unhideElementByOpacity:function(a){this.setElementOpacity(a,1)},parseJSON:function(a){if("string"!=typeof a||!a)return null;if(a=this.trim(a),window.JSON&&window.JSON.parse)return window.JSON.parse(a);var b=/^[\],:{}\s]*$/,c=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,d=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,e=/(?:^|:|,)(?:\s*\[)+/g;return b.test(a.replace(c,"@").replace(d,"]").replace(e,""))?new Function("return "+a)():void jQuery.error("Invalid JSON: "+a)},combinePathElements:function(){for(var b="",c=0,d=arguments.length;d>c;c++){var e=a.util.trim(arguments[c]);e&&"/"!==e[e.length-1]&&(e+="/"),b&&"/"===e[0]&&(e=e.substr(1,e.length)),b+=e}return b.length>0?b.substr(0,b.length-1):b},convertToAbsoluteUri:function(a){if(!a||0===a.length||this.isAbsoluteUrl(a))return a;var b=document.createAttribute("img");return b.src=a,b.src},getDocumentLocationRootUrl:function(){if(!this._getDocumentLocationRootUrl){var a=(document.location.origin?document.location.origin:document.location.protocol+"//"+document.location.host)+document.location.pathname,b=a.lastIndexOf("/");this._getDocumentLocationRootUrl=b>document.location.protocol.length+3?a.substr(0,b):a}return this._getDocumentLocationRootUrl},removeAllChildren:function(a){if(a)for(;a.firstChild;)a.removeChild(a.firstChild)},getDictionaryKeys:function(a){if("function"!=typeof Object.keys){var b,c=[];for(b in Object)Object.hasOwnProperty(b)&&c.push(b);return c}return Object.keys(a)},getDictionaryValues:function(b){var c=new a.internal.List;for(var d in b)b.hasOwnProperty(d)&&c.push(b[d]);return c},makeArray:function(a){for(var b=[],c=0,d=a.length;d>c;c++)b.push(a[c]);return b},emptyFunction:function(){}},a.internal.debug={assert:function(b,c){b||(this.write(c||"assert failed"),a.enableDebugger)},debugWriteElement:null,write:function(b){this.debugWriteElement&&this.debugWriteElement.innerHTML&&a.util.assignAsInnerHTMLUnsafe(this.debugWriteElement,b+"<br/>"+this.debugWriteElement.innerHTML);var c=window.console;"undefined"!=typeof a&&!a.disableLogging&&"undefined"!=typeof c&&c&&c.log&&c.log(b)}},String.prototype.rinFormat||(String.prototype.rinFormat=function(){var a=arguments;return this.replace(/\{(\d+)\}/g,function(b,c){return a[parseInt(c,10)]})}),a.internal.List=function(){arguments&&arguments.length>0&&Array.prototype.push.apply(this,Array.prototype.slice.call(arguments,0))},a.internal.List.prototype=[],a.internal.List.prototype.lastOrDefault=function(a){for(var b=this.length-1;b>=0;b--)if(!a||a(this[b]))return this[b];return null},a.internal.List.prototype.firstOrDefault=function(a){for(var b=0,c=this.length;c>b;b++)if(!a||a(this[b]))return this[b];return null},a.internal.List.prototype.any=a.internal.List.prototype.some||function(a){for(var b=0,c=this.length;c>b;b++)if(!a||a(this[b]))return!0;return!1},a.internal.List.prototype.firstOrDefaultIndex=function(a){for(var b=0,c=this.length;c>b;b++)if(!a||a(this[b]))return b;return-1},a.internal.List.prototype.select=a.internal.List.prototype.map||function(b){for(var c=new a.internal.List,d=0,e=this.length;e>d;d++)c.push(b(this[d]));return c},a.internal.List.prototype.foreach=a.internal.List.prototype.forEach||function(a,b){for(var c=0,d=this.length;d>c;c++)a.call(b||this,this[c],c)},a.internal.List.prototype.contains=function(a){return this.indexOf(a)>=0},a.internal.List.prototype.except=function(b){a.internal.debug.assert(b.constructor===Array,"Non array is passed in except method");var c,d,e={},f=new a.internal.List;for(c=0,d=b.length;d>c;c++)e[a.util.getUniqueIdIfObject(b[c])]=!0;for(c=0,d=this.length;d>c;c++)e[a.util.getUniqueIdIfObject(this[c])]||f.push(this[c]);return f},a.internal.List.prototype.distinct=function(){for(var b={},c=new a.internal.List,d=0,e=this.length;e>d;d++){var f=this[d],g=a.util.getUniqueIdIfObject(f);b[g]||c.push(f),b[g]=!0}return c},a.internal.List.prototype.indexOf||(a.internal.debug.assert(!1,"Array List has no indexOf"),a.internal.List.prototype.indexOf=function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1}),a.internal.List.prototype.filter=function(b){for(var c=new a.internal.List,d=0,e=this.length;e>d;d++)b(this[d])&&c.push(this[d]);return c},a.internal.List.prototype.where=a.internal.List.prototype.filter,a.internal.List.prototype.concat=function(b){var c=new a.internal.List;return Array.prototype.push.apply(c,this),Array.prototype.push.apply(c,b),c},a.internal.List.prototype.remove=function(a){var b=this.indexOf(a);return b>=0&&this.splice(b,1),this},a.internal.List.prototype.max=function(a){for(var b=this.length>0?a(this[0]):0/0,c=this.length>0?this[0]:null,d=1,e=this.length;e>d;d++){var f=a(this[d]);f>b&&(b=f,c=this[d])}return c},a.internal.List.prototype.removeAll=function(){try{this.length=0}catch(a){this.splice(0,this.length)}},a.internal.TimeSpan=function(a){this._currentTimeSpanMs=a||0},a.internal.TimeSpan.prototype={add:function(a){this._currentTimeSpan+=a},reduce:function(a){this._currentTimeSpan-=a},equals:function(a){return a._currentTimeSpan===this._currentTimeSpan},valueOf:function(){return this._currentTimeSpan},_currentTimeSpan:0},a.internal.TimeSpan.zero=new a.internal.TimeSpan,a.internal.Timer=function(){},a.internal.Timer.prototype={intervalSeconds:1,tick:null,data:null,start:function(){this.stop();var a=this;this.timerId=setTimeout(function(){a._onTick()},1e3*this.intervalSeconds),this._isRunnning=!0},stop:function(){this.timerId&&clearTimeout(this.timerId),this._isRunnning=!1},getIsRunning:function(){return this._isRunnning},timerId:-1,_isRunnning:!1,_onTick:function(){this.tick&&this.tick(),this.start()}},a.internal.Timer.startTimer=function(b,c,d){var e=new a.internal.Timer;e.intervalSeconds=b||e.intervalSeconds,e.tick=c,e.data=d,e.start()},a.internal.StopWatch=function(){},a.internal.StopWatch.prototype={getIsRunning:function(){return this._isRunning},getElapsedSeconds:function(){return this._isRunning?Date.now()/1e3-this._startingOffset+this._elapsedOffset:this._elapsedOffset},reset:function(){this._isRunning=!1,this._startingOffset=0,this._elapsedOffset=0},start:function(){this._startingOffset=Date.now()/1e3,this._isRunning=!0},stop:function(){this._isRunning&&(this._elapsedOffset=this.getElapsedSeconds()),this._isRunning=!1},addElapsed:function(a){this._elapsedOffset+=a},_isRunning:!1,_startingOffset:0,_elapsedOffset:0},a.internal.DoubleAnimation=function(b,c,d){if(this.duration=b||this.duration,this.from=c,this.to=d,this.keyframe=null,a.internal.debug.assert(this.duration>=0),"object"==typeof c&&"object"==typeof d){this.keyframe={};for(var e in c)c.hasOwnProperty(e)&&"number"==typeof c[e]&&(this.keyframe[e]=c[e])}},a.internal.DoubleAnimation.prototype={duration:1,from:0,to:1,keyframe:null,isCompleted:!1,begin:function(){this._startingOffset=Date.now()/1e3},stop:function(){var a=Date.now()/1e3-this._startingOffset;this._startingOffset=-1,this.isCompleted=a>=this.duration,this._endingValue=this.keyframe?this._interpolateKeyframe(a):this._interpolateValue(a,this.from,this.to)},getCurrentValue:function(){if(0===this._startingOffset)return this.from;if(this._startingOffset<0)return this._endingValue;if(0===this.duration)return this.to;var a=Date.now()/1e3-this._startingOffset;return a>=this.duration?(this.stop(),this._endingValue):this.keyframe?this._interpolateKeyframe(a):this._interpolateValue(a,this.from,this.to)},getValueAt:function(a){return 0>=a?this.from:0===this.duration||a>=this.duration?this.to:this.keyframe?this._interpolateKeyframe(a):this._interpolateValue(a,this.from,this.to)},isRunning:function(){return this._startingOffset>=0},_interpolateKeyframe:function(a){for(var b in this.keyframe)this.keyframe[b]=this._interpolateValue(a,this.from[b],this.to[b]);return this.keyframe},_interpolateValue:function(a,b,c){return b+(c-b)*Math.min(a,this.duration)/this.duration},_startingOffset:0,_endingValue:0},a.internal.Storyboard=function(a,b,c){this._doubleAnimation=a,this.onAnimate=b,this.onCompleted=c},a.internal.Storyboard.prototype={onCompleted:null,onAnimate:null,begin:function(){if(!this._doubleAnimation)throw new Error("No animation is specified.");this._doubleAnimation.begin(),this._animate()},stop:function(){this._stopFlag=!0,this._doubleAnimation&&this._doubleAnimation.stop(),"function"==typeof this.onCompleted&&this.onCompleted(this._doubleAnimation.isCompleted)},_animate:function(){if(this._stopFlag===!1){var b=this._doubleAnimation.getCurrentValue();if("function"==typeof this.onAnimate&&this.onAnimate(b),!this._doubleAnimation.isRunning())return this._stopFlag=!0,void("function"==typeof this.onCompleted&&this.onCompleted(this._doubleAnimation.isCompleted));a.internal.requestAnimFrame(this._animate.bind(this))}},_stopFlag:!1,_doubleAnimation:null},a.internal.Promise=function(b){var c=b||this,d=this,e=null,f=null,g=null,h={notStarted:"notStarted",completed:"completed",failed:"failed"},i=h.notStarted,j=function(b,j){switch(b){case h.completed:if(i=b,"function"==typeof f){var k=f.call(c,j);k&&k instanceof a.internal.Promise?k._setNextPromise(g):g&&g.markSuccess(j)}else g&&g.markSuccess(j);return;case h.failed:return d.currentState=b,"function"==typeof e&&e.call(c,j),void(g&&g.markFailed(j));case h.notStarted:throw new Error("Invalid state transition: Cannot set the state to not-started")}};this.then=function(b,k){return b instanceof a.internal.Promise?b:(f||e?(g||(g=new a.internal.Promise(c)),g.then(b,k)):(f=b,e=k),i===h.completed?j(h.completed):i===h.failed&&j(h.failed),d)},this._setNextPromise=function(b){if(b instanceof a.internal.Promise)g?g._setNextPromise(b):g=b;else if(null!==b&&void 0!==b)throw new Error("parameter is not of type promise");return d},this.markSuccess=function(a){i===h.notStarted&&j(h.completed,a)},this.markFailed=function(a){i===h.notStarted&&j(h.failed,a)}},a.internal.DeferredLoader=function(b){var c,d,e,f=b||window,g=f.document,h=1e4,i=100,j={},k=function(a,b,c){var d=b||g.lastChild;if("before"===c){if(void 0!==window.MSApp&&window.MSApp.execUnsafeLocalFunction)return window.MSApp.execUnsafeLocalFunction(function(){g.insertBefore(a,d)});g.insertBefore(a,d)}else{if(void 0!==window.MSApp&&window.MSApp.execUnsafeLocalFunction)return window.MSApp.execUnsafeLocalFunction(function(){d.parentNode.appendChild(a)});d.parentNode.appendChild(a)}},l=function(a,b,c,d){var e,f=g.createElement(a),h=b||[];for(e in h)h.hasOwnProperty(e)&&f.setAttribute(e,h[e]);return k(f,c,d),f},m=function(a){var b=g.getElementsByTagName(a);return b&&(b.length>0?b[0]:void 0)},n=function(){return d=d||g.body||m("body")},o=function(){return c=c||g.head||m("head")||l("head",null,n(),"before")},p=function(){if(!e){var a=f.navigator.userAgent;e={},/AppleWebKit\//i.test(a)&&/Chrome/i.test(a)?e.chrome=!0:/AppleWebKit\//i.test(a)?e.webkit=!0:window.MSApp?e.win8=!0:/MSIE 10/i.test(a)||document.documentMode&&document.documentMode>=9?e.ie10=!0:/MSIE/i.test(a)?e.ie=!0:e.other=!0}return e},q=function(b,c){var d,e;return j[b]?j[b].promise:(e=new a.internal.Promise,j[b]={promise:e},d=f.XMLHttpRequest?new f.XMLHttpRequest:new f.ActiveXObject("Microsoft.XMLHTTP"),d.onreadystatechange=function(){var a;4===d.readyState&&(200===d.status?(a=d.responseText,j[b].data=a,"function"==typeof c&&c(a),e.markSuccess(a)):(a=d.statusText,j[b].data=a,e.markFailed(a)))},d.open("GET",b,!0),d.send(null),e)},r=function(b){return a.util.createElementWithHtml(b).childNodes},s=o().lastChild,t=s,u=s,v=function(a){var b;return b=/\.css$/i.test(a)?"css":/\.js$/i.test(a)?"script":/\.htm?$/i.test(a)?"html":"unknown"},w=function(a){for(var b=g.styleSheets,c=b.length-1;c>=0&&b[c].href!==a;)c-=1;return c>=0},x=function(b,c,d){return b.href&&w(b.href)?void(c instanceof a.internal.Promise&&c.markSuccess()):(d||0)>=h?void(c instanceof a.internal.Promise&&c.markFailed()):void f.setTimeout(function(){x(b,c,(d||0)+i)},i)},y=function(b,c){p(),e.ie&&"script"===b.nodeName.toLowerCase()?b.onload=b.onreadystatechange=function(){/loaded|complete/.test(b.readyState)&&(b.onload=b.onreadystatechange=null,c instanceof a.internal.Promise&&c.markSuccess())}:e.webkit&&"link"===b.nodeName.toLowerCase()?x(b,c):(b.onload=function(){c instanceof a.internal.Promise&&c.markSuccess()},b.onerror=function(){c instanceof a.internal.Promise&&c.markFailed()})},z=function(b,c){var d,e=new a.internal.Promise,f=!1;try{f=void 0!==c&&"function"==typeof c&&c()}catch(g){f=!1}return f?e.markSuccess():(d=l("script",{type:"text/javascript"},s),y(d,e),d.src=b),e},A=function(b){var c,d=new a.internal.Promise;return w(b)?d.markSuccess():(c=l("link",{rel:"stylesheet"},t),y(c,d),c.href=b),d},B=function(a){var b=q(a,function(a){var b,c,d=r(a),e=d.length,f=u;for(b=0;e>b;b+=1)c=d[b],c&&c.nodeType&&c.nodeType===c.ELEMENT_NODE&&(k(c,f),f=c,b-=1)});return b},C=function(a){var b=q(a);return b},D=function(a){var b=a,c=a;switch("string"==typeof c&&(c={src:b}),c.type||(c.type=v(c.src)),c.type.toLowerCase()){case"script":return z(c.src,c.loadChecker);case"css":return A(c.src);case"html":return B(c.src);default:return C(c.src)}};this.parallelLoader=function(b){var c,d=new a.internal.Promise,e=b instanceof Array?b:[b],f=e.length,g=f,h=0,i=function(){g-=1,0===g&&(h>0?d.markSuccess():d.markFailed())},j=function(){h+=1,i()},k=function(){i()};for(c=0;f>c;c+=1)D(e[c]).then(j,k);return 0===f&&d.markSuccess(),d},this.sequentialLoader=function(a){var b,c,d,e=a instanceof Array?a.slice():[a],f=e.length;for(d=0;f>d;d+=1)b=e[d],c?c.then(function(){return b=e.shift(),c=D(b)}):(b=e.shift(),c=D(b));return c},this.otherResources=j,this.loadSystemResources=function(b){var c=this,d=function(){var d;return a.internal.systemResourcesProcessed=a.internal.systemResourcesProcessed||!1,a.internal.systemResourcesProcessed?(d=new a.internal.Promise,d.markSuccess()):d=c.parallelLoader([{src:"http://code.jquery.com/jquery-1.10.2.min.js",loadChecker:function(){return void 0!==window.jQuery}},{src:"http://ajax.aspnetcdn.com/ajax/knockout/knockout-2.2.1.js",loadChecker:function(){return void 0!==window.ko}}]).then(function(){return c.sequentialLoader([{src:a.util.combinePathElements(b,"lib/jquery.easing.1.3.js"),loadChecker:function(){return void 0!==window.jQuery.easing.jswing}},{src:a.util.combinePathElements(b,"lib/jquery.pxtouch.min.js"),loadChecker:function(){return void 0!==window.PxTouch}},{src:a.util.combinePathElements(b,"lib/rin-experiences-1.0.js"),loadChecker:function(){return void 0!==a.experiences}}])}).then(function(){a.internal.systemResourcesProcessed=!0}),d};return void 0!==window.MSApp&&window.MSApp.execUnsafeLocalFunction?window.MSApp.execUnsafeLocalFunction(d):d()},this.loadAllThemeResources=function(b){var c=this,d=function(){return c.parallelLoader([a.util.combinePathElements(b,"rin.css"),a.util.combinePathElements(b,"rinTemplates.htm")])};return void 0!==window.MSApp&&window.MSApp.execUnsafeLocalFunction?window.MSApp.execUnsafeLocalFunction(d):d()}}}(window.rin),window.rin=window.rin||{},function(a){"use strict";a.internal=a.internal||{},a.internal.ESItem=function(b,c,d,e,f,g,h){this.id=b,this.esData=c,this.experienceStream=d,this.beginOffset=f||0,this.endOffset=g||1/0,this.experienceStreamLayer=h||a.contracts.experienceStreamLayer.background,this.zIndex=e||0,this.providerId="UnknownOrSystem"},a.internal.ESItem.prototype={id:"",esData:null,experienceStream:a.contracts.IExperienceStream,beginOffset:0,endOffset:0,experienceStreamLayer:null,zIndex:0,screenPlayInfo:null,_isLoadCalled:!1,toString:function(){return"{0} ({1}:{2}-{3}:{4}) ES:{5}".rinFormat(this.id,this.beginOffset/60,this.beginOffset%60,this.endOffset/60,this.endOffset%60,this.experienceStream.state)}}}(window.rin),window.rin=window.rin||{},function(a){"use strict";a.internal=a.internal||{},a.internal.ESItemsManager=function(){var a=this;this.esStateChangedEventHook=function(b){a._onESStateChangedEvent(b)},this._screenPlayInterpreterCache={},this._esItemCache={}},a.internal.ESItemsManager.prototype={_systemESItems:null,_orchestrator:null,_esTimerES:null,_screenPlayES:null,_currentESItems:null,_esItemCache:null,_screenPlayInterpreterCache:null,bufferingES:null,preloaderES:null,screenPlayInterpreter:null,esTimer:null,preloaderESItem:null,esStateChangedEventHook:null,initialize:function(b,c,d){this._orchestrator=c,this._getSystemESItems(),null===this.screenPlayInterpreter&&(this.screenPlayInterpreter=this.getScreenPlayInterpreter(d||b.defaultScreenplayId,b.providers[b.screenplayProviderId]));var e=c.getNarrativeInfo();e.totalDuration=this.screenPlayInterpreter.getEndTime(),this._cacheAllScreenPlays(),this.preloaderES.initialize(this._orchestrator,this._orchestrator.playerControl.stageControl,this.screenPlayInterpreter,this._allOrderedESItems),this._currentESItems=new a.internal.List,this.onCurrentExperienceStreamsChanged(this._systemESItems,null,this._systemESItems)},unload:function(){this._currentESItems&&null!==this._currentESItems&&(this._orchestrator.currentESItemsChanged.publish({addedItems:null,removedItems:this._currentESItems,currentList:null,isSeek:!0}),this._currentESItems.foreach(function(a){a.experienceStream.stateChangedEvent.unsubscribe(this.esStateChangedEventHook)},this)),this.screenPlayInterpreter&&null!==this.screenPlayInterpreter&&this.screenPlayInterpreter.getESItems().foreach(function(a){this._orchestrator.isExperienceStreamLoaded(a.id)&&a.experienceStream.unload()},this),this._systemESItems.foreach(function(a){"function"==typeof a.experienceStream.unload&&a.experienceStream.unload()})},switchHyperTimeline:function(a){if((this.screenPlayInterpreter||this.screenPlayInterpreter.id!==a)&&this._orchestrator.isValidScreenPlayId(a)){this.screenPlayInterpreter=this.getScreenPlayInterpreter(a);var b=this._orchestrator.getNarrativeInfo();b.totalDuration=this.screenPlayInterpreter.getEndTime(),this._esTimerES.load(),this.preloaderES.updateScreenPlay(this.screenPlayInterpreter),this.screenPlayInterpreter.getESItems().foreach(function(a){this.screenPlayInterpreter.setScreenPlayAttributes(a)}.bind(this))}},createESItem:function(b,c,d,e){var f=d.id,g=this._esItemCache[f];if(g)return g;var h=this._getFactory(b,c);if(a.internal.debug.assert(null!==h,"could not find factory function"),h){g=new a.internal.ESItem(f,d);var i=e||new a.internal.OrchestratorProxy(this._orchestrator);
return g.experienceStream=h(i,d),a.internal.debug.assert(null!==g.experienceStream,"ES Item has no ES"),i.init(g.experienceStream),this._esItemCache[f]=g,g}return a.internal.debug.assert(!1,"Could not create required ES"),null},getCurrentESItems:function(){return this._currentESItems},getSystemESItems:function(){return this._systemESItems},areAllESsReady:function(){return!this.getCurrentESItems().firstOrDefault(function(b){return b.experienceStream.getState()===a.contracts.experienceStreamState.buffering})},updateCurrentESs:function(a,b){var c=this.getCurrentESItems(),d=this.screenPlayInterpreter.getESItems(a).concat(this._systemESItems),e=d.except(c),f=c.except(d);this.onCurrentExperienceStreamsChanged(e,f,d,!0,b)},onCurrentExperienceStreamsChanged:function(b,c,d,e,f){this._currentESItems=d,this._orchestrator.stageAreaManager.onCurrentExperienceStreamsChanged(b,c,d,e),this._orchestrator.currentESItemsChanged.publish({addedItems:b,removedItems:c,currentList:d,isSeek:e}),this._orchestrator.eventLogger.logEvent("");var g,h,i,j=b&&b.constructor===Array&&b.length>0,k=c&&c.constructor===Array&&c.length>0;if(j)for(g=0,h=b.length;h>g;g++)if(!c||!c.any(function(a){return a.experienceStream===b[g].experienceStream})){i=b[g],i.experienceStream.stateChangedEvent.subscribe(this.esStateChangedEventHook,"ESItemsManager"),this._setNewlyAddedState(i),"function"==typeof i.experienceStream.addedToStage&&i.experienceStream.addedToStage();var l=this._orchestrator.getCurrentLogicalTimeOffset(),m=.1;a.internal.debug.assert(l+m>=i.beginOffset&&l-m<=i.endOffset,"item added to stage beyond its life time"),this._orchestrator.eventLogger.logEvent("ES {0} added at {1} time scheduled {2}",i.id,l,i.beginOffset)}if(k)for(g=0,h=c.length;h>g;g++)b&&b.any(function(a){return a.experienceStream===c[g].experienceStream})||(i=c[g],i.experienceStream.stateChangedEvent.unsubscribe("ESItemsManager"),i.experienceStream.pause(this._orchestrator._getESItemRelativeOffset(i,f)),"function"==typeof i.experienceStream.removedFromStage&&i.experienceStream.removedFromStage(),this._orchestrator.eventLogger.logEvent("ES {0} removed at {1} time scheduled {2}",i.id,this._orchestrator.getCurrentLogicalTimeOffset(),i.endOffset));(j||k)&&this._checkESStatusesAsync()},getScreenPlayInterpreter:function(b){var c=this._screenPlayInterpreterCache[b];if(!c){c=new a.internal.DefaultScreenPlayInterpreter;var d=this._orchestrator.getSegmentInfo();d.screenplays[b]?c.initialize(b,d,this._orchestrator):a.internal.debug.write("Unable to find the screenplay with id "+b),this._screenPlayInterpreterCache[b]=c}return c},_allScreenPlayIds:null,_allOrderedESItems:null,_cacheAllScreenPlays:function(){if(!this._allScreenPlayIds){this._allScreenPlayIds=new a.internal.List,this._allOrderedESItems=new a.internal.List;for(var b in this._orchestrator._rinData.screenplays){this._allScreenPlayIds.push(b);var c=this.getScreenPlayInterpreter(b);Array.prototype.push.apply(this._allOrderedESItems,c.getESItems())}}},_setNewlyAddedState:function(b){var c,d="none";this.screenPlayInterpreter.setScreenPlayAttributes(b);var e=this._orchestrator.getPlayerState();if(e!==a.contracts.playerState.inTransition)switch(e){case a.contracts.playerState.pausedForBuffering:case a.contracts.playerState.pausedForExplore:c=this._orchestrator._getESItemRelativeOffset(b),b.experienceStream.pause(c,b.currentExperienceStreamId),d="paused";break;case a.contracts.playerState.playing:var f=b.experienceStream.getState();f===a.contracts.experienceStreamState.ready?(c=this._orchestrator._getESItemRelativeOffset(b),b.experienceStream.play(c,b.currentExperienceStreamId),d="played"):f===a.contracts.experienceStreamState.buffering&&(this._orchestrator._pauseForBuffering(),d="narrative paused");break;case a.contracts.playerState.stopped:break;default:a.internal.debug.assert(!1,"Unknown player state encountered")}this._orchestrator.eventLogger.logEvent("ES {0} added action: {1}",b.id,d)},_onESStateChangedEvent:function(b){b.toState===a.contracts.experienceStreamState.error&&this._orchestrator.eventLogger.logErrorEvent("!!!!!ES {0} went to error state.".rinFormat(b.source)),this._checkESStatusesAsync()},_checkESStatusesAsync:function(){var a=this;setTimeout(function(){a._checkESStatuses()},0)},_checkESStatuses:function(){var b=this.areAllESsReady();this._orchestrator.setIsPlayerReady(b);var c=this._orchestrator.getPlayerState();c!==a.contracts.playerState.stopped&&(b&&(this._orchestrator.goalPlayerState===a.contracts.playerState.playing&&c!==a.contracts.playerState.playing?this._orchestrator.play():this._orchestrator.goalPlayerState===a.contracts.playerState.pausedForExplore&&c!==a.contracts.playerState.pausedForExplore&&this._orchestrator.pause()),b||c!==a.contracts.playerState.playing||this._orchestrator._pauseForBuffering())},_getSystemESItems:function(){this._systemESItems=new a.internal.List,this.bufferingES||(this.bufferingES=new a.internal.DefaultBufferingES(this._orchestrator));var b=new a.internal.ESItem("BufferingES",null,this.bufferingES,100001);this._systemESItems.push(b),this.preloaderES||(this.preloaderES=new a.internal.DefaultPreloaderES),this.preloaderESItem=new a.internal.ESItem("PreloaderES",null,this.preloaderES),this._systemESItems.push(this.preloaderESItem),this._esTimerES=new a.internal.ESTimerES(this._orchestrator,this),this.esTimer=this._esTimerES.esTimer;var c=new a.internal.ESItem("ESTimerES",null,this._esTimerES);if(this._systemESItems.push(c),this._orchestrator.playerConfiguration.playerControllerES&&!this._orchestrator.playerConfiguration.hideAllControllers&&!this._orchestrator.playerConfiguration.hideDefaultController){var d=new a.internal.ESItem("PlayerController",null,this._orchestrator.playerConfiguration.playerControllerES);this._systemESItems.push(d)}},_getFactory:function(b,c){return a.ext.getFactory(a.contracts.systemFactoryTypes.esFactory,b,c)}}}(window.rin),window.rin=window.rin||{},function(a){"use strict";a.internal=a.internal||{},a.internal.ESTimer=function(b,c){this._orchestrator=b,this._esItemsManager=c,this.taskTimer=new a.internal.TaskTimer},a.internal.ESTimer.prototype={taskTimer:null,loadESItmes:function(){this.taskTimer&&this.taskTimer.pause();var b=this._esItemsManager.screenPlayInterpreter.getESItems();this.taskTimer=new a.internal.TaskTimer;for(var c=0;c<b.length;c++){var d=b[c];this.taskTimer.add(d.beginOffset,new a.internal.ESTimerItem(d,!0)),1/0!==d.endOffset&&this.taskTimer.add(d.endOffset,new a.internal.ESTimerItem(d,!1)),this._orchestrator.eventLogger.logEvent("ESTimer: add item {0} for {1}-{2}",d.id,d.beginOffset,d.endOffset)}var e=this._esItemsManager.screenPlayInterpreter.getEndTime();this.taskTimer.add(e,new a.internal.ESTimerItem(this._endIndicatorItem,!1));var f=e-this._beforeEndNotificationTime;this.taskTimer.add(f,new a.internal.ESTimerItem(this._beforeEndIndicatorItem,!1));var g=this;this.taskTimer.taskTriggeredEvent.subscribe(function(a){g._taskTimer_taskTriggered(a)})},_taskTimer_taskTriggered:function(b){for(var c=new a.internal.List,d=new a.internal.List,e=0,f=b.length;f>e;e++){var g=b[e];g.isEntry?(c.push(g.esItem),this._orchestrator.eventLogger.logEvent("ESTimer Trigger Add: {0} at {1} scheduled {2}",g.esItem.id,this.taskTimer.getCurrentTimeOffset(),g.esItem.beginOffset)):(d.push(g.esItem),this._orchestrator.eventLogger.logEvent("ESTimer Trigger Rem: {0} at {1} scheduled {2}",g.esItem.id,this.taskTimer.getCurrentTimeOffset(),g.esItem.beginOffset))}var h=this._esItemsManager.getCurrentESItems();c=c.except(h);var i=c.concat(h).distinct().except(d);if(d.contains(this._beforeEndIndicatorItem)&&(this._orchestrator._onBeforeScreenPlayEnd(),d.remove(this._beforeEndIndicatorItem)),0!==c.length||0!==d.length){var j=d.contains(this._endIndicatorItem);if(j){d.remove(this._endIndicatorItem);var k=this._orchestrator._onScreenPlayEnding();if(k)return}this._esItemsManager.onCurrentExperienceStreamsChanged(c,d,i,!1),this._orchestrator._seekESItems(c,this._orchestrator.getCurrentLogicalTimeOffset()),j&&this._orchestrator._onScreenPlayEnded()}},_esItemsManager:null,_orchestrator:null,_beforeEndIndicatorItem:new a.internal.ESItem("BeforeEndIndicatorItem"),_endIndicatorItem:new a.internal.ESItem("EndIndicatorItem"),_beforeEndNotificationTime:.2},a.internal.ESTimerItem=function(a,b){this.esItem=a,this.isEntry=b}}(window.rin),window.rin=window.rin||{},function(a){"use strict";a.internal=a.internal||{},a.internal.EventLogger=function(){},a.internal.EventLogger.prototype={logEvent:function(){var b=this.formatString(arguments);a.internal.debug.write(b)},logErrorEvent:function(){var b=this.formatString(arguments);a.internal.debug.write(b)},logBeginEvent:function(b){return a.internal.debug.write("Begin: "+b),{begin:Date.now(),name:b}},logEndEvent:function(b,c){var d=(Date.now()-b.begin)/1e3;a.internal.debug.write("End event {0}. Duration {1}. {2}".rinFormat(b.name,d,c))},toString:function(){},_getIndent:function(){},formatString:function(a,b){b=b||0;var c=a[b];return c.replace(/\{(\d+)\}/g,function(c,d){return a[parseInt(d,10)+b+1]})},_indentLevel:0,_logBuilder:"",_errorLogBuilder:""}}(window.rin),window.rin=window.rin||{},function(a){"use strict";a.internal=a.internal||{},a.internal.Orchestrator=function(b,c){this.playerStateChangedEvent=new a.contracts.Event,this.isPlayerReadyChangedEvent=new a.contracts.Event,this.narrativeLoadedEvent=new a.contracts.Event,this.narrativeSeekedEvent=new a.contracts.Event,this.playerESEvent=new a.contracts.Event,this.currentESItemsChanged=new a.contracts.Event,this.playerControl=b,this.playerConfiguration=c,this._resourcesResolver=new a.internal.ResourcesResolver(c),this._esLoadedInfo={},this.stageAreaManager=new a.internal.StageAreaManager(this,b.stageControl),this.eventLogger=new a.internal.EventLogger},a.internal.Orchestrator.prototype={getResourceResolver:function(){return this._resourcesResolver},getNarrativeInfo:function(){return this._narrativeInfo},getSegmentInfo:function(){return this._rinData},play:function(b,c,d){if("function"==typeof this._lastPlayCallback&&"function"==typeof d&&this._lastPlayCallback(!1),"function"==typeof d&&(this._lastPlayCallback=d),a.internal.debug.assert(this._isNarrativeLoaded,"Narrative is not loaded"),!this._isNarrativeLoaded)return void this._throwInvalidOperation("Invalid operation: Play should be called only after loading narrative.");var e=this.getPlayerState();if(e!==a.contracts.playerState.inTransition){var f=this.getCurrentLogicalTimeOffset(),g="number"==typeof b&&b>=0;b=g?b:f,b>=this._narrativeInfo.totalDuration&&(b=0),c=c||this.currentScreenPlayId;var h=.1,i=this.currentScreenPlayId===c,j=Math.abs(f-b)<h&&i;if(e!==a.contracts.playerState.playing||!j||!i){var k=this.eventLogger.logBeginEvent("play");this.setPlayerState(a.contracts.playerState.inTransition);try{!i&&this.isValidScreenPlayId(c)&&this.switchHyperTimeline(c),j||(this.esItemsManager.esTimer.taskTimer.seek(b),this.esItemsManager.updateCurrentESs(b,f),this.narrativeSeekedEvent.publish({seekTime:b,screenPlayId:c})),this.esItemsManager.areAllESsReady()&&this._playCurrentESs(b)}finally{this.goalPlayerState=a.contracts.playerState.playing,this.esItemsManager.areAllESsReady()?(this.setPlayerState(a.contracts.playerState.playing),null!==this.playerControl._interactionES&&(this.playerControl.narrativeModeStarted.publish({offset:b,screenplayId:c},!0),this.playerControl._interactionES=null),"function"==typeof this._lastPlayCallback&&(this._lastPlayCallback(!0),this._lastPlayCallback=null)):(this.getPlayerState()!==a.contracts.playerState.pausedForBuffering&&this._pauseForBuffering(),this.setPlayerState(a.contracts.playerState.pausedForBuffering))}var l=!i||!j;l&&this.playerControl.seeked.publish({offset:b,screenplayId:this.currentScreenPlayId},!0),this.eventLogger.logEndEvent(k)}}},pause:function(b,c,d){if("function"==typeof this._lastPauseCallback&&"function"==typeof d&&this._lastPauseCallback(!1),"function"==typeof d&&(this._lastPauseCallback=d),a.internal.debug.assert(this._isNarrativeLoaded,"Narrative is not loaded"),!this._isNarrativeLoaded)return void this._throwInvalidOperation("Invalid operation: Pause should be called only after loading narrative.");var e=this.getPlayerState();if(e!==a.contracts.playerState.inTransition){var f=this.getCurrentLogicalTimeOffset(),g="number"==typeof b&&b>=0;b=g?b:f,b>=this._narrativeInfo.totalDuration&&(b=this._narrativeInfo.totalDuration),c=c||this.currentScreenPlayId;var h=.1,i=this.currentScreenPlayId===c,j=Math.abs(f-b)<h&&i;if(e!==a.contracts.playerState.pausedForExplore||!j||!i){var k=this.eventLogger.logBeginEvent("pause");this.setPlayerState(a.contracts.playerState.inTransition);try{!i&&this.isValidScreenPlayId(c)&&this.switchHyperTimeline(c),j||(this.esItemsManager.esTimer.taskTimer.seek(b),this.esItemsManager.updateCurrentESs(b,f),this.narrativeSeekedEvent.publish({seekTime:b,screenPlayId:c})),this._pauseCurrentESs(b)}finally{this.goalPlayerState=a.contracts.playerState.pausedForExplore,this.esItemsManager.areAllESsReady()?(this.setPlayerState(a.contracts.playerState.pausedForExplore),"function"==typeof this._lastPauseCallback&&(this._lastPauseCallback(!0),this._lastPauseCallback=null)):this.setPlayerState(a.contracts.playerState.pausedForBuffering)}var l=!i||!j;l&&this.playerControl.seeked.publish({offset:b,screenplayId:this.currentScreenPlayId},!0),this.eventLogger.logEndEvent(k)}}},isValidScreenPlayId:function(a){return!!this._rinData.screenplays[a]},isDefaultScreenPlayId:function(a){return a===this._rinData.defaultScreenplayId},switchHyperTimeline:function(b){a.internal.debug.assert(this.isValidScreenPlayId(b)),this.esItemsManager.switchHyperTimeline(b),this.currentScreenPlayId=b},getIsMuted:function(){return this.playerConfiguration.isMuted},setIsMuted:function(a){this.playerConfiguration.isMuted=a;for(var b=this.esItemsManager.getCurrentESItems(),c=0;c<b.length;c++){var d=b[c];"function"==typeof d.experienceStream.setIsMuted&&d.experienceStream.setIsMuted(a)}},updatePlayerConfiguration:function(b){a.util.overrideProperties(b,this.playerConfiguration),this.onESEvent(this,a.contracts.esEventIds.playerConfigurationChanged,b)},getPlayerVolumeLevel:function(){return this._playerVolumeLevel},setPlayerVolumeLevel:function(a){this._playerVolumeLevel=a;for(var b=this.esItemsManager.getCurrentESItems(),c=0;c<b.length;c++){var d=b[c];"function"==typeof d.experienceStream.setVolume&&d.experienceStream.setVolume(a*d.volumeLevel)}},onESEvent:function(b,c,d){if(this.esItemsManager){for(var e=this.esItemsManager.getCurrentESItems(),f=0;f<e.length;f++){var g=e[f];g.experienceStream.onESEvent&&g.experienceStream.onESEvent(b,c,d)}this.playerESEvent.publish(new a.contracts.PlayerESEventArgs(b,c,d))}},startInteractionMode:function(a){var b=this.getScreenPlayPropertyTable(this.currentScreenPlayId);if(!b||!b.isTransitionScreenPlay||b.allowInteraction){this.pause();var c=a||this.getCurrentESItems().firstOrDefault(function(a){return"function"==typeof a.experienceStream.getInteractionControls});c&&this.playerControl._interactionES!==c&&(this.playerControl._interactionES=c,this.playerControl.interactionModeStarted.publish({interactionES:c},!0))}},playerESEvent:new a.contracts.Event,getCurrentLogicalTimeOffset:function(){return this.esItemsManager&&this.esItemsManager.esTimer.taskTimer?this.esItemsManager.esTimer.taskTimer.getCurrentTimeOffset():0},getPlayerState:function(){return this._playerState},setPlayerState:function(b){if(b!==this._playerState){var c=this._playerState;this._playerState=b,this.playerStateChangedEvent.publish(new a.contracts.PlayerStateChangedEventArgs(c,b))}},playerStateChangedEvent:new a.contracts.Event,getIsPlayerReady:function(){return this._isPlayerReady},setIsPlayerReady:function(a){this._isPlayerReady!==a&&(this._isPlayerReady=a,this.isPlayerReadyChangedEvent.publish(a))},getIsNarrativeLoaded:function(){return this._isNarrativeLoaded},isPlayerReadyChangedEvent:new a.contracts.Event,playerConfiguration:null,getRelativeLogicalTime:function(b,c,d){if(d=d||this.getCurrentLogicalTimeOffset(),b.isSystemES)return d;if(b instanceof a.internal.ESItem)return this.esItemsManager.screenPlayInterpreter.getRelativeLogicalTime(b,d);var e=this.esItemsManager.screenPlayInterpreter.getESItems(),f=this.getCurrentESItems().firstOrDefault(function(a){return a.experienceStream===b&&a.currentExperienceStreamId===c});f||(f=e.firstOrDefault(function(a){return a.experienceStream===b&&a.currentExperienceStreamId===c})),f||(f=e.firstOrDefault(function(a){return a.experienceStream===b}));var g=this.esItemsManager.screenPlayInterpreter.getRelativeLogicalTime(f,d);return Math.max(g,0)},getProviderNameVersion:function(a){var b,c;return this._rinData.providers[a]?(b=this._rinData.providers[a].name,c=this._rinData.providers[a].version):b=a,{providerName:b,providerVersion:c}},createExperienceStream:function(b,c,d){var e,f,g,h=this.getProviderNameVersion(b);return e=h.providerName,f=h.providerVersion,g=this.esItemsManager.createESItem(e,f,c,d),a.internal.debug.assert(g,"missing ES Info"),g?g.experienceStream:null},ensureExperienceStreamIsLoaded:function(a){if(!this.isExperienceStreamLoaded(a.id)){var b=a.currentExperienceStreamId;a.experienceStream.load(b),this._esLoadedInfo[a.id]=!0}},isExperienceStreamLoaded:function(a){return!!this._esLoadedInfo[a]},removeLoadedState:function(a){delete this._esLoadedInfo[a]},debugOnlyGetESItemInfo:function(a){return this.esItemsManager.screenPlayInterpreter.getESItems().firstOrDefault(function(b){return b.experienceStream===a})},getInteractionControls:function(b,c){var d=b.length,e=new a.internal.List;e.length=d;var f=function(a,b){if(e[b]=a,!e.any(function(a){return!a})){var d=document.createElement("div");e.foreach(function(a){d.appendChild(a)}),c(d)}};if(c&&b instanceof Array)for(var g=0;d>g;g++){var h=this;!function(){var c=g,d=a.ext.getFactory(a.contracts.systemFactoryTypes.interactionControlFactory,b[g]);d(h._resourcesResolver,function(a){f(a,c)})}()}},getAllSupportedControls:function(){},narrativeLoadedEvent:null,narrativeSeekedEvent:null,eventLogger:a.internal.EventLogger,getIsOnStage:function(a){var b=this.getCurrentESItems();return b&&b.firstOrDefault(function(b){return b.experienceStream===a})},load:function(b,c){a.internal.debug.assert(b,"Missing rin data"),this._rinData=b,this._resourcesResolver.rinModel=b,this.currentScreenPlayId=b.defaultScreenplayId;var d=this.eventLogger.logBeginEvent("Load");this.unload(),this.setPlayerState(a.contracts.playerState.pausedForBuffering),this._initializeNarrativeInfo(b),this.esItemsManager=new a.internal.ESItemsManager,this.esItemsManager.initialize(b,this);var e=this;this.loadScreenPlayPropertyTable(function(){e._isNarrativeLoaded=!0,e.narrativeLoadedEvent.publish(),e.eventLogger.logEndEvent(d),"function"==typeof c&&c()})},unload:function(){a.util.removeAllChildren(this.playerControl.stageControl),this.esItemsManager&&this.esItemsManager.unload(),this._esLoadedInfo={},this._rinData=null},getCurrentESItems:function(){return this.esItemsManager?this.esItemsManager.getCurrentESItems():new a.internal.List},_captureKeyframeInternal:function(a){var b=a.experienceStream.captureKeyframe();return b&&(b.authoringMetadata={provider:this._rinData.providers[a.providerId].name,experienceId:a.experienceId,experienceStreamId:a.currentExperienceStreamId}),b},captureKeyframe:function(a,b){var c=this.getCurrentESItems().firstOrDefault(function(c){return!("function"!=typeof c.experienceStream.captureKeyframe||a&&a!==c.experienceId||b&&b!==c.currentExperienceStreamId)});return c?this._captureKeyframeInternal(c)||"":""},captureAllKeyframes:function(){var a=this.getCurrentESItems().where(function(a){return"function"==typeof a.experienceStream.captureKeyframe}),b=this;return a.select(function(a){return b._captureKeyframeInternal(a)}).where(function(a){return!!a})},debugApplyKeyframe:function(a){var b=this.getCurrentESItems().firstOrDefault(function(a){return"function"==typeof a.experienceStream.displayKeyframe});b&&a&&b.experienceStream.displayKeyframe(a)},loadScreenPlayPropertyTable:function(b){var c=this,d="ScreenplayProperties";if(!this._rinData.resources[d])return void("function"==typeof b&&b());var e=c.getResourceResolver().resolveResource(d),f={url:e,dataType:"json",error:function(c,d,e){a.internal.debug.write(e.message||e),"function"==typeof b&&b()},success:function(a){c._screenplayPropertyTable=a[0],"function"==typeof b&&b()}};$.ajax(f)},getScreenPlayPropertyTable:function(a){return this._screenplayPropertyTable&&this._screenplayPropertyTable[a]},seekUrl:function(b,c){var d=this.playerControl.resolveDeepstateUrlFromAbsoluteUrl(b),e=this;if(d)return void setTimeout(function(){e.playerConfiguration.narrativeRootUrl=null,e.playerControl.load(d,function(a){a||e.playerControl.play()})},0);var f=a.util.getQueryStringParams(b),g=f.screenPlayId,h=this.isValidScreenPlayId(g)?g:this._rinData.defaultScreenplayId,i=parseFloat(f.begin)||parseFloat(f.seekTime)||0,j=f.action||this.playerConfiguration.startInInteractionMode&&"pause";if("play"===j&&"adaptive"===f.transition){var k=this.getCurrentESItems().firstOrDefault(function(a){return a.experienceStream&&"function"==typeof a.experienceStream.resumeFrom});if(k){var l=a.util.removeQueryStringParam(b,"transition"),m=this._getESItemRelativeOffset(k,i),n=this.esItemsManager.getScreenPlayInterpreter(h).getESItems().firstOrDefault(function(a){return a.id===k.id});return this.pause(),void k.experienceStream.resumeFrom(m,(n||k).currentExperienceStreamId,l)}}"pause"===j||!j&&this.getPlayerState()===a.contracts.playerState.pausedForExplore?this.pause(i,h,function(a){if(a&&f.state){var b=JSON.parse(decodeURIComponent(f.state)),d=b.experiences.itemReferences,g=[];for(var h in d)g.push(h);if(g.length>0){var i=e.getCurrentESItems().firstOrDefault(function(a){return a.id===g[0]});i&&"function"==typeof i.experienceStream.displayKeyframe&&setTimeout(function(){i.experienceStream.displayKeyframe(d[i.id]),"function"==typeof c&&c()},500)}}}):(this.play(i,h),"function"==typeof c&&c()),this.narrativeSeekedEvent.publish({seekTime:i,screenPlayId:g})},getDeepState:function(){var b=this._playerState===a.contracts.playerState.pausedForExplore||this._playerState===this._playerState===a.contracts.stopped?"pause":"play",c={state:{document:{screenplayId:this.currentScreenPlayId},animation:{begin:this.getCurrentLogicalTimeOffset().toFixed(2),action:b},collectionReferences:{experiences:{itemReferences:{}}}}};if("pause"===b){var d=this.getCurrentESItems(),e=d.firstOrDefault(function(a){return a.experienceStream.isExplorable})||d[0];e&&"function"==typeof e.experienceStream.captureKeyframe&&(c.state.collectionReferences.experiences.itemReferences[e.id]=e.experienceStream.captureKeyframe()||{})}return c},stageAreaManager:null,esItemsManager:null,playerControl:null,goalPlayerState:null,currentScreenPlayId:null,_initializeNarrativeInfo:function(b){this._rinData=b,this._narrativeInfo=new a.internal.NarrativeInfo(this._rinData.data.narrativeData)},_pauseForBuffering:function(){var b=this.getPlayerState();if(a.internal.debug.assert(this._isNarrativeLoaded),this._isNarrativeLoaded&&b!==a.contracts.playerState.inTransition&&b!==a.contracts.playerState.pausedForBuffering){var c=this.eventLogger.logBeginEvent("PauseNarrativeForBuffering");this.setPlayerState(a.contracts.playerState.inTransition);try{this._pauseCurrentESs(this.getCurrentLogicalTimeOffset())}finally{this.setPlayerState(a.contracts.playerState.pausedForBuffering),this.goalPlayerState=a.contracts.playerState.playing}this.eventLogger.logEndEvent(c)}},_getESItemRelativeOffset:function(a,b){b="undefined"==typeof b?this.getCurrentLogicalTimeOffset():b;var c=a.experienceStream.isSystemES?b:this.esItemsManager.screenPlayInterpreter.getRelativeLogicalTime(a,b);return Math.max(c,0)},_playCurrentESs:function(b){this.esItemsManager.getCurrentESItems().where(function(b){return b.experienceStream.getState()===a.contracts.experienceStreamState.ready}).foreach(function(a){a.experienceStream.play(this._getESItemRelativeOffset(a,b),a.currentExperienceStreamId)}.bind(this))},_pauseCurrentESs:function(b){this.esItemsManager.getCurrentESItems().where(function(b){return b.experienceStream.getState()===a.contracts.experienceStreamState.ready}).foreach(function(a){a.experienceStream.pause(this._getESItemRelativeOffset(a,b),a.currentExperienceStreamId)}.bind(this))},_seekESItems:function(b,c){var d=this.getPlayerState()===a.contracts.playerState.playing;b.where(function(b){return b.experienceStream.getState()===a.contracts.experienceStreamState.ready}).foreach(function(a){var b=this._getESItemRelativeOffset(a,c),e=a.currentExperienceStreamId;d?a.experienceStream.play(b,e):a.experienceStream.pause(b,e)},this)},_onBeforeScreenPlayEnd:function(){var a=this.getScreenPlayPropertyTable(this.esItemsManager.screenPlayInterpreter.id),b=a?a.endActionUrl:null,c=b?b.endActionUrlProperty:null;c&&"pause"===c.beforeEndAction&&(this.startInteractionMode(),this.playerControl.screenplayEnded.publish({screenplayId:this.currentScreenPlayId},!0))},_onScreenPlayEnding:function(){var a=this.getScreenPlayPropertyTable(this.esItemsManager.screenPlayInterpreter.id),b=a?a.endActionUrl:null,c=b?b.endActionUrlProperty:null,d=c?c.endActionUrl:null;return d?(this.seekUrl(d),!0):!1},_onScreenPlayEnded:function(){var b=this.playerConfiguration;b.loop?this.play(0,this.currentScreenPlayId):b.playerMode!==a.contracts.playerMode.AuthorerEditor&&b.playerMode!==a.contracts.playerMode.AuthorerPreview?(this.pause(),this.playerControl.screenplayEnded.publish({screenplayId:this.currentScreenPlayId},!0)):(this.pause(),this.setPlayerState(a.contracts.playerState.stopped))},_throwInvalidOperation:function(b){if(a.internal.debug.assert(!1,b),!this.playerConfiguration.degradeGracefullyOnErrors)throw new Error(b)},_rinData:null,_serviceItemsManager:null,_interactionControlsManager:null,_isNarrativeLoaded:null,_narrativeInfo:null,_resourcesResolver:null,_playerState:a.contracts.playerState.stopped,_isPlayerReady:!1,_stageAreaManager:null,_playerVolumeLevel:1,_loadStartTime:0,_esLoadedInfo:{},_lastPlayCallback:null,_lastPauseCallback:null,_screenplayPropertyTable:null},a.internal.NarrativeInfo=function(a){this.narrativeData=a,this.totalDuration=parseFloat(a.estimatedDuration),this.title=a.title,this.description=a.description,this.branding=a.branding,this.aspectRatio=a.aspectRatio||"None"},a.internal.NarrativeInfo.prototype={narrativeData:null,description:null,branding:null,title:null,totalDuration:null,beginOffset:null,aspectRatio:"None"}}(window.rin),window.rin=window.rin||{},function(a){"use strict";a.internal=a.internal||{},a.internal.OrchestratorProxy=function(a){this._orchestrator=a,this.playerStateChangedEvent=a.playerStateChangedEvent,this.eventLogger=a.eventLogger},a.internal.OrchestratorProxy.prototype={_experienceStream:null,_orchestrator:null,init:function(a){this._experienceStream=a},getResourceResolver:function(){return this._orchestrator.getResourceResolver()},getCurrentLogicalTimeOffset:function(){return this._orchestrator.getCurrentLogicalTimeOffset()},getRelativeLogicalTime:function(a,b){return this._orchestrator.getRelativeLogicalTime(this._experienceStream,a,b)},play:function(a,b){this._orchestrator.play(a,b)},pause:function(a,b){this._orchestrator.pause(a,b)},getIsMuted:function(){return this._orchestrator.getIsMuted()},setIsMuted:function(a){this._orchestrator.setIsMuted(a)},getPlayerVolumeLevel:function(){return this._orchestrator.getPlayerVolumeLevel()},setPlayerVolumeLevel:function(a){this._orchestrator.setPlayerVolumeLevel(a)},onESEvent:function(a,b){this._orchestrator.onESEvent(this._experienceStream,a,b)},startInteractionMode:function(){var a=this._orchestrator.getIsOnStage(this._experienceStream);this._orchestrator.startInteractionMode(a?this._experienceStream:null)},getInteractionControls:function(a,b){var c=this._orchestrator.getIsOnStage(this._experienceStream);return c?this._orchestrator.getInteractionControls(a,b):null},getAllSupportedControls:function(){return this._orchestrator.getAllSupportedControls(this._experienceStream)},getPlayerState:function(){return this._orchestrator.getPlayerState()},getIsOnStage:function(){return this._orchestrator.getIsOnStage(this._experienceStream)},getScreenplayPropertyTable:function(){return this._orchestrator.getScreenplayPropertyTable(this._experienceStream)},getCurrentStateSeekUrl:function(){return this._orchestrator.getCurrentStateSeekUrl()},seekUrl:function(a){return this._orchestrator.seekUrl(a)},debugOnlyGetESItemInfo:function(){return this._orchestrator.debugOnlyGetESItemInfo(this._experienceStream)},getCurrentESItems:function(){return this._orchestrator.getCurrentESItems()},createExperienceStream:function(a,b,c){return this._orchestrator.createExperienceStream(a,b,c)},getStageControl:function(){return this._orchestrator.playerControl.stageControl},getPlayerRootControl:function(){return this._orchestrator.playerControl.playerRootElement},getPlayerConfiguration:function(){return this._orchestrator.playerConfiguration},getNarrativeInfo:function(){return this._orchestrator.getNarrativeInfo()},getSegmentInfo:function(){return this._orchestrator.getSegmentInfo()},getPlayerControl:function(){return this._orchestrator.playerControl},getESItems:function(){return this._orchestrator.esItemsManager.getScreenPlayInterpreter(this._orchestrator.currentScreenPlayId).getESItems()}}}(window.rin),window.rin=window.rin||{},function(a){"use strict";a.createPlayerControl=function(b,c,d){var e=c&&c.constructor===a.PlayerConfiguration?c:new a.PlayerConfiguration(c);d&&(e.systemRootUrl=d);var f;return e.hideAllControllers||e.hideDefaultController||!e.playerControllerES?f=new a.internal.PlayerControl(b,e):(e.playerControllerES.initialize(b,e),f=e.playerControllerES.playerControl),a.internal.RinDebugger&&(a.debug=new a.internal.RinDebugger(f)),f},a.getPlayerControl=function(a){return a&&a.rinPlayer},a.bindPlayerControls=function(b,c){for(var d=(b||document).getElementsByClassName("rinPlayer"),e=0,f=d.length;f>e;e++){var g=d[e];if(!(g.rinPlayer instanceof a.internal.PlayerControl)){g.rinPlayer=a.createPlayerControl(g,g.getAttribute("data-options"),c);var h=g.getAttribute("data-src");h&&g.rinPlayer.load(h)}}},a.processAll=function(b,c){var d=new a.internal.DeferredLoader,e=d.loadSystemResources(c).then(function(){a.bindPlayerControls(b,c)});return e}}(window.rin),window.rin=window.rin||{},function(a){"use strict";a.PlayerConfiguration=function(b){var c=a.util.getQueryStringParams();if("string"==typeof b){var d=a.util.getQueryStringParams(b);c=a.util.overrideProperties(c,d)}else if(b&&"object"==typeof b)c=a.util.overrideProperties(c,b);else if(b)throw new Error("options should be a valid JSON formatted object or string formatted in 'query string' format");this.loop=!!c.loop&&"false"!==c.loop,this.isFromRinPreviewer=!!c.isFromRinPreviewer&&"false"!==c.isFromRinPreviewer,this.isGreedyBufferingDisabled=!!c.isGreedyBufferingDisabled;var e=a.contracts.playerStartupAction[c.playerStartupAction],f=!!c.autoplay&&"false"!==c.autoplay;this.playerStartupAction=e||(f?a.contracts.playerStartupAction.play:a.contracts.playerStartupAction.none),this.isMuted=void 0===c.muted?void 0===c.isMuted?!1:c.isMuted:c.muted,this.isMusicMuted=void 0===c.isMusicMuted?!1:c.isMusicMuted,this.hideAllControllers="false"===c.controls||c.controls===!1||c.hideAllControllers&&"false"!==c.hideAllControllers,this.hideDefaultController=!!c.hideDefaultController&&"false"!==c.hideDefaultController,this.narrativeRootUrl=c.narrativeRootUrl||c.rootUrl,this.systemRootUrl=c.systemRootUrl,this.playerControllerES=new a.internal.PlayerControllerES,this.playerMode=c.playerMode;try{this.controllerOptions=a.util.parseJSON(c.controllerOptions)||{}}catch(g){this.controllerOptions={}}},a.PlayerConfiguration.prototype={mediaLoadTimeout:30,playerMode:a.contracts.playerMode.demo,playerStartupAction:a.contracts.playerStartupAction.play,startSeekerPosition:0,playerControllerES:null,hideAllControllers:!1,hideDefaultController:!1,hideTroubleshootingControls:!1,degradeGracefullyOnErrors:!1,playInDebugMode:!0,defaultSegementId:null,defaultScreenplayId:null,narrativeRootUrl:null,systemRootUrl:null,loop:!1,isGreedyBufferingDisabled:!1,isMuted:!1,controls:!0,isFromRinPreviewer:!1,controllerOptions:null}
}(window.rin),window.rin=window.rin||{},function(a){"use strict";a.internal=a.internal||{},a.internal.PlayerControl=function(b,c,d){this.stageControl=b,this.playerConfiguration=c,this.orchestrator=new a.internal.Orchestrator(this,c),this._eaController=new a.embeddedArtifacts.embeddedArtifactsController(this.orchestrator),this._defaultBufferingES=new a.internal.DefaultBufferingES(this.orchestrator),this.playerRootElement=d||b,this.volumeChangedEvent=new a.contracts.Event,this.muteChangedEvent=new a.contracts.Event},a.internal.PlayerControl.prototype={playerConfiguration:null,orchestrator:null,stageControl:null,playerRootElement:null,narrativeUrl:null,load:function(a,b){var c=this._getDataProxy(this.playerConfiguration.playerMode),d=this,e=a.indexOf("?");d.narrativeUrl=-1!==e?a.substr(0,e):a,this._eaController&&this._eaController.unload(),c.getRinDataAsync(d.narrativeUrl,function(a){d._showLoadingMessage(a)},function(c){if(c&&!c.error){if(!d.playerConfiguration.narrativeRootUrl){var f=d.narrativeUrl.lastIndexOf("/");d.playerConfiguration.narrativeRootUrl=d.narrativeUrl.substr(0,f)}d.loadData(c,function(){-1!==e?d.orchestrator.seekUrl(a,function(){"function"==typeof b&&b(!0)}):"function"==typeof b&&b()})}else{var g="Error while loading narrative: "+(c?c.error:"Narrative data not found.");d.orchestrator.eventLogger.logErrorEvent(g)}})},loadData:function(b,c){var d=this;this.orchestrator.load(b,function(b){if(b){if(!d.playerConfiguration.degradeGracefullyOnErrors)throw new Error(b);d.orchestrator.eventLogger.logErrorEvent(b)}else d.playerConfiguration.playerStartupAction===a.contracts.playerStartupAction.play&&d.orchestrator.play(),d._hideLoadingMessage(),"function"==typeof c&&setTimeout(c,0)})},play:function(a,b){this.orchestrator.play(a,b)},pause:function(a,b){this.orchestrator.pause(a,b)},unload:function(){try{this._eaController&&this._eaController.unload()}finally{}this.orchestrator.unload()},getPlayerState:function(){return this.orchestrator.getPlayerState()},getCurrentScreenplayId:function(){return this.orchestrator.currentScreenPlayId},getCurrentTimeOffset:function(){return this.orchestrator.getCurrentLogicalTimeOffset()},getStageControl:function(){return this.stageControl},getPlayerRoot:function(){return this.playerRootElement},captureKeyframe:function(a,b){return this.orchestrator.captureKeyframe(a,b)},captureAllKeyframes:function(){return this.orchestrator.captureAllKeyframes()},resolveDeepstateUrlFromAbsoluteUrl:function(b){var c=a.util.getQueryStringParams(b);if(c.hasOwnProperty("narrativeUrl")&&c.hasOwnProperty("begin")&&c.hasOwnProperty("action")&&c.hasOwnProperty("screenPlayId")){var d="{0}?begin={1}&action={2}&screenPlayId={3}".rinFormat(decodeURIComponent(c.narrativeUrl),c.begin,c.action,c.screenPlayId);return c.state&&(d+="&state="+c.state),d}return!1},getDeepStateUrl:function(){var b=this.orchestrator.getDeepState();return a.internal.getDeepState(b,this.narrativeUrl)},loop:function(a){return a===!0||a===!1?this.playerConfiguration.loop=a:void 0===this.playerConfiguration.loop&&(this.playerConfiguration.loop=!1),this.playerConfiguration.loop},volume:function(a){var b=this.orchestrator.getPlayerVolumeLevel();if(!isNaN(a)&&a>=0&&1>=a)this.orchestrator.setPlayerVolumeLevel(a),b!==a&&this.volumeChangedEvent.publish(a);else if(void 0!==a)throw new Error("IndexSizeError");return b},mute:function(a){var b=this.orchestrator.getIsMuted();return(a===!0||a===!1)&&(this.orchestrator.setIsMuted(a),b!==a&&this.muteChangedEvent.publish(a)),b},updatePlayerConfiguration:function(a){this.orchestrator.updatePlayerConfiguration(a)},screenplayEnded:new a.contracts.Event,seeked:new a.contracts.Event,interactionModeStarted:new a.contracts.Event,narrativeModeStarted:new a.contracts.Event,getIsInInteractionMode:function(){return!!this._interactionES},_showLoadingMessage:function(b){this._defaultBufferingES||(this._defaultBufferingES=new a.internal.DefaultBufferingES(this.orchestrator));var c=this._defaultBufferingES.getUserInterfaceControl();a.util.hasChildElement(this.stageControl.childNodes,c)||(this.stageControl.appendChild(c),this.playerConfiguration.playInDebugMode&&a.util.assignAsInnerHTMLUnsafe(c,"<div>"+b+"</div>"),this._defaultBufferingES.showBuffering())},_hideLoadingMessage:function(){var b=this._defaultBufferingES.getUserInterfaceControl();this._defaultBufferingES&&a.util.hasChildElement(this.stageControl.childNodes,b)&&(this._defaultBufferingES.hideBuffering(),this.stageControl.removeChild(b))},_defaultBufferingES:null,_getDataProxy:function(b){return a.internal.debug.assert(b===a.contracts.playerMode.demo,"Player mode must be Demo for now"),new a.internal.DemoRinDataProxy},_showEventLog:function(){},_getEventLog:function(){},_interactionES:void 0,volumeChangedEvent:void 0,muteChangedEvent:void 0}}(window.rin),window.rin=window.rin||{},function(a){"use strict";a.internal=a.internal||{},a.internal.ResourcesResolver=function(a){this._playerConfiguration=a},a.internal.ResourcesResolver.prototype={rinModel:null,_playerConfiguration:null,_systemRootUrl:null,resolveResource:function(b,c){var d=this.rinModel.resources[b];c&&this.rinModel.experiences[c]&&this.rinModel.experiences[c].resources&&(d=this.rinModel.experiences[c].resources[b]||d);var e=d?d.uriReference:b;if(!a.util.isAbsoluteUrl(e)){var f=this._playerConfiguration.narrativeRootUrl||a.util.getDocumentLocationRootUrl();e=a.util.combinePathElements(f,e)}return e},resolveData:function(b,c){var d=this.rinModel.resources[b];return c&&this.rinModel.experiences[c]&&this.rinModel.experiences[c].resources&&(d=this.rinModel.experiences[c].resources[b]||d),d&&d.data&&"object"==typeof d.data?a.util.deepCopy(d.data):null},getSystemRootUrl:function(){return this._systemRootUrl=this._systemRootUrl||a.util.combinePathElements(a.util.isAbsoluteUrl(this._playerConfiguration.systemRootUrl)?this._playerConfiguration.systemRootUrl:a.util.combinePathElements(a.util.getDocumentLocationRootUrl(),this._playerConfiguration.systemRootUrl),"systemResources/themeResources"),this._systemRootUrl},resolveSystemResource:function(b){var c=a.util.combinePathElements(this.getSystemRootUrl(),b);return c}}}(window.rin),window.rin=window.rin||{},function(a){"use strict";a.internal=a.internal||{},a.internal.DemoRinDataProxy=function(){},a.internal.DemoRinDataProxy.prototype={getRinDataAsync:function(a,b,c){var d;b&&b("Loading Narrative...");var e={url:a,dataType:"json",error:function(a,b,e){"function"==typeof c&&(d={error:e.message||e},c&&c(d))},success:function(a){"function"==typeof c&&(d=a[0],c&&c(d))}};$.ajax(e)}}}(window.rin),window.rin=window.rin||{},function(a){"use strict";a.internal=a.internal||{},a.internal.DefaultScreenPlayInterpreter=function(){this._allESItems=new a.internal.List},a.internal.DefaultScreenPlayInterpreter.prototype={_allESItems:null,_orchestrator:null,_screenPlayData:null,initialize:function(b,c,d){this._screenPlayData=c.screenplays[b].data,this.id=b,this._orchestrator=d;for(var e,f,g,h,i,j,k,l,m=new a.internal.List,n=0,o=this._screenPlayData.experienceStreamReferences,p=0,q=o.length;q>p;p++)e=o[p],f=e.experienceId,j=e.experienceStreamId,e.layer&&(i=a.contracts.experienceStreamLayer[e.layer]||a.contracts.experienceStreamLayer.background),g=c.experiences[f],g?(g.id=f,g.experienceId=f,h=d.createExperienceStream(g.providerId,g),h&&(k=new a.internal.ESItem(g.id,g,h,parseInt(e.zIndex,10)||n++,e.begin,parseFloat(e.begin)+parseFloat(e.duration),i),k.experienceId=f,k.currentExperienceStreamId=j,k.providerId=g.providerId,k.volumeLevel=parseFloat(e.volume)||1,l=h.getUserInterfaceControl(),l&&l.setAttribute&&l.setAttribute("ES_ID",g.id),m.push(k))):a.internal.debug.write("Experience Data not available for "+f);this._allESItems=m},getESItems:function(a,b){return"undefined"==typeof a?this._allESItems:(a=a,b=b||a+.1,this._allESItems.filter(function(c){return c.beginOffset<=b&&c.endOffset>a}))},setScreenPlayAttributes:function(a){a.experienceStream&&a.experienceStream.setVolume&&a.experienceStream.setIsMuted&&void 0!==a.volumeLevel&&(a.experienceStream.setVolume(this._orchestrator.getPlayerVolumeLevel()*a.volumeLevel),a.experienceStream.setIsMuted(this._orchestrator.getIsMuted()))},getRelativeLogicalTime:function(b,c){a.internal.debug.assert(b instanceof a.internal.ESItem);var d=b?c-b.beginOffset:c;return d=Math.max(d,0)},getEndTime:function(){if(0===this._allESItems.length)return 0;var a=this._allESItems.max(function(a){return a.endOffset});return a?a.endOffset:0}}}(window.rin),window.rin=window.rin||{},function(a){"use strict";a.internal=a.internal||{},a.internal.StageAreaManager=function(a,b){this._orchestrator=a,this._stageControl=b},a.internal.StageAreaManager.prototype={onCurrentExperienceStreamsChanged:function(b,c,d,e){var f,g,h,i=this,j=b&&b.length>0,k=c&&c.length>0;if(k)for(f=0;f<c.length;f++)if(g=c[f],!(b&&b.length>0&&b.any(function(a){return a.experienceStream===g.experienceStream}))){var l=g.experienceStream.getUserInterfaceControl();l&&(e?(l.style.zIndex=-1,h=l.transition,h&&h.cancelTransition(),a.util.hideElementByOpacity(l)):!function(b,c){var d=i._getTransition(c);b.transition=d,d.transition.TransitionOut(b,d.transitionOutDuration,function(){b.transition=null,a.util.hideElementByOpacity(b),b.style.zIndex=-1})}(l,g))}if(j)for(f=0;f<b.length;f++){g=b[f],this._orchestrator.ensureExperienceStreamIsLoaded(g);var m=g.experienceStream.getUserInterfaceControl();if(m){if(c&&c.length>0&&c.any(function(a){return a.experienceStream===g.experienceStream}))continue;a.util.hasChildElement(this._stageControl.childNodes,m)||this._stageControl.appendChild(m),i._setZIndex(g);var n=g.experienceStream.getUserInterfaceControl();e?(h=n.transition,h&&h.cancelTransition(),a.util.unhideElementByOpacity(n)):!function(b,c){var d=i._getTransition(b);setTimeout(function(){c.transition=d,c&&d.transition.TransitionIn(c,d.transitionInDuration,function(){c.transition=null,a.util.unhideElementByOpacity(c),i._setZIndex(b)})},15)}(g,n)}}},_setZIndex:function(b){var c=b.experienceStreamLayer,d=c===a.contracts.experienceStreamLayer.background?1e4:c===a.contracts.experienceStreamLayer.foreground||c===a.contracts.experienceStreamLayer.projection?2e4:3e4,e=d+b.zIndex||0,f=b.experienceStream.getUserInterfaceControl();f&&f.style&&(f.style.zIndex=e,f.style.position="absolute",this._orchestrator.eventLogger.logEvent("ZIndex set for {0} to {1}",b.id,e))},_getTransition:function(b){var c,d=new a.internal.TransitionEffect;if(b&&b.esData&&(b.esData.data&&b.esData.data.transition&&(c=c||{},a.util.overrideProperties(b.esData.data.transition,c)),b.currentExperienceStreamId)){var e=b.esData.experienceStreams[b.currentExperienceStreamId];e&&e.data&&e.data.transition&&(c=c||{},a.util.overrideProperties(e.data.transition,c))}return c&&(d.transitionInDuration=c.inDuration,d.transitionOutDuration=c.outDuration),d},_orchestrator:null,_stageControl:null},a.internal.TransitionEffect=function(b){this.transition=b||new a.FadeInOutTransitionService},a.internal.TransitionEffect.prototype={transition:null,transitionInDuration:.5,transitionOutDuration:.5,cancelTransition:function(){this.transition.cancelTransition()}}}(window.rin),window.rin=window.rin||{},function(a){"use strict";a.internal=a.internal||{},a.internal.TaskTimerItem=function(a,b){this.offset=a,this.context=b},a.internal.TaskTimer=function(b){this._timerItems=new a.internal.List,this._stopWatch=new a.internal.StopWatch,this.taskTriggeredEvent=new a.contracts.Event,this.addRange(b)},a.internal.TaskTimer.prototype={_timerTriggerPrecision:.02,_timerItems:null,_timerId:-1,_stopWatch:null,_nextItemIndex:0,_itemsChanged:!1,taskTriggeredEvent:new a.contracts.Event,getCurrentTimeOffset:function(){return this._stopWatch.getElapsedSeconds()},add:function(b,c){if(this._timerId>0)throw new Error("Items cannot be added when timer is running. Stop the timer and then add items");this._timerItems.push(new a.internal.TaskTimerItem(b,c)),this._itemsChanged=!0},addRange:function(a){if(a&&0!==a.length){if(this._timerId>0)throw new Error("Items cannot be added when timer is running. Stop the timer and then add items");this._timerItems=this._timerItems.concat(a),this._itemsChanged=!0}},remove:function(){throw new Error("to be implemented")},play:function(){this._checkChangedItems(),this._triggerCurrentItems(),this._scheduleNextItem(),this._stopWatch.start()},pause:function(){clearTimeout(this._timerId),this._timerId=-1,this._stopWatch.stop()},seek:function(a,b){var c=Math.abs(a-this.getCurrentTimeOffset());c>this._timerTriggerPrecision&&(this.pause(),this._stopWatch.reset(),this._stopWatch.addElapsed(a),this._checkChangedItems(),this._nextItemIndex=this._findFirstTaskIndexAtTime(a),this._triggerCurrentItems(),this._scheduleNextItem()),b&&this._stopWatch.start()},getCurrentOrPrevious:function(a){var b=this._timerItems.lastOrDefault(function(b){return b.offset<=a});return b?b.context:null},_timer_tick:function(){this._triggerCurrentItems(),this._scheduleNextItem()},_triggerCurrentItems:function(){if(!(this._nextItemIndex<0)){for(var b=this._nextItemIndex,c=this.getCurrentTimeOffset()+this._timerTriggerPrecision,d=new a.internal.List;b<this._timerItems.length&&this._timerItems[b].offset<=c;)d.push(this._timerItems[b].context),b++;if(d.length>0){var e=this;setTimeout(function(){e.taskTriggeredEvent.publish(d)},0)}this._nextItemIndex=b<this._timerItems.length?b:-1}},_scheduleNextItem:function(){if(!(this._nextItemIndex<0)){var a=this._timerItems[this._nextItemIndex];if(1/0!==a.offset){var b=Math.max(a.offset-this.getCurrentTimeOffset(),0);clearTimeout(this._timerId);var c=this;this._timerId=setTimeout(function(){c._timer_tick()},1e3*b)}}},_checkChangedItems:function(){this._itemsChanged&&(this._timerItems.sort(function(a,b){return a.offset-b.offset}),this._nextItemIndex=this._findFirstTaskIndexAtTime(this.getCurrentTimeOffset()),this._itemsChanged=!1)},_findFirstTaskIndexAtTime:function(a){return this._timerItems.firstOrDefaultIndex(function(b){return b.offset>=a})}}}(window.rin),window.rin=window.rin||{},function(a){"use strict";a.internal=a.internal||{},a.internal.CutSceneTransitionService=function(){},a.internal.CutSceneTransitionService.prototype={TransitionIn:function(b,c,d){a.util.unhideElementByOpacity(b),"function"==typeof d&&d()},TransitionOut:function(b,c,d){a.util.hideElementByOpacity(b),"function"==typeof d&&d()}},a.FadeInOutTransitionService=function(){},a.FadeInOutTransitionService.prototype={attachedElement:null,_storyboard:null,TransitionIn:function(a,b,c){this.attachedElement=a,this._animate(a,b,0,1,c)},TransitionOut:function(a,b,c){this.attachedElement=a,this._animate(a,b,1,0,c)},cancelTransition:function(){this._storyboard.stop(),a.util.setElementOpacity(this.attachedElement,1)},_animate:function(b,c,d,e,f){var g=function(c){a.util.setElementOpacity(b,c)};this._storyboard=new a.internal.Storyboard(new a.internal.DoubleAnimation(c,d,e),g,f),this._storyboard.begin()}}}(window.rin),function(a){"use strict";a.internal.DefaultBufferingES=function(b){this.stateChangedEvent=new a.contracts.Event,this._orchestrator=b,this._userInterfaceControl=a.util.createElementWithHtml(a.internal.DefaultBufferingES.elementHTML);var c=b.getResourceResolver().resolveSystemResource("images/loader.gif");c&&$(".loaderGIFContainer",this._userInterfaceControl).attr("src",c),this._orchestrator.isPlayerReadyChangedEvent.subscribe(function(){this._onOrchestratorIsPlayerReadyStateChanged()}.bind(this)),a.util.overrideProperties({zIndex:2e5,width:"100%",height:"100%",display:"none"},this._userInterfaceControl.style)},a.internal.DefaultBufferingES.prototype={isSystemES:!0,load:function(){this._updateBufferingState()},play:function(){this._updateBufferingState()},pause:function(){this._updateBufferingState()},unload:function(){this._updateBufferingState()},getState:function(){return a.contracts.experienceStreamState.ready},stateChangedEvent:new a.contracts.Event,getUserInterfaceControl:function(){return this._userInterfaceControl},showBuffering:function(){this._showBufferingTimerId||(this._showBufferingTimerId=setTimeout(function(){var a=$(this._userInterfaceControl);a.stop(!0),this._userInterfaceControl.style.display="block",a.animate({opacity:.5},"fast")}.bind(this),700),this._orchestrator&&this._orchestrator.eventLogger.logEvent("->-> BufferingES: ShowBuffering called."))},hideBuffering:function(){clearTimeout(this._showBufferingTimerId),this._showBufferingTimerId=null;var a=$(this._userInterfaceControl);a.stop(!0),a.animate({opacity:0},"fast",function(){this._userInterfaceControl.style.display="none"}.bind(this)),this._orchestrator&&this._orchestrator.eventLogger.logEvent("->-> BufferingES: HideBuffering called.")},_userInterfaceControl:a.util.createElementWithHtml(""),_onOrchestratorIsPlayerReadyStateChanged:function(){this._updateBufferingState()},_updateBufferingState:function(){var a=this._orchestrator.getIsPlayerReady();a?this.hideBuffering():this.showBuffering()},_showBufferingTimerId:null,_orchestrator:null},a.internal.DefaultBufferingES.elementHTML="<div id='bufferingDiv' style='margin:auto;width:100%;height:100%;font-size:18px;color:white;display:table;'><div style='text-align:center;vertical-align: middle;display:table-cell;'><div style='width:auto;height:auto;clear:right;margin-left:auto;margin-right:auto;margin-bottom:8px;'><img class='loaderGIFContainer' /></div>Loading...</div></div>"}(window.rin=window.rin||{}),function(a){"use strict";a.internal.ESTimerES=function(b,c){this.stateChangedEvent=new a.contracts.Event,this._orchestrator=b,this.esTimer=new a.internal.ESTimer(b,c)},a.internal.ESTimerES.prototype={isSystemES:!0,load:function(a){this.esTimer.loadESItmes(),a>0&&this.seek(0)},play:function(a){this._orchestrator.eventLogger.logEvent("!! Logical timer played at : {0}",this.esTimer.taskTimer.getCurrentTimeOffset()/1e3),this.esTimer.taskTimer.seek(a),this.esTimer.taskTimer.play()},pause:function(a){this._orchestrator.eventLogger.logEvent("!! Logical timer paused at : {0}",this.esTimer.taskTimer.getCurrentTimeOffset()/1e3),this.esTimer.taskTimer.seek(a),this.esTimer.taskTimer.pause()},unload:function(){this.esTimer.taskTimer.pause()},getState:function(){return a.contracts.experienceStreamState.ready},stateChangedEvent:new a.contracts.Event,getUserInterfaceControl:function(){return null},esTimer:null,_orchestrator:null}}(window.rin=window.rin||{}),function(a){"use strict";var b=function(){b.parentConstructor.apply(this,arguments),this._userInterfaceControl=a.util.createElementWithHtml(b.elementHTML).firstChild};a.util.extend(a.contracts.DiscreteKeyframeESBase,b),b.prototypeOverrides={load:function(c){b.parentPrototype.load.call(this,c),this.setState(a.contracts.experienceStreamState.ready);var d=this._orchestrator.debugOnlyGetESItemInfo();d&&a.util.assignAsInnerHTMLUnsafe(this._userInterfaceControl.firstChild,"Placeholder ES for {0}:{1} <br/> Lifetime {2}-{3}".rinFormat(d.providerId,d.id,d.beginOffset,d.endOffset))}},a.util.overrideProperties(b.prototypeOverrides,b.prototype),b.elementHTML="<div style='position:absolute;width:100%;height:100%'><div style='color:red;position:absolute;width:100%;height:100%'></div><div style='color:white;position:absolute;right:20px;top:20px;' class='rinPlaceholderValue'></div></div>",a.ext.registerFactory(a.contracts.systemFactoryTypes.esFactory,"MicrosoftResearch.Rin.PlaceholderExperienceStream",function(a,c){return new b(a,c)}),a.ext.setDefaultFactory(a.contracts.systemFactoryTypes.esFactory,function(a,c){return new b(a,c)})}(window.rin=window.rin||{}),function(a){"use strict";a.internal.DefaultPreloaderES=function(){this._currentPreloadList=new a.internal.List,this.stateChangedEvent=new a.contracts.Event,this._preloaderTimer=new a.internal.Timer},a.internal.DefaultPreloaderES.prototype={_orchestrator:null,_stageControl:null,_esListInfo:null,_currentPreloadList:null,_preloaderTimer:null,_defaultPreloadingTime:30,_defaultInitialMinRequiredBuffering:9.5,_state:a.contracts.experienceStreamState.closed,_allNarrativeESItems:null,stateChangedEvent:new a.contracts.Event,getUserInterfaceControl:function(){return null},isPreloader:!0,isSystemES:!0,initialize:function(a,b,c,d){this._orchestrator=a,this._stageControl=b,this._esListInfo=c,this._allNarrativeESItems=d,this._preloaderTimer.interval=1e3;var e=this;this._preloaderTimer.tick=function(){e._preloaderTimer_Tick()},this._addListenersToAllItems()},updateScreenPlay:function(a){this._preloaderTimer.stop(),this._removeListenersToAllItems(),this._esListInfo=a,this.load(0)},load:function(){this._updateCurrentPreloadList(0,this._defaultPreloadingTime),this._preloadCurrentItems(0,!0),this._preloaderTimer.start()},pause:function(a,b){this._seek(a,b)},play:function(a,b){this._seek(a,b)},unload:function(){this._preloaderTimer.stop()},getPreloaderItemStatesInfo:function(){},getState:function(){return this._state},setState:function(b){if(this._state!==b){var c=this._state;this._state=b,this.stateChangedEvent.publish(new a.contracts.ESStateChangedEventArgs(c,b,this))}},_preloaderTimer_Tick:function(){var a=this._orchestrator.getCurrentLogicalTimeOffset();this._preloadItems(a)},_preloadItems:function(a){this._updateCurrentPreloadList(a,a+this._defaultPreloadingTime),this._preloadCurrentItems(a,!1)},_addListenersToAllItems:function(){var a=this._esListInfo.getESItems(),b=this;a.foreach(function(a){a.experienceStream.stateChangedEvent.subscribe(function(a){b._experienceStream_ESStateChanged(a)},"preloader")})},_removeListenersToAllItems:function(){var a=this._esListInfo.getESItems();a.foreach(function(a){a.experienceStream.stateChangedEvent.unsubscribe("preloader")})},_experienceStream_ESStateChanged:function(b){var c=b.source;if(c!==this&&!c.isPreloader){if(b.toState===a.contracts.experienceStreamState.error){var d=this._esListInfo.getESItems().firstOrDefault(function(a){return a.experienceStream===c}),e=d?d.id:"",f=d?d.esData.providerId:"NotAvailable";this._orchestrator.eventLogger.logErrorEvent("ES {0} of type {1} went to error state in preloader.".rinFormat(e,f))}this._checkCurrentPreloadListStates()}},_checkCurrentPreloadListStates:function(){this._areAllItemsPreloaded(this._currentPreloadList)&&this.setState(a.contracts.experienceStreamState.ready)},_updateCurrentPreloadList:function(a,b){var c=this._esListInfo.getESItems(a,b);this._currentPreloadList=c.where(function(a){return a.experienceStream!==this})},_preloadCurrentItems:function(b,c){var d=this._currentPreloadList;if(a.internal.debug.assert(!d.firstOrDefault(function(a){return a.experienceStream===this})),this._areAllItemsPreloaded(d)){if(this.setState(a.contracts.experienceStreamState.ready),this._isGreedyBufferingCompleted||this._orchestrator.playerConfiguration.isGreedyBufferingDisabled)return;var e=this._getNextESItemToBuffer(b);if(!e)return;d.push(e),c=!1}c&&this.setState(a.contracts.experienceStreamState.buffering);for(var f=0;f<d.length;f++){var g=d[f];this._orchestrator.ensureExperienceStreamIsLoaded(g);var h=g.experienceStream.getUserInterfaceControl();h&&!a.util.hasChildElement(this._stageControl.childNodes,h)&&(a.util.hideElementByOpacity(h),h.style.zIndex=-1,h.style.position="absolute",this._stageControl.appendChild(h))}},_areAllItemsPreloaded:function(b){for(var c=0,d=b.length;d>c;c++){var e=b[c].experienceStream.getState();if(!e||e===a.contracts.experienceStreamState.buffering||e===a.contracts.experienceStreamState.closed)return!1}return!0},_seek:function(a){var b=.05;Math.abs(this._orchestrator.getCurrentLogicalTimeOffset()-a)<b||this._preloadItems(a)},_getNextESItemToBuffer:function(b){var c=this._getNextNotLoadedOrBufferingItem(b);return c||(c=this._getNextNotLoadedOrBufferingItem(0))?c.experienceStream.getState()===a.contracts.experienceStreamState.buffering?null:(a.internal.debug.assert(this._orchestrator.isExperienceStreamLoaded(c.id)===!1),this._orchestrator.eventLogger.logEvent("Preloader greedy buffer {0} at offset {1}.",c.id,c.beginOffset),c):(this._onGreedyBufferingCompleted(),null)},_onGreedyBufferingCompleted:function(){this._isGreedyBufferingCompleted=!0},_getNextNotLoadedOrBufferingItem:function(b){var c,d,e,f=this._esListInfo.getESItems();for(c=0,d=f.length;d>c;c++)if(e=f[c],e.beginOffset>=b&&this._isBufferingOrNonLoadedESItem(e))return e;if(this._allNarrativeESItems){var g=this._allNarrativeESItems,h=f.lastOrDefault(),i=h?this._allNarrativeESItems.indexOf(h):0;for(a.internal.debug.assert(i>=0),c=i,d=g.length;d>c;c++)if(e=g[c],this._isBufferingOrNonLoadedESItem(e))return e;for(c=0;i>c;c++)if(e=g[c],this._isBufferingOrNonLoadedESItem(e))return e}},_isBufferingOrNonLoadedESItem:function(b){var c=b.experienceStream.getState();return c===a.contracts.experienceStreamState.buffering||!this._orchestrator.isExperienceStreamLoaded(b.id)}}}(window.rin=window.rin||{}),window.rin=window.rin||{},function(a){"use strict";a.internal.PlayerControllerES=function(){this.stateChangedEvent=new a.contracts.Event},a.internal.PlayerControllerES.prototype={isSystemES:!0,orchestrator:null,_playerController:null,_playerControllerViewModel:null,initialize:function(b,c){var d,e,f,g,h,i,j=this,k=function(){var b=j.orchestrator.getResourceResolver().resolveSystemResource("");j._playerControllerViewModel.initialize(),a.defLoader=a.defLoader||new a.internal.DeferredLoader,a.defLoader.loadAllThemeResources(b).then(function(){j._playerController=new a.internal.ui.DefaultController(j._playerControllerViewModel),j.orchestrator.getNarrativeInfo().totalDuration||(j._playerControllerViewModel.isSeekerVisible(!1),j._playerControllerViewModel.isPlayPauseVisible(!1),j._playerControllerViewModel.isVolumeVisible(!1)),j._playerController.initStageArea(j.playerControl.getStageControl(),j.playerControl.getPlayerRoot()),i=j._playerController.getUIControl(),j._playerController.volumeChangedEvent.subscribe(function(a){g.setVolumeInPercent(a)}),j._playerController.seekTimeChangedEvent.subscribe(function(a){f.setSeekPositionPercent(a)}),j._playerController.showControlsEvent.subscribe(function(){j._playerControllerViewModel.showFooterControls(!0)}),j._playerController.hideControlsEvent.subscribe(function(){j.orchestrator.getPlayerState()!==a.contracts.playerState.pausedForExplore&&e.isPlaying()&&j._playerControllerViewModel.showFooterControls(!1)}),j._playerController.showHideTroubleShootingControls.subscribe(function(a){j._playerControllerViewModel.changeTroubleShootControlsVisibilty(a)}),j._playerControllerViewModel.troubleShooterVM.startSeekPositionUpdater(),j._playerControllerViewModel.seekerVM.startSeekPositionUpdater()})};d=document.createElement("div"),d.style.position="relative",d.style.width="100%",d.style.height="100%",this.playerControl=new a.internal.PlayerControl(d,c,b),this.orchestrator=this.playerControl.orchestrator,this._playerControllerViewModel=new a.internal.PlayerControllerViewModel(this.orchestrator,this.playerControl),e=this._playerControllerViewModel.playPauseVM,f=this._playerControllerViewModel.seekerVM,g=this._playerControllerViewModel.volumeVM,h=this._playerControllerViewModel.troubleShooterVM,this.orchestrator.narrativeLoadedEvent.subscribe(k,null,this),this._playerControllerViewModel.interactionControls.subscribe(function(){var a=j._playerControllerViewModel.interactionControls();j._playerController.setInteractionControls(a)})},load:function(){},play:function(){this._playerControllerViewModel.playPauseVM.isPlaying(!0)},pause:function(){this._playerControllerViewModel.playPauseVM.isPlaying(!1)},unload:function(){this._playerControllerViewModel.seekerVM.stopSeekPositionUpdater(),this._playerControllerViewModel.troubleShooterVM.stopSeekPositionUpdater()},getState:function(){return a.contracts.experienceStreamState.ready},stateChangedEvent:null,getUserInterfaceControl:function(){return null},getControllerVM:function(){return this._playerControllerViewModel},onESEvent:function(b,c,d){c===a.contracts.esEventIds.setTimeMarkers&&this._playerControllerViewModel.addMarkers(d)},playerControl:null}}(window.rin=window.rin||{}),function(a){"use strict";a.internal=a.internal||{},a.internal.ui=a.internal.ui||{},a.internal.ui.DefaultController=function(b){var c,d,e,f,g,h,i=this,j=null,k=null,l=null,m=null,n=function(){var k=$(".rin_PlayPauseContainer",j),l=$(".rin_VolumeControl",j),n=$(".rin_TimelineHolder",j),o=$(".rin_FullScreenControl",j),p=$(".rin_TroubleShooterControlHolder",j),q=$(".rin_startExploring",j);c=new a.internal.ui.PlayPauseControl(k,b.playPauseVM),d=new a.internal.ui.VolumeControl(l,b.volumeVM),e=new a.internal.ui.SeekerControl(n,b.seekerVM),f=new a.internal.ui.FullScreenControl(o,i.getUIControl()),g=new a.internal.ui.TroubleShootingControl(p,j,m,b.troubleShooterVM),f=new a.internal.ui.FullScreenControl(o,i.getUIControl()),h=new a.internal.ui.StartExploringControl(q,b),d.volumeChangedEvent.subscribe(function(a){i.volumeChangedEvent.publish(a)}),e.seekTimeChangedEvent.subscribe(function(a){i.seekTimeChangedEvent.publish(a)})},o=function(){var a,b=5e3,c=function(a,c){return a&&clearTimeout(a),a=setTimeout(c,b)},e=function(){i.showControlsEvent.publish(),a=c(a,function(){i.hideControlsEvent.publish(),d&&d.volumeSlider.hideSlider()})};j.bind("showHideTroubleShootingControls",function(a,b){i.showHideTroubleShootingControls.publish(b)}),j.mousemove(function(){e()}),j.mouseover(function(){e()})};this.showControlsEvent=new a.contracts.Event,this.hideControlsEvent=new a.contracts.Event,this.volumeChangedEvent=new a.contracts.Event,this.seekTimeChangedEvent=new a.contracts.Event,this.showHideTroubleShootingControls=new a.contracts.Event,this.isSystemES=!0,this.initStageArea=function(a,c){ko.renderTemplate("Controller.tmpl",b,null,c),j=$(".rin_mainContainer",c),l=$(".rin_ExperienceStream",j),l.append(a);var d=function(a){a.stopPropagation(),a.cancelBubble=!0};a.addEventListener("MSPointerDown MSPointerMove MSPointerUp",d,!1),m=$(".rin_InteractiveContainer",j),n(),o()},this.setInteractionControls=function(a){m.children().detach(),a&&m&&m.append(a)},this.getUIControl=function(){return k=k||j[0]},this.setVM=function(a){ko.bindingHandlers.stopBinding={init:function(){return{controlsDescendantBindings:!0}}},ko.virtualElements.allowedBindings.stopBinding=!0,ko.applyBindings(a,this.getUIControl()),c.setVM(a.playPauseVM),d.setVM(a.volumeVM),e.setVM(a.seekerVM),g.setVM(a.troubleShooterVM)}},a.internal.ui.SliderBase=function(b,c,d,e){d?ko.renderTemplate("VerticalSliderControl.tmpl",e,null,b.get(0)):ko.renderTemplate("HorizontalSliderControl.tmpl",e,null,b.get(0));var f,g=1500,h=!1,i=this,j=function(a,b){return a&&clearTimeout(a),a=setTimeout(b,g)},k=!1;this.sliderContainer=$(".rin_SliderContainer",b),this.slider=$(".rin_Slider",b),this.valueChangedEvent=new a.contracts.Event,this.showSlider=function(){i.sliderContainer.show(),k=!0},this.hideSlider=function(){i.sliderContainer.hide(),k=!1},this.sliderContainer.bind("changeValue",function(a,b){var c,e=i.sliderContainer.offset(),f=b.currentTarget;c=d?100-100*(b.pageY-e.top)/f.clientHeight:100*(b.pageX-e.left)/f.clientWidth,i.valueChangedEvent.publish(c),b.preventDefault(),b.stopPropagation()}),b.mouseover(function(){f&&clearTimeout(f),i.showSlider()}),this.sliderContainer.mousemove(function(a){h&&i.sliderContainer.trigger("changeValue",a),a.preventDefault()}),this.sliderContainer.mouseup(function(a){h&&(i.sliderContainer.trigger("changeValue",a),h=!1)}),this.sliderContainer.mousedown(function(a){h=!0,i.sliderContainer.trigger("changeValue",a)}),this.sliderContainer.mouseleave(function(){h=!1}),c&&(c.mouseover(function(){f&&clearTimeout(f),i.showSlider()}),b.mouseleave(function(){f=j(f,function(){i.hideSlider()})}),c.mouseleave(function(){f=j(f,function(){i.hideSlider()})}),this.hideSlider())},a.internal.ui.VerticalSlider=function(b,c,d){return new a.internal.ui.SliderBase(b,c,!0,d)},a.internal.ui.HorizontalSlider=function(b,c,d){return new a.internal.ui.SliderBase(b,c,!1,d)},a.internal.ui.PlayPauseControl=function(a,b){ko.renderTemplate("PlayPauseControl.tmpl",b,null,a.get(0)),this.setVM=function(b){ko.applyBindings(b,a.get(0))}},a.internal.ui.VolumeControl=function(b,c){ko.renderTemplate("VolumeControl.tmpl",c,null,b.get(0));
var d=$(".rin_VolumeSliderPlaceHolder",b),e=$(".rin_Button",b),f=this;this.volumeSlider=new a.internal.ui.VerticalSlider(d,e,c),this.volumeChangedEvent=a.contracts.Event(),this.volumeSlider.valueChangedEvent.subscribe(function(a){f.volumeChangedEvent.publish(a)}),this.setVM=function(a){ko.applyBindings(a,b.get(0))}},a.internal.ui.SeekerControl=function(b,c){var d=this;this.timelineSlider=new a.internal.ui.HorizontalSlider(b,null,c),this.seekTimeChangedEvent=a.contracts.Event(),this.timelineSlider.valueChangedEvent.subscribe(function(a){d.seekTimeChangedEvent.publish(a)}),this.setVM=function(a){ko.applyBindings(a,b.get(0))}},a.internal.ui.FullScreenControl=function(a,b){ko.renderTemplate("FullScreenControl.tmpl",null,null,a.get(0));var c=document.createEvent("HTMLEvents");c.initEvent("resize",!1,!1),c.data={};var d=$(".rin_Button",a),e=$(b),f=!1,g=function(){return b.requestFullScreen?document.fullscreenElement:b.mozRequestFullScreen?document.mozFullScreen:b.webkitRequestFullScreen?document.webkitIsFullScreen:f},h=function(){g()?document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():(b.removeEventListener("keydown",i,!1),document.removeEventListener("keydown",i,!1),f=!1):b.requestFullScreen?b.requestFullScreen():b.mozRequestFullScreen?b.mozRequestFullScreen():b.webkitRequestFullScreen?b.webkitRequestFullScreen():(b.addEventListener("keydown",i,!1),document.addEventListener("keydown",i,!1),f=!0),j(),b.dispatchEvent(c)},i=function(a){a&&a.keyCode&&27===a.keyCode&&h()},j=function(){var a=e.parent();g()?(d.removeClass("rin_RestoreScreen"),d.addClass("rin_FullScreen"),a?a.addClass("rin_FullScreenContent"):e.addClass("rin_FullScreenContent")):(d.addClass("rin_RestoreScreen"),d.removeClass("rin_FullScreen"),a?a.removeClass("rin_FullScreenContent"):e.removeClass("rin_FullScreenContent"))};document.addEventListener("fullscreenchange",j,!1),document.addEventListener("mozfullscreenchange",j,!1),document.addEventListener("webkitfullscreenchange",j,!1),d.click(function(){h()})},a.internal.ui.TroubleShootingControl=function(b,c,d,e){ko.renderTemplate("TroubleShooter.tmpl",e,null,b.get(0)),c.keydown(function(a){(a.key&&"t"===a.key.toLowerCase()||a.keyCode&&(84===a.keyCode||116===a.keyCode))&&a.shiftKey?c.trigger("showHideTroubleShootingControls"):(a.key&&"d"===a.key.toLowerCase()||a.keyCode&&68===a.keyCode)&&a.shiftKey&&(c.trigger("showHideTroubleShootingControls",!0),e.showControls(!0),e.isHeaderVisible(!0),e.showdeepstateDialogClick(),e.captureDeepStateClick())}),e.interactionEvent.subscribe(function(){var b,c,e,f=$(":visible",d);if(f&&f.length){for(b=new a.internal.List,c=0;c<f.length;c++)b.push($(f[c]));b=b.filter(function(a){return a&&a[0]&&$._data(a[0],"events")}),b&&b.length&&(e=a.util.randInt(0,b.length-1),b[e].trigger("click"))}}),this.setVM=function(a){ko.applyBindings(a,b.get(0))}},a.internal.ui.StartExploringControl=function(a,b){a.on("click",function(){b.startInteractionMode(),$.event.trigger("rin.startExploring")})}}(window.rin=window.rin||{}),function(a){"use strict";a.internal.getDeepState=function(b,c){var d="narrativeUrl={0}&begin={1}&action={2}&screenPlayId={3}".rinFormat(encodeURIComponent(a.util.convertToAbsoluteUri(c)),b.state.animation.begin,b.state.animation.action,b.state.document.screenplayId);d+="&state={0}".rinFormat(encodeURIComponent(JSON.stringify(b.state.collectionReferences)));var e=window.location.href.indexOf("?");return d=(e>0?window.location.href.substr(0,e):window.location.href)+"?"+d},a.internal.PlayerControllerViewModel=function(b,c){var d=ko.observable(!1),e=ko.observable(!1),f=ko.observable(!1),g=ko.observable(!0),h=ko.observable(!0),i=ko.observable(!0),j=ko.observable(!0),k=ko.observable(!0),l=ko.observable(!0),m=ko.observable(!0),n=ko.observable(!1),o=ko.observable(null),p=ko.observable(""),q=ko.observable(""),r=ko.observable(""),s=new a.internal.SeekerControllerViewModel(b,c),t=new a.internal.PlayPauseControllerViewModel(b,c),u=new a.internal.VolumeControllerViewModel(b,c),v=ko.observable("0:00"),w=new a.internal.TroubleShooterViewModel(b,c),x=!1,y=ko.observableArray([new a.internal.MailDataViewModel(b)]),z=function(){o(null)},A=function(a){"function"==typeof a.getInteractionControls&&o(a.getInteractionControls())},B=function(b){!0===b||!1===b?e(b):a.internal.debug.assert(!1,"Boolean expected. Recieved: "+b.toString())},C=function(b){b.currentState===a.contracts.playerState.playing&&z()},D=function(a){A(a.interactionES)},E=function(){},F=function(){x&&b.pause(0)},G=function(){z(),H(!0)},H=function(a){if(a){var c=b.currentScreenPlayId,e=b.getScreenPlayPropertyTable(c),f=e&&e.isTransitionScreenPlay;d(a&&!f)}else d(!1)},I=function(){var a=b.playerConfiguration.controllerOptions||{};void 0!==a.header&&f(a.header),void 0!==a.playPause&&g(a.playPause),void 0!==a.share&&j(a.share),void 0!==a.fullscreen&&m(a.fullscreen),void 0!==a.seeker&&l(a.seeker),void 0!==a.volume&&k(a.volume),x=!!a.seekToBeginningOnEnd},J=function(){b.playerConfiguration.playerMode!==a.contracts.playerMode.AuthorerPreview||b.playerConfiguration.isFromRinPreviewer?b.playerConfiguration.playerMode===a.contracts.playerMode.AuthorerEditor&&(g(!1),i(!1),f(!1),l(!1)):(g(!1),j(!1),m(!1),l(!1))},K=function(a){"boolean"==typeof a?(n(a),f(a)):n()?(n(!1),f(!1)):(n(!0),f(!0))},L=function(){null===b._rinData&&clearInterval(M);var a=b?b.getCurrentLogicalTimeOffset():0,c=Math.floor(a/60),d=Math.floor(a%60),e=c+":"+(10>d?"0":"")+d;v(e)},M=null,N=function(){b.startInteractionMode()},O=function(a){ko.utils.arrayPushAll(s.markers,a)},P=function(){s.initialize(),t.initialize(),u.initialize(),w.initialize(),p(b.getNarrativeInfo().title||""),q(b.getNarrativeInfo().branding||""),r(b.getNarrativeInfo().description||""),I(),J(),M=setInterval(L,1e3)};return b.isPlayerReadyChangedEvent.subscribe(B,null,this),b.playerControl.interactionModeStarted.subscribe(D,null,this),b.playerControl.narrativeModeStarted.subscribe(E,null,this),b.playerControl.screenplayEnded.subscribe(F,null,this),b.playerStateChangedEvent.subscribe(C,null,this),b.narrativeSeekedEvent.subscribe(G,null,this),{initialize:P,volumeVM:u,seekerVM:s,playPauseVM:t,troubleShooterVM:w,shareLinks:y,showFooterControls:H,showControls:d,isHeaderVisible:f,isPlayPauseVisible:g,isInteractiveControlVisible:h,isRightContainerVisible:i,isVolumeVisible:k,isSeekerVisible:l,areShareButtonsVisible:j,isFullScreenControlVisible:m,areTroubleShootControlsVisible:n,changeTroubleShootControlsVisibilty:K,isPlayerReady:e,interactionControls:o,title:p,branding:q,description:r,debugCurrentTime:v,startInteractionMode:N,addMarkers:O}},a.internal.VolumeControllerViewModel=function(a,b){var c=ko.observable(!1),d=ko.observable("0%"),e=function(){var a=0,e=b.mute();e||(a=Math.round(100*b.volume())),d(a+"%"),c(0>=a)},f=function(a){var d=0>=a;c(d),b.volume(a),b.mute()&&!d&&b.mute(!1),e()},g=function(a){var b=(0|a)/100;.05>=b&&(b=0),f(b)},h=function(a){b.mute(a),c(a),e()},i=function(){var a=!c();return h(a),!1},j=function(){e()};return c(b.mute()),e(),b.volumeChangedEvent.subscribe(f),b.muteChangedEvent.subscribe(h),{initialize:j,hoverValue:d,getValue:d,getVolumeLevelPercent:d,isMuted:c,setVolumeInPercent:g,setMute:h,changeMuteState:i}},a.internal.SeekerControllerViewModel=function(b,c){var d=500,e=null,f=0,g=!0,h=0,i=ko.observable("0.00"),j=ko.observable("0%"),k=ko.observableArray([]),l=function(d,e){if(e=e||!1,g&&f!==d&&(f=d,h=b.getNarrativeInfo().totalDuration,i((b.getCurrentLogicalTimeOffset()||0).toFixed(2)),j(Math.round(100*f)/100+"%"),e)){var k=parseFloat(d)*h/100,l=b.getPlayerState();l===a.contracts.playerState.playing?c.play(k,null):c.pause(k,null)}},m=function(a){parseFloat(a)!==f&&l(parseFloat(a),!0)},n=function(){var a,c=b.getCurrentLogicalTimeOffset();h=b.getNarrativeInfo().totalDuration,a=0>h?0:100*c/h,l(a,!1)},o=function(){e=setInterval(n,d)},p=function(){clearInterval(e)},q=function(a){return h=b.getNarrativeInfo().totalDuration,100*a/h+"%"},r=function(){i("0.00"),m("0")};return{initialize:r,isSeekEnabled:g,hoverValue:i,getValue:j,markers:k,getMarkerPosition:q,getSeekPositionPercent:j,setSeekPositionPercent:m,startSeekPositionUpdater:o,stopSeekPositionUpdater:p}},a.internal.PlayPauseControllerViewModel=function(b,c){this.isPlaying=ko.observable(),this.playPauseEvent=function(){var b=c.getPlayerState();switch(b){case a.contracts.playerState.stopped:case a.contracts.playerState.pausedForBuffering:case a.contracts.playerState.pausedForExplore:c.play();break;case a.contracts.playerState.playing:c.pause();break;default:a.internal.debug.assert(!1,"onPlayPause: Unrecognized player state = "+b)}},this.initialize=function(){}},a.internal.TroubleShooterViewModel=function(b,c){var d,e=500,f=this,g=ko.observable(),h=ko.observable(),i=new a.internal.SelfTester(b),j=function(){f.showSelfTestDialog(!1),f.showEditNarrativeDialog(!1),f.showHypertimelines(!1),f.showDeepstateDialog(!1)},k=function(){b.getCurrentLogicalTimeOffset();f.currentTime(b.getCurrentLogicalTimeOffset())},l=function(a){var b=Object.keys(a);return b};i.logMessageEvent.subscribe(function(a){f.logMessage(a)}),this.interactionEvent=new a.contracts.Event,this.logMessage=ko.observable(""),this.useReload=ko.observable(!1),this.showControls=ko.observable(!0),this.showEditNarrativeDialog=ko.observable(!1),this.showSelfTestDialog=ko.observable(!1),this.showHypertimelines=ko.observable(!1),this.selectedTimeline=ko.observable(""),this.narrativeInfo=ko.observable(b._rinData),this.allScreenTimelines=ko.observableArray([]),this.showDeepstateDialog=ko.observable(!1),this.capturedDeepState=ko.observable(""),this.timeMin=ko.computed({read:function(){return g()},write:function(a){isNaN(a)||(g(a),i.minimumTimeInterval=a)}}),this.timeMax=ko.computed({read:function(){return h()},write:function(a){isNaN(a)||(h(a),i.maximumTimeInterval=a)}}),this.editNarrativeClick=function(){j(),this.showEditNarrativeDialog(!0)},this.editCompleteClick=function(){b.load({data:JSON.parse(this.narrativeInfo())}),j()},this.editCancelClick=function(){this.narrativeInfo=ko.observable(JSON.stringify(b._rinData,null,"	")),j()},this.startSelfTestClick=function(){j();var a={deepstateReloadOption:f.useReload};i.startSelfTest(a)},this.showSelfTestDialogClick=function(){j(),this.showSelfTestDialog(!0)},this.showdeepstateDialogClick=function(){j(),this.showDeepstateDialog(!0)},this.stopSelfTestClick=function(){j(),i.stopSelfTest()},this.captureDeepStateClick=function(){var c=a.internal.getDeepState(b.getDeepState(),b.playerControl.narrativeUrl);this.capturedDeepState(c),window.clipboardData&&window.clipboardData.setData("Text",c)},this.showHypertimelineClick=function(){j(),this.showHypertimelines(!0)},this.currentTime=ko.observable(0),this.totalDuration=ko.observable(0),this.timeControl=ko.computed({read:function(){return Math.round(100*f.currentTime())/100+"/"+Math.round(100*f.totalDuration())/100}}),this.startSeekPositionUpdater=function(){d=setInterval(k,e)},this.stopSeekPositionUpdater=function(){d&&clearInterval(d)},i.interactionEvent.subscribe(function(){f.interactionEvent.publish()}),this.showHypertimelineClick=function(){j(),this.showHypertimelines(!0)},this.timelineChanged=function(){b.play(0,this.selectedTimeline())},this.initialize=function(){j(),this.showControls=ko.observable(!0),this.narrativeInfo=ko.observable(JSON.stringify(b._rinData,null,"	")),this.currentTime(b.getCurrentLogicalTimeOffset()),this.totalDuration(b&&b.getNarrativeInfo()&&b.getNarrativeInfo().totalDuration||10),this.allScreenTimelines(l(b._rinData.screenplays)),this.selectedTimeline(b.currentScreenPlayId)},c.seeked.subscribe(function(){f.selectedTimeline(b.currentScreenPlayId),f.totalDuration(b&&b.getNarrativeInfo()&&b.getNarrativeInfo().totalDuration||0)})},a.internal.MailDataViewModel=function(b){var c="%0D%0A",d="%09";this.linkTitle="Share over email",this.shareControlClass="rin_MailShareButton",this.getDeepstate=function(){var e=a.internal.getDeepState(b.getDeepState(),b.playerControl.narrativeUrl),f="mailto:?subject=Rich Interactive Narratives - {2}&body=Hey,{0}{1}Try this out - {1}{3}{0}".rinFormat(c,d,b.getNarrativeInfo().title,encodeURIComponent(e));window.open(f)}}}(window.rin=window.rin||{}),function(a){"use strict";a.internal=a.internal||{},a.internal.XElement=function(b){var c=b;"string"==typeof b&&(c=a.internal.XmlHelper.parseXml(b).documentElement),this.xmlElement=c},a.internal.XElement.prototype={xmlElement:null,element:function(b){for(var c=this.xmlElement.childNodes,d=0,e=c.length;e>d;d++)if(!b||c[d].nodeName===b)return new a.internal.XElement(c[d]);return null},elements:function(b,c){for(var d=[],e=this.xmlElement.childNodes,f=0,g=e.length;g>f;f++)if(!b||e[f].nodeName===b){var h=new a.internal.XElement(e[f]);d.push(h),"function"==typeof c&&c(h)}return d},elementValue:function(a,b){var c=this.element(a);return c?c.value():b},attributeValue:function(a,b){for(var c=this.xmlElement.attributes,d=0,e=c.length;e>d;d++)if(c[d].nodeName===a)return c[d].value;return b},value:function(){return this.xmlElement.text||this.xmlElement.textContent}},a.internal.XmlHelper={parseXml:function(a){var b;if(window.DOMParser){var c=new DOMParser;b=c.parseFromString(a,"text/xml")}else b=new window.ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a);return b},loadXml:function(a){var b,c;return c=window.XMLHttpRequest?new XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP"),c.open("GET",a,!1),c.send(),b=c.responseXML}}}(window.rin=window.rin||{}),function(a){"use strict";a.internal=a.internal||{},a.internal.SelfTester=function(b){var c,d,e=this,f=new a.internal.Timer,g=function(){return a.util.randInt(e.minimumTimeInterval,e.maximumTimeInterval)},h=0,i=null,j=null,k=Date.now(),l=function(a){a||b.playerControl.play()},m=function(a){k=Date.now(),e.minimumTimeInterval=e.minimumTimeInterval||1,e.maximumTimeInterval=e.maximumTimeInterval||b&&b.getNarrativeInfo()&&b.getNarrativeInfo().totalDuration||3,h=b.getNarrativeInfo().totalDuration,c=b.getSegmentInfo().screenplays,d=Object.keys(c).length,j=a||{deepstateReloadOption:function(){return!1}}},n=function(a){e.logMessageEvent.publish("Time:"+((Date.now()-k)/1e3|0)+" "+a)},o=function(){var f,g,k,m=Math.floor(a.util.randInt(0,8)),o=b.getCurrentLogicalTimeOffset();switch(m){case 0:case 1:case 2:b.getPlayerState()===a.contracts.playerState.playing?(n(">>> Self Tester issues a pause at "+o),b.playerControl.pause()):b.getPlayerState()===a.contracts.playerState.pausedForExplore&&(n(">>> Self Tester issues a play at "+o),b.playerControl.play());break;case 3:g=a.util.rand(0,h),n(">>> Self Tester issues a pause to "+g),b.playerControl.pause(g);break;case 4:g=a.util.rand(0,h),n(">>> Self Tester issues a play to "+g),b.playerControl.play(g);break;case 5:f=b.getCurrentESItems().firstOrDefault(function(a){return"function"==typeof a.experienceStream.getInteractionControls}),f&&(n(">>> Self Tester starts interaction with "+f.experienceId),b.startInteractionMode(f.experienceStream),setTimeout(function(){e.interactionEvent.publish()},100));break;case 6:if(i){n(">>> Self Tester navigates to deepStateUrl with reload = "+j.deepstateReloadOption());var p=b.playerControl.resolveDeepstateUrlFromAbsoluteUrl(i);j.deepstateReloadOption()?(b.playerControl.unload(),b.playerControl.load(p,l)):b.seekUrl(p,l),i=null}else n(">>> Self Tester retrieves deep state Url"),i=b.playerControl.getDeepStateUrl();break;case 7:var q=0|a.util.randInt(0,d);k=Object.keys(c)[q],g=a.util.rand(0,h),n(">>> Self Tester plays screenplay: "+k+" at offset:"+g),h=b.esItemsManager.getScreenPlayInterpreter(k).getEndTime(),b.playerControl.play(g,k)}};f.tick=function(){o(),f.intervalSeconds=g()},this.logMessageEvent=new a.contracts.Event,this.interactionEvent=new a.contracts.Event,this.minimumTimeInterval=0,this.maximumTimeInterval=0,this.startSelfTest=function(a){m(a),f.intervalSeconds=g(),f.start()},this.stopSelfTest=function(){f.stop()}}}(window.rin=window.rin||{}),function(a){"use strict";a.internal=a.internal||{},a.internal.RinDebugger=function(b){var c=this;this.player=b,this.orchestrator=b.orchestrator,this.getCurrentESItems=function(){return b.orchestrator.getCurrentESItems().where(function(a){return"unknownOrSystem"!==a.providerId&&!a.experienceStream.isSystemES})},this.getBufferingESs=function(){return b.orchestrator.getCurrentESItems().where(function(b){return b.experienceStream.getState()===a.contracts.experienceStreamState.buffering})},this.getPreloaderBufferingESs=function(){return b.orchestrator.esItemsManager.preloaderES._currentPreloadList.where(function(b){return b.experienceStream.getState()===a.contracts.experienceStreamState.buffering||b.experienceStream.getState()===a.contracts.experienceStreamState.closed})},this.getAllESItems=function(){return b.orchestrator.esItemsManager.screenPlayInterpreter.getESItems()},this.getErrorESItems=function(){return a.debug.getAllESItems().where(function(b){return b.experienceStream.getState()===a.contracts.experienceStreamState.error})},this.getRinData=function(){return b.orchestrator._rinData},this.getRinDataJsonString=function(){return JSON.stringify(b.orchestrator._rinData)},this.getCurrentScreenPlayInfo=function(){var a={currentScreenPlayId:b.orchestrator.currentScreenPlayId,defaultScreenPlayId:b.orchestrator._rinData.defaultScreenplayId,currentScreenPlay:b.orchestrator._rinData.screenplays[b.orchestrator.currentScreenPlayId]};return a},setInterval(function(){if(b.orchestrator&&b.orchestrator.getPlayerState()===a.contracts.playerState.pausedForBuffering){var d="Buffering ESs: ";c.getBufferingESs().foreach(function(a){d+=a.id+", "}),a.internal.debug.write(d)}},1e3)}}(window.rin=window.rin||{}),function(a,b,c){"use strict";function d(b){j.logging&&a.console&&a.console.log&&a.console.log(b)}function e(a){return{zindex:a,children:[]}}function f(a,b){var c=[];return{storage:c,width:a,height:b,fillRect:function(){c.push({type:"function",name:"fillRect",arguments:arguments})},drawImage:function(){c.push({type:"function",name:"drawImage",arguments:arguments})},fillText:function(){c.push({type:"function",name:"fillText",arguments:arguments})},setVariable:function(a,b){c.push({type:"variable",name:a,arguments:b})}}}var g,h,i,j={};j.Util={},j.Util.backgroundImage=function(a){return/data:image\/.*;base64,/i.test(a)||/^(-webkit|-moz|linear-gradient|-o-)/.test(a)?a:('url("'===a.toLowerCase().substr(0,5)?(a=a.substr(5),a=a.substr(0,a.length-2)):(a=a.substr(4),a=a.substr(0,a.length-1)),a)},j.Util.Bounds=function(a){var b,c={};return a.getBoundingClientRect?(b=a.getBoundingClientRect(),c.top=b.top,c.bottom=b.bottom||b.top+b.height,c.left=b.left,c.width=b.width||b.right-b.left,c.height=b.height||b.bottom-b.top,c):void 0},j.Util.getCSS=function(d,e){function f(a,b){var c,e=d.runtimeStyle&&d.runtimeStyle[a],f=d.style;return!/^-?[0-9]+\.?[0-9]*(?:px)?$/i.test(b)&&/^-?\d/.test(b)&&(c=f.left,e&&(d.runtimeStyle.left=d.currentStyle.left),f.left="fontSize"===a?"1em":b||0,b=f.pixelLeft+"px",f.left=c,e&&(d.runtimeStyle.left=e)),/^(thin|medium|thick)$/i.test(b)?b:Math.round(parseFloat(b))+"px"}var i;if(a.getComputedStyle)g!==d&&(h=b.defaultView.getComputedStyle(d,null)),i=h[e],"backgroundPosition"===e&&(i=(i.split(",")[0]||"0 0").split(" "),i[0]=-1===i[0].indexOf("%")?f(e+"X",i[0]):i[0],i[1]=i[1]===c?i[0]:i[1],i[1]=-1===i[1].indexOf("%")?f(e+"Y",i[1]):i[1]);else if(d.currentStyle)if("backgroundPosition"===e)i=[f(e+"X",d.currentStyle[e+"X"]),f(e+"Y",d.currentStyle[e+"Y"])];else if(i=f(e,d.currentStyle[e]),/^(border)/i.test(e)&&/^(medium|thin|thick)$/i.test(i))switch(i){case"thin":i="1px";break;case"medium":i="0px";break;case"thick":i="5px"}return i},j.Util.BackgroundPosition=function(a,b,c){var d,e,f,g,h=j.Util.getCSS(a,"backgroundPosition");return 1===h.length&&(g=h,h=[],h[0]=g,h[1]=g),-1!==h[0].toString().indexOf("%")?(f=parseFloat(h[0])/100,e=b.width*f-c.width*f):e=parseInt(h[0],10),-1!==h[1].toString().indexOf("%")?(f=parseFloat(h[1])/100,d=b.height*f-c.height*f):d=parseInt(h[1],10),{top:d,left:e}},j.Util.Extend=function(a,b){for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b},j.Util.Children=function(a){var b;try{b=a.nodeName&&"IFRAME"===a.nodeName.toUpperCase()?a.contentDocument||a.contentWindow.document:function(a){var b=[];return null!==a&&!function(a,b){var d=a.length,e=0;if("number"==typeof b.length)for(var f=b.length;f>e;e++)a[d++]=b[e];else for(;b[e]!==c;)a[d++]=b[e++];return a.length=d,a}(b,a),b}(a.childNodes)}catch(e){d("html2canvas.Util.Children failed with exception: "+e.message),b=[]}return b},function(){j.Generate={};var a=[/^(-webkit-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-gradient)\((linear|radial),\s((?:\d{1,3}%?)\s(?:\d{1,3}%?),\s(?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)-]+)\)$/,/^(-moz-linear-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z-]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-moz-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s?([a-z-]*)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z-]+)([\w\d\.\s,%\(\)]+)\)$/];j.Generate.parseGradient=function(b,c){var d,e,f,g,h,i,j,k,l=a.length;for(e=0;l>e&&!(f=b.match(a[e]));e+=1);if(f)switch(f[1]){case"-webkit-linear-gradient":case"-o-linear-gradient":if(d={type:"linear",x0:null,y0:null,x1:null,y1:null,colorStops:[]},h=f[2].match(/\w+/g))for(i=h.length,e=0;i>e;e+=1)switch(h[e]){case"top":d.y0=0,d.y1=c.height;break;case"right":d.x0=c.width,d.x1=0;break;case"bottom":d.y0=c.height,d.y1=0;break;case"left":d.x0=0,d.x1=c.width}if(null===d.x0&&null===d.x1&&(d.x0=d.x1=c.width/2),null===d.y0&&null===d.y1&&(d.y0=d.y1=c.height/2),h=f[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(i=h.length,j=1/Math.max(i-1,1),e=0;i>e;e+=1)k=h[e].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),k[2]?(g=parseFloat(k[2]),g/="%"===k[3]?100:c.width):g=e*j,d.colorStops.push({color:k[1],stop:g});break;case"-webkit-gradient":if(d={type:"radial"===f[2]?"circle":f[2],x0:0,y0:0,x1:0,y1:0,colorStops:[]},h=f[3].match(/(\d{1,3})%?\s(\d{1,3})%?,\s(\d{1,3})%?\s(\d{1,3})%?/),h&&(d.x0=h[1]*c.width/100,d.y0=h[2]*c.height/100,d.x1=h[3]*c.width/100,d.y1=h[4]*c.height/100),h=f[4].match(/((?:from|to|color-stop)\((?:[0-9\.]+,\s)?(?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)\))+/g))for(i=h.length,e=0;i>e;e+=1)k=h[e].match(/(from|to|color-stop)\(([0-9\.]+)?(?:,\s)?((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\)/),g=parseFloat(k[2]),"from"===k[1]&&(g=0),"to"===k[1]&&(g=1),d.colorStops.push({color:k[3],stop:g});break;case"-moz-linear-gradient":if(d={type:"linear",x0:0,y0:0,x1:0,y1:0,colorStops:[]},h=f[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),h&&(d.x0=h[1]*c.width/100,d.y0=h[2]*c.height/100,d.x1=c.width-d.x0,d.y1=c.height-d.y0),h=f[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}%)?)+/g))for(i=h.length,j=1/Math.max(i-1,1),e=0;i>e;e+=1)k=h[e].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%)?/),k[2]?(g=parseFloat(k[2]),k[3]&&(g/=100)):g=e*j,d.colorStops.push({color:k[1],stop:g});break;case"-webkit-radial-gradient":case"-moz-radial-gradient":case"-o-radial-gradient":if(d={type:"circle",x0:0,y0:0,x1:c.width,y1:c.height,cx:0,cy:0,rx:0,ry:0,colorStops:[]},h=f[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),h&&(d.cx=h[1]*c.width/100,d.cy=h[2]*c.height/100),h=f[3].match(/\w+/),k=f[4].match(/[a-z-]*/),h&&k)switch(k[0]){case"farthest-corner":case"cover":case"":var m=Math.sqrt(Math.pow(d.cx,2)+Math.pow(d.cy,2)),n=Math.sqrt(Math.pow(d.cx,2)+Math.pow(d.y1-d.cy,2)),o=Math.sqrt(Math.pow(d.x1-d.cx,2)+Math.pow(d.y1-d.cy,2)),p=Math.sqrt(Math.pow(d.x1-d.cx,2)+Math.pow(d.cy,2));d.rx=d.ry=Math.max(m,n,o,p);break;case"closest-corner":var m=Math.sqrt(Math.pow(d.cx,2)+Math.pow(d.cy,2)),n=Math.sqrt(Math.pow(d.cx,2)+Math.pow(d.y1-d.cy,2)),o=Math.sqrt(Math.pow(d.x1-d.cx,2)+Math.pow(d.y1-d.cy,2)),p=Math.sqrt(Math.pow(d.x1-d.cx,2)+Math.pow(d.cy,2));d.rx=d.ry=Math.min(m,n,o,p);break;case"farthest-side":"circle"===h[0]?d.rx=d.ry=Math.max(d.cx,d.cy,d.x1-d.cx,d.y1-d.cy):(d.type=h[0],d.rx=Math.max(d.cx,d.x1-d.cx),d.ry=Math.max(d.cy,d.y1-d.cy));break;case"closest-side":case"contain":"circle"===h[0]?d.rx=d.ry=Math.min(d.cx,d.cy,d.x1-d.cx,d.y1-d.cy):(d.type=h[0],d.rx=Math.min(d.cx,d.x1-d.cx),d.ry=Math.min(d.cy,d.y1-d.cy))}if(h=f[5].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(i=h.length,j=1/Math.max(i-1,1),e=0;i>e;e+=1)k=h[e].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),k[2]?(g=parseFloat(k[2]),g/="%"===k[3]?100:c.width):g=e*j,d.colorStops.push({color:k[1],stop:g})}return d},j.Generate.Gradient=function(a,c){var e,f,g,h,i,k=b.createElement("canvas"),l=k.getContext("2d");if(k.width=c.width,k.height=c.height,e=j.Generate.parseGradient(a,c),i=new Image,e)if("linear"===e.type){for(f=l.createLinearGradient(e.x0,e.y0,e.x1,e.y1),g=0,h=e.colorStops.length;h>g;g+=1)try{f.addColorStop(e.colorStops[g].stop,e.colorStops[g].color)}catch(m){d(["failed to add color stop: ",m,"; tried to add: ",e.colorStops[g],"; stop: ",g,"; in: ",a])}l.fillStyle=f,l.fillRect(0,0,c.width,c.height),i.src=k.toDataURL()}else if("circle"===e.type){for(f=l.createRadialGradient(e.cx,e.cy,0,e.cx,e.cy,e.rx),g=0,h=e.colorStops.length;h>g;g+=1)try{f.addColorStop(e.colorStops[g].stop,e.colorStops[g].color)}catch(m){d(["failed to add color stop: ",m,"; tried to add: ",e.colorStops[g],"; stop: ",g,"; in: ",a])}l.fillStyle=f,l.fillRect(0,0,c.width,c.height),i.src=k.toDataURL()}else if("ellipse"===e.type){var n,o=b.createElement("canvas"),p=o.getContext("2d"),q=Math.max(e.rx,e.ry),r=2*q;for(o.width=o.height=r,f=p.createRadialGradient(e.rx,e.ry,0,e.rx,e.ry,q),g=0,h=e.colorStops.length;h>g;g+=1)try{f.addColorStop(e.colorStops[g].stop,e.colorStops[g].color)}catch(m){d(["failed to add color stop: ",m,"; tried to add: ",e.colorStops[g],"; stop: ",g,"; in: ",a])}p.fillStyle=f,p.fillRect(0,0,r,r),l.fillStyle=e.colorStops[g-1].color,l.fillRect(0,0,k.width,k.height),n=new Image,n.onload=function(){l.drawImage(n,e.cx-e.rx,e.cy-e.ry,2*e.rx,2*e.ry),i.src=k.toDataURL()},n.src=o.toDataURL()}return i},j.Generate.ListAlpha=function(a){var b,c="";do b=a%26,c=String.fromCharCode(b+64)+c,a/=26;while(26*a>26);return c},j.Generate.ListRoman=function(a){var b,c=["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"],d=[1e3,900,500,400,100,90,50,40,10,9,5,4,1],e="",f=c.length;if(0>=a||a>=4e3)return a;for(b=0;f>b;b+=1)for(;a>=d[b];)a-=d[b],e+=c[b];return e}}(),j.Parse=function(g,h){function i(){return{width:Math.max(Math.max(V.body.scrollWidth,V.documentElement.scrollWidth),Math.max(V.body.offsetWidth,V.documentElement.offsetWidth),Math.max(V.body.clientWidth,V.documentElement.clientWidth)),height:Math.max(Math.max(V.body.scrollHeight,V.documentElement.scrollHeight),Math.max(V.body.offsetHeight,V.documentElement.offsetHeight),Math.max(V.body.clientHeight,V.documentElement.clientHeight))}}function k(a,b){var c=parseInt(Y(a,b),10);return isNaN(c)?0:c}function l(a,b,c,d,e,f){"transparent"!==f&&(a.setVariable("fillStyle",f),a.fillRect(b,c,d,e),T+=1)}function m(a,b){switch(b){case"lowercase":return a.toLowerCase();case"capitalize":return a.replace(/(^|\s|:|-|\(|\))([a-z])/g,function(a,b,c){return a.length>0?b+c.toUpperCase():void 0});case"uppercase":return a.toUpperCase();default:return a}}function n(a){return a.replace(/^\s*/g,"").replace(/\s*$/g,"")}function o(a,b){if(U[a+"-"+b]!==c)return U[a+"-"+b];var d,e,f,g=V.createElement("div"),h=V.createElement("img"),i=V.createElement("span");return g.style.visibility="hidden",g.style.fontFamily=a,g.style.fontSize=b,g.style.margin=0,g.style.padding=0,X.appendChild(g),h.src="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACwAAAAAAQABAAACAkQBADs=",h.width=1,h.height=1,h.style.margin=0,h.style.padding=0,h.style.verticalAlign="baseline",i.style.fontFamily=a,i.style.fontSize=b,i.style.margin=0,i.style.padding=0,i.appendChild(V.createTextNode("Hidden Text")),g.appendChild(i),g.appendChild(h),d=h.offsetTop-i.offsetTop+1,g.removeChild(i),g.appendChild(V.createTextNode("Hidden Text")),g.style.lineHeight="normal",h.style.verticalAlign="super",e=h.offsetTop-g.offsetTop+1,f={baseline:d,lineWidth:1,middle:e},U[a+"-"+b]=f,X.removeChild(g),f}function p(a,b,c,d){n(a).length>0&&(d.fillText(a,b,c),T+=1)}function q(a,b,c){var d,e,f,g,i,k,q,r,s,t,u,v,w,x=c.ctx,y=Y(a,"fontFamily"),z=Y(a,"fontSize"),A=Y(a,"color"),B=Y(a,"textDecoration"),C=Y(a,"textAlign"),D=Y(a,"letterSpacing"),E=Y(a,"fontWeight"),F=Y(a,"fontStyle"),G=Y(a,"fontVariant"),H=!1,I=0;if(b.nodeValue=m(b.nodeValue,Y(a,"textTransform")),e=n(b.nodeValue),e.length>0){switch("none"!==B&&(f=o(y,z)),C=C.replace(["-webkit-auto"],["auto"]),g=b.nodeValue.split(h.letterRendering===!1&&/^(left|right|justify|auto)$/.test(C)&&/^(normal|none)$/.test(D)?/(\b| )/:""),parseInt(E,10)){case 401:E="bold";break;case 400:E="normal"}for(x.setVariable("fillStyle",A),x.setVariable("font",F+" "+G+" "+E+" "+z+" "+y),H?x.setVariable("textAlign","right"):x.setVariable("textAlign","left"),r=b,s=0,i=g.length;i>s;s+=1){if(q=null,Q.rangeBounds)("none"!==B||0!==n(g[s]).length)&&(q=g[s],V.createRange?(t=V.createRange(),t.setStart(b,I),t.setEnd(b,I+q.length)):t=X.createTextRange(),d=t.getBoundingClientRect()?t.getBoundingClientRect():{});else{if("string"!=typeof r.nodeValue)continue;k=r.splitText(g[s].length),u=r.parentNode,v=V.createElement("wrapper"),w=r.cloneNode(!0),v.appendChild(r.cloneNode(!0)),u.replaceChild(v,r),d=j.Util.Bounds(v),q=r.nodeValue,r=k,u.replaceChild(w,v)}switch(null!==q&&p(q,d.left,d.bottom,x),B){case"underline":l(x,d.left,Math.round(d.top+f.baseline+f.lineWidth),d.width,1,A);break;case"overline":l(x,d.left,d.top,d.width,1,A);break;case"line-through":l(x,d.left,Math.ceil(d.top+f.middle+f.lineWidth),d.width,1,A)}I+=g[s].length}}}function r(a,b){var c,d,e=V.createElement("boundelement");return e.style.display="inline",c=a.style.listStyleType,a.style.listStyleType="none",e.appendChild(V.createTextNode(b)),a.insertBefore(e,a.firstChild),d=j.Util.Bounds(e),a.removeChild(e),a.style.listStyleType=c,d}function s(a){var b=-1,c=1,d=a.parentNode.childNodes;if(a.parentNode){for(;d[++b]!==a;)1===d[b].nodeType&&c++;return c}return-1}function t(a,b,c){var d,e,f,g,h,i=Y(a,"listStylePosition"),k=Y(a,"listStyleType"),l=Y(a,"fontWeight");if(/^(decimal|decimal-leading-zero|upper-alpha|upper-latin|upper-roman|lower-alpha|lower-greek|lower-latin|lower-roman)$/i.test(k)){switch(f=s(a),k){case"decimal":g=f;break;case"decimal-leading-zero":g=1===f.toString().length?f="0"+f.toString():f.toString();break;case"upper-roman":g=j.Generate.ListRoman(f);break;case"lower-roman":g=j.Generate.ListRoman(f).toLowerCase();break;case"lower-alpha":g=j.Generate.ListAlpha(f).toLowerCase();break;case"upper-alpha":g=j.Generate.ListAlpha(f)}switch(g+=". ",h=r(a,g),l){case 401:l="bold";break;case 400:l="normal"}if(L.setVariable("fillStyle",Y(a,"color")),L.setVariable("font",Y(a,"fontVariant")+" "+l+" "+Y(a,"fontStyle")+" "+Y(a,"fontSize")+" "+Y(a,"fontFamily")),"inside"!==i)return;L.setVariable("textAlign","left"),d=c.left,e=h.bottom,p(g,d,e,L)}}function u(a){var b=g[a];return b&&b.succeeded===!0?b.img:!1}function v(a,b){var c=Math.max(a.left,b.left),d=Math.max(a.top,b.top),e=Math.min(a.left+a.width,b.left+b.width),f=Math.min(a.top+a.height,b.top+b.height);return{left:c,top:d,width:e-c,height:f-d}}function w(a,b){var c;return b?"auto"!==a?(S=!0,c=e(a),b.children.push(c),c):b:c=e(0)}function x(a,b,c,d){var e,f,g,h,i,j,m,n=c.left,o=c.top,p=c.width,q=c.height,r=function(a){var b,c=[],d=["Top","Right","Bottom","Left"];for(b=0;4>b;b+=1)c.push({width:k(a,"border"+d[b]+"Width"),color:Y(a,"border"+d[b]+"Color")});return c}(a);for(e=0;4>e;e+=1)if(f=r[e],f.width>0){switch(g=n,h=o,i=p,j=q-r[2].width,e){case 0:j=r[0].width;break;case 1:g=n+p-r[1].width,i=r[1].width;
break;case 2:h=h+q-r[2].width,j=r[2].width;break;case 3:i=r[3].width}m={left:g,top:h,width:i,height:j},d&&(m=v(m,d)),m.width>0&&m.height>0&&l(b,g,h,m.width,m.height,f.color)}return r}function y(a,b,c){var e,f,g,h,i,j=V.createElement("valuewrap"),k=["lineHeight","textAlign","fontFamily","color","fontSize","paddingLeft","paddingTop","width","height","border","borderLeftWidth","borderTopWidth"];for(e=0,h=k.length;h>e;e+=1){i=k[e];try{j.style[i]=Y(a,i)}catch(l){d("html2canvas: Parse: Exception caught in renderFormValue: "+l.message)}}j.style.borderColor="black",j.style.borderStyle="solid",j.style.display="block",j.style.position="absolute",(/^(submit|reset|button|text|password)$/.test(a.type)||"SELECT"===a.nodeName)&&(j.style.lineHeight=Y(a,"height")),j.style.top=b.top+"px",j.style.left=b.left+"px",f="SELECT"===a.nodeName?a.options[a.selectedIndex].text:a.value,g=V.createTextNode(f),j.appendChild(g),X.appendChild(j),q(a,g,c),X.removeChild(j)}function z(a,b,c,d,e,f,g,h,i,j){a.drawImage(b,c,d,e,f,g,h,i,j),T+=1}function A(a,b,c,d,e,f,g,h){var i=0,j=0;g-c>0&&(i=g-c),h-d>0&&(j=h-d),z(a,b,i,j,e-i,f-j,c+i,d+j,e-i,f-j)}function B(a,b,c,d,e,f,g){var h,i,j=Math.min(b.width,f);for(c.top=c.top-Math.ceil(c.top/b.height)*b.height,i=e+c.top;g+e>i;)h=Math.floor(i+b.height)>g+e?g+e-i:b.height,A(a,b,d+c.left,i,j,h,d,e),i=Math.floor(i+b.height)}function C(a,b,c,d,e,f,g){var h,i,j=Math.min(b.height,g);for(c.left=c.left-Math.ceil(c.left/b.width)*b.width,i=d+c.left;f+d>i;)h=Math.floor(i+b.width)>f+d?f+d-i:b.width,A(a,b,i,e+c.top,h,j,d,e),i=Math.floor(i+b.width)}function D(a,b,c){var e,f,g,h,i,k,l,m,n,o,p,q,r=Y(a,"backgroundImage"),s=Y(a,"backgroundRepeat").split(",")[0];if(/data:image\/.*;base64,/i.test(r)||/^(-webkit|-moz|linear-gradient|-o-)/.test(r)||(r=r.split(",")[0]),"undefined"!=typeof r&&/^(1|none)$/.test(r)===!1)if(r=j.Util.backgroundImage(r),e=u(r),f=j.Util.BackgroundPosition(a,b,e),e)switch(s){case"repeat-x":C(c,e,f,b.left,b.top,b.width,b.height);break;case"repeat-y":B(c,e,f,b.left,b.top,b.width,b.height);break;case"no-repeat":h=b.width-f.left,n=b.height-f.top,i=f.left,k=f.top,l=f.left+b.left,m=f.top+b.top,0>i?(i=Math.abs(i),l+=i,h=Math.min(b.width,e.width-i)):(h=Math.min(h,e.width),i=0),0>k?(k=Math.abs(k),m+=k,n=Math.min(b.height,e.height-k)):(n=Math.min(n,e.height),k=0),n>0&&h>0&&z(c,e,i,k,h,n,l,m,h,n);break;default:for(f.top=f.top-Math.ceil(f.top/e.height)*e.height,g=b.top+f.top;g<b.height+b.top;)o=Math.min(e.height,b.height+b.top-g),p=Math.floor(g+e.height)>o+g?o+g-g:e.height,g<b.top?(q=b.top-g,g=b.top):q=0,C(c,e,f,b.left,g,b.width,p),q>0&&(f.top+=q),g=Math.floor(g+e.height)-q}else d("html2canvas: Error loading background:"+r)}function E(a,b){var c,e,g,m,n,o,p,q,r,s,A,B,C=j.Util.Bounds(a),E=C.left,F=C.top,G=C.width,H=C.height,I=Y(a,"backgroundColor"),J=Y(a,"position"),K=Y(a,"opacity");switch(b?M={}:(M=i(),b={opacity:1}),e=w(Y(a,"zIndex"),b.zIndex),g={ctx:f(M.width||G,M.height||H),zIndex:e,opacity:K*b.opacity,cssPosition:J},b.clip&&(g.clip=j.Util.Extend({},b.clip)),h.useOverflow===!0&&/(hidden|scroll|auto)/.test(Y(a,"overflow"))===!0&&/(BODY)/i.test(a.nodeName)===!1&&(g.clip=g.clip?v(g.clip,C):C),m=e.children.push(g),o=e.children[m-1].ctx,o.setVariable("globalAlpha",g.opacity),n=x(a,o,C,!1),g.borders=n,W.test(a.nodeName)&&"transparent"!==h.iframeDefault&&(I="default"===h.iframeDefault?"#efefef":h.iframeDefault),p={left:E+n[3].width,top:F+n[0].width,width:G-(n[1].width+n[3].width),height:H-(n[0].width+n[2].width)},g.clip&&(p=v(p,g.clip)),p.height>0&&p.width>0&&(l(o,p.left,p.top,p.width,p.height,I),D(a,p,o)),a.nodeName){case"IMG":q=a.getAttribute("src"),c=u(q),c?(r=k(a,"paddingLeft"),s=k(a,"paddingTop"),A=k(a,"paddingRight"),B=k(a,"paddingBottom"),z(o,c,0,0,c.width,c.height,E+r+n[3].width,F+s+n[0].width,C.width-(n[1].width+n[3].width+r+A),C.height-(n[0].width+n[2].width+s+B))):d("html2canvas: Error loading <img>:"+q);break;case"INPUT":/^(text|url|email|submit|button|reset)$/.test(a.type)&&a.value.length>0&&y(a,C,g);break;case"TEXTAREA":a.value.length>0&&y(a,C,g);break;case"SELECT":a.options.length>0&&y(a,C,g);break;case"LI":t(a,g,p);break;case"CANVAS":r=k(a,"paddingLeft"),s=k(a,"paddingTop"),A=k(a,"paddingRight"),B=k(a,"paddingBottom"),z(o,a,0,0,a.width,a.height,E+r+n[3].width,F+s+n[0].width,C.width-(n[1].width+n[3].width+r+A),C.height-(n[0].width+n[2].width+s+B))}return e.children[m-1]}function F(a,b){if("none"!==Y(a,"display")&&"hidden"!==Y(a,"visibility")&&(b=E(a,b)||b,L=b.ctx,!W.test(a.nodeName))){var c,d,e,f=j.Util.Children(a);for(c=0,e=f.length;e>c;c+=1)d=f[c],1===d.nodeType?F(d,b):3===d.nodeType&&q(a,d,b)}}a.scroll(0,0);var G,H,I,J,K,L,M,N,O,P,Q={rangeBounds:!1,svgRendering:h.svgRendering&&function(){var a=new Image,e=b.createElement("canvas"),f=e.getContext===c?!1:e.getContext("2d");if(f===!1)return!1;e.width=e.height=10,a.src=["data:image/svg+xml,","<svg xmlns='http://www.w3.org/2000/svg' width='10' height='10'>","<foreignObject width='10' height='10'>","<div xmlns='http://www.w3.org/1999/xhtml' style='width:10;height:10;'>","sup","</div>","</foreignObject>","</svg>"].join("");try{f.drawImage(a,0,0),e.toDataURL()}catch(g){return!1}return d("html2canvas: Parse: SVG powered rendering available"),!0}()},R=h.elements===c?b.body:h.elements[0],S=!1,T=0,U={},V=R.ownerDocument,W=new RegExp("("+h.ignoreElements+")"),X=V.body;g=g||{},V.createRange&&(G=V.createRange(),G.getBoundingClientRect&&(H=V.createElement("boundtest"),H.style.height="123px",H.style.display="block",X.appendChild(H),G.selectNode(H),I=G.getBoundingClientRect(),J=I.height,123===J&&(Q.rangeBounds=!0),X.removeChild(H)));var Y=j.Util.getCSS;for(K=E(R,null),Q.svgRendering&&!function(a){function b(a){var c,d,f,g,h,i=j.Util.Children(a),k=i.length;for(h=0;k>h;h+=1)if(g=i[h],3===g.nodeType)e+=g.nodeValue.replace(/\</g,"&lt;").replace(/\>/g,"&gt;");else if(1===g.nodeType&&!/^(script|meta|title)$/.test(g.nodeName.toLowerCase())){if(e+="<"+g.nodeName.toLowerCase(),g.hasAttributes())for(c=g.attributes,f=c.length,d=0;f>d;d+=1)e+=" "+c[d].name+'="'+c[d].value+'"';e+=">",b(g),e+="</"+g.nodeName.toLowerCase()+">"}}var c=new Image,d=i(),e="";b(a),c.src=["data:image/svg+xml,","<svg xmlns='http://www.w3.org/2000/svg' version='1.1' width='"+d.width+"' height='"+d.height+"'>","<foreignObject width='"+d.width+"' height='"+d.height+"'>","<html xmlns='http://www.w3.org/1999/xhtml' style='margin:0;'>",e.replace(/\#/g,"%23"),"</html>","</foreignObject>","</svg>"].join(""),c.onload=function(){K.svgRender=c}}(b.documentElement),N=0,O=R.children,P=O.length;P>N;N+=1)F(O[N],K);return K.backgroundColor=Y(b.documentElement,"backgroundColor"),K},j.Preload=function(e){function f(a){v.href=a,v.href=v.href;var b=v.protocol+v.host;return b===l}function g(){d("html2canvas: start: images: "+p.numLoaded+" / "+p.numTotal+" (failed: "+p.numFailed+")"),!p.firstRun&&p.numLoaded>=p.numTotal&&(d("Finished loading images: # "+p.numTotal+" (failed: "+p.numFailed+")"),"function"==typeof e.complete&&e.complete(p))}function h(b,d,f){var h,i,j=e.proxy;v.href=b,b=v.href,h="html2canvas_"+q++,f.callbackname=h,j+=j.indexOf("?")>-1?"&":"?",j+="url="+encodeURIComponent(b)+"&callback="+h,i=s.createElement("script"),a[h]=function(b){"error:"===b.substring(0,6)?(f.succeeded=!1,p.numLoaded++,p.numFailed++,g()):(k(d,f),d.src=b),a[h]=c;try{delete a[h]}catch(e){}i.parentNode.removeChild(i),i=null,delete f.script,delete f.callbackname},i.setAttribute("type","text/javascript"),i.setAttribute("src",j),f.script=i,a.document.body.appendChild(i)}function i(a){var b,e,f,h,k=j.Util.Children(a),l=!1;try{var n=k.length;for(b=0;n>b;b+=1)i(k[b])}catch(o){}try{l=a.nodeType}catch(q){l=!1,d("html2canvas: failed to access some element's nodeType - Exception: "+q.message)}if(1===l||l===c){try{e=j.Util.getCSS(a,"backgroundImage")}catch(o){d("html2canvas: failed to get background-image - Exception: "+o.message)}e&&"1"!==e&&"none"!==e&&(/^(-webkit|-o|-moz|-ms|linear)-/.test(e)?(h=j.Generate.Gradient(e,j.Util.Bounds(a)),h!==c&&(p[e]={img:h,succeeded:!0},p.numTotal++,p.numLoaded++,g())):(f=j.Util.backgroundImage(e.match(/data:image\/.*;base64,/i)?e:e.split(",")[0]),m.loadImage(f)))}}function k(b,d){b.onload=function(){d.timer!==c&&a.clearTimeout(d.timer),p.numLoaded++,d.succeeded=!0,b.onerror=b.onload=null,g()},b.onerror=function(){if("anonymous"===b.crossOrigin&&(a.clearTimeout(d.timer),e.proxy)){var c=b.src;return b=new Image,d.img=b,b.src=c,void h(b.src,b,d)}p.numLoaded++,p.numFailed++,d.succeeded=!1,b.onerror=b.onload=null,g()}}var l,m,n,o,p={numLoaded:0,numFailed:0,numTotal:0,cleanupDone:!1},q=0,r=e.elements[0]||b.body,s=r.ownerDocument,t=s.images,u=t.length,v=s.createElement("a"),w=function(a){return a.crossOrigin!==c}(new Image);for(v.href=a.location.href,l=v.protocol+v.host,m={loadImage:function(b){var d,g;b&&p[b]===c&&(d=new Image,b.match(/data:image\/.*;base64,/i)?(d.src=b.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),g=p[b]={img:d},p.numTotal++,k(d,g)):f(b)||e.allowTaint===!0?(g=p[b]={img:d},p.numTotal++,k(d,g),d.src=b):w&&!e.allowTaint&&e.useCORS?(d.crossOrigin="anonymous",g=p[b]={img:d},p.numTotal++,k(d,g),d.src=b,d.customComplete=function(){this.img.complete?this.img.onerror():this.timer=a.setTimeout(this.img.customComplete,100)}.bind(g),d.customComplete()):e.proxy&&(g=p[b]={img:d},p.numTotal++,h(b,d,g)))},cleanupDOM:function(f){var h,i;if(!p.cleanupDone){d(f&&"string"==typeof f?"html2canvas: Cleanup because: "+f:"html2canvas: Cleanup after timeout: "+e.timeout+" ms.");for(i in p)if(p.hasOwnProperty(i)&&(h=p[i],"object"==typeof h&&h.callbackname&&h.succeeded===c)){a[h.callbackname]=c;try{delete a[h.callbackname]}catch(j){}h.script&&h.script.parentNode&&(h.script.setAttribute("src","about:blank"),h.script.parentNode.removeChild(h.script)),p.numLoaded++,p.numFailed++,d("html2canvas: Cleaned up failed img: '"+i+"' Steps: "+p.numLoaded+" / "+p.numTotal)}a.stop!==c?a.stop():b.execCommand!==c&&b.execCommand("Stop",!1),b.close!==c&&b.close(),p.cleanupDone=!0,f&&"string"==typeof f||g()}},renderingDone:function(){o&&a.clearTimeout(o)}},e.timeout>0&&(o=a.setTimeout(m.cleanupDOM,e.timeout)),d("html2canvas: Preload starts: finding background-images"),p.firstRun=!0,i(r),d("html2canvas: Preload: Finding images"),n=0;u>n;n+=1)m.loadImage(t[n].getAttribute("src"));return p.firstRun=!1,d("html2canvas: Preload: Done."),p.numTotal===p.numLoaded&&g(),m},j.Renderer=function(a,c){function d(a){var b,c,f,g,h,i,j,k,l=[],m=[],n=a.children;for(b=0,h=n.length;h>b;b+=1)i=n[b],i.children&&i.children.length>0?(l.push(i),m.push(i.zindex)):e.push(i);for(m.sort(function(a,b){return a-b}),c=0,f=m.length;f>c;c+=1)for(g=m[c],j=0,k=l.length;k>=j;j+=1)if(l[j].zindex===g){i=l.splice(j,1),d(i[0]);break}}var e=[];if(d(a.zIndex),"function"!=typeof c._renderer._create)throw new Error("Invalid renderer defined");return c._renderer._create(a,c,b,e,j)},i=function(b,e){var f,g,h={logging:!1,elements:b,proxy:"http://html2canvas.appspot.com/",timeout:0,useCORS:!1,allowTaint:!1,svgRendering:!1,iframeDefault:"default",ignoreElements:"IFRAME|OBJECT|PARAM",useOverflow:!0,letterRendering:!1,flashcanvas:c,width:null,height:null,taintTest:!0,renderer:"Canvas"};if(h=j.Util.Extend(e,h),"string"==typeof h.renderer&&j.Renderer[h.renderer]!==c)h._renderer=j.Renderer[h.renderer](h);else{if("function"!=typeof h.renderer)throw"Unknown renderer";h._renderer=h.renderer(h)}return j.logging=h.logging,h.complete=function(a){("function"!=typeof h.onpreloaded||h.onpreloaded(a)!==!1)&&(f=j.Parse(a,h),("function"!=typeof h.onparsed||h.onparsed(f)!==!1)&&(g=j.Renderer(f,h),"function"==typeof h.onrendered&&h.onrendered(g)))},a.setTimeout(function(){j.Preload(h)},0),{render:function(a,b){return j.Renderer(a,j.Util.Extend(b,h))},parse:function(a,b){return j.Parse(a,j.Util.Extend(b,h))},preload:function(a){return j.Preload(j.Util.Extend(a,h))},log:d}},i.log=d,i.Renderer={Canvas:c},j.Renderer.Canvas=function(e){e=e||{};var f,g=b,h=e.canvas||g.createElement("canvas"),i=!1,j=!1,k=!1,l=2880;if(h.getContext)d("html2canvas: Renderer: using canvas renderer"),k=!0;else if(e.flashcanvas!==c){i=!0,d("html2canvas: Renderer: canvas not available, using flashcanvas");var m=g.createElement("script");m.src=e.flashcanvas,m.onload=function(b,e){var f;return b.onload!==c?e:void(b.onreadystatechange!==c?(f=function(){"loaded"!==b.readyState&&"complete"!==b.readyState?a.setTimeout(f,250):e()},a.setTimeout(f,250)):d("html2canvas: Renderer: Can't track when flashcanvas is loaded"))}(m,function(){"undefined"!=typeof a.FlashCanvas&&(d("html2canvas: Renderer: Flashcanvas initialized"),a.FlashCanvas.initElement(h),k=!0,j!==!1&&f._create.apply(null,j))}),g.body.appendChild(m)}return f={_create:function(a,e,f,g,m){if(!k)return j=arguments,h;var n,o,p,q,r,s,t,u,v,w=h.getContext("2d"),x=b.createElement("canvas"),y=x.getContext!==c,z=y?x.getContext("2d"):{},A=[];if(h.width=h.style.width=i?Math.min(l,e.width||a.ctx.width):e.width||a.ctx.width,h.height=h.style.height=i?Math.min(l,e.height||a.ctx.height):e.height||a.ctx.height,v=w.fillStyle,w.fillStyle=a.backgroundColor,w.fillRect(0,0,h.width,h.height),w.fillStyle=v,e.svgRendering&&a.svgRender!==c)w.drawImage(a.svgRender,0,0);else for(o=0,p=g.length;p>o;o+=1){if(n=g.splice(0,1)[0],n.canvasPosition=n.canvasPosition||{},w.textBaseline="bottom",n.clip&&(w.save(),w.beginPath(),w.rect(n.clip.left,n.clip.top,n.clip.width,n.clip.height),w.clip()),n.ctx.storage)for(q=0,t=n.ctx.storage.length;t>q;q+=1)switch(u=n.ctx.storage[q],u.type){case"variable":w[u.name]=u.arguments;break;case"function":if("fillRect"===u.name)(!i||u.arguments[0]+u.arguments[2]<l&&u.arguments[1]+u.arguments[3]<l)&&w.fillRect.apply(w,u.arguments);else if("fillText"===u.name)(!i||u.arguments[1]<l&&u.arguments[2]<l)&&w.fillText.apply(w,u.arguments);else if("drawImage"===u.name&&u.arguments[8]>0&&u.arguments[7]){if(y&&e.taintTest&&-1===A.indexOf(u.arguments[0].src)){z.drawImage(u.arguments[0],0,0);try{z.getImageData(0,0,1,1)}catch(B){x=f.createElement("canvas"),z=x.getContext("2d");continue}A.push(u.arguments[0].src)}w.drawImage.apply(w,u.arguments)}}n.clip&&w.restore()}return d("html2canvas: Renderer: Canvas renderer done - returning canvas obj"),p=e.elements.length,1===p&&"object"==typeof e.elements[0]&&"BODY"!==e.elements[0].nodeName&&i===!1?(s=m.Util.Bounds(e.elements[0]),r=f.createElement("canvas"),r.width=s.width,r.height=s.height,w=r.getContext("2d"),w.drawImage(h,s.left,s.top,s.width,s.height,0,0,s.width,s.height),h=null,r):h}}},a.html2canvas=i}(window,document),function(a){a.extend(a.fn,{livequery:function(b,c,d){var e,f=this;return a.isFunction(b)&&(d=c,c=b,b=void 0),a.each(a.livequery.queries,function(a,g){return f.selector!=g.selector||f.context!=g.context||b!=g.type||c&&c.$lqguid!=g.fn.$lqguid||d&&d.$lqguid!=g.fn2.$lqguid?void 0:(e=g)&&!1}),e=e||new a.livequery(this.selector,this.context,b,c,d),e.stopped=!1,e.run(),this},expire:function(b,c,d){var e=this;return a.isFunction(b)&&(d=c,c=b,b=void 0),a.each(a.livequery.queries,function(f,g){e.selector!=g.selector||e.context!=g.context||b&&b!=g.type||c&&c.$lqguid!=g.fn.$lqguid||d&&d.$lqguid!=g.fn2.$lqguid||this.stopped||a.livequery.stop(g.id)}),this}}),a.livequery=function(b,c,d,e,f){return this.selector=b,this.context=c,this.type=d,this.fn=e,this.fn2=f,this.elements=[],this.stopped=!1,this.id=a.livequery.queries.push(this)-1,e.$lqguid=e.$lqguid||a.livequery.guid++,f&&(f.$lqguid=f.$lqguid||a.livequery.guid++),this},a.livequery.prototype={stop:function(){var a=this;this.type?this.elements.unbind(this.type,this.fn):this.fn2&&this.elements.each(function(b,c){a.fn2.apply(c)}),this.elements=[],this.stopped=!0},run:function(){if(!this.stopped){var b=this,c=this.elements,d=a(this.selector,this.context),e=d.not(c);this.elements=d,this.type?(e.bind(this.type,this.fn),c.length>0&&a.each(c,function(c,e){a.inArray(e,d)<0&&a.event.remove(e,b.type,b.fn)})):(e.each(function(){b.fn.apply(this)}),this.fn2&&c.length>0&&a.each(c,function(c,e){a.inArray(e,d)<0&&b.fn2.apply(e)}))}}},a.extend(a.livequery,{guid:0,queries:[],queue:[],running:!1,timeout:null,checkQueue:function(){if(a.livequery.running&&a.livequery.queue.length)for(var b=a.livequery.queue.length;b--;)a.livequery.queries[a.livequery.queue.shift()].run()},pause:function(){a.livequery.running=!1},play:function(){a.livequery.running=!0,a.livequery.run()},registerPlugin:function(){a.each(arguments,function(b,c){if(a.fn[c]){var d=a.fn[c];a.fn[c]=function(){var b=d.apply(this,arguments);return a.livequery.run(),b}}})},run:function(b){void 0!=b?a.inArray(b,a.livequery.queue)<0&&a.livequery.queue.push(b):a.each(a.livequery.queries,function(b){a.inArray(b,a.livequery.queue)<0&&a.livequery.queue.push(b)}),a.livequery.timeout&&clearTimeout(a.livequery.timeout),a.livequery.timeout=setTimeout(a.livequery.checkQueue,20)},stop:function(b){void 0!=b?a.livequery.queries[b].stop():a.each(a.livequery.queries,function(b){a.livequery.queries[b].stop()})}}),a.livequery.registerPlugin("append","prepend","after","before","wrap","attr","removeAttr","addClass","removeClass","toggleClass","empty","remove","html"),a(function(){a.livequery.play()})}(jQuery),LADS.Util.makeNamespace("LADS.TourAuthoring.Constants"),LADS.TourAuthoring.Constants=function(){"use strict";return{aboveRinZIndex:1e8,keyframeSize:21,innerKeyframeSize:17,keyframeStrokeW:5,keyframeLineW:3,fadeBtnSize:15,rinBorder:2,minZoom:1,maxZoom:100,handleColor:"#DAD9CC",keyframeColor:"#296B2F",audioKeyframeColor:"#283F53",selectedKeyframeColor:"#6B293F",displayColor:"#81AD62",inkDisplayColor:"#AAAAAA",selectedDisplayColor:"#143417",selectedInkDisplayColor:"#2E2E2E",inkDragHandleRadius:20,doubleTap:400,trackHeight:96,minimizedTrackHeight:36,esOffset:.05,timeRulerSize:54,defaultVolume:.8,epsilon:.01,menuDecimals:2,maxTourLength:900,minMediaLength:5,inkTrackOffset:0,defaultFade:.5,displayEpsilon:.5}}(),LADS.Util.makeNamespace("LADS.Util.Constants"),LADS.Util.Constants=function(){"use strict";function a(a,b){return c[a]||b}function b(a,b){c[a]=b}var c={};return{get:a,set:b}}(),LADS.Util.makeNamespace("LADS.Util.Splitscreen"),LADS.Util.Splitscreen=function(){"use strict";function a(){return f}function b(a){f=a}function c(a,b){"L"===a.data("split")&&(g=b.viewer),"R"===a.data("split")&&(h=b.viewer)}function d(a,b){function c(a){var b=$(document.createElement("img"));return b.attr("src","images/icons/x.svg"),b.css({position:"absolute",top:"94%",width:"115%",height:"auto"}),b.click(function(){e(a)}),b}f=!0;{var d=$(document.createElement("div")),g=$(document.createElement("div")),h=$(document.createElement("div"));$(document.createElement("img"))}d.attr("id","metascreen-L"),d.append(a),d.css({position:"absolute",left:"0%",top:"0%",width:"49.5%",height:"100%","z-index":"999",overflow:"hidden"}),g.attr("id","metascreen-R"),g.append(b),g.css({position:"absolute",left:"50.5%",top:"0%",width:"49.5%",height:"100%","z-index":"998",overflow:"hidden"}),h.attr("id","splitbar"),h.css({position:"absolute",left:"49.5%",top:"0%",width:"1%",height:"100%","z-index":"1000","background-color":"#191915"});var i=c("R"),j=c("L");i.css({left:"-350%",width:"300%"}),j.css({right:"-350%",width:"300%"}),h.append(i).append(j),$("body").append(d).append(h).append(g)}function e(a){function b(){if(d.hasClass("artmode")){{var a=d.find(".sideBar"),b=d.find(".toggler"),c=d.find(".togglerImage"),e=d.find("#splitscreenContainer"),f=d.find(".splitscreen-icon"),g=(d.find(".locationHistoryDiv"),d.find(".locationHistoryPanel"),d.find(".locationHistoryToggle")),h=d.find(".locationHistoryToggleIcon"),i=d.find(".locationHistoryContainer").find("img"),j=d.find(".locationHistoryContainer").find("div"),k=d.find(".lpMapDiv");.2*window.innerWidth,.8*window.innerWidth}d.data("split","L"),a.css({left:"0px"}),b.css({position:"absolute",left:"auto",right:"-12%",borderTopRightRadius:"10px",borderBottomRightRadius:"10px",borderTopLeftRadius:"0px",borderBottomLeftRadius:"0px"}),c.attr("src","images/icons/Left.png"),e.show(),f.attr("src","images/icons/SplitW.svg"),g.css({left:"87.5%","border-bottom-right-radius":"10px","border-top-right-radius":"10px"}),$(h).attr("src","images/icons/Left.png"),i.css("opacity","1.0"),j.css("opacity","1.0"),k.attr("id","lpMapDiv")}else if(d.hasClass("videoPlayer"))d.data("split","L"),d.find("#playPauseButton").attr("src","images/icons/PlayWhite.svg");else if(d.hasClass("exhibition")){d.data("split","L"),d.find(".leftbar-header").css({height:"5%"}),d.find(".exhibition-label").css({width:"50%"}),d.find(".videos-label").css({width:"50%"}),d.find(".selectExhibition").css({"font-size":"1.5em","letter-spacing":"inherit"}),d.find(".exhibition-title").css({"font-size":"5.7em","letter-spacing":"inherit"}),d.find(".exhibition-subtitle-1").css({"font-size":"3em","letter-spacing":"inherit"}),d.find(".exhibition-subtitle-2").css({"font-size":"2em","letter-spacing":"inherit"}),d.find("#catalogBackButton").css({display:"block"}),d.find(".feedback-icon").css({display:"inline"}),d.find("#exhibition-label").css({display:"block"});var l=.0432*$(window).height(),m=LADS.Util.getMaxFontSizeEM("W",.25,9999,.85*l,.1);$(".exhibition-selection .exhibition-title").css({"font-size":m}),d.find("#exhibition-label").css("font-size",LADS.Util.getMaxFontSizeEM("Collections",1,.1*$(window).width(),1e3)),d.find(".exhibition-name-div").css("font-size",LADS.Util.getMaxFontSizeEM(d.find(".exhibition-name-div").text(),1.5,.75*$(window).width()*.8,.2*d.find(".exhibition-info").height()));var n=.4*$(".contentdiv").width(),o=n/1.4;d.find(".img-container").css({height:o+"px",width:n+"px"}),d.find(".explore-text").css("font-size",LADS.Util.getMaxFontSizeEM("Explore",.5,.5*d.find(".explore-tab").width(),.7*d.find(".explore-tab").height()))}}var c=$("#metascreen-"+a).detach(),d=c.children(".root");f=!1,"L"===a?($("#metascreen-R").remove(),g&&($(g.container).css({width:"100%",height:"100%"}),g.scheduleUpdate()),h=null):($("#metascreen-L").remove(),h&&($(h.container).css({width:"100%",height:"100%"}),h.scheduleUpdate()),g=null),$("#splitbar").remove(),$("body").append(d),b(),g&&g.scheduleUpdate(),h&&h.scheduleUpdate(),g=null,h=null}var f=!1,g=null,h=null;return{init:d,exit:e,on:a,setOn:b,setViewers:c}}(),LADS.Util.makeNamespace("Worktop.Database"),Worktop.Database=function(a){function b(a){y("Exhibitions",F("exhibs","doqs"),F("exhibs","count"),a)}function c(a){y("Artworks",F("artworks","doqs"),F("artworks","count"),a)}function d(a){y("Tours",F("tours","doqs"),F("tours","count"),a)}function e(a){y("AllAssociatedMedia",F("media","doqs"),F("media","count"),a)}function f(a){y("Feedback",F("feedback","doqs"),F("feedback","count"),a)}function g(a,b){y("Doq",F("doqs",a),F("doqs",a,"Metadata","Count"),b,{Guid:a})}function h(a){y("Main",F("main"),F(!0,!1,"main","Metadata","MainCount"),a)}function i(a,b){y("AssociatedMedia",F("doqMedia",a,"doqs"),F("doqMedia",a,"LinqCount"),b,{Guid:a})}function j(a,b){y("ArtworksAssociated",F("doqMedia",a,"doqs"),F("doqMedia",a,"LinqCount"),b,{Guid:a})}function k(a,b,c){y("Linq",F("linqs",a,b,"linq"),F("linqs",a,b,"Count"),c,{Guid1:a,Guid2:b})}function l(a,b){y("ArtworksIn",F("artIn",a,"art"),F("artIn",a,"Count"),b,{Guid:a})}function m(a,b,c,d){b=b||{};var e=C(b,S.params.tour,"ChangeTour",d);e.urlOptions.Guid=a,B("ChangeTour",c,e.urlOptions,e.bodyOptions,!0)}function n(a,b,c,d){b=b||{};var e=C(b,S.params.exhibition,"ChangeExhibition",d);e.urlOptions.Guid=a,B("ChangeExhibition",c,e.urlOptions,e.bodyOptions,!0)}function o(a,b,c,d){b=b||{};var e=C(b,S.params.artwork,"ChangeArtwork",d);e.urlOptions.Guid=a,B("ChangeArtwork",c,e.urlOptions,e.bodyOptions,!0)}function p(a,b,c,d){b=b||{};var e=C(b,S.params.hotspot,"ChangeHotspot",d);e.urlOptions.Guid=a,B("ChangeAssociatedMedia",c,e.urlOptions,e.bodyOptions,!0)}function q(a,b,c){a=a||{};var d=C(a,S.params.main,"ChangeMain",c);B("Main",b,d.urlOptions,d.bodyOptions,!0,F("main","Metadata","MainCount").get())}function r(a,b,c,d){a=a||{};var e=C(a,S.params.tour,"CreateTour",d);z("CreateTour",b,e.urlOptions,e.bodyOptions,c,!0)}function s(a,b,c,d){a=a||{};var e=C(a,S.params.exhibition,"CreateExhibition",d);z("CreateExhibition",b,e.urlOptions,e.bodyOptions,c,!0)}function t(a,b,c,d){a=a||{};var e=C(a,S.params.feedback,"CreateFeedback",d);z("CreateFeedback",b,e.urlOptions,e.bodyOptions,c)}function u(a,b,c,d){a=a||{};var e=C(a,S.params.artwork,"CreateArtwork",d);z("CreateArtwork",b,e.urlOptions,e.bodyOptions,c,!0)}function v(a,b,c,d){a=a||{};var e=C(a,S.params.hotspot,"CreateHotspot",d);z("CreateHotspot",b,e.urlOptions,e.bodyOptions,c,!0)}function w(a,b){A("Doq",b,{Guid:a},!0)}function x(a,b){A("Linq",b,{Guid:a},!0)}function y(a,b,c,d,e,f,g){d=d||{},e=e||{};var f=f||G(b,c),h=-1;"function"==typeof c.get&&(h=c.get(),h||0===h||(h=-1)),e.Count=h;var i={200:S.convertToDocHandler(T.multiFnHandler(d.success,f,E),d.error),304:T.safeCallHandler(d.success,b.get()),401:D(d.unauth),error:T.multiFnHandler(d.error,T.safeCallHandler(d.errorCache,b.get()))};S.asyncRequest("GET",a,e,null,i,g)}function z(a,b,c,d,e,f){b=b||{},c=c||{},c.Token=LADS.Auth.getToken(),c.ReturnDoq=e;var g={200:e&&S.convertToDocHandler(b.success,b.error)||b.success,401:D(b.unauth),error:b.error};S.asyncRequest("PUT",a,c,d,g,f)}function A(a,b,c,d){b=b||{},c=c||{},c.Token=LADS.Auth.getToken(),c.Count=F("doqs",c.Guid).get().Metadata.Count||0;var e={200:b.success,401:D(b.unauth),409:b.conflict,error:b.error};S.asyncRequest("DELETE",a,c,null,e,d)}function B(a,b,c,d,e,f){b=b||{},c=c||{},c.Token=LADS.Auth.getToken();var g=F("doqs",c.Guid).get();0!==f&&(f=f||g&&g.Metadata&&F("doqs",c.Guid).get().Metadata.Count||0),c.Count=f;var h={200:b.success,401:D(b.unauth),409:b.conflict,error:b.error};S.asyncRequest("POST",a,c,d,h,e)}function C(a,b,c,d){var e={},f={};return $.each(a,function(a,g){if(!T.contains(b.url,a)&&!T.contains(b.body,a)){if(d)throw"'"+a+"' is not a valid request parameter for "+c;console.log("Warning: '"+a+"' is not a valid request parameter for "+c)}T.contains(b.body,a)?f[a]=g:e[a]=g}),{bodyOptions:f,urlOptions:e}}function D(a){return function(b,c){LADS.Auth.authenticate(function(){c.setToken(LADS.Auth.getToken()).call()},a)}}function E(a){a&&a[0]?$.each(a,function(a,b){F("doqs",b.Identifier).set(b)}):a&&F("doqs",a.Identifier).set(a)}function F(a,b){var c,d,e=0;"boolean"==typeof b?(d=!b,c=!a,e=2):"boolean"==typeof a&&(c=!a,e=1);for(var f=[],g=e;g<arguments.length;g++)f[g-e]=arguments[g];return{set:function(a){if(!d){for(var b=Q,c=0;c<f.length-1;c++)b[f[c]]||(b[f[c]]={}),b=b[f[c]];b[f[c]]=a,U()}},get:function(){if(!c){for(var a=Q,b=0;b<f.length-1;b++)a[f[b]]||(a[f[b]]={}),a=a[f[b]];return a[f[b]]}}}}function G(a,b){return function(c,d){a.set(c),b.set(parseInt(d.statusText))}}function H(a){P=a}function I(a){P=a}function J(){return"http://"+P+":"+M}function K(){var a=LADS.Worktop.Database.checkSetting("UseHTTPS");return a&&"true"===a.toLowerCase()?"https://"+P+":"+N:"http://"+P+":"+M}function L(){return"http://"+P+":"+O}var M=LADS.Worktop.Database.HTTP_PORT,N=LADS.Worktop.Database.HTTPS_PORT,O=LADS.Worktop.Database.FILE_PORT;"137.117.37.220"===localStorage.ip&&(localStorage.ip="browntagserver.com");var P=localStorage.ip?localStorage.ip:"browntagserver.com";localStorage.ip=P;var Q,R="tag_cache.";if(localStorage[R+P])Q=JSON.parse(localStorage[R+P]);else var Q={main:null,tours:null,exhibs:null,artworks:null,feedback:null,media:null,doqs:{},doqMedia:{},linqs:{}};a&&Q.main&&Q.main.Identifier&&a!==Q.main.Identifier&&(Q={});var S=LADS.Worktop.Database,T=LADS.Util,U=$.debounce(250,function(){localStorage[R+P]=JSON.stringify(Q)});return{getURL:J,getFileURL:L,getSecureURL:K,setURL:I,setBaseURL:H,getExhibitions:b,getArtworks:c,getTours:d,getAssocMedia:e,getDoq:g,getFeedback:f,getMain:h,getAssocMediaTo:i,getArtworksAssocTo:j,getLinq:k,getArtworksIn:l,putTour:r,putExhibition:s,putFeedback:t,putArtwork:u,putHotspot:v,postTour:m,postExhibition:n,postArtwork:o,postHotspot:p,postMain:q,deleteDoq:w,deleteLinq:x}},LADS.Util.makeNamespace("Worktop.Doq"),Worktop.Doq=function(a){function b(a){if(void 0!=a){if(!a.Metadata)return null;var b={},c=a.Metadata.Dicts.KeyValueOfguidMetadataDictionaryYwP_PEBe9?a.Metadata.Dicts.KeyValueOfguidMetadataDictionaryYwP_PEBe9.Value.Dict.KeyValueOfstringanyType:[];if(c.length)$.each(c,function(a){var d=c[a].Key,e=c[a].Value.text;b[d]=e});else{var d=c.Key,e=c.Value;b[d]=e}if(a.Metadata=b,a.Metadata&&"string"==typeof a.Metadata.InfoFields)try{a.Metadata.InfoFields=JSON.parse(a.Metadata.InfoFields)}catch(f){a.Metadata.InfoFields={}}}}function c(a){void 0!=a&&a._Folders&&(a.Folders=a._Folders.FolderData)}var d=$.parseXML(a),e=$.xml2json(d);if(e.DoqData){var f=[];return e.DoqData[0]?$.each(e.DoqData,function(){b(this),c(this),f.push(this)}):(b(e.DoqData),c(e.DoqData),f.push(e.DoqData)),f}if(e.LinqData){var g=[];return e.LinqData[0]?$.each(e.LinqData,function(){b(this),g.push(this)}):(b(e.LinqData),g.push(e.LinqData)),g}return b(e),c(e),e},LADS.Util.makeNamespace("LADS.Worktop.Database"),LADS.Worktop.Database=function(){function a(a,b,c){I("HEAD","ClearToken",{Token:a},null,{success:b,error:c},!0)}function b(a,b,c,d){I("HEAD","CheckToken",{Token:a},null,{success:b,401:c,error:d},!0)}function c(a,b,c){ab=ab||new Worktop.Database,ab.getExhibitions({success:a,error:b,errorCache:c})}function d(a,b,c){ab=ab||new Worktop.Database,ab.getFeedback({success:a,error:b,errorCache:c})}function e(a,b,c){ab=ab||new Worktop.Database,ab.getArtworks({success:a,error:b,errorCache:c})}function f(a,b,c){ab=ab||new Worktop.Database,ab.getTours({success:a,error:b,errorCache:c})}function g(a,b,c){var d=[];e(function(e){d=e,f(function(b){a(d.concat(b))},b,c)},b,c)}function h(a,b,c,d){ab=ab||new Worktop.Database,ab.getDoq(a,{success:b,error:c,errorCache:d})}function i(a,b,c){ab=ab||new Worktop.Database,ab.getMain({success:function(b){bb=b,a&&a(b)},error:b,errorCache:c})}function j(a,b,c){ab=ab||new Worktop.Database,ab.getAssocMedia({success:a,error:b,errorCache:c})}function k(a,b,c,d,e){ab=ab||new Worktop.Database,ab.getLinq(a,b,{success:c,error:d,errorCache:e})}function l(a,b,c,d){ab=ab||new Worktop.Database,ab.getAssocMediaTo(a,{success:b,error:c,errorCache:d})}function m(a,b,c,d){ab=ab||new Worktop.Database,ab.getArtworksAssocTo(a,{success:b,error:c,errorCache:d})}function n(a,b,c,d){ab=ab||new Worktop.Database,ab.getArtworksIn(a,{success:b,error:c,errorCache:d})}function o(a,b){I("GET","Salt",null,null,{success:G(a),error:b},!0)}function p(a,b,c,d,e){I("GET","Auth",{Hash:LADS.Auth.hashPass(a,b)},null,{success:G(c),401:d,error:e},!0)}function q(a,b){I("GET","CheckVersion",null,null,{success:H(a),error:b})}function r(a,b,c,d,e,f){I("POST","ChangePassword",{OldHash:LADS.Auth.hashPass(a,b),NewPass:c},null,{success:G(d),unauth:e,error:f},!0)}function s(a,b,c,d,e){ab=ab||new Worktop.Database,ab.putTour(a,{success:b,error:d,unauth:c},e,gb)}function t(a,b,c,d,e){ab=ab||new Worktop.Database,ab.putExhibition(a,{success:b,error:d,unauth:c},e,gb)}function u(a,b,c,d,e){ab=ab||new Worktop.Database,a=a||"No Text",ab.putFeedback({SourceID:c,SourceType:b,Description:a},{success:d,error:e},!1,gb)}function v(a,b,c,d,e){ab=ab||new Worktop.Database,ab.putArtwork(a,{success:b,error:d,unauth:c},e,gb)}function w(a,b,c,d,e){ab=ab||new Worktop.Database,ab.putHotspot(a,{success:b,error:d,unauth:c},e,gb)}function x(a,b,c,d,e,f){ab=ab||new Worktop.Database,"string"!=typeof a&&a&&a.Identifier&&(a=a.Identifier),ab.postTour(a,b,{success:c,unauth:d,conflict:e,error:f},gb)}function y(a,b,c,d,e,f){ab=ab||new Worktop.Database,"string"!=typeof a&&a&&a.Identifier&&(a=a.Identifier),ab.postExhibition(a,b,{success:c,unauth:d,conflict:e,error:f},gb)}function z(a,b,c,d,e,f){ab=ab||new Worktop.Database,"string"!=typeof a&&a&&a.Identifier&&(a=a.Identifier),ab.postArtwork(a,b,{success:c,unauth:d,conflict:e,error:f},gb)}function A(a,b,c,d,e,f){ab=ab||new Worktop.Database,"string"!=typeof a&&a&&a.Identifier&&(a=a.Identifier),ab.postHotspot(a,b,{success:c,unauth:d,conflict:e,error:f},gb)}function B(a,b,c,d,e){ab=ab||new Worktop.Database,ab.postMain(a,{success:b,unauth:c,conflict:d,error:e},gb)}function C(a,b,c,d){I("POST","FileUploadDataURL",{Token:LADS.Auth.getToken()},null,{success:G(b),unauth:c,error:d},!0,a)
}function D(a,b,c,d,e){ab=ab||new Worktop.Database,"string"!=typeof a&&a&&a.Identifier&&(a=a.Identifier),ab.deleteDoq(a,{success:b,error:e,unauth:c,conflict:d})}function E(a,b,c,d,e){ab=ab||new Worktop.Database,"string"!=typeof a&&a&&a.Identifier&&(a=a.Identifier),ab.deleteLinq(a,{success:b,error:e,unauth:c,conflict:d})}function F(a,b){return function(c,d){var e;try{e=new Worktop.Doq(c.responseText)}catch(f){fb.safeCall(b,c,d)}e&&(e.Name||e.Offset)?fb.safeCall(a,e,c):e&&e[0]?fb.safeCall(a,e,c):e&&fb.safeCall(a,[],c)}}function G(a){return function(b){fb.safeCall(a,b.responseText)}}function H(a){return function(b){fb.safeCall(a,b.statusText)}}function I(a,b,c,d,e,f,g,h){if(!b)return!1;e=e||{},c=c||{},d=d||{},c.Force="true";var i=(h?h:f?ab.getSecureURL():ab.getURL())+"/?Type="+b;$.each(c,function(a,b){i=i+"&"+a+"="+escape(b)});var j,k;Object.keys(d).length&&(j=K(d),k="Boundary:"+j,j="\r\n"+j+"\r\n",$.each(d,function(a,b){k=k+j+a+":"+b}));var l={call:function(){$.ajax({type:a,url:i,cache:!1,dataType:"text",async:!0,processData:!1,data:g||k,success:function(a,b,c){e[c.status]||fb.safeCall(e.success,c,l),fb.safeCall(e[c.status],c,l)},error:function(a){e[a.status]||fb.safeCall(e.error,a,l),fb.safeCall(e[a.status],a,l)}})},force:function(){i+="&Force=true",l.call()},setToken:function(a){return i=J(i),i=i+"&Token="+a,l}};l.call()}function J(a){var b=a.indexOf("&Token="),c=a.indexOf("&",b+1),d=a.substring(b,c);return a.replace(d,"")}function K(a){var b="----",c=!1;do c=!1,b+="-",$.each(a,function(a,d){return LADS.Util.contains(a,b)?(c=!0,!1):LADS.Util.contains(d,b)?(c=!0,!1):void 0});while(c);return b}function L(a,b){return b?void ab.getMain({success:function(c){b(c.Metadata["Setting_"+a])}}):bb.Metadata["Setting_"+a]}function M(){return bb.Metadata.MuseumName}function N(){return bb.Metadata.OverlayColor}function O(){return bb.Metadata.OverlayTransparency}function P(){return bb.Metadata.MuseumLoc}function Q(){return bb.Metadata.MuseumInfo}function R(){return LADS.Worktop.Database.fixPath(bb.Metadata.BackgroundImage)}function S(){return LADS.Worktop.Database.fixPath(bb.Metadata.Icon)}function T(){return bb.Metadata.IconColor}function U(){return ab.getURL()}function V(){return ab.getSecureURL()}function W(){return ab.getFileURL()}function X(a){ab.setURL(a)}function Y(a,b){LADS.Auth.authenticate(a,b)}function Z(a,b,c,d){function e(){function b(b){var d=(b.statusText,b.responseText);localStorage.ip=a,ab=new Worktop.Database(d),c&&c()}function e(){d&&d()}I("GET","CheckVersion",null,null,{success:b,error:e},!1,null,"http://"+a+":8080")}a=LADS.Util.formatAddress(a),b?o(function(a){p(b,a,e,d,d)},d):e()}function _(a){return a?-1!==a.indexOf("http")||-1!==a.indexOf("blob:")?a:(0!==a.indexOf("/")&&(a="/"+a),ab.getFileURL()+a):void 0}var ab,bb,cb="8080",db="9001",eb="8086",fb=LADS.Util,gb=!0,hb={exhibition:{url:["Name","Sub1","Sub2","Background","Img1","Img2","Private"],body:["Description","AddIDs","RemoveIDs"]},artwork:{url:["Name","Title","Artist","Year","Preview","Thumbnail","Deepzoom","Source","Duration"],body:["Description","Location","AddIDs","RemoveIDs","InfoFields","Duration"]},tour:{url:["Name","Thumbnail","Private"],body:["Description","Content","RelatedArtworks"]},hotspot:{url:["Name","ContentType","Duration","Source","LinqTo","X","Y","LinqType","Thumbnail"],body:["Description","AddIDs","RemoveIDs"]},feedback:{url:["SourceID","SourceType"],body:["Description"]},main:{url:["Name","OverlayColor","OverlayTrans","Location","Background","Icon","IconColor"],body:["Info"]}};return{HTTP_PORT:cb,HTTPS_PORT:db,FILE_PORT:eb,getURL:U,getSecureURL:V,setURL:X,getFileURL:W,fixPath:_,checkAuth:Y,changeServer:Z,checkSetting:L,getMuseumName:M,getMuseumLoc:P,getMuseumInfo:Q,getStartPageBackground:R,getMuseumLogo:S,getMuseumOverlayColor:N,getMuseumOverlayTransparency:O,getLogoBackgroundColor:T,asyncRequest:I,convertToDocHandler:F,params:hb,convertToTextHandler:G,clearToken:a,checkToken:b,getExhibitions:c,getFeedback:d,getArtworks:e,getTours:f,getArtworksAndTours:g,getMain:i,getAssocMedia:j,getLinq:k,getAssocMediaTo:l,getArtworksAssocTo:m,getArtworksIn:n,getSalt:o,getAuth:p,getVersion:q,getDoq:h,changePass:r,deleteDoq:D,deleteLinq:E,createTour:s,createExhibition:t,createFeedback:u,createArtwork:v,createHotspot:w,changeTour:x,changeExhibition:y,changeArtwork:z,changeHotspot:A,changeMain:B,uploadImage:C}}(),LADS.Util.makeNamespace("LADS.AnnotatedImage"),LADS.AnnotatedImage=function(a,b,c,d,e){"use strict";function f(a,b,c){t.viewer.viewport.zoomBy(c,t.viewer.viewport.pointFromPixel(new Seadragon.Point(a.x,a.y)),!1),t.viewer.viewport.panBy(t.viewer.viewport.deltaPointsFromPixels(new Seadragon.Point(-b.x,-b.y)),!1),t.viewer.viewport.applyConstraints()}function g(a,b){t.viewer.viewport.zoomBy(a,t.viewer.viewport.pointFromPixel(new Seadragon.Point(b.x,b.y))),t.viewer.viewport.applyConstraints()}function h(){Seadragon.Config&&(Seadragon.Config.visibilityRatio=.8);var a=$(document.createElement("div"));a.on("mousedown scroll click mousemove resize",function(a){a.preventDefault()}),a.css({height:"100%",width:"100%",position:"absolute","z-index":0}),$(q).append(a),t.viewer=new Seadragon.Viewer(a[0]),t.viewer.setMouseNavEnabled(!1),t.viewer.clearControls();var b=t.viewer.canvas;LADS.Util.makeManipulatable(b,{onScroll:function(a,b){g(a,b)},onManipulate:function(a){f(a.pivot,a.translation,a.scale)}}),o=$(document.createElement("div")),o.css({height:"100%",width:"100%",position:"absolute","overflow-x":"hidden","overflow-y":"hidden","z-index":50,"pointer-events":"none"}),$(q).append(o),d&&(e?setTimeout(d,1):k(d))}function i(a){function b(){var a=LADS.Util.constrainAndPosition($(n).width(),$(n).height(),{width:1,height:1,max_height:40,center_h:!0});p.css({width:a.width+"px",height:a.height+"px",left:a.x+"px","margin-top":"-1%"});var b=LADS.Util.constrainAndPosition(p.width(),p.height(),{width:.8*(p.height()/p.width()),height:.8,max_height:35,max_width:35,center_v:!0});$(g).css({width:b.width+"px",height:b.height+"px"}),l.css({top:b.y+2+"px",width:b.width+"px",height:b.height+"px"});var c=LADS.Util.constrainAndPosition(p.width(),p.height(),{width:.7,height:1,max_width:620,max_height:20,center_v:!0});$(i).css({width:c.width+"px",height:c.height+"px",top:c.y-7+"px"});var d=LADS.Util.constrainAndPosition(p.width(),p.height(),{width:.09,height:.5,max_width:40,max_height:35,center_v:!0}),e=LADS.Util.getMaxFontSizeEM("99:99",0,d.width,d.height,.05);$(j).css({width:d.width+"px",height:d.height+"px",top:d.y+"px"}),k.style.fontSize=e;var f=LADS.Util.constrainAndPosition(p.width(),p.height(),{width:.65*(p.height()/p.width()),height:.65,max_height:30,max_width:30,center_v:!0});$(h).css({height:f.height+"px",width:f.width+"px"}),h.style.height=f.height,h.style.width=f.width,m.css({top:f.y-3+"px",height:f.height+"px",width:f.width+"px"});var o=m.width()+$(j).width()+$(i).width()+l.width()+.08*p.width(),q=$(i).width();$(i).width(q+p.width()-o)}function c(){var c=Math.min(Math.max(10,100*Math.random()),60),d=Math.min(Math.max(30,100*Math.random()),70);$(f).css({top:c+"%",left:d+"%",position:"absolute","z-index":1e3,"pointer-events":"all"}),$(f).show(),o.append(f),("Video"===a.contentType||"Audio"===a.contentType)&&b(),e=!1}function d(){$(f).hide(),e=!0}this.title=a.title,this.contentType=a.contentType,this.source=a.source,this.description=a.description,this.thumbnail=a.thumbnail;var e=!0,f=document.createElement("div");f.style.width="450px";var g,h,i,j,k,l,m,n=document.createElement("div"),p=$(document.createElement("div"));p.addClass("media-control-panel-"+a.assetDoqID),p.css({height:"40px",position:"relative",display:"block",left:"2.5%","margin-bottom":"2.5%"}),n.style.backgroundColor="rgba(0,0,0,0.65)",f.appendChild(n);var q=Math.min(Math.max(20,100*Math.random()),80),r=Math.min(Math.max(20,100*Math.random()),80);$(f).css({top:q+"%",left:r+"%",position:"absolute","z-index":1e3});var s=document.createElement("div");$(s).text(LADS.Util.htmlEntityDecode(this.title)).css({position:"relative",left:"5%",width:"90%",color:"white",top:"5px","padding-bottom":"2%",overflow:"hidden","text-overflow":"ellipsis","font-weight":"700"}),n.appendChild(s);var t;if("Image"===this.contentType){var u=document.createElement("img");u.src=LADS.Worktop.Database.fixPath(this.source),$(u).css({position:"relative",width:"100%",height:"auto"}),n.appendChild(u)}else if("Video"===this.contentType){var x=document.createElement("video");$(x).attr("preload","none"),$(x).attr("poster",this.thumbnail&&!this.thumbnail.match(/.mp4/)?LADS.Worktop.Database.fixPath(this.thumbnail):""),x.src=LADS.Worktop.Database.fixPath(this.source),x.type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"',x.type='video/ogg; codecs="theora, vorbis"',x.type='video/webm; codecs="vp8, vorbis"',x.style.position="relative",x.style.width="100%",x.controls=!1,n.appendChild(x),l=$(document.createElement("div")),g=document.createElement("img"),$(g).attr("src","images/icons/PlayWhite.svg"),$(g).addClass("videoControls"),$(g).css({position:"relative",height:"20px",width:"20px",display:"inline-block"}),l.css({position:"relative",height:"20px",width:"20px",display:"inline-block",margin:"0px 1% 0px 1%"}),l.append(g),m=$(document.createElement("div")),h=document.createElement("img"),$(h).attr("src","images/icons/VolumeUpWhite.svg"),$(h).addClass("videoControls"),$(h).css({height:"20px",width:"20px",position:"relative",display:"inline-block"}),m.css({height:"20px",width:"20px",position:"relative",display:"inline-block",margin:"0px 1% 0px 1%"}),m.append(h),this.initVideoPlayHandlers=function(){0!==x.currentTime&&(x.currentTime=0),$(g).attr("src","images/icons/PlayWhite.svg"),$(g).on("click",function(){x.paused?(x.play(),$(g).attr("src","images/icons/PauseWhite.svg")):(x.pause(),$(g).attr("src","images/icons/PlayWhite.svg"))}),$(h).on("click",function(){x.muted?(x.muted=!1,$(h).attr("src","images/icons/VolumeUpWhite.svg")):(x.muted=!0,$(h).attr("src","images/icons/VolumeDownWhite.svg"))}),$(x).on("ended",function(){x.pause(),$(g).attr("src","images/icons/PlayWhite.svg")})},this.initVideoPlayHandlers(),i=document.createElement("input"),$(i).addClass("videoControls"),i.type="range",$(i).attr("id","seek-bar"),$(i).attr("value","0"),i.style.margin="0px 1% 0px 1%",i.style.display="inline-block",i.style.padding="0px",$(i).css({left:"30px"}),i.addEventListener("change",function(a){a.stopPropagation();var b=x.duration*(i.value/100);isNaN(b)||(x.currentTime=b)}),$(i).mouseover(function(a){var b=a.offsetX/$(i).width(),c=x.duration*b,d=Math.floor(c/60),e=Math.floor(c%60);t=String(d+":"+(10>e?"0":"")+e),i.title=t}),$(i).mousedown(function(a){w=!0,a.stopPropagation()}),$(i).mouseup(function(a){w=!1,a.stopPropagation()}),j=document.createElement("div"),$(j).css({height:"20px",width:"40px",margin:"0px 1% 0px 1%",padding:"0",display:"inline-block",overflow:"hidden"}),k=document.createElement("span"),$(k).text("00:00"),$(k).addClass("videoControls"),x.addEventListener("timeupdate",function(){var a=100/x.duration*x.currentTime;i.value=a;var b,c=Math.floor(x.currentTime/60),d=Math.floor(x.currentTime%60);b=String(String(c).length<2?"0"+c:c),$(k).text(b+String(":"+(10>d?"0":"")+d))}),n.appendChild(p[0]),p.append(l),p.append(i),$(j).append(k),p.append(j),p.append(m)}else if("Audio"===this.contentType){var y=document.createElement("audio");$(y).attr("preload","none"),y.src=LADS.Worktop.Database.fixPath(this.source),y.type="audio/ogg",y.type="audio/mp3",y.controls="false",l=$(document.createElement("div")),g=document.createElement("img"),$(g).attr("src","images/icons/PlayWhite.svg"),$(g).addClass("audioControls"),$(g).css({position:"relative",height:"20px",width:"20px",display:"inline-block"}),l.css({position:"relative",height:"20px",width:"20px",display:"inline-block",margin:"0px 1% 0px 1%"}),g.style.width="32px",g.style.height="32px",l.width(32),l.height(32),l.append(g),m=$(document.createElement("div")),h=document.createElement("img"),$(h).attr("src","images/icons/VolumeUpWhite.svg"),$(h).addClass("audioControls"),$(h).css({height:"20px",width:"20px",position:"relative",display:"inline-block"}),m.css({height:"20px",width:"20px",position:"relative",display:"inline-block",margin:"0px 1% 0px 1%"}),m.append(h),this.initAudioPlayHandlers=function(){0!==y.currentTime&&(y.currentTime=0),y.pause(),$(g).attr("src","images/icons/PlayWhite.svg"),$(g).on("click",function(){y.paused?(y.play(),$(g).attr("src","images/icons/PauseWhite.svg")):(y.pause(),$(g).attr("src","images/icons/PlayWhite.svg"))}),$(h).on("click",function(){y.muted?(y.muted=!1,$(h).attr("src","images/icons/VolumeUpWhite.svg")):(y.muted=!0,$(h).attr("src","images/icons/VolumeDownWhite.svg"))}),$(y).on("ended",function(){y.pause(),$(g).attr("src","images/icons/PlayWhite.svg")})},this.initAudioPlayHandlers(),i=document.createElement("input"),$(i).addClass("audioControls"),i.type="range",$(i).attr("id","seek-bar"),$(i).attr("value","0"),i.style.margin="0px 1% 0px 1%",i.style.display="inline-block",i.style.padding="0px",$(i).css({left:"30px"}),i.addEventListener("change",function(a){a.stopPropagation();var b=y.duration*(i.value/100);isNaN(b)||(y.currentTime=b)}),$(i).mouseover(function(a){var b=a.offsetX/$(i).width(),c=y.duration*b,d=Math.floor(c/60),e=Math.floor(c%60);t=String(d+":"+(10>e?"0":"")+e),i.title=t}),$(i).mousedown(function(a){w=!0,a.stopPropagation()}),$(i).mouseup(function(a){w=!1,a.stopPropagation()}),j=document.createElement("div"),$(j).css({height:"20px",width:"40px",margin:"0px 1% 0px 1%",padding:"0",display:"inline-block",overflow:"hidden"}),k=document.createElement("span"),$(k).text("00:00"),$(k).addClass("audioControls"),y.addEventListener("timeupdate",function(){var a=100/y.duration*y.currentTime;i.value=a;var b,c=Math.floor(y.currentTime/60),d=Math.floor(y.currentTime%60);b=String(String(c).length<2?"0"+c:c),$(k).text(b+String(":"+(10>d?"0":"")+d))}),n.appendChild(p[0]),p.append(l),p.append(i),$(j).append(k),p.append(j),p.append(m)}if(this.description){var z=document.createElement("div");"2222"===this.title&&console.log("jho"),$(z).html(LADS.Util.htmlEntityDecode(this.description)),$(z).css({position:"relative",left:"5%",width:"90%",color:"white",bottom:"5px","word-wrap":"break-word"}),n.appendChild(z)}this.getRoot=function(){return f},this.setRoot=function(a){f=a,f.appendChild(n),"Video"===this.contentType&&this.initVideoPlayHandlers(),"Audio"===this.contentType&&this.initAudioPlayHandlers()},this.toggle=function(){e?c():d()},this.pauseAsset=function(){"Audio"===this.contentType?(0!==y.currentTime&&(y.currentTime=0),y.pause(),$(g).attr("src","images/icons/PlayWhite.svg")):"Video"===this.contentType&&(x.currentTime>.1&&(x.currentTime=0),x.paused||x.pause(),$(g).attr("src","images/icons/PlayWhite.svg"))},this.close=function(){document.body.removeChild(f)},this.resizeControlElements=b,"Hotspot"===a.assetType||v.push({title:a.title,assetType:a.assetType,contentType:a.contentType,description:a.description,x:a.x,y:a.y,assetDoqID:a.assetDoqID,assetLinqID:a.assetLinqID,source:a.source,thumbnail:a.thumbnail,toggle:this.toggle,hide:d,show:c,resize:b,pauseAsset:this.pauseAsset})}function j(a,b){function d(){return m?void f():e()}function e(){return l?void 0:(t.viewer.isOpen()?t.viewer.drawer.addOverlay(g,j,Seadragon.OverlayPlacement.TOP_LEFT):t.viewer.addEventListener("open",function(){t.viewer.drawer.addOverlay(g,j,Seadragon.OverlayPlacement.TOP_LEFT)}),t.viewer.drawer.updateOverlay(g,j,Seadragon.OverlayPlacement.TOP_LEFT),$(g).show(),t.viewer.viewport.panTo(j,!1),$(g).click(function(a){var d,e,f=$("#splitbar");b.pauseAsset(),k&&document.body.contains(b.getRoot())?($(b.getRoot()).hide(),k=!1):(d=$(g).offset().top+$(g).height(),e=$(g).offset().left+$(g).width(),"R"===c&&f[0]&&(e=e-f.offset().left-f.width()),$(b.getRoot()).css({top:d,left:e}),$(b.getRoot()).show(),o.append(b.getRoot()),k=!0,("Audio"===b.contentType||"Video"===b.contentType)&&b.resizeControlElements()),a.stopImmediatePropagation()}),l=!0,m=!0,$(g))}function f(){l&&(t.removeOverlay(g),$(g).hidden||($(g).hide(),$(b.getRoot()).hide()),l=!1,m=!1,k=!1)}$(b.getRoot()).hide();var g=document.createElement("div");g.innerText="",g.setAttribute("style","display: block; width: 40px;height: 40px; border: solid rgba(255,255,255,1) 5px;border-radius:50%;"),g.setAttribute("on","0");var h=document.createElement("div");h.innerText="",h.setAttribute("style","display: block; width: 30px;height: 30px;background:rgba(0,0,0,0);border: solid rgba(0,0,0,1) 5px;border-radius:50%;"),g.appendChild(h);var i=document.createElement("div");i.setAttribute("style","display: block; width: 0px;height: 0px;background: rgba(0,0,0,0);border: solid rgba(0,0,0,0.01) 15px;border-radius:50%;"),i.innerText="",h.appendChild(i);{var j=new Seadragon.Point(a.x,a.y),k=!1,l=!1,m=!1;a.title}"Hotspot"===a.assetType&&u.push({title:a.title,assetType:a.assetType,contentType:a.contentType,description:a.description,x:a.x,y:a.y,assetDoqID:a.assetDoqID,assetLinqID:a.assetLinqID,source:a.source,thumbnail:a.thumbnail,toggle:d,hide:f,show:e,pauseAsset:b.pauseAsset})}function k(a){function b(b){if(d=b&&b.length||0,b&&b.length>0)for(var e=0;e<b.length;e++)LADS.Worktop.Database.getLinq(m,b[e].Identifier,c(b[e]),null,c(b[e]));else a&&a(u,v)}function c(b){return function(c){if(c){var f=c.Offset._x,g=c.Offset._y,h={assetType:c.Metadata.Type,title:b.Name,contentType:b.Metadata.ContentType,source:b.Metadata.Source,thumbnail:b.Metadata.Thumbnail,description:b.Metadata.Description,x:parseFloat(f),y:parseFloat(g),assetDoqID:b.Identifier,assetLinqID:c.Identifier};l(h,c.Metadata.Type?"Hotspot"===h.assetType:!1),e++,e>=d&&a&&a(u,v)}}}u=[],v=[];var d,e=0;LADS.Worktop.Database.getAssocMediaTo(m,b,null,null)}function l(a,b){function c(b){function e(e){if(!i&&!w&&d){var h,j=$(b),k=j.css("top"),l=j.css("left"),m=j.css("width"),n=j.css("height"),o=parseFloat(m)*e.scale;h="Video"===d.contentType||"Audio"===d.contentType?450:200;var p;o>=h&&800>=o?0<parseFloat(k)+parseFloat(n)&&parseFloat(k)<window.innerHeight&&0<parseFloat(l)+parseFloat(m)&&parseFloat(l)<window.innerWidth&&e?(j.css("top",parseFloat(k)+e.translation.y+(1-e.scale)*e.pivot.y+"px"),j.css("left",parseFloat(l)+e.translation.x+(1-e.scale)*e.pivot.x+"px")):(i=!0,g=$("#"+a.assetLinqID),g.data("ishotspot")?(g.data("assetHidden",!0),$(b).remove(),p=$(f).clone(!0,!0)[0],d.setRoot(p),c(p)):(g.css({color:"white","background-color":""}),g.data("assetHidden",!0),d.toggle(),$(b).remove(),p=$(f).clone(!0,!0)[0],d.setRoot(p),c(p))):0<parseFloat(k)+parseFloat(n)&&parseFloat(k)<window.innerHeight&&0<parseFloat(l)+parseFloat(m)&&parseFloat(l)<window.innerWidth&&e?(j.css("top",parseFloat(k)+e.translation.y+"px"),j.css("left",parseFloat(l)+e.translation.x+"px"),o=Math.min(Math.max(o,h),800)):(i=!0,g=$("#"+a.assetLinqID),g.data("ishotspot")||(g.css({color:"white","background-color":"rgba(0,0,0,0.7)"}),g.data("assetHidden",!0),$(b).remove(),p=$(f).clone(!0,!0)[0],d.setRoot(p),c(p))),j.css("width",o+"px"),j.css("height","auto"),("Video"===d.contentType||"Audio"===d.contentType)&&d.resizeControlElements()}}function h(a,c){if(!w){var e=$(b).css("top"),f=$(b).css("left"),g=$(b).css("width"),h=parseFloat(g)*a;$(b).css("width",h+"px");var i;i="Video"===d.contentType||"Audio"===d.contentType?450:200,h>=i&&800>=h?($(b).css("top",parseFloat(e)+(1-a)*c.y+"px"),$(b).css("left",parseFloat(f)+(1-a)*c.x+"px")):h=Math.min(Math.max(h,i),800),$(b).css("width",h+"px"),$(b).css("height","auto"),("Video"===d.contentType||"Audio"===d.contentType)&&d.resizeControlElements()}}{var i=!1;LADS.Util.makeManipulatable(b,{onManipulate:e,onScroll:h})}}var d=new i(a);LADS.Util.disableDrag($(d.getRoot()));var e=$(d.getRoot()).clone(!0,!0);e.empty();var f=e[0];c(d.getRoot());var g;$(o).append(d.getRoot()),j(a,d,b)}var m=(b.Name,b.Identifier);this.viewer=null;var n,o,p,q=a,r=null,s=null,t=this,u=[],v=[],w=!1;this.getHotspots=function(a,b){return a&&k(b),u},this.getAssets=function(a,b){return a&&k(b),v},this.loadImage=function(a){var b=LADS.Util.makeXmlRequest(a),c=b?b.responseXML:null;if(null===c)return!1;var d=c.documentElement.querySelectorAll("Image, Size")[0];return s=d.getAttribute("Width"),r=d.getAttribute("Height"),n=s/r,t.viewer.openDzi(a),!0},this.loadDoq=function(a){return p=a,this.loadImage(LADS.Worktop.Database.fixPath(a.Metadata.DeepZoom))},this.updateOverlay=function(a,b){var c=parseFloat($(a).css("top")),d=parseFloat($(a).css("left"));c&&d&&t.viewer.drawer.updateOverlay(a,t.viewer.viewport.pointFromPixel(new Seadragon.Point(d,c)),b)},this.addOverlayToDZ=function(a,b,c){t.viewer.isOpen()?t.viewer.drawer.addOverlay(a,b,c):t.viewer.addEventListener("open",function(){t.viewer.drawer.addOverlay(a,b,c)}),t.viewer.drawer.updateOverlay(a,b,c)},this.removeOverlay=function(a){t.viewer.isOpen()?t.viewer.drawer.removeOverlay(a):t.viewer.addEventListener("open",function(){t.viewer.drawer.removeOverlay(a)})},this.unload=function(){this.viewer&&this.viewer.unload()},this.addAnimateHandler=function(a){t.viewer.addEventListener("animation",a)},h(),this.loadHotspots=k};var LADS=LADS||{};LADS.Auth=function(){"use strict";function a(){return LADS.AuthToken||null}function b(){LADS.Worktop.Database.clearToken(LADS.AuthToken),LADS.AuthToken=null}function c(a,b){for(var c=a+b,d=CryptoJS.SHA256(c),e=0;1023>e;e++)d=CryptoJS.SHA256(d);return d}function d(a,b,c,d){LADS.Worktop.Database.getSalt(function(e){LADS.Worktop.Database.getAuth(a,e,function(a){LADS.AuthToken=a,b()},c,d)},d)}function e(a,b,c,d,e){return f(b)?void LADS.Worktop.Database.getSalt(function(f){LADS.Worktop.Database.changePass(a,f,b,function(a){LADS.AuthToken=a,c()},d,e)}):void d("Password must contain at least 8 characters with 3 of the following types:<br>Lowercase letter<br>Uppercase letter<br>Number<br>Symbol")}function f(a){if(a&&a.length>=8){var b=0;if(a.match(/(?=.*[a-z])/)&&b++,a.match(/(?=.*[A-Z])/)&&b++,a.match(/(?=.*[\d])/)&&b++,a.match(/(?=.*[\W])/)&&b++,b>=3)return!0}return!1}function g(a,b){function c(){$("body").append(LADS.AuthOverlay),LADS.AuthInput.val(""),LADS.AuthOverlay.fadeIn(500),LADS.AuthInput.focus(),LADS.AuthSubmit.show(),LADS.AuthCancel.show(),LADS.AuthCancel.click(function(){LADS.AuthError.hide(),LADS.AuthCircle.hide(),LADS.AuthOverlay.fadeOut(500,function(){LADS.AuthOverlay.remove(),b&&b()})}),LADS.AuthSubmit.click(function(){LADS.AuthError.hide(),LADS.AuthCircle.show(),LADS.AuthSubmit.hide(),LADS.AuthCancel.hide(),d(LADS.AuthInput.val(),function(){LADS.AuthError.hide(),LADS.AuthCircle.hide(),LADS.AuthOverlay.remove(),a()},function(){LADS.AuthError.html("Invalid Password. Please try again..."),LADS.AuthError.show(),LADS.AuthCircle.hide(),LADS.AuthSubmit.show(),LADS.AuthCancel.show()},function(){LADS.AuthError.html("There was an error contacting the server. Contact a server administrator if this error persists."),LADS.AuthError.show(),LADS.AuthError.css({bottom:"30%"}),LADS.AuthCircle.hide(),LADS.AuthSubmit.show(),LADS.AuthCancel.show()})})}LADS.AuthToken?LADS.Worktop.Database.checkToken(LADS.AuthToken,a,c,c):c()}function h(){var a=$(document.createElement("div"));a.attr("id","loginOverlay"),a.css({display:"none",position:"absolute",top:0,left:0,width:"100%",height:"100%","background-color":"rgba(0,0,0,0.6)","z-index":100000002});var b=$(document.createElement("div"));b.attr("id","loginDialog");var c=LADS.Util.constrainAndPosition($(window).width(),$(window).height(),{center_h:!0,center_v:!0,width:.5,height:.35,max_width:560,max_height:210});b.css({position:"absolute",left:c.x+"px",top:c.y+"px",width:c.width+"px",height:c.height+"px",border:"3px double white","background-color":"black"}),a.append(b);var d=$(document.createElement("div"));d.attr("id","dialogTitle"),d.css({color:"white",width:"80%",height:"15%",left:"10%",top:"12.5%",position:"relative","text-align":"center"}),d.text("Please enter authoring mode password.");var e=$(document.createElement("input"));e.attr({type:"password",id:"password",name:"password",placeholder:"password"}),e.css({display:"block",position:"relative",margin:"auto","margin-top":"5%","margin-bottom":"5%"});var f=$(document.createElement("div"));f.attr("id","errorMessage"),f.css({color:"white","margin-bottom":"10px",left:"10%",width:"80%","text-align":"center",bottom:"36%",position:"absolute"}),f.html("Invalid Password. Please try again..."),f.hide();var g=$(document.createElement("div"));g.css({position:"relative",display:"block",width:"80%",left:"10%",bottom:"-10%"});var h=$(document.createElement("button"));h.css({padding:"1%",border:"1px solid white",width:"auto",position:"relative","margin-top":"1%","margin-left":"-2%",display:"inline-block"});var i=$(document.createElement("img"));i.css({width:"20px",height:"auto",display:"none","margin-right":"3%","margin-top":"2.5%","float":"right"}),i.attr("src","images/icons/progress-circle.gif"),h.text("Submit");var j=$(document.createElement("button"));return j.attr("type","button"),j.css({padding:"1%",border:"1px solid white",width:"auto",position:"relative","margin-top":"1%","float":"right","margin-right":"-2%",display:"inline-block"}),j.text("Cancel"),b.append(d),b.append(e),b.append(f),b.append(g),g.append(j),g.append(h),g.append(i),{overlay:a,input:e,submit:h,cancel:j,error:f,circle:i}}if(!LADS.AuthOverlay){var i=h();LADS.AuthOverlay=i.overlay,LADS.AuthSubmit=i.submit,LADS.AuthCancel=i.cancel,LADS.AuthInput=i.input,LADS.AuthError=i.error,LADS.AuthCircle=i.circle}return{getToken:a,clearToken:b,authenticate:g,hashPass:c,changePassword:e}}(),LADS.Util.makeNamespace("LADS.Layout.StartPage"),LADS.Layout.StartPage=function(a,b){"use strict";function c(a){var b=a&&a.internetURL||"http://www.google.com/";console.log("checking server url: "+g),$.ajax({url:g,dataType:"text",async:!0,cache:!1,success:function(){d()},error:function(){$.ajax({url:b,dataType:"text",async:!1,cache:!1,success:function(){h.empty(),h.append(new LADS.Layout.InternetFailurePage("Server Down").getRoot())},error:function(){h.empty(),h.append(new LADS.Layout.InternetFailurePage("No Internet").getRoot())}})}})}function d(){LADS.Worktop.Database.getMain(e,function(){h.empty(),h.append(new LADS.Layout.InternetFailurePage("Server Down").getRoot())}),b&&b(i)}function e(a){function b(){var a,b,c,d;if(LADS.Util.elementInDocument(z)){for(d=parseInt(C.css("font-size"),10),a=z.height(),c=z.height(),A.css("font-size",a+"px"),b=A.height();b>a;)c--,A.css("font-size",c+"px"),b=A.height();A.css("height",b)}}function c(a){a.stopPropagation(),v?(v=!1,s.css({transform:"scaleX(1)"}),r.animate({width:"15%","border-top-left-radius":"0px"},700),q.animate({width:"20%",height:"10%",right:"0%","border-top-left-radius":"0px"},700),x.remove(),y.remove(),u.animate({left:"20%",top:"60%","font-size":"90%"},700),t.animate({left:"20%",top:"10%","font-size":"200%"},700),w.animate({left:"75%",top:"75%","font-size":"0%"},500)):(v=!0,r.animate({width:"8%","border-top-left-radius":"20px"},700),q.animate({width:"60%",height:"25%",right:"0%","border-top-left-radius":"20px"},700),q.append(w),q.append(x),q.append(y),s.css({transform:"scaleX(-1)"}),w.css({right:"0%",bottom:"0%",position:"absolute","font-size":"0%"}),w.animate({left:"12%",top:"51%",position:"absolute","font-size":"81%"},700,"swing",function(){$(w).fitText(5)}),t.animate({left:"12%",top:"3%","font-size":"300%"},700),u.animate({left:"12%",top:"35%","font-size":"130%"},700))}function d(){var a=new LADS.Layout.NewCatalog;j.on("click",function(){}),LADS.Util.UI.slidePageLeft(a.getRoot())}var e,f,g,h,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L;LADS.Util.Constants.set("START_PAGE_SPLASH","images/birdtextile.jpg"),e=i.find("#background"),e.css("background-image","url("+LADS.Worktop.Database.fixPath(a.Metadata.BackgroundImage)+")"),f=a.Metadata.OverlayColor,g=a.Metadata.OverlayTransparency,h=LADS.Util.UI.hexToRGB(f)+g+")",n="#"+a.Metadata.IconColor,o=i.find("#logoContainer"),o.css({"background-color":n}),p=i.find("#logo"),p.attr("src",LADS.Worktop.Database.fixPath(a.Metadata.Icon)),o.on("click",function(a){a.stopPropagation()}),j.on("click",d),q=i.find("#brownInfoBox"),q.on("click",c),r=i.find("#expandInfoButton"),s=i.find("#expandImage"),t=i.find("#tagName"),u=i.find("#fullTag"),v=!1,w=$(document.createElement("div")),w.attr("id","brownPeople"),w.text("Brown University \nAndy van Dam, Alex Hills, Yudi Fu, Karishma Bhatia, Gregory Chatzinoff, John Connuck, David Correa, Mohsan Elahi, Aisha Ferrazares, Jessica Fu, Kaijan Gao, Jessica Herron, Ardra Hren, Hak Rim Kim, Inna Komarovsky, Ryan Lester, Benjamin LeVeque, Josh Lewis, Jinqing Li, Jeffery Lu, Xiaoyi Mao, Ria Mirchandani, Julie Mond, Ben Most, Jonathan Poon, Dhruv Rawat, Jacob Rosenfeld, Anqi Wen, Dan Zhang, Libby Zorn"),x=$(document.createElement("label")),x.attr("id","sponsoredText"),x.text("Sponsored by"),y=$(document.createElement("img")),y.attr("id","microsoftLogo"),y.attr("src","images/icons/MicrosoftLogo.png"),z=i.find("#museumName"),A=i.find("#museumNameSpan"),B=a.Metadata.MuseumName,void 0===B&&(B=""),A.text(B),C=i.find("#museumLoc"),D=i.find("#museumLocSpan"),E=a.Metadata.MuseumLoc,void 0===E&&(E=""),D.text(E);var M=setInterval(function(){b(),clearInterval(M)});m.fixText=b,F=i.find("#museumInfoDiv"),G=i.find("#museumInfoSpan"),H=a.Metadata.MuseumInfo,H||(H=""),G.text(H);var N=setInterval(function(){if(LADS.Util.elementInDocument(F)){var a=parseInt(C.css("font-size"),10);LADS.Util.UI.fitTextInDiv(G,Math.round(2*a/3),Math.round(1*a/3)),clearInterval(N)}});I=i.find("#infoTextHolder"),J=i.find("#infoDiv"),J.css({"background-color":h}),l.on("click",function(){LADS.Util.UI.ChangeServerDialog()}),k.on("click",function(a){a.stopPropagation()}),K=i.find("#touchHint"),L=i.find("#handGif"),LADS.Util.fitText(K,2),L.onclick=d}function f(){return i}a=LADS.Util.setToDefaults(a,LADS.Layout.StartPage.default_options),a.tagContainer=$("#tagRoot");var g,h,i=LADS.Util.getHtmlAjax("startPage.html"),j=i.find("#overlay"),k=i.find("#serverTagBuffer"),l=i.find("#serverSetUpContainer");localStorage.ip&&-1!==localStorage.ip.indexOf(":")&&(localStorage.ip=localStorage.ip.split(":")[0]),g="http://"+(localStorage.ip?localStorage.ip+":8080":"browntagserver.com:8080"),h=a.tagContainer||$("body"),c();var m={};return m.getRoot=f,m},LADS.Layout.StartPage.default_options={repository:"http://cs.brown.edu/research/lads/LADS2.0Data/repository.xml"},LADS.Util.makeNamespace("LADS.Layout.Artmode"),LADS.Layout.Artmode=function(a,b,c){"use strict";function d(){j=LADS.Util.getHtmlAjax("artmode.html"),j.data("split",b.split),k&&(B=new LADS.AnnotatedImage(j,k,b.split,function(){x=B.getHotspots(),w=B.getAssets(),x.sort(function(a,b){return a.title.toLowerCase()<b.title.toLowerCase()?-1:1}),w.sort(function(a,b){return a.title.toLowerCase()<b.title.toLowerCase()?-1:1});try{B.loadDoq(k)}catch(a){console.log(a)}LADS.Util.Splitscreen.setViewers(j,B),e(),A=!0}))}function e(){function d(){return function(){}}function e(a){return function(){a.css("background-color",""),a.css("color","rgb(255, 255, 255)")}}function i(a,b){return function(){var c=$(document.createElement("div"));c.addClass("tourHolder"),c.css({height:.15*$(".root").height()+"px"}),c.on("click",C(b)),c.on("mousedown",d(c)),c.on("mouseup",e(c)),a.append(c);var f=$(document.createElement("div"));f.addClass("mediaHolderDiv"),c.append(f);var g=$(document.createElement("img"));g.addClass("assetHolderImage"),g.attr("src",b.Metadata.Thumbnail?LADS.Worktop.Database.fixPath(b.Metadata.Thumbnail):"images/tour_icon.svg"),g.removeAttr("width"),g.removeAttr("height"),f.append(g);var h=$(document.createElement("div"));h.addClass("mediaHolderTitle"),h.text(LADS.Util.htmlEntityDecode(b.Name)),c.append(h)}}function l(a,b,c){return function(){var f=$(document.createElement("div"));f.addClass("assetHolder"),f.css({height:.15*$(".root").height()+"px"}),f.attr("id",b.assetLinqID),f.data("assetHidden",!0),f.data("ishotspot",c),f.data("info",b),f.on("click",A(b,f)),f.on("mousedown",d(f)),f.on("mouseup",e(f)),a.append(f),F.push(f),G.push(b);var g=$(document.createElement("div"));g.addClass("mediaHolderDiv"),f.append(g);var h=$(document.createElement("img"));switch(h.addClass("assetHolderImage"),b.contentType){case"Audio":h.attr("src","images/audio_icon.svg");
break;case"Video":h.attr("src",b.thumbnail&&!b.thumbnail.match(/.mp4/)?LADS.Worktop.Database.fixPath(b.thumbnail):"images/video_icon.svg");break;case"Image":h.attr("src",LADS.Worktop.Database.fixPath(b.thumbnail?b.thumbnail:b.source));break;default:h.attr("src","images/text_icon.svg")}h.removeAttr("width"),h.removeAttr("height"),g.append(h);var i=$(document.createElement("div"));i.addClass("mediaHolderTitle"),i.text(LADS.Util.htmlEntityDecode(b.title)),f.append(i)}}function A(a,b){return function(){D&&(D=!1,t.attr("id","locationHistoryContainer"),u.text("Location History"),u.css({color:z.length?"white":"rgb(136, 136, 136)","font-size":"25px"}),t.append(u),s.hide(),s.hide("slide",{direction:v},500),q.hide("slide",{direction:v},500),o.show());var c=a.toggle();b.data("ishotspot")?b.data("assetHidden")&&"block"===$(c).css("display")?(b.css({color:"black","background-color":"rgba(255,255,255, 0.75)"}),b.data("assetHidden",!1)):(b.css({color:"white","background-color":""}),b.data("assetHidden",!0)):b.data("assetHidden")?(b.css({color:"black","background-color":"rgba(255,255,255, 0.75)"}),b.data("assetHidden",!1)):(b.css({color:"white","background-color":""}),b.data("assetHidden",!0)),a.pauseAsset(),c&&setTimeout(function(){c.click()},500)}}function C(a){return function(){if(LADS.Util.Splitscreen.on())y=LADS.Util.UI.PopUpConfirmation(function(){if(!I){I=!0,B.unload();var d=JSON.parse(unescape(a.Metadata.Content)),e=new LADS.Layout.TourPlayer(d,c,"artmode",b);if(LADS.Util.Splitscreen.on()){var f=$(j).parent().attr("id");LADS.Util.Splitscreen.exit(f[f.length-1])}LADS.Util.UI.slidePageLeftSplit(j,e.getRoot(),e.startPlayback)}},"By opening this tour, you will exit split screen mode. Would you like to continue?","Continue",!1,function(){$(y).remove()},j),$(y).css("z-index",10001),j.append($(y)),$(y).show();else if(!I){I=!0,B.unload();var d=JSON.parse(unescape(a.Metadata.Content)),e=new LADS.Layout.TourPlayer(d,c,"artmode",b);if(LADS.Util.Splitscreen.on()){var f=$(j).parent().attr("id");LADS.Util.Splitscreen.exit(f[f.length-1])}LADS.Util.UI.slidePageLeftSplit(j,e.getRoot(),e.startPlayback)}}}function E(){if(!kb){kb=!0,hb=j.find("#minimap"),hb.attr("src",LADS.Worktop.Database.fixPath(k.URL)),hb.mousedown(function(){return!1}),lb=jb.naturalWidth/jb.naturalHeight;var a=jb.naturalHeight/$(gb).height(),b=jb.naturalWidth/$(gb).width();a>b?(hb.removeAttr("height"),hb.removeAttr("width"),hb.css({height:"100%"})):(hb.removeAttr("height"),hb.removeAttr("width"),hb.css({width:"100%"}));var c=(LADS.Util.makeManipulatable(hb[0],{onManipulate:J,onScroll:K,onTapped:L},!1),hb.height()),d=hb.width(),e=gb.height()/2-hb.height()/2,f=gb.width()/2-hb.width()/2;ib.css({width:d-1+"px",height:c-1+"px",top:e+"px",left:f-1+"px"})}}function J(a){var b=hb.height(),c=hb.width(),d=hb.position().top,e=parseFloat(hb.css("marginLeft")),f=a.pivot.x,g=a.pivot.y,h=a.translation.x,i=a.translation.y,j=f+h,k=g+i;j=(j-e)/c,k=(k-d)/b,k/=lb,j=Math.max(0,Math.min(j,1)),k=Math.max(0,Math.min(k,1/lb));var l=1+(1-a.scale);l&&B.viewer.viewport.zoomBy(l,!1),B.viewer.viewport.panTo(new Seadragon.Point(j,k),!0),B.viewer.viewport.applyConstraints()}function K(){}function L(){}function M(a){var b=hb.height(),c=hb.width(),d=gb.height()/2-hb.height()/2,e=gb.width()/2-hb.width()/2,f=a.viewport,g=f.getBounds(!0),h=g.getTopLeft(),i=g.getBottomRight(),j=h.x,k=h.y,l=i.x,m=i.y;0>j&&(j=0),0>k&&(k=0),l>1&&(l=1),m>1/lb&&(m=1/lb),k*=lb,m*=lb,m-=k,l-=j,j=e+j*c,k=d+k*b,l*=c,m*=b,ib.css({width:l-1+"px",height:m-1+"px",top:k+"px",left:j-1+"px"})}var N,O=.2*window.innerWidth;n=j.find("#sideBar"),n.css({width:O}),o=j.find("#toggler"),p=j.find("#togglerImage"),"R"===j.data("split")&&"artmode"!==a?(n.css({right:"0px"}),o.css({left:"-12%",borderTopLeftRadius:"10px",borderBottomLeftRadius:"10px"}),p.attr("src","images/icons/Right.png")):(n.css({left:"0px"}),o.css({right:"-12%",borderTopRightRadius:"10px",borderBottomRightRadius:"10px"}),p.attr("src","images/icons/Left.png"));var P=!0;o.click(function(){var a;a="R"===j.data("split")?{right:-O}:{left:-O},P?P=!1:("R"===j.data("split")?a.right="0%":a.left="0%",P=!0),$(n).animate(a,1e3,function(){$(p[0]).rotate("180deg")})});j.find("#backBttnContainer");m=j.find("#backButton"),m.mouseleave(function(){LADS.Util.UI.cgBackColor("backButton",m,!0)}),m.mousedown(function(){LADS.Util.UI.cgBackColor("backButton",m,!1)}),m.on("click",function(){m.off("click"),B.unload();var a=new LADS.Layout.NewCatalog(k,c);a.getRoot().css({"overflow-x":"hidden"}),LADS.Util.UI.slidePageRightSplit(j,a.getRoot(),function(){})});{var Q=j.find("#sideBarSections");j.find("#sideBarInfo")}r=j.find("#info");var R=j.find("#infoTitle");R.text(k.Name);var S=j.find("#infoArtist");S.text(k.Metadata.Artist);var T=j.find("#infoYear");T.text(k.Metadata.Year);for(var U in k.Metadata.InfoFields){var V=U,W=k.Metadata.InfoFields[U],X=$(document.createElement("div"));X.addClass("infoCustom"),X.text(V+": "+W),X.appendTo(r)}LADS.Util.fitText(r,1.1);var Y=j.find("#assetContainer"),Z=!!k.Metadata.Description,_=g("Description",!Z);if(k.Metadata.Description){var ab=k.Metadata.Description.replace(/\n/g,"<br />");_.contents.html(ab)}Y.append(_);var bb=f();Y.append(bb);for(var cb=g("Hotspots",0===x.length),N=0;N<x.length;N++)H.add(l(cb.contents,x[N],!0));Y.append(cb);for(var db=g("Assets",0===w.length),N=0;N<w.length;N++)H.add(l(db.contents,w[N],!1));Y.append(db);var eb;LADS.Worktop.Database.getTours(function(a){var b=a.filter(function(a){if(!a.Metadata||!a.Metadata.RelatedArtworks||"true"===a.Metadata.Private)return!1;var b=JSON.parse(a.Metadata.RelatedArtworks);return b instanceof Array&&b.indexOf(k.Identifier)>-1});eb=g("Tours",0===b.length),Y.append(eb),b.length>0&&(eb.contents.text(""),$.each(b,function(a,b){H.add(i(eb.contents,b))}))});var fb=h(),gb=j.find("#minimapContainer");Q.append(gb),fb.css("top",gb.position().top-.05*$(document).height()+"px");var hb,ib=j.find("#minimaprect"),jb=new Image,kb=!1,lb=1;jb.onload=E,jb.src=LADS.Worktop.Database.fixPath(k.URL),jb.complete&&E(),B.addAnimateHandler(M)}function f(){function a(){if(z=LADS.Util.UI.getLocationList(b.doq.Metadata),0===z.length&&h.show(),C&&l)c();else{var a=function(){function a(a){LADS.Util.UI.drawPushpins(z,l),x.html(void 0!==a.data.info?$(this).html()+"<br/>"+a.data.info:$(this).html()+"<br/>"),$("div.locations").css(e),$("img.removeButton").attr("src","images/icons/minus.svg"),$("img.editButton").attr("src","images/icons/edit.png"),$(this).find("img.removeButton").attr("src","images/icons/minusB.svg"),$(this).find("img.editButton").attr("src","images/icons/editB.png"),$(this).css(f);var b,c,d;a.data.resource.latitude?d=a.data.resource:(b=a.data.resource.point.coordinates[0],c=a.data.resource.point.coordinates[1],d=new Microsoft.Maps.Location(b,c));var g={center:d,zoom:4};l.setView(g)}z=LADS.Util.UI.getLocationList(b.doq.Metadata),LADS.Util.UI.drawPushpins(z,l);for(var d=0;d<z.length;d++){var e={"background-color":"transparent",color:"white"},f={"background-color":"white",color:"black"},g=({text:String(d+1),icon:"/images/icons/locationPin.png",width:20,height:30},z[d].address),h="";if(z[d].date&&z[d].date.year){var i=z[d].date.year;0>i&&(i=Math.abs(i)+" BC"),h=" - "+i}else h=" - <i>Date Unspecified</i>";var j=$(document.createElement("div"));j.addClass("locations"),j.html(d+1+". "+g+h+"<br>"),w.append(j),LADS.Util.UI.drawPushpins(z,l),j.click(z[d],a),j.fadeIn()}c()};i(a)}}function c(){0!==z.length&&(LADS.Util.Splitscreen.on()||(v="R"===j.data("split")?"right":"left",D?(u.text("Location History"),u.css({color:"white"}),s.hide(),s.hide("slide",{direction:v},500),q.hide("slide",{direction:v},500),o.show(),D=!1):(u.text("Close Location History"),s.hide(),q.show("slide",{direction:v},500,function(){s.show()}),q.css({display:"inline"}),o.hide(),D=!0)))}t=j.find("#locationHistoryContainer"),t.click(a),u=j.find("#locationHistory"),u.text("Location History"),u.css({color:z.length?"white":"rgb(136,136,136)"}),q=j.find("#locationHistoryDiv");var d=.22*window.innerWidth,e=LADS.Util.Splitscreen.on()?"L"===j.data("split")?$("#metascreen-L").width()-.22*window.innerWidth:$("#metascreen-R").width()-.22*window.innerWidth:.78*window.innerWidth;q.css({width:e+"px"});var f=j.find("#locationHistoryPanel");if("R"===j.data("split")){var g=.125*e;f.css({position:"relative",left:g+"px"})}else q.css({left:d});var h=$(LADS.Util.UI.blockInteractionOverlay());$(h).addClass("mapOverlay");var k=$("<label>").text("Map has no location history to display.");k.attr("id","mapOverlayLabel"),h.append(k);var m=$(document.createElement("div"));m.addClass("lpContents"),m.append(h),f.append(m);var n=$(document.createElement("div"));n.attr("id","lpTitle"),n.text("Location History"),m.append(n);var p=$(document.createElement("div"));"R"===j.data("split")?p.attr("id","lpMapDivR"):p.attr("id","lpMapDiv"),p.addClass("lpMapDiv"),m.append(p);var r=$(document.createElement("div"));r.addClass("lpTextInfoDiv"),m.append(r);var w=$(document.createElement("div"));w.addClass("lpTextDiv"),r.append(w);var x=$(document.createElement("div"));x.addClass("lpInfoDiv"),r.append(x),s=j.find("#locationHistoryToggle");var y=j.find("#locationHistoryToggleIcon");return"R"===j.data("split")?(s.css({right:"87.5%","border-bottom-left-radius":"10px","border-top-left-radius":"10px"}),y.attr("src","images/icons/Right.png")):(s.css({left:"87.5%","border-bottom-right-radius":"10px","border-top-right-radius":"10px"}),y.attr("src","images/icons/Left.png")),s.click(c),t.append(u),LADS.Util.Splitscreen.on()&&u.css("opacity","0.5"),t}function g(a,b){var c=$(document.createElement("div"));c.addClass("drawer");var d=$(document.createElement("div"));d.addClass("drawerHeader"),d.appendTo(c);var e=$(document.createElement("div"));if(e.addClass("label"),e.text(a),e.css({color:b?"#888888":"white"}),e.appendTo(d),!b){var f=$(document.createElement("div"));f.addClass("toggleContainer"),f.appendTo(d);var g=$(document.createElement("img"));g.addClass("plusToggle"),g.attr("src","images/icons/plus.svg"),g.appendTo(f),c.isslided=!1;var h=$(document.createElement("div"));h.addClass("drawerContents");var i=$("#assetContainer").height()-165;0>=i&&(i=1),h.css({"max-height":i+"px"}),h.appendTo(c),d.click(function(){c.isslided===!1?(j.find(".plusToggle").attr("src","images/icons/plus.svg"),j.find(".drawerContents").slideUp(),$.each(E,function(){this.isslided=!1}),g.attr("src","images/icons/minus.svg"),c.isslided=!0):(g.attr("src","images/icons/plus.svg"),$.each(F,function(){this.data("assetHidden")||(this.css({color:"white","background-color":""}),this.data("assetHidden",!0))}),$.each(G,function(){this.hide()}),c.isslided=!1),h.slideToggle()}),c.contents=h}return E.push(c),c}function h(){function a(){$(e).css({display:"block"})}var b=j.find("#feedbackContainer"),c=j.find("#feedback-text");c.text("Send Feedback");var d=j.find("#feedback-icon");d.attr("src","images/icons/FeedbackIcon.svg");var e=LADS.Util.UI.FeedbackBox("Artwork",k.Identifier);return setTimeout(function(){J.append(e)},750),b.click(a),b}function i(a){var b=function(){var b={credentials:"AkNHkEEn3eGC3msbfyjikl4yNwuy5Qt9oHKEnqh4BSqo5zGiMGOURNJALWUfhbmj",mapTypeID:Microsoft.Maps.MapTypeId.road,showScalebar:!0,enableClickableLogo:!1,enableSearchLogo:!1,showDashboard:!0,showMapTypeSelector:!1,zoom:2,center:new Microsoft.Maps.Location(20,0)},c={mapTypeId:Microsoft.Maps.MapTypeId.road};l="R"===j.data("split")?new Microsoft.Maps.Map(document.getElementById("lpMapDivR"),b):new Microsoft.Maps.Map(document.getElementById("lpMapDiv"),b),l.setView(c),C=!0,a()};Microsoft.Maps.loadModule("Microsoft.Maps.Map",{callback:b})}var j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z=LADS.Util.UI.getLocationList(b.doq.Metadata),A=!1,B=null,C=!1,D=!1,E=[],F=[],G=[],H=LADS.Util.createQueue(),I=!1,J=$("#tagRoot")||$("body");b=LADS.Util.setToDefaults(b,LADS.Layout.Artmode.default_options),k=b.doq,d(),this.getRoot=function(){return j}},LADS.Layout.Artmode.default_options={catalogState:{},doq:null,split:"L"},LADS.Util.makeNamespace("LADS.Layout.NewCatalog"),LADS.Layout.NewCatalog=function(a,b,c,d){"use strict";function e(){function a(a){C={},C.displayareasub=B;var b=!1;$.each(a,function(a,c){var d;d=c.Metadata.Private?/^true$/i.test(c.Metadata.Private):!1,d||(b||S.css("background-image","url("+LADS.Worktop.Database.fixPath(c.Metadata.BackgroundImage)+")"),g(c),b=!0)}),null!==T?(h(T,T),y(T),$("#exhib-"+T.Identifier).css({"background-color":"rgb(255,255,255)",color:"black"})):f(0),H.hide()}H=$(document.createElement("div")),H.attr("id","loadingArea"),J.append(H);{var b={position:"absolute","z-index":"50",height:"auto",width:"5%",left:"47.5%",top:"42.5%"},e="0px",i="0px";LADS.Util.showProgressCircle(H,b,e,i,!1),J.find("#overlay")}m(),gb.addClass("rowButton").click(function(){t(nb,"Artist")}),ib.addClass("rowButton").click(function(){t(nb,"Title")}),hb.addClass("rowButton").click(function(){t(nb,"Year")}),jb.addClass("rowButton").click(function(){t(nb,"Type")}),mb.css({"font-size":.015*$(c).height()+"px"}),lb.attr("placeholder","Enter Keyword").blur(),lb.css({"max-height":.75*$(kb).height()+"%","font-size":.014*$(c).height()+"px"});var j;$(lb).on("mousedown",function(){j=$(lb).val().toLowerCase()}),$(lb).mouseup(function(){setTimeout(function(){$(lb).val().toLowerCase()!==j&&l()},1)}),$(lb).on("keyup",function(){l()});var k=(w(),J.find("#backbuttonArea"),J.find("#catalogBackButton"));k.css({display:d||LADS.Util.Splitscreen.on()?"none":"block"}),k.mouseleave(function(){LADS.Util.UI.cgBackColor("backButton",k,!0)}),k.mousedown(function(){LADS.Util.UI.cgBackColor("backButton",k,!1)}),k.click(function(){k.off("click"),LADS.Layout.StartPage(null,function(a){LADS.Util.Splitscreen.setOn(!1),LADS.Util.UI.slidePageRight(a)},!0)});var n=LADS.Util.getMaxFontSizeEM("Collections",2.5,.085*$(c).width(),1e3,.2);M.css({"font-size":n,display:d||LADS.Util.Splitscreen.on()?"none":"display"}),N.mousedown(function(){$(this).css({color:"white"})}),B=$(document.createElement("div")),B.attr("id","displayHelp"),K.append(B);var o=$(document.createElement("div"));o.attr("id","displayHelpTitle"),o.text("Welcome to the "+LADS.Worktop.Database.getMuseumName());var p=$(document.createElement("div"));p.attr("id","displayHelpText"),p.text("Select an exhibition or tour from the left menu to begin exploring artworks"),B.append(o),B.append(p),LADS.Worktop.Database.getExhibitions(a,null,a)}function f(a){Q[a]&&Q[a].click()}function g(a){{var b=LADS.Util.htmlEntityDecode(a.Name),c=($(document.createElement("img")),$(document.createElement("div"))),d=($(document.createElement("div")),a.Metadata.Description||"");d?d.substr(0,18)+"...":""}d=d.replace(/<br>/g,"").replace(/<br \/>/g,""),c=$(document.createElement("div")),c.attr("id","exhibition-selection");var e=$(document.createElement("div"));e.attr("id","exhibition-title"),e.html(b),c.append(e);var f=.0432*$(window).height(),g=LADS.Util.getMaxFontSizeEM("W",.25,9999,.85*f,.1);e.css({"font-size":g}),ab.push(c),L.append(c),c.attr("flagClicked","false"),c.attr("id","exhib-"+a.Identifier),c.mousedown(function(){$(this).css({"background-color":"white",color:"black"})}),c.mouseleave(function(){"false"==$(this).attr("flagClicked")&&$(this).css({"background-color":"transparent",color:"white"})}),c.click(function(){for(var b=0;b<Q.length;b++)Q[b]!=c&&(Q[b].css({"background-color":"transparent",color:"white"}),Q[b].data("selected",!1),Q[b].attr("flagClicked","false"));$(this).attr("flagClicked","true"),T=a,U=null,h.call(c,T),y(T)}),Q.push(c)}function h(a,b){if(mb.text(""),fb&&fb.empty(),a&&S.css("background-image","url("+LADS.Worktop.Database.fixPath(a.Metadata.BackgroundImage)+")"),b||!this.data("selected")){b||this.data("selected",!0);var d;R?(d=C.displayareasub,d.remove(),R=!1):C&&(C.block.remove(),d=C.displayareasub,d.css("z-index",1e3),d.remove());var e=$(document.createElement("div"));e.attr("id","displayareasub"),K.append(e),C={},C.block=$(document.createElement("div")),b||C.block.css({top:$(this).position().top,left:"100%",height:$(this).css("height"),width:"4%","font-size":"1.5em",position:"absolute",border:"solid transparent","border-width":"5px 0px 5px 0px","background-color":"rgba(255,255,255,0)","z-index":"50"}),I=$(document.createElement("div")),I.attr("id","exhibition-name-div"),I.text(LADS.Util.htmlEntityDecode(a.Name));var f=.75*$(c).width()*.8;C.title=I;var g=$(document.createElement("div"));g.attr("id","exhibition-info"),e.append(g),C.display=g;var h=LADS.Util.getMaxFontSizeEM(a.Name,1.5,f,.2*g.height(),.2);I.css({"font-size":h}),g.append(I),E=$(document.createElement("div")),E.attr("id","contentdiv"),E.css({width:"94%",height:g.height()-I.height()-20+"px"}),g.append(E);var f=.4*E.width(),i=f/1.4;F=$(document.createElement("div")),F.attr("id","img-container"),F.css({height:i,width:f,position:"absolute",top:"0%"}),D=$(document.createElement("img")),D.attr("id","image"),D.attr("src",LADS.Worktop.Database.fixPath(a.Metadata.DescriptionImage1)),D.attr("thumbnail",LADS.Worktop.Database.fixPath(a.Metadata.DescriptionImage1));var j=$(document.createElement("div"));j.attr("id","explore-text");var k=$(document.createElement("div"));k.addClass("explore-tab"),j.text("Explore"),k.on("click",function(){O&&v()});var l=$(document.createElement("img"));l.attr("id","exploreIcon"),l.attr("src","images/icons/ExploreIcon.svg"),k.append(l),k.append(j),E.append(F),F.append(D),F.append(k),j.css("font-size",LADS.Util.getMaxFontSizeEM("Explore",.5,.5*k.width(),.7*k.height(),.1)),D.on("click",function(){O&&v()}),bb=$(document.createElement("div")),bb.attr("id","info-text"),cb=$(document.createElement("div")),cb.attr("id","artistInfo"),cb.css({"font-size":.02*$(c).height()+"px"}),db=$(document.createElement("div")),db.attr("id","yearInfo"),db.css({"font-size":.02*$(c).height()+"px"}),bb.append(cb),bb.append(db),F.append(bb);var m={position:"absolute","float":"left",left:"12%","z-index":"50",height:"20%",width:"auto",top:"22%"},n=.9*$(g).height();G=$(document.createElement("div")),G.attr("id","description-text"),G.css({"font-size":.055*n+"px"});var o;o=a.Metadata.Description?a.Metadata.Description.replace(/\n\r?/g,"<br />"):"",G.html(o),E.append(G);var p=LADS.Util.showProgressCircle(G,m,"0px","0px",!1);D.load(function(){LADS.Util.removeProgressCircle(p)}),b||$(this).css({"background-color":"rgb(255,255,255)",color:"black"}),C.displayareasub=e,$(document).ready(function(){e.css({width:"100%",height:"100%",left:"0%"})})}}function i(a,b){function c(a){V=a.length;for(var c=[],d=0,e=0;e<a.length;e++)"true"!==a[e].Metadata.Private?V--:(c.push(a[e]),d++);W=0==V?!0:!1,Y=c,b&&b()}LADS.Worktop.Database.getArtworksIn(a.Identifier,c,null,c)}function j(a,b){function c(a){if(a&&a[0])X=!1;else{var c=LADS.Util.UI.makeNoArtworksOptionBox();J.append(c),$(c).fadeIn(500),X=!0}Y&&Y.length&&(a=Y.concat(a||[])),n(a),k(a),b&&b()}LADS.Worktop.Database.getArtworksIn(a.Identifier,c,null,c)}function k(a){$(lb)[0].value="",ob=[];for(var b=0;b<a.length;b++){var c;a[b]&&(c=a[b].Name+" "+a[b].Metadata.Artist+" "+a[b].Metadata.Year+" "+a[b].Metadata.Type,c=c.toLowerCase(),ob.push({id:b,keys:c}))}}function l(){var a=$(lb).val().toLowerCase();if(""===a)return mb.text(""),void o(nb,eb,0,!1);pb=!0;for(var b=[],c=[],d=0;d<ob.length;d++)ob[d].keys.indexOf(a)>-1?b.push(nb[d]):c.push(nb[d]);mb.text(b.length>0?"Results Found":"No Matching Results");var e=o(b,eb,0,!0);o(c,eb,e,!1),pb=!1}function m(){fb.scrollLeft()}function n(a){nb=a,eb=qb,s(eb),o(nb,eb,0)}function o(a,b,c,d){if(T&&(0===c&&(console.log("currExhib = "+T.Name),Z.clear(),setTimeout(function(){fb.empty()})),null!=a)){for(var e=r(a,b),f=e.min(),g=(f?f.artwork:null,c),h=.48*$(fb).height(),i=1.4*h,j=e.getContents(),k=0;k<j.length;k++){var l=k;Z.add(p(j[l].artwork,b,d,l+g,i,h))}return j.length}}function p(a,b,c,d,e,f){return function(){var g=$(document.createElement("div"));g.addClass("tile"),g.css({height:f+"px",width:e+"px",position:"absolute","margin-left":parseInt(d/2)*e*1.03+10+"px","margin-top":d%2*f*1.05+"px",border:"1px solid black"}),g.on("click",function(){D.attr("guid")===a.Identifier?v():q(a)()});var h=$(document.createElement("img"));h.attr("id","tourLabel"),h.attr("src","images/icons/catalog_tour_icon.svg");var i=$(document.createElement("img"));i.attr("id","videoLabel"),i.attr("src","images/icons/catalog_video_icon.svg");var j=$(document.createElement("img"));j.attr("src",LADS.Worktop.Database.fixPath(a.Metadata.Thumbnail)),j.css({width:"100%",height:"100%",position:"absolute"});var k=LADS.Util.constrainAndPosition(e,f,{center_h:!0,center_v:!0,width:1,height:.2,max_height:35}),l=$(document.createElement("div"));l.attr("id","artTitle"),l.css({width:k.width+"px",height:k.height+"px"});var m=$(document.createElement("div"));m.attr("id","artText"),m.css({"font-size":.55*$(l).height()+"px"}),"Title"===b?m.text(LADS.Util.htmlEntityDecode(a.Name)):"Artist"===b?m.text("Empty"===a.Type?"(Interactive Tour)":a.Metadata.Artist):"Year"===b?m.text("Empty"===a.Type?"(Interactive Tour)":a.Metadata.Year):"Type"===b&&m.text(LADS.Util.htmlEntityDecode(a.Name)),l.append(m),c||""===$(lb).val()?pb?(j.css({opacity:"0.3"}),g.css("border","1px solid black")):c&&(j.css({opacity:"1.0"}),g.css("border","1px solid white")):(j.css({opacity:"0.3"}),g.css("border","1px solid black")),g.append(j),g.append(l),"Empty"===a.Type?g.append(h):"Video"===a.Metadata.Medium&&g.append(i),fb.append(g)}}function q(a){return function(){U=a,O=!0,$(".explore-tab").css("display","inline-block"),"Empty"!=a.Type?(cb.text(void 0===a.Metadata.Artist?"Artist: Unknown":"Artist: "+a.Metadata.Artist),db.text(void 0===a.Metadata.Year?"":a.Metadata.Year)):(cb.text("Interactive Tour"),db.text(" ")),D.attr("src",LADS.Worktop.Database.fixPath(a.Metadata.Thumbnail)).css("border","1px solid white").attr("guid",a.Identifier);var b=$(document.createElement("div")).text(LADS.Util.htmlEntityDecode(a.Name)).attr("id","titleSpan").css({"font-size":.035*$(c).height()+"px",height:.08*$(c).height()+"px"}),d=$(document.createElement("div")).attr("id","descSpan").html(a.Metadata.Description?a.Metadata.Description.replace(/\n/g,"<br />"):"");G.empty(),G.append(b).append(d)}}function r(a,b){if("Title"===b){var c=function(a,b){return a.nameKey<b.nameKey?-1:a.nameKey>b.nameKey?1:a.artwork.Identifier>b.artwork.Identifier?1:a.artwork.Identifier<b.artwork.Identifier?-1:0},d=function(a,b){return b?a<b.nameKey?-1:a>b.nameKey?1:0:null},e=new AVLTree(c,d);e.clear();for(var f=0;f<a.length;f++){var g={artwork:a[f],nameKey:a[f].Name};e.add(g)}return e}if("Artist"===b){for(var c=function(a,b){return a.artistKey<b.artistKey?-1:a.artistKey>b.artistKey?1:a.artwork.Identifier>b.artwork.Identifier?1:a.artwork.Identifier<b.artwork.Identifier?-1:0},d=function(a,b){return b?a<b.artistKey?-1:a>b.artistKey?1:0:null},e=new AVLTree(c,d),f=0;f<a.length;f++){var g={artwork:a[f],artistKey:"Empty"===a[f].Type?"~~~~":a[f].Metadata.Artist};e.add(g)}return e}if("Year"===b){for(var c=function(a,b){return a.yearKey<b.yearKey?-1:a.yearKey>b.yearKey?1:a.artwork.Identifier>b.artwork.Identifier?1:a.artwork.Identifier<b.artwork.Identifier?-1:0},d=function(a,b){return b?a<b.yearKey?-1:a>b.yearKey?1:0:null},e=new AVLTree(c,d),f=0;f<a.length;f++){var g={artwork:a[f],yearKey:"Empty"===a[f].Type?"~~~~":a[f].Metadata.Year};e.add(g)}return e}if("Type"===b){for(var c=function(a,b){return a.typeKey<b.typeKey?-1:a.typeKey>b.typeKey?1:a.nameKey>b.nameKey?1:a.nameKey<b.nameKey?-1:0},d=function(a,b){return b?a<b.nameKey?-1:a>b.nameKey?1:0:null},e=new AVLTree(c,d),f=0;f<a.length;f++){var g={artwork:a[f],nameKey:a[f].Name,typeKey:"Empty"===a[f].Type?1:"Artwork"===a[f].Metadata.Type?2:3};e.add(g)}return e}return null}function s(a){switch(gb.css("color","gray"),ib.css("color","gray"),hb.css("color","gray"),jb.css("color","gray"),a){case"Artist":gb.css("color","white");break;case"Title":ib.css("color","white");break;case"Year":hb.css("color","white");break;case"Type":jb.css("color","white")}}function t(a,b){var c=[];if(eb=b,s(eb),"Type"!==b)o(a,eb,0,!1);else{for(var d=[],e=[],f=[],g=0;g<a.length;g++)c.indexOf(a[g].Identifier)<0&&(c.push(a[g].Identifier),"Empty"===a[g].Type?d.push(a[g]):"Artwork"===a[g].Metadata.Type?e.push(a[g]):f.push(a[g]));o(d,"Title",0,!1),o(e,"Title",d.length,!1),o(f,"Title",d.length+e.length,!1)}l()}function u(a){var b,c;if(b=JSON.parse(unescape(a.Metadata.Content)),!b||!b.data){var d=$(LADS.Util.UI.popUpMessage(null,"Cannot play empty tour.",null));return d.css("z-index",LADS.TourAuthoring.Constants.aboveRinZIndex+7),J.append(d),d.fadeIn(500),void(P=!1)}if(c=new LADS.Layout.TourPlayer(b,a),LADS.Util.Splitscreen.on()){var e=J.parent().attr("id");LADS.Util.Splitscreen.exit(e[e.length-1])}LADS.Util.UI.slidePageLeftSplit(J,c.getRoot(),c.startPlayback)}function v(){if(U){var a,b,c,d,e=z();if(c="metascreen-R"===J.parent().attr("id")?"R":"L",a={catalogState:e,doq:U,split:c},"Empty"===U.Type)LADS.Util.Splitscreen.on()?(d=LADS.Util.UI.PopUpConfirmation(function(){u(U)},"By opening this tour, you will exit split screen mode. Would you like to continue?","Continue",!1,function(){$(d).remove()},J),$(d).css("z-index",10001),J.append($(d)),$(d).show()):u(U);else if("VideoArtwork"===U.Metadata.Type){var f=new LADS.Layout.VideoPlayer(U,T);LADS.Util.UI.slidePageLeftSplit(J,f.getRoot())}else b=new LADS.Layout.Artmode("catalog",a,T),LADS.Util.UI.slidePageLeftSplit(J,b.getRoot());J.css({"overflow-x":"hidden"})}}function w(){function a(){$(e).css({display:"block"})}var b=J.find("#feedbackContainer"),c=J.find("#feedbackIcon");c.css({display:d||LADS.Util.Splitscreen.on()?"none":"inline"});var e=LADS.Util.UI.FeedbackBox("Exhibition",x);return J.append(e),b.click(a),b}function x(){return T?T.Identifier:""}function y(a){i(a,function(){j(a,function(){U&&q(U)()})})}function z(){return{exhibition:T,currentTag:qb,currentImage:U}}function A(){return J}var B,C,D,E,F,G,H,I,J=LADS.Util.getHtmlAjax("NewCatalog.html"),K=(J.find("#leftbar"),J.find("#displayarea")),L=J.find("#exhibitarea"),M=(J.find("#leftbar-header"),J.find("#exhibition-label")),N=J.find("#exhibitionSpan"),O=!1,P=!1,Q=[],R=!0,S=J.find("#bgimage"),T=null,U=null;b&&(T=b),a&&(U=a);var V,W,X,Y,Z=LADS.Util.createQueue(),_={getRoot:A,loadExhibit:h};c=c||window;var ab=[];_.exLabels=ab;var bb,cb,db,eb,fb=J.find("#timelineDiv"),gb=J.find("#artistButton"),hb=J.find("#yearButton"),ib=J.find("#titleButton"),jb=J.find("#typeButton"),kb=J.find("#row"),lb=(J.find("#timelineDivContainer"),J.find("#searchInput")),mb=J.find("#searchTxt"),nb=(J.find("#searchFilter"),[]),ob=[],pb=!1,qb="Title";return e(),_},LADS.Layout.NewCatalog.default_options={},LADS.Util.makeNamespace("LADS.Layout.InternetFailurePage"),LADS.Util.makeNamespace("LADS.Layout.InternetFailure"),LADS.Layout.InternetFailure.lastOverlay={},LADS.Layout.InternetFailurePage=function(a,b){"use strict";function c(){function c(a){return"Server Down"==a?"The server is currently unavailable. Please contact the museum administrator for further information.":"No Internet"==a?"No internet connection was detected. The TAG application requires internet connectivity. Please ensure that you are connected to the internet and try again.":"Internet Lost"===a?"Internet connection lost. The TAG application requires internet connectivity. Please ensure that you are connected to the internet and try again.":"Data Limit"===a?'We have detected that you are on a limited data connection. TAG downloads large images, audio, and videos that can significantly increase your data usage.  By clicking "I Agree" you agree to allow TAG to download images, audio, and videos.  Clicking "I Disagree" will exit TAG.':""}d.css({"background-color":"rgb(50,75,107)"}),d.css("color","black"),d.css("width","100%"),d.css("height","100%"),d.css("position","fixed"),d.css("left","0px"),d.css("top","0px"),d.css("z-index",1e9);var f=$(document.createElement("label"));f.css({"font-size":"1000%",color:"white",position:"absolute",top:"12%",left:"35%"});var g=$(document.createElement("div"));g.css({width:"50%",height:"21%",top:"40%",right:"25%",position:"absolute","background-color":"rgb(50,75,107)"});var h=$(document.createElement("label"));h.css({color:"white","font-size":"30px","left-margin":"4%",width:"96%"});var i=c(a);h.text(i),g.append(h).append("<br>");var j=$(document.createElement("button"));j.attr("type","button");var k=$(document.createElement("button"));if(k.on("click",LADS.Util.UI.ChangeServerDialog),"Data Limit"===a){j.text("I Agree");var l=$(document.createElement("button"));l.text("I Disagree"),l.css({"font-size":"150%",position:"relative",left:"45%",top:"5%"}),j.css({"font-size":"150%",position:"relative",left:"50%",top:"5%"}),g.append(l),l.click(function(){window.close()}),j.click(function(){localStorage.acceptDataUsage="true",b?d.remove():($("#tagRoot").empty(),LADS.Layout.StartPage(null,function(a){$("#tagRoot").append(a)}))})}else"Server Down"===a?(j.text("Reconnect"),j.css({"font-size":"150%",position:"relative",left:"70%",top:"5%"}),k.text("Change Server"),k.attr("type","button"),k.css({"font-size":"150%",position:"relative",left:"45%",top:"5%"}),j.css({"font-size":"150%",position:"relative",left:"50%",top:"5%"}),g.append(k)):(j.text("Reconnect"),j.css({"font-size":"150%",position:"relative",left:"70%",top:"5%"}));"Data Limit"!==a&&j.click(function(){h.text("Reconnecting..."),j.hide(),k.hide(),f.hide(),setTimeout(function(){$.ajax({url:"http://"+localStorage.ip+":8080",dataType:"text",async:!1,cache:!1,success:function(){b?d.remove():($("body").empty(),LADS.Layout.StartPage(null,function(a){$("body").append(a)}))},error:function(){$.ajax({url:"http://google.com",dataType:"text",async:!0,cache:!1,success:function(){h.text(c("Server Down")),j.show(),k.show(),f.show()},error:function(){h.text(c("Internet Lost"===a?"Internet Lost":"No Internet")),j.show(),k.show(),f.show()}})}})},100)});var m=$(document.createElement("button"));m.text("Exit"),m.click(function(){}),g.append(j),e.append(f),e.append(g),d.append(e),LADS.Layout.InternetFailure.lastOverlay.root=d,LADS.Layout.InternetFailure.lastOverlay.type=a}this.getRoot=function(){return d};{var d=$(document.createElement("div")),e=$(document.createElement("div"));$(document.createElement("div"))}c()},LADS.Util.makeNamespace("LADS.Layout.MetroSplitscreenMessage"),LADS.Layout.MetroSplitscreenMessage=function(){"use strict";this.getRoot=function(){return a};var a=$(document.createElement("div"));a.css({position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%","background-color":"rgb(50,75,107)",color:"white","z-index":"1000000000"});var b=$(document.createElement("label"));b.css({"font-size":"380%",position:"relative",display:"block","text-align":"center",top:"25%"}),b.text("TAG");var c=$(document.createElement("label"));c.css({"font-size":"120%",position:"relative",top:"45%",display:"block","text-align":"center"}),c.text("TAG must be run in full screen mode"),a.append(b).append("<br>").append(c)},LADS.Util.makeNamespace("LADS.Layout.TourPlayer"),LADS.Layout.TourPlayer=function(a,b,c,d){"use strict";{var e,f=$("#tagRoot"),g=LADS.Util.getHtmlAjax("TourPlayer.html"),h=g.find("#rinPlayer"),i=(g.find("#backButtonContainer"),g.find("#backButton"));g.find("#overlayOnRoot")}return i.on("mousedown",function(){LADS.Util.UI.cgBackColor("backButton",i,!1)}),i.on("mouseleave",function(){LADS.Util.UI.cgBackColor("backButton",i,!0)}),i.on("click",function(){var a,h;i.off("click"),e.pause(),e.unload(),c&&d?(a=new LADS.Layout.Artmode(c,d,b),LADS.Util.UI.slidePageRightSplit(g,a.getRoot())):(h=new LADS.Layout.NewCatalog(b),LADS.Util.UI.slidePageRightSplit(g,h.getRoot())),f.css({"font-size":"11pt","font-family":DEFAULT_FONT_FAMILY})}),{getRoot:function(){return g},startPlayback:function(){rin.processAll(null,"js/RIN/web").then(function(){var b="systemRootUrl=js/RIN/web/&autoplay=true&loop=true";e=rin.createPlayerControl(h[0],b);for(var c in a.resources)a.resources.hasOwnProperty(c)&&"string"==typeof a.resources[c].uriReference&&(a.resources[c].uriReference=LADS.Worktop.Database.fixPath(a.resources[c].uriReference));e.loadData(a,function(){})})}}},LADS.Util.makeNamespace("LADS.Layout.VideoPlayer"),LADS.Layout.VideoPlayer=function(a,b){"use strict";
function c(){0!==m.currentTime&&(m.currentTime=0),o.attr("src","images/icons/PlayWhite.svg")}function d(){o.attr("src","images/icons/PlayWhite.svg"),o.on("click",function(){m.paused?(m.play(),o.attr("src","images/icons/PauseWhite.svg")):(m.pause(),o.attr("src","images/icons/PlayWhite.svg"))}),$(p).on("click",function(){m.muted?(m.muted=!1,p.attr("src","images/icons/VolumeUpWhite.svg")):(m.muted=!0,p.attr("src","images/icons/VolumeDownWhite.svg"))}),l.on("ended",function(){m.pause(),c()})}function e(){r.on("mousedown",function(a){var b=$(l).get(0).duration*(a.offsetX/$("#sliderContainer").width());isNaN(b)||($(l).get(0).currentTime=b)}),q.on("mousedown",function(a){a.stopPropagation();var b=a.pageX,c=m.currentTime,d=n/r.width();console.log("ratio = "+d),$("body").on("mousemove.seek",function(a){var e,f,g,h=a.pageX,j=(h-b)*d;i=Math.max(0,Math.min(n,c+j)),e=i/d,f=Math.floor(i/60),(""+f).length<2&&(f="0"+f),g=Math.floor(i%60),console.log(i),isNaN(i)||($("#currentTimeDisplay").text(f+":"+(10>g?"0":"")+g),m.currentTime=i,$("#sliderControl").css("left",e),$("#sliderPoint").css("width",e))}),$("body").on("mouseup.seek",function(){$("body").off("mousemove.seek"),$("body").off("mouseup.seek"),m.currentTime=i})})}function f(){return k}var g,h,i,j={},k=LADS.Util.getHtmlAjax("VideoPlayer.html"),l=k.find("#video"),m=l[0],n=parseFloat(a.Metadata.Duration),o=k.find("#playPauseButton"),p=k.find("#videoControlsButton"),q=k.find("#sliderControl"),r=k.find("#sliderContainer");l.attr({poster:a.Metadata.Thumbnail&&!a.Metadata.Thumbnail.match(/.mp4/)?LADS.Worktop.Database.fixPath(a.Metadata.Thumbnail):"",src:LADS.Worktop.Database.fixPath(a.Metadata.Source),type:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',controls:!1,preload:"metadata"}),c(),d(),h=function(a){var b=(orchestrator.getNarrativeInfo().totalDuration,narrativeDuration*a),c=Math.floor(b/60),d=Math.floor(b%60);g(c+":"+(10>d?"0":"")+d)},l.on("loadedmetadata",e);var s=k.find("#currentTimeDisplay");$(s).text("00:00");var t=k.find("#backButton");return t.mousedown(function(){LADS.Util.UI.cgBackColor("backButton",t,!1)}),t.mouseleave(function(){LADS.Util.UI.cgBackColor("backButton",t,!0)}),t.on("click",function(){m.pause();var c=new LADS.Layout.NewCatalog(a,b);LADS.Util.UI.slidePageRightSplit(k,c.getRoot())}),l.on("timeupdate",function(){var a,b,c,d;a=$("#sliderContainer").width()/m.duration*m.currentTime,$("#sliderControl").css("left",a),$("#sliderPoint").css("width",a),b=Math.floor(m.currentTime/60),c=Math.floor(m.currentTime%60),d=String(b).length<2?"0"+b:b,s.text(d+":"+(10>c?"0":"")+c)}),j.getRoot=f,j},LADS.Util.makeNamespace("LADS.TESTS"),function(){"use strict";function a(){b()}function b(){var a=$("#tagRoot")||$("body");$("body").on("scroll",function(a){a.preventDefault()}),$("#widthSlider").on("change",function(){var a=$(this).attr("value"),b=9/16*a;$("#tagWidth").text(a),$("#tagRoot").css({width:a+"px",height:b+"px","font-size":a/9.6+"%"})}),Math.twoDecPlaces=function(a){return Math.floor(100*a)/100};var b=0;if("settings view"===(""+b).toLowerCase())a.append((new LADS.Authoring.NewSettingsView).getRoot());else if(b){var c=!1;LADS.Worktop.Database.getTours(function(d){$.each(d,function(d,e){return e.Name===b?(LADS.Worktop.Database.getMain(),c=!0,a.append(new LADS.Layout.TourAuthoringNew(e).getRoot()),!1):void 0}),c||LADS.Layout.StartPage(null,function(b){a.append(b)})})}else LADS.Layout.StartPage(null,function(b){a.append(b)})}window.onload=a;$(document).ready(function(){var a,b,c="";$(window).keydown(function(d){!d.char||"string"!=typeof d.char||b||a||(c=(c+d.char).toLowerCase(),-1!==c.indexOf("tagunicorn")?(c="",a=!0,$.each($("img"),function(){var b=$(this),c=b.attr("src");b.attr("src","images/unicorn.jpg"),setTimeout(function(){b.attr("src",c),a=!1},5e3)}),$.each($("*"),function(){var b=$(this),c=b.prop("style").color,d="rgb("+parseInt(256*Math.random(),10)+","+parseInt(256*Math.random(),10)+","+parseInt(256*Math.random(),10)+")";b.css("color",d),setTimeout(function(){b.css("color",c)},5e3);var e=b.css("background-image");-1!==e.indexOf("url")&&(b.css("background-image",'url("images/unicorn.jpg")'),setTimeout(function(){b.css("background-image",e),a=!1},5e3))})):-1!==c.indexOf("hodorhodorhodor")&&(c="",b=!0,$.each($("*"),function(){var a=$(this);try{var c=a.html();!c&&""!==c||-1!==c.indexOf("<")||(a.html("Hodor"),setTimeout(function(){a.text(c),b=!1},5e3))}catch(d){}})))})})}()}();