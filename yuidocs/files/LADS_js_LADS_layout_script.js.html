<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>LADS/js/LADS/layout/script.js - Touch Art Gallery web application</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../../LADS/images/WideLogo.scale-100.png" title="Touch Art Gallery web application"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 1.0.0</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/LADS.Layout.Artmode.html">LADS.Layout.Artmode</a></li>
            
                <li><a href="../classes/LADS.Layout.InternetFailurePage.js.html">LADS.Layout.InternetFailurePage.js</a></li>
            
                <li><a href="../classes/LADS.Layout.StartPage.html">LADS.Layout.StartPage</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: LADS/js/LADS/layout/script.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
ï»¿LADS.Util.makeNamespace(&quot;LADS.Layout.Exhibitions&quot;);

LADS.Layout.Exhibitions = function (options, exhibitionCallback) {
    &quot;use strict&quot;;

    options = LADS.Util.setToDefaults(options, LADS.Layout.Exhibitions.default_options);
    var root, leftbar, displayarea, exhibitarea, currentfolder, currentExhElements, leftbarHeader, exhibitionLabel, toursLabel, selectText, exhibitionSpan, toursSpan, loadingArea,
        titlediv = null,
        sub1 = null,
        sub2 = null,
        switching = false,//boolean for switching the page
        exhibitelements = [], // this is shared between exhibitions and tours
        exhibTabSelected = true, //which tab is selected at the top (true for exhib, false for tour)
        firstLoad = true;
    var bgimage = $(document.createElement(&#x27;div&#x27;));
    var currExhibition = null;
    var currTour = null;
    var relatedTours = []; // Object to store associated tours
    var numberOfTours;

    var that = {
        getRoot: getRoot,
        clickExhibition: clickExhibition,
        clickExhibitionByDoq: clickExhibitionByDoq,
        clickTourByDoq: clickTourByDoq,
        selectTourTab: selectTourTab,
        loadExhibit: loadExhibit,
    };

    init();

    return that;

    /**
    *initiates UI stuff
    */
    function init() {
        root = $(document.createElement(&#x27;div&#x27;));
        root.addClass(&#x27;root exhibition&#x27;);
        root.css({
            width: &quot;100%&quot;, height: &quot;100%&quot;, position: &quot;relative&quot;,
            &quot;background-color&quot;: &quot;rgb(127,127,127)&quot;
        });

        //create loading page
        loadingArea = $(document.createElement(&#x27;div&#x27;));
        loadingArea.css({
            width: &quot;100%&quot;, height: &quot;100%&quot;,
            position: &quot;absolute&quot;,
        });
        loadingArea.addClass(&#x27;displayarea&#x27;);

        root.append(loadingArea);

        var progressCircCSS = { &quot;position&quot;: &#x27;absolute&#x27;, &#x27;z-index&#x27;: &#x27;50&#x27;, &#x27;height&#x27;: &#x27;auto&#x27;, &#x27;width&#x27;: &#x27;5%&#x27;, &#x27;left&#x27;: &#x27;47.5%&#x27;, &#x27;top&#x27;: &#x27;42.5%&#x27; };
        var centerhor = &#x27;0px&#x27;;
        var centerver = &#x27;0px&#x27;;
        loadingArea.css({ &#x27;background-color&#x27;: &#x27;rgba(0, 0, 0, 0.7)&#x27; });
        var circle = LADS.Util.showProgressCircle(loadingArea, progressCircCSS, centerhor, centerver, false);

        //after loading finished
        // Background
        var overlay = $(document.createElement(&#x27;div&#x27;));
        overlay.attr(&#x27;id&#x27;, &#x27;overlay&#x27;);
        overlay.css({ width: &quot;100%&quot;, height: &quot;100%&quot;, position: &quot;absolute&quot;, &#x27;background-color&#x27;: &#x27;rgba(0,0,0,0.5)&#x27; });
        bgimage.css({
            width: &quot;100%&quot;,
            height: &quot;100%&quot;,
            position: &quot;absolute&quot;,
            &#x27;background-position&#x27;: &quot;center&quot;,
            &#x27;background-size&#x27;: &quot;cover&quot;
        });
        bgimage.attr(&#x27;id&#x27;, &#x27;bgimage&#x27;);

        // Sidebar
        leftbar = $(document.createElement(&#x27;div&#x27;));
        leftbar.addClass(&#x27;leftbar&#x27;);
        leftbar.css({
            width: &quot;25%&quot;, height: &quot;100%&quot;,
            position: &quot;absolute&quot;,
            &quot;background-color&quot;: &quot;rgba(0,0,0,0.7)&quot;
        });

        // Header w/ back-button, exhibit, tour selectors
        leftbarHeader = $(document.createElement(&#x27;div&#x27;));
        leftbarHeader.addClass(&#x27;leftbar-header&#x27;);
        leftbarHeader.css({
            width: &#x27;100%&#x27;,
            height: &#x27;5%&#x27;,
            &#x27;margin-bottom&#x27;: &#x27;4.5%&#x27;,
            &#x27;padding-left&#x27;: &#x27;60px&#x27;,
            &#x27;overflow&#x27;: &#x27;hide&#x27;,
            // &#x27;padding-top&#x27;: &#x27;2%&#x27;
        });
        leftbar.append(leftbarHeader);

        // Back button/overlay area
        var backbuttonArea = $(document.createElement(&#x27;div&#x27;));
        backbuttonArea.addClass(&#x27;backbuttonArea&#x27;);
        backbuttonArea.css({
            &#x27;left&#x27;: &#x27;2.5%&#x27;,
            &#x27;top&#x27;: &#x27;0%&#x27;,
            &#x27;position&#x27;: &#x27;absolute&#x27;,
            &#x27;width&#x27;: &#x27;15%&#x27;,
            &#x27;height&#x27;: &#x27;5%&#x27;,
        });
        leftbarHeader.append(backbuttonArea);

        var backbuttonIcon = $(document.createElement(&#x27;img&#x27;));
        backbuttonIcon.attr(&#x27;src&#x27;, &#x27;images/icons/Back.svg&#x27;);
        backbuttonIcon.css({
            &#x27;width&#x27;: &#x27;73.5%&#x27;,
            &#x27;height&#x27;: &#x27;auto&#x27;,
            &#x27;top&#x27;: &#x27;28%&#x27;,
            &#x27;position&#x27;: &#x27;relative&#x27;,
            &#x27;display&#x27;: &#x27;block&#x27;
        });

        //wen
        //handles changing the color when clicking/mousing over on the backButton
        backbuttonIcon.mouseleave(function () {
            LADS.Util.UI.cgBackColor(&quot;backButton&quot;, backbuttonIcon, true);
        });
        backbuttonIcon.mousedown(function () {
            LADS.Util.UI.cgBackColor(&quot;backButton&quot;, backbuttonIcon, false);
        });

        //opens the splash screen when the back button is clicked
        backbuttonIcon.click(function () {
            backbuttonIcon.off(&#x27;click&#x27;);
            LADS.Layout.StartPage(null, function (root) {
                LADS.Util.Splitscreen.setOn(false);
                LADS.Util.UI.slidePageRight(root);
            }, true);
        });
        backbuttonArea.append(backbuttonIcon);

        // Labels (Exhibition, Tours)
        exhibitionLabel = $(document.createElement(&#x27;div&#x27;));
        exhibitionLabel.attr(&#x27;id&#x27;, &#x27;exhibition-label&#x27;);
        exhibitionLabel.css({
            //&#x27;font-size&#x27;: &#x27;2em&#x27;,
            &#x27;text-align&#x27;: &#x27;center&#x27;,
            &#x27;left&#x27;: &quot;18%&quot;,
            &#x27;height&#x27;: &#x27;7%&#x27;,
            &#x27;top&#x27;: &quot;1%&quot;,
            &#x27;position&#x27;: &#x27;absolute&#x27;,
            &#x27;width&#x27;: &#x27;45%&#x27;,
            &#x27;margin-left&#x27;: &#x27;1.22%&#x27;,
        });

        exhibitionSpan = $(document.createElement(&#x27;span&#x27;));
        var fontSize = LADS.Util.getMaxFontSizeEM(&#x27;Exhibitions&#x27;, 1, $(window).width() * 0.1, 1000);
        exhibitionSpan.css({
            &#x27;font-size&#x27;: fontSize,
        });
        exhibitionSpan.text(&quot;Exhibitions&quot;);
        //LADS.Util.fitText(exhibitionLabel, 0.5);
        exhibitionLabel.append(exhibitionSpan);
        leftbarHeader.append(exhibitionLabel);

        //have exhibition mode selected
        exhibitionSpan.mousedown(function () {
            $(this).css({ &#x27;color&#x27;: &#x27;white&#x27; });
            toursSpan.css({ &#x27;color&#x27;: &#x27;gray&#x27; });
        });

        toursLabel = $(document.createElement(&#x27;div&#x27;));
        toursLabel.attr(&#x27;id&#x27;, &#x27;tours-label&#x27;);
        toursLabel.css({
            //&#x27;font-size&#x27;: &#x27;2em&#x27;,
            top: &#x27;1%&#x27;,
            height: &#x27;7%&#x27;,
            left: &#x27;55.5%&#x27;,
            &#x27;text-align&#x27;: &#x27;center&#x27;,
            position: &#x27;absolute&#x27;,
            color: &#x27;rgb(85,85,85)&#x27;,
            width: &#x27;25%&#x27;,
            &#x27;margin-left&#x27;: &#x27;1.2%&#x27;,
        });

        toursSpan = $(document.createElement(&#x27;span&#x27;));
        toursSpan.css({
            &#x27;font-size&#x27;: fontSize,
        });
        toursSpan.text(&quot;Tours&quot;);
        //LADS.Util.fitText(toursLabel, 0.5);
        toursLabel.append(toursSpan);
        leftbarHeader.append(toursLabel);
        toursSpan.mousedown(function () {
            toursSpan.css({ &#x27;color&#x27;: &#x27;white&#x27; });
            exhibitionSpan.css({ &#x27;color&#x27;: &#x27;gray&#x27; });
        });

        // Buttons for sidebar to select Exhibitions
        exhibitarea = $(document.createElement(&#x27;div&#x27;));
        exhibitarea.css({ width: &quot;100%&quot;, height: &quot;92%&quot;, &#x27;margin-top&#x27;: &#x27;4%&#x27;, &#x27;overflow&#x27;: &#x27;auto&#x27; });
        leftbar.append(exhibitarea);

        //initiates feedback, currently commented out.
        var feedbackContainer = initFeedback();
        leftbar.append(feedbackContainer);

        // Main display area
        displayarea = $(document.createElement(&#x27;div&#x27;));
        displayarea.css({
            width: &quot;75%&quot;, height: &quot;100%&quot;,
            &quot;left&quot;: &quot;25%&quot;,
            position: &quot;absolute&quot;,
        });
        displayarea.addClass(&#x27;displayarea&#x27;);

        // Initial text displayed in display area
        var displayHelp = $(document.createElement(&#x27;div&#x27;));
        displayHelp.addClass(&#x27;displayHelp&#x27;);
        displayHelp.css({
            position: &#x27;relative&#x27;,
            left: &quot;0%&quot;,
            width: &quot;100%&quot;,
            height: &quot;100%&quot;,
            &quot;background-color&quot;: &quot;rgba(0,0,0,0.5)&quot;,
        });
        displayarea.append(displayHelp);

        var displayHelpTitle = $(document.createElement(&#x27;div&#x27;));
        displayHelpTitle.text(&quot;Welcome to the &quot; + LADS.Worktop.Database.getMuseumName());
        displayHelpTitle.addClass(&#x27;displayHelpTitle&#x27;);
        displayHelpTitle.css({
            &#x27;position&#x27;: &#x27;relative&#x27;,
            &#x27;padding-top&#x27;: &#x27;25%&#x27;,
            &#x27;margin&#x27;: &#x27;0px auto&#x27;,
            &#x27;width&#x27;: &#x27;60%&#x27;,
            &#x27;text-align&#x27;: &#x27;center&#x27;,
            &#x27;font-size&#x27;: &#x27;2em&#x27;,
        });

        var displayHelpText = $(document.createElement(&#x27;div&#x27;));
        displayHelpText.addClass(&#x27;displayHelpText&#x27;);
        displayHelpText.text(&quot;Select an exhibition or tour from the left menu to begin exploring artworks&quot;);
        displayHelpText.css({
            &#x27;position&#x27;: &#x27;relative&#x27;,
            &#x27;margin&#x27;: &#x27;0px auto&#x27;,
            &#x27;width&#x27;: &#x27;65%&#x27;,
            &#x27;text-align&#x27;: &#x27;center&#x27;,
            &#x27;font-size&#x27;: &#x27;2.5em&#x27;,
        });
        displayHelp.append(displayHelpTitle);
        displayHelp.append(displayHelpText);

        // gets a list of exhibitions from the server or the cache
        LADS.Worktop.Database.getExhibitions(getExhibitionsHelper, null, getExhibitionsHelper);

        /**helper function to exhibitions**/
        function getExhibitionsHelper(exhibitionsLocal) {
            LADS.Worktop.Database.getTours(getAllToursHelper, null, getAllToursHelper);

            function getAllToursHelper(tours) {
                root.append(bgimage);
                root.append(overlay);

                //append everything in callback
                root.append(leftbar);
                root.append(displayarea);

                //click funtions for Exhibitions and Tours tabs
                exhibitionSpan.click(function () {
                    var gotFirst = false,
                        firstIndex = 0;
                    if (!exhibTabSelected) {
                        exhibTabSelected = true;
                        exhibitarea.empty();
                        exhibitelements = [];
                        if (exhibitionsLocal[0]) {
                            $.each(exhibitionsLocal, function (i, e) {
                                var privateState;
                                if (e.Metadata.Private) {
                                    privateState = (/^true$/i).test(e.Metadata.Private);
                                } else {
                                    privateState = false;
                                }
                                if (!privateState) {
                                    if (!gotFirst) {
                                        firstIndex = i;
                                    }
                                    addExhibit(e);
                                    gotFirst = true;
                                }
                            });
                            if (currExhibition === null) {
                                clickExhibition(0);//have the first exhibition selected
                            }
                            else {
                                clickExhibitionByDoq(currExhibition);
                            }
                        }
                        toursLabel.css(&#x27;color&#x27;, &#x27;rgb(85,85,85)&#x27;);
                        exhibitionLabel.css(&#x27;color&#x27;, &#x27;white&#x27;);
                    }
                });

                toursSpan.click(function () {
                    var gotFirst = false,
                        firstIndex = 0;
                    if (exhibTabSelected) {
                        exhibTabSelected = false;
                        exhibitarea.empty();
                        exhibitelements = [];
                        if (tours[0]) {
                            $.each(tours, function (i, e) {
                                var privateState;
                                if (e.Metadata.Private) {
                                    privateState = (/^true$/i).test(e.Metadata.Private);
                                } else {
                                    privateState = false;
                                }
                                if (!privateState) {
                                    if (!gotFirst) {
                                        firstIndex = i;
                                    }
                                    addTour(e, tours);
                                    gotFirst = true;
                                }
                            });
                            if (!currTour) {
                                clickExhibition(firstIndex);//have the first tour selected
                            }
                            else {
                                clickTourByDoq(currTour);//have the previous tour selected if there is one
                            }
                        }
                        exhibitionLabel.css(&#x27;color&#x27;, &#x27;rgb(85,85,85)&#x27;);
                        toursLabel.css(&#x27;color&#x27;, &#x27;white&#x27;);
                    }
                });

                currentExhElements = {};
                currentExhElements.displayareasub = displayHelp;//asign displayhelp to displayareasub to each exhibition


                // Add exhibitions to sidebar
                var gotFirst = false;
                $.each(exhibitionsLocal, function (_, e) {
                    var privateState;
                    if (e.Metadata.Private) {
                        privateState = (/^true$/i).test(e.Metadata.Private);
                    } else {
                        privateState = false;
                    }
                    if (!privateState) {
                        if (!gotFirst) {
                            bgimage.css(&#x27;background-image&#x27;, &quot;url(&quot; + LADS.Worktop.Database.fixPath(e.Metadata.BackgroundImage) + &quot;)&quot;);
                        }
                        addExhibit(e);
                        gotFirst = true;
                    }
                });
                //a space below the last exhibition div so that if there are many exhibitions, leftbar/exhibitarea will be scrollable
                var moreSpace = $(document.createElement(&#x27;div&#x27;));
                moreSpace.addClass(&quot;moreSpace&quot;);
                moreSpace.css({ &quot;width&quot;: &quot;100%&quot;, &quot;height&quot;: &quot;8.5%&quot;, &quot;font-size&quot;: &quot;1.5em&quot;, &#x27;position&#x27;: &#x27;relative&#x27;, &#x27;border&#x27;: &#x27;solid transparent&#x27;, &#x27;border-width&#x27;: &#x27;5px 0px 5px 0px&#x27; });
                exhibitarea.append(moreSpace);

                changeOrientation();
                loadingArea.hide();
                //console.log(&quot;in get exhibition helper&quot;);
                if (exhibitionCallback) {
                    exhibitionCallback(that);
                }
            }  // end getting tour
        }   // end getting exhibition
    }   //end init()

    /**
    *create send feedback
    *@return: feedbackContainer  
    */
    function initFeedback() {
        var feedbackContainer = $(document.createElement(&#x27;div&#x27;));
        feedbackContainer.addClass(&#x27;feedbackContainer&#x27;);
        feedbackContainer.css({
            &quot;width&quot;: &quot;100%&quot;,
            &quot;height&quot;: &quot;7%&quot;,
            &#x27;bottom&#x27;: &#x27;0%&#x27;,
            &#x27;position&#x27;: &quot;absolute&quot;,
            &#x27;padding-top&#x27;: &#x27;5.25%&#x27;,
            &#x27;float&#x27;: &#x27;left&#x27;,
            &#x27;background-color&#x27;: &#x27;rgba(0,0,0,0.75)&#x27;
        });
        var feedback = $(document.createElement(&#x27;div&#x27;));
        feedback.addClass(&#x27;feedback-text&#x27;);
        feedback.text(&#x27;Send Feedback&#x27;);
        feedback.css({
            &quot;font-size&quot;: &quot;1.8em&quot;,
            &#x27;height&#x27;: &#x27;60%&#x27;,
            &#x27;position&#x27;: &quot;absolute&quot;,
            &#x27;display&#x27;: &#x27;inline&#x27;,
            &#x27;left&#x27;: &#x27;25%&#x27;,
            &#x27;top&#x27;: &#x27;28%&#x27;,
        });
        var feedbackIcon = $(document.createElement(&#x27;img&#x27;));
        feedbackIcon.addClass(&#x27;feedback-icon&#x27;);
        feedbackIcon.attr(&#x27;src&#x27;, &#x27;images/icons/FeedbackIcon.svg&#x27;);
        feedbackIcon.css({
            &#x27;width&#x27;: &#x27;auto&#x27;,
            &#x27;height&#x27;: &#x27;35%&#x27;,
            &#x27;position&#x27;: &#x27;absolute&#x27;,
            &#x27;left&#x27;: &#x27;10%&#x27;,
            &#x27;display&#x27;: &#x27;inline&#x27;,
            &#x27;top&#x27;: &#x27;35%&#x27;,
            &#x27;vertical-align&#x27;: &#x27;middle&#x27;,
            //&#x27;opacity&#x27;: .5, //change when we have working feedback
        });

        var feedbackBox = LADS.Util.UI.FeedbackBox(getCurrentType, getCurrentID);
        root.append(feedbackBox);
        feedbackContainer.append(feedbackIcon);
        feedbackContainer.append(feedback);

        feedbackContainer.click(makeFeedback);
        function makeFeedback() {
            $(feedbackBox).css({ &#x27;display&#x27;: &#x27;block&#x27; });
        }
        return feedbackContainer;
    }

    function getCurrentType() {
        if (exhibTabSelected) {
            return &quot;Exhibition&quot;;
        } else {
            return &quot;Tour&quot;;
        }
    }

    function getCurrentID() {
        if (exhibTabSelected) {
            if (currExhibition) {
                return currExhibition.Identifier;
            } else {
                return &quot;&quot;;
            }
        } else {
            if (currTour) {
                return currTour.Identifier;
            } else {
                return &quot;&quot;;
            }
        }
    }

    /**
     * Adds exhibitions to page
     *@param: exhibition to add
     * Creates button in sidebar
     */
    function addExhibit(exhibition) {

        var title = exhibition.Name,
            toAddImage = $(document.createElement(&#x27;img&#x27;)),
            imgSrc = LADS.Worktop.Database.fixPath(exhibition.Metadata.BackgroundImage),
            toAdd = $(document.createElement(&#x27;div&#x27;)),
            subInfo = $(document.createElement(&#x27;div&#x27;)),
            text = exhibition.Metadata.Description ? exhibition.Metadata.Description : &quot;&quot;,
            shortenedText = text.substr(0, 18) + &quot;...&quot;;

        text = text.replace(/&lt;br&gt;/g, &#x27;&#x27;).replace(/&lt;br \/&gt;/g, &#x27;&#x27;);

        // intelligent truncate + ellipses insertion
        // BM - CSS3 is more intelligent
        //if (title.length &gt; 15) {
        //    var hasSpace = false;
        //    var scanLength = Math.min(title.length, 24);
        //    for (var i = 14; i &lt; scanLength ; i++) {
        //        if (title[i] === &quot; &quot; &amp;&amp; !hasSpace) {
        //            title = title.substr(0, i) + &quot;...&quot;;
        //            hasSpace = true;
        //        } else if (title[i] === &quot;-&quot; &amp;&amp; i !== (scanLength - 1) &amp;&amp; !hasSpace) {
        //            if (title[i + 1] === &quot; &quot;) {
        //                title = title.substr(0, i) + &quot;...&quot;;
        //                hasSpace = true;
        //            }
        //        }
        //    }
        //    if (!hasSpace) {
        //        title = title.substr(0, 16) + &quot;...&quot;;
        //    }
        //}

        //thumbnail for the exhibition
        toAddImage = $(document.createElement(&#x27;img&#x27;));
        imgSrc = LADS.Worktop.Database.fixPath(exhibition.Metadata.BackgroundImage);
        toAddImage.attr(&quot;src&quot;, imgSrc);
        toAddImage.css({
            &quot;width&quot;: &quot;18%&quot;,
            &quot;height&quot;: &quot;90%&quot;,
            &quot;float&quot;: &quot;left&quot;,
            &#x27;margin-right&#x27;: &#x27;4%&#x27;,
            &#x27;margin-left&#x27;: &#x27;6%&#x27;,
            &quot;top&quot;: &#x27;5%&#x27;,
            &#x27;border&#x27;: &#x27;1px solid black&#x27;,
            &#x27;display&#x27;: &#x27;inline-block&#x27;,
        });

        toAdd = $(document.createElement(&#x27;div&#x27;));
        toAdd.addClass(&#x27;exhibition-selection&#x27;);
        toAdd.css({
            &quot;width&quot;: &quot;95%&quot;,
            &quot;height&quot;: &quot;6%&quot;,
            &quot;font-size&quot;: &quot;200%&quot;,
            &#x27;position&#x27;: &#x27;relative&#x27;,
            &#x27;border&#x27;: &#x27;solid transparent&#x27;,
            &#x27;border-width&#x27;: &#x27;5px 0px 5px 0px&#x27;,
            &#x27;padding-top&#x27;: &#x27;1.8%&#x27;,
            &#x27;padding-bottom&#x27;: &#x27;1.3%&#x27;,
            &#x27;display&#x27;: &#x27;inline-block&#x27;,
            &#x27;overflow&#x27;: &#x27;hidden&#x27;,
        });
        var titleBox = $(document.createElement(&#x27;div&#x27;));
        titleBox.addClass(&#x27;exhibition-title&#x27;);
        titleBox.css({
            &#x27;margin-top&#x27;: &#x27;0.5%&#x27;,
            &#x27;width&#x27;: &#x27;70%&#x27;,
            &#x27;height&#x27;: &#x27;100%&#x27;,
            &quot;font-size&quot;: &quot;100%&quot;,
            &#x27;display&#x27;: &#x27;inline-block&#x27;,
            &#x27;white-space&#x27;: &#x27;nowrap&#x27;,
            &#x27;text-overflow&#x27;: &#x27;ellipsis&#x27;,
            &#x27;overflow&#x27;: &#x27;hidden&#x27;,
        });
        var screenWidth = root.width();
        titleBox.text(title);
        if (screenWidth &lt;= 1366) {
            //$(titleBox).fitText(0.35);
        } else {
            //$(titleBox).fitText(0.26);
        }

        var progressCircCSS = {
            &#x27;position&#x27;: &#x27;absolute&#x27;,
            &#x27;left&#x27;: &#x27;10%&#x27;,
            &#x27;z-index&#x27;: &#x27;50&#x27;,
            &#x27;height&#x27;: &#x27;auto&#x27;,
            &#x27;width&#x27;: &#x27;9%&#x27;,
            &#x27;top&#x27;: &#x27;25%&#x27;,
        };
        var circle = LADS.Util.showProgressCircle(toAdd, progressCircCSS, &#x27;0px&#x27;, &#x27;0px&#x27;, false);
        toAddImage.load(function () {
            LADS.Util.removeProgressCircle(circle);
        });

        toAdd.append(toAddImage);
        toAdd.append(titleBox);


        //subInfo = $(document.createElement(&#x27;div&#x27;));
        //subInfo.css({
        //    width: &quot;100%&quot;, left: &quot;0%&quot;, top: &quot;0%&quot;,
        //    &#x27;font-size&#x27;: &#x27;60%&#x27;, position: &quot;relative&quot;, &#x27;text-align&#x27;: &#x27;left&#x27;
        //});
        //text = exhibition.Metadata.Description ? exhibition.Metadata.Description : &quot;&quot;;
        //text = text.replace(/&lt;br&gt;/g, &#x27;&#x27;).replace(/&lt;br \/&gt;/g, &#x27;&#x27;);
        //shortenedText = text.substr(0, 25) + &quot;...&quot;;
        //subInfo.text(shortenedText);
        //toAdd.append(subInfo);

        exhibitarea.append(toAdd);
        toAdd.attr(&#x27;flagClicked&#x27;, &#x27;false&#x27;);
        toAdd.attr(&#x27;id&#x27;, &#x27;exhib-&#x27; + exhibition.Identifier);
        toAdd.mousedown(function () {
            $(this).css({ &#x27;background-color&#x27;: &#x27;white&#x27;, &#x27;color&#x27;: &#x27;black&#x27; });
        });
        toAdd.mouseleave(function () {
            if ($(this).attr(&#x27;flagClicked&#x27;) == &#x27;false&#x27;)
                $(this).css({ &#x27;background-color&#x27;: &#x27;transparent&#x27;, &#x27;color&#x27;: &#x27;white&#x27; });
        });
        toAdd.click(function () {
            for (var i = 0; i &lt; exhibitelements.length; i++) {
                // prevents animation if exhibit is already selected
                if (exhibitelements[i] != toAdd) {
                    exhibitelements[i].css({ &#x27;background-color&#x27;: &#x27;transparent&#x27;, &#x27;color&#x27;: &#x27;white&#x27; });
                    exhibitelements[i].data(&quot;selected&quot;, false);
                    exhibitelements[i].attr(&#x27;flagClicked&#x27;, &#x27;false&#x27;);
                }
            }
            $(this).attr(&#x27;flagClicked&#x27;, &#x27;true&#x27;);
            currExhibition = exhibition;
            loadExhibit.call(toAdd, exhibition);
        });

        exhibitelements.push(toAdd);
    }

    /**
     * Adds tour to page
     * Creates button in sidebar
     *@param: tour to add,
     *@param: all the tours
     */
    function addTour(tour, allTours) {
        var title = tour.Name,
            toAddImage = $(document.createElement(&#x27;img&#x27;)),
            imgSrc = LADS.Worktop.Database.fixPath(tour.Metadata.Thumbnail),
            toAdd = $(document.createElement(&#x27;div&#x27;)),
            subInfo = $(document.createElement(&#x27;div&#x27;)),
            text = tour.Metadata.Description || &quot;&quot;,
            shortenedText = text.substr(0, 20) + &quot;...&quot;;

        text = text.replace(/&lt;br&gt;/g, &#x27;&#x27;).replace(/&lt;br \/&gt;/g, &#x27;&#x27;);

        // intelligent truncate + ellipses insertion
        //if (title.length &gt; 15) {
        //    var hasSpace = false;
        //    var scanLength = Math.min(title.length, 24);
        //    for (var i = 14; i &lt; scanLength ; i++) {
        //        if (title[i] === &quot; &quot; &amp;&amp; !hasSpace) {
        //            title = title.substr(0, i) + &quot;...&quot;;
        //            hasSpace = true;
        //        } else if (title[i] === &quot;-&quot; &amp;&amp; i !== (scanLength - 1) &amp;&amp; !hasSpace) {
        //            if (title[i + 1] === &quot; &quot;) {
        //                title = title.substr(0, i) + &quot;...&quot;;
        //                hasSpace = true;
        //            }
        //        }
        //    }
        //    if (!hasSpace) {
        //        title = title.substr(0, 16) + &quot;...&quot;;
        //    }
        //}

        toAddImage = $(document.createElement(&#x27;img&#x27;));
        imgSrc = LADS.Worktop.Database.fixPath(tour.Metadata.Thumbnail);
        toAddImage.attr(&quot;src&quot;, imgSrc);
        toAddImage.css({
            &quot;width&quot;: &quot;18%&quot;,
            &quot;height&quot;: &quot;90%&quot;,
            &quot;float&quot;: &quot;left&quot;,
            &#x27;margin-right&#x27;: &#x27;5%&#x27;,
            &#x27;margin-left&#x27;: &#x27;6%&#x27;,
            &quot;top&quot;: &#x27;5%&#x27;,
            &#x27;border&#x27;: &#x27;1px solid black&#x27;,
            &#x27;display&#x27;: &#x27;inline-block&#x27;,
        });

        toAdd = $(document.createElement(&#x27;div&#x27;));
        toAdd.addClass(&#x27;tour-selection&#x27;);
        toAdd.css({
            &quot;width&quot;: &quot;95%&quot;,
            &quot;height&quot;: &quot;6%&quot;,
            &quot;font-size&quot;: &quot;200%&quot;,
            &#x27;position&#x27;: &#x27;relative&#x27;,
            &#x27;border&#x27;: &#x27;solid transparent&#x27;,
            &#x27;border-width&#x27;: &#x27;5px 0px 5px 0px&#x27;,
            &#x27;padding-top&#x27;: &#x27;1.8%&#x27;,
            &#x27;padding-bottom&#x27;: &#x27;1.3%&#x27;,
            &#x27;display&#x27;: &#x27;inline-block&#x27;,
            &#x27;overflow&#x27;: &#x27;hidden&#x27;,
        });

        var progressCircCSS = {
            &#x27;position&#x27;: &#x27;absolute&#x27;,
            &#x27;left&#x27;: &#x27;10%&#x27;,
            &#x27;z-index&#x27;: &#x27;50&#x27;,
            &#x27;height&#x27;: &#x27;auto&#x27;,
            &#x27;width&#x27;: &#x27;9%&#x27;,
            &#x27;top&#x27;: &#x27;25%&#x27;,
        };
        var circle = LADS.Util.showProgressCircle(toAdd, progressCircCSS, &#x27;0px&#x27;, &#x27;0px&#x27;, false);
        toAddImage.load(function () {
            LADS.Util.removeProgressCircle(circle);
        });

        var titleBox = $(document.createElement(&#x27;div&#x27;));
        titleBox.addClass(&#x27;tour-title&#x27;);
        titleBox.css({
            &#x27;margin-top&#x27;: &#x27;1%&#x27;,
            &#x27;width&#x27;: &#x27;60%&#x27;,
            &#x27;height&#x27;: &#x27;100%&#x27;,
            &quot;font-size&quot;: &quot;100%&quot;,
            &#x27;display&#x27;: &#x27;inline-block&#x27;,
            &#x27;white-space&#x27;: &#x27;nowrap&#x27;,
            &#x27;overflow&#x27;: &#x27;hidden&#x27;,
            &#x27;text-overflow&#x27;: &#x27;ellipsis&#x27;,
        });
        titleBox.text(title);
        var screenWidth = root.width();
        titleBox.text(title);
        if (screenWidth &lt;= 1366) {
            //$(titleBox).fitText(0.35);
        } else {
            //$(titleBox).fitText(0.26);
        }
        toAdd.append(toAddImage);
        toAdd.append(titleBox);

        //toAdd.text(title);
        //subInfo = $(document.createElement(&#x27;div&#x27;));
        //subInfo.css({
        //    width: &quot;100%&quot;, left: &quot;0%&quot;, top: &quot;0%&quot;,
        //    &#x27;font-size&#x27;: &#x27;60%&#x27;, position: &quot;relative&quot;, &#x27;text-align&#x27;: &#x27;left&#x27;
        //});
        //text = tour.Metadata.Description ? tour.Metadata.Description : &quot;&quot;;
        //text = text.replace(/&lt;br&gt;/g, &#x27;&#x27;).replace(/&lt;br \/&gt;/g, &#x27;&#x27;);
        //shortenedText = text.substr(0, 20) + &quot;...&quot;;
        //subInfo.text(shortenedText);
        //toAdd.append(subInfo);

        exhibitarea.append(toAdd);

        toAdd.attr(&#x27;flagClicked&#x27;, &#x27;false&#x27;);
        toAdd.mousedown(function () {
            $(this).css({ &#x27;background-color&#x27;: &#x27;white&#x27;, &#x27;color&#x27;: &#x27;black&#x27; });
        });
        toAdd.mouseleave(function () {
            if ($(this).attr(&#x27;flagClicked&#x27;) == &#x27;false&#x27;)
                $(this).css({ &#x27;background-color&#x27;: &#x27;transparent&#x27;, &#x27;color&#x27;: &#x27;white&#x27; });
        });
        toAdd.mousedown(function () {
            $(this).css({ &#x27;background-color&#x27;: &#x27;white&#x27;, &#x27;color&#x27;: &#x27;black&#x27; });

        });

        toAdd.click(function () {
            for (var i = 0; i &lt; exhibitelements.length; i++) {
                // prevents animation if exhibit is already selected
                if (exhibitelements[i] != toAdd) {
                    exhibitelements[i].css({ &#x27;background-color&#x27;: &#x27;transparent&#x27;, &#x27;color&#x27;: &#x27;white&#x27; });
                    exhibitelements[i].data(&quot;selected&quot;, false);
                    exhibitelements[i].attr(&#x27;flagClicked&#x27;, &#x27;false&#x27;);
                }
            }
            // the div that is clicked is passed as the context i.e. &#x27;this&#x27;
            $(this).attr(&#x27;flagClicked&#x27;, &#x27;true&#x27;);
            currTour = tour;
            loadTour.call(toAdd, tour, allTours);
        });

        exhibitelements.push(toAdd);
    }

    /**
    *have a exhibition/tour selected
    *@param: index of selected exhibition
    */
    function clickExhibition(i) {
        if (exhibitelements[i])
            exhibitelements[i].click();
    }

    /**
    *return to the exhibition when clicks back button from catalog
    *@param: current exhibition
    */
    function clickExhibitionByDoq(doq) {
        exhibitionSpan.click();

        var i, currentEx, text,
            title = doq.Name;
        // intelligent truncate + ellipses insertion
        //if (title.length &gt; 15) {
        //    var hasSpace = false;
        //    var scanLength = Math.min(title.length, 24);
        //    for (var i = 14; i &lt; scanLength ; i++) {
        //        if (title[i] === &quot; &quot; &amp;&amp; !hasSpace) {
        //            title = title.substr(0, i) + &quot;...&quot;;
        //            hasSpace = true;
        //        } else if (title[i] === &quot;-&quot; &amp;&amp; i !== (scanLength - 1) &amp;&amp; !hasSpace) {
        //            if (title[i + 1] === &quot; &quot;) {
        //                title = title.substr(0, i) + &quot;...&quot;;
        //                hasSpace = true;
        //            }
        //        }
        //    }
        //    if (!hasSpace) {
        //        title = title.substr(0, 16) + &quot;...&quot;;
        //    }
        //}

        for (i = 0; i &lt; exhibitelements.length; i++) {
            currentEx = exhibitelements[i];
            text = currentEx[0].innerText;
            if (text === title) {
                loadExhibit.call(exhibitelements[i], doq);
                currentEx[0].click();//have the current exhibition selected when go back to exhibition page
                break;
            }
        }
    }

    /**
    *return to tours page in exhibition mode when clicks back button from artmode.
    *@param: current artwork mode
    */
    function clickTourByDoq(doq) {
        toursSpan.click();
        var i, currTour, text,
            title = doq.Name;

        //if (title.length &gt; 15) {
        //    var hasSpace = false;
        //    var scanLength = Math.min(title.length, 24);
        //    for (var i = 14; i &lt; scanLength ; i++) {
        //        if (title[i] === &quot; &quot; &amp;&amp; !hasSpace) {
        //            title = title.substr(0, i) + &quot;...&quot;;
        //            hasSpace = true;
        //        } else if (title[i] === &quot;-&quot; &amp;&amp; i !== (scanLength - 1) &amp;&amp; !hasSpace) {
        //            if (title[i + 1] === &quot; &quot;) {
        //                title = title.substr(0, i) + &quot;...&quot;;
        //                hasSpace = true;
        //            }
        //        }
        //    }
        //    if (!hasSpace) {
        //        title = title.substr(0, 16) + &quot;...&quot;;
        //    }
        //}
        for (i = 0; i &lt; exhibitelements.length; i++) {
            var currentTour = exhibitelements[i];
            text = currentTour[0].innerText;
            if (text === title) {
                loadTour.call(currentTour, doq);
                currentTour[0].click();//have the current exhibition selected when go back to exhibition page
                break;
            }
        }
    }

    /** 
    *Function to select the tour tab from a different page before switching to this page 
    */
    function selectTourTab() {
        toursSpan.click();
    }

    /**
     * When exhibition is selected in sidebar,
     * this function creates description to display in main display area
     * @param: selected exhibition
     */
    // BM - privateExhib is a little bit of a hack to get private exhibits
    // to show in settings view.  When set to true it just ignores anything
    // that relies on &#x27;this&#x27; since &#x27;this&#x27; doesn&#x27;t exist for a private exhibit
    // (it doesn&#x27;t have a label in the exhib list)
    function loadExhibit(exhibition, privateExhib) {

        if (!privateExhib &amp;&amp; this.data(&quot;selected&quot;)) { return; }//if the exhibition has already been selected, do nothing

        if (!privateExhib)
            this.data(&quot;selected&quot;, true);
        // Start loading artwork now in background

        // Remove current contents of display area
        var d;
        if (firstLoad) {
            d = currentExhElements.displayareasub;
            d.animate({ &#x27;opacity&#x27;: 0 }, 100, function () {
                d.remove();
            });
            firstLoad = false;
        }
        else if (currentExhElements) {
            currentExhElements.block.remove();
            d = currentExhElements.displayareasub;
            d.css(&#x27;z-index&#x27;, 1000);
            d.animate({
                &#x27;left&#x27;: &#x27;20%&#x27;,
                top: &#x27;20%&#x27;,
                width: &#x27;150%&#x27;,
                height: &#x27;150%&#x27;,
                opacity: 0,
            },
            500, function () {
                d.remove();
            });
        }

        var displayareasub = $(document.createElement(&#x27;div&#x27;));
        displayareasub.addClass(&#x27;displayareasub&#x27;);
        displayareasub.css({ &#x27;width&#x27;: &#x27;100%&#x27;, &#x27;height&#x27;: &#x27;100%&#x27;, &#x27;position&#x27;: &#x27;absolute&#x27; });
        displayarea.append(displayareasub);

        currentExhElements = {};
        currentExhElements.block = $(document.createElement(&#x27;div&#x27;));
        if (!privateExhib) {
            currentExhElements.block.css({
                &quot;top&quot;: $(this).position().top, &quot;left&quot;: &quot;100%&quot;, &quot;height&quot;: $(this).css(&#x27;height&#x27;),
                &quot;width&quot;: &quot;4%&quot;, &quot;font-size&quot;: &quot;1.5em&quot;, &#x27;position&#x27;: &#x27;absolute&#x27;,
                &#x27;border&#x27;: &#x27;solid transparent&#x27;, &#x27;border-width&#x27;: &#x27;5px 0px 5px 0px&#x27;,
                &#x27;background-color&#x27;: &#x27;rgba(255,255,255,0)&#x27;, &#x27;z-index&#x27;: &#x27;50&#x27;
            });
        }


        // Make titles
        // fixed to work at small widths (in splitscreen and in portrait mode)
        titlediv = $(document.createElement(&#x27;div&#x27;));
        titlediv.attr(&#x27;id&#x27;, &#x27;exhibition-title&#x27;);

        titlediv.addClass(&#x27;exhibition-title&#x27;);
        titlediv.text(exhibition.Name);
        // Font size &amp; line-height is probably the easiest thing to dynamically update here
        titlediv.css({
            &#x27;width&#x27;: &#x27;90%&#x27;,
            &#x27;margin-left&#x27;: &quot;10%&quot;, &#x27;margin-top&#x27;: &quot;2%&quot;,
            &#x27;text-align&#x27;: &#x27;left&#x27;,
            &#x27;z-index&#x27;: &#x27;40&#x27;,
            &#x27;white-space&#x27;: &#x27;nowrap&#x27;
        });
        var w = $(window).width() * 0.75 * 0.9;
        var fontSize = LADS.Util.getMaxFontSizeEM(exhibition.Name, 1.5, w, 100);
        titlediv.css({ &#x27;font-size&#x27;: fontSize });

        //LADS.Util.fitText(titlediv, 0.7);
        displayareasub.append(titlediv);
        currentExhElements.title = titlediv;
        //subtitle1
        sub1 = $(document.createElement(&#x27;div&#x27;));
        sub1.addClass(&#x27;exhibition-subtitle-1&#x27;);
        sub1.attr(&#x27;id&#x27;, &#x27;exhibition-subtitle-1&#x27;);

        sub1.css({
            &#x27;width&#x27;: &#x27;85%&#x27;,
            &#x27;text-overflow&#x27;: &#x27;ellipsis&#x27;,
            &#x27;overflow&#x27;: &#x27;hidden&#x27;,
            &#x27;margin-left&#x27;: &quot;10%&quot;,
            &#x27;font-size&#x27;: &#x27;4em&#x27;,
            &#x27;text-align&#x27;: &#x27;left&#x27;,
            &#x27;z-index&#x27;: &#x27;40&#x27;,
            &#x27;white-space&#x27;: &#x27;nowrap&#x27;
        });

        sub1.html(exhibition.Metadata.Subheading1);
        //LADS.Util.fitText(sub1, 1.5);
        displayareasub.append(sub1);
        currentExhElements.sub1 = sub1;
        //subtitle2
        sub2 = $(document.createElement(&#x27;div&#x27;));
        sub2.addClass(&#x27;exhibition-subtitle-2&#x27;);
        sub2.attr(&#x27;id&#x27;, &#x27;exhibition-subtitle-2&#x27;);

        sub2.css({
            &#x27;width&#x27;: &#x27;90%&#x27;,
            &#x27;margin-left&#x27;: &quot;10%&quot;,
            &#x27;font-size&#x27;: &#x27;3em&#x27;,
            &#x27;text-align&#x27;: &#x27;left&#x27;,
            &#x27;z-index&#x27;: &#x27;40&#x27;,
            &#x27;white-space&#x27;: &#x27;nowrap&#x27;
        });
        sub2.html(exhibition.Metadata.Subheading2);
        // LADS.Util.fitText(sub2, 2);
        displayareasub.append(sub2);
        currentExhElements.sub2 = sub2;

        // Display contains description, thumbnails and view button
        var display = $(document.createElement(&#x27;div&#x27;));
        display.addClass(&#x27;exhibition-info&#x27;);

        // Might need to push this down farther (make top larger)
        // Looks fine for now, though
        display.css({
            &#x27;top&#x27;: &#x27;30%&#x27;,
            &#x27;left&#x27;: &#x27;10%&#x27;,
            &quot;background-color&quot;: &quot;rgba(255,255,255,0.9)&quot;,
            &#x27;position&#x27;: &#x27;absolute&#x27;,
            &quot;height&quot;: &quot;65%&quot;, &quot;width&quot;: &quot;83%&quot;,
            &#x27;border-style&#x27;: &#x27;solid&#x27;,
            &#x27;border-width&#x27;: &#x27;1.3em&#x27;,
            &#x27;border-color&#x27;: &#x27;rgba(16,14,12,0.92)&#x27;,
        });

        displayareasub.append(display);

        currentExhElements.display = display;

        // Contains text
        var contentdiv = $(document.createElement(&#x27;div&#x27;));
        contentdiv.addClass(&#x27;contentdiv&#x27;);
        contentdiv.css({
            &#x27;width&#x27;: &#x27;94%&#x27;, &#x27;height&#x27;: &#x27;96%&#x27;,
            &#x27;position&#x27;: &#x27;relative&#x27;,
            &#x27;top&#x27;: &#x27;2%&#x27;, &#x27;left&#x27;: &#x27;3%&#x27;,
            &#x27;overflow&#x27;: &#x27;hidden&#x27;,
            &#x27;text-overflow&#x27;: &#x27;ellipsis&#x27;,
        });
        display.append(contentdiv);

        // Exhibition description container
        var descContainer = $(document.createElement(&#x27;div&#x27;));
        descContainer.addClass(&#x27;description-container&#x27;);
        descContainer.css({
            width: &#x27;98%&#x27;,
            height: &#x27;60%&#x27;,
            overflow: &#x27;auto&#x27;,
            &#x27;padding-right&#x27;: &#x27;2%&#x27;
        });
        contentdiv.append(descContainer);

        // Thumbnails
        var img1 = $(document.createElement(&#x27;img&#x27;));
        img1.attr(&#x27;src&#x27;, LADS.Worktop.Database.fixPath(exhibition.Metadata.DescriptionImage1));
        img1.css({ &#x27;padding-right&#x27;: &#x27;1%&#x27;, &quot;width&quot;: &quot;auto&quot;, &quot;height&quot;: &quot;60%&quot;, &quot;float&quot;: &quot;right&quot;, &#x27;margin-bottom&#x27;: &#x27;2px&#x27;, &#x27;margin-left&#x27;: &#x27;2%&#x27; }); //max : 49
        img1.attr(&#x27;id&#x27;, &#x27;img1&#x27;);
        descContainer.append(img1);

        var progressCircCSS = {
            &#x27;position&#x27;: &#x27;absolute&#x27;,
            &#x27;float&#x27;: &#x27;right&#x27;,
            &#x27;right&#x27;: &#x27;13%&#x27;,
            &#x27;z-index&#x27;: &#x27;50&#x27;,
            &#x27;height&#x27;: &#x27;20%&#x27;,
            &#x27;width&#x27;: &#x27;auto&#x27;,
            &#x27;top&#x27;: &#x27;10%&#x27;,
        };
        var circle = LADS.Util.showProgressCircle(descContainer, progressCircCSS, &#x27;0px&#x27;, &#x27;0px&#x27;, false);
        img1.load(function () {
            LADS.Util.removeProgressCircle(circle);
        });
        // View button

        var selectExhibition = $(document.createElement(&#x27;div&#x27;));
        selectExhibition.addClass(&#x27;selectExhibition&#x27;);
        selectExhibition.css({
            &#x27;margin&#x27;: &#x27;.90909% 1% 5px 0.5%&#x27;,
            &#x27;width&#x27;: &#x27;30%&#x27;,
            &#x27;height&#x27;: &#x27;auto&#x27;,
            &#x27;float&#x27;: &#x27;right&#x27;,
            &#x27;clear&#x27;: &#x27;right&#x27;,
            &#x27;border&#x27;: &#x27;3px solid black&#x27;,
            &#x27;overflow&#x27;: &#x27;hidden&#x27;,
        });
        descContainer.append(selectExhibition);

        var selectButton = $(document.createElement(&#x27;img&#x27;));
        selectButton.addClass(&#x27;selectButton&#x27;);
        selectButton.attr(&#x27;src&#x27;, &#x27;images/icons/forward.png&#x27;);

        selectButton.css({
            &#x27;z-index&#x27;: 50,
            &#x27;display&#x27;: &#x27;inline-block&#x27;,
            &#x27;float&#x27;: &#x27;left&#x27;,
            &#x27;width&#x27;: &#x27;12%&#x27;,
            &#x27;height&#x27;: &#x27;auto&#x27;,
            &#x27;padding&#x27;: &#x27;1.5%&#x27;
        });
        selectExhibition.append(selectButton);

        bgimage.css(&#x27;background-image&#x27;, &quot;url(&quot; + LADS.Worktop.Database.fixPath(exhibition.Metadata.BackgroundImage) + &quot;)&quot;);

        // create a spinning circle
        var displayLoading = $(document.createElement(&#x27;div&#x27;));
        displayLoading.addClass(&#x27;exhibitionLoading&#x27;);
        displayLoading.css({
            &#x27;top&#x27;: &#x27;30%&#x27;,
            &#x27;left&#x27;: &#x27;10%&#x27;,
            &quot;background-color&quot;: &quot;rgba(0,0,0,0.5)&quot;,
            &#x27;position&#x27;: &#x27;absolute&#x27;,
            &#x27;z-index&#x27;: &#x27;40&#x27;,
            &quot;height&quot;: &quot;65%&quot;, &quot;width&quot;: &quot;83%&quot;,
            &#x27;border-style&#x27;: &#x27;solid&#x27;,
            &#x27;border-width&#x27;: &#x27;1.3em&#x27;,
            &#x27;border-color&#x27;: &#x27;rgba(16,14,12,0.92)&#x27;,
            &#x27;display&#x27;: &#x27;none&#x27;
        });
        displayareasub.append(displayLoading);

        // create gray overlay
        var overlayOnRoot = $(document.createElement(&#x27;div&#x27;));
        overlayOnRoot.attr(&#x27;id&#x27;, &#x27;overlay1&#x27;);
        overlayOnRoot.addClass(&#x27;overlayOnRoot&#x27;);
        overlayOnRoot.css({
            position: &#x27;absolute&#x27;,
            top: 0,
            left: 0,
            width: &#x27;100%&#x27;,
            height: &#x27;100%&#x27;,
            display: &#x27;none&#x27;,
            &#x27;background-color&#x27;: &#x27;rgba(0,0,0,0.6)&#x27;,
        });
        root.append(overlayOnRoot);
        //have the selectbutton not draggable, change to black when clicked and change back to white when mouse leave.
        selectExhibition.mousedown(function () {
            LADS.Util.UI.cgBackColor(&quot;forwardButton&quot;, selectExhibition);
            $(selectText).css({ &#x27;color&#x27;: &#x27;black&#x27; });
        });
        selectExhibition.mouseleave(function () {
            selectExhibition.css({ &#x27;background-color&#x27;: &quot;transparent&quot; });
        });

        //opens the exhibition we have just selected
        selectExhibition.click(function () {
            overlayOnRoot.show();
            //LADS.Util.showLoading(overlayOnRoot, &#x27;5%&#x27;); DisplayAreaSub already creates a loading circle
            LADS.Worktop.Database.getArtworksIn(exhibition.Identifier, getArtworksHelper, null, getArtworksHelper);

            function getArtworksHelper(artworks) {
                if (!artworks || !artworks[0]) {//pops up a box warning user there is no artwork in the selected exhibition
                    var noArtworksOptionBox = LADS.Util.UI.makeNoArtworksOptionBox();
                    root.append(noArtworksOptionBox);
                    $(noArtworksOptionBox).fadeIn(500);
                    overlayOnRoot.fadeOut();
                    return;
                }
                switchPage(exhibition);
                overlayOnRoot.fadeOut();
            }
        });

        selectText = $(document.createElement(&#x27;div&#x27;));
        selectText.addClass(&#x27;select-text&#x27;);
        selectText.attr(&#x27;id&#x27;, &#x27;exhibition-select-text&#x27;);

        selectText.text(&quot;Explore this exhibition&quot;);
        selectText.css({
            &#x27;font-size&#x27;: LADS.Util.getMaxFontSizeEM(&quot;Explore this exhibition&quot;, 1, 1000, selectExhibition.height()),
            &#x27;color&#x27;: &#x27;black&#x27;,
            &#x27;display&#x27;: &#x27;inline-block&#x27;,
            &#x27;right&#x27;: &#x27;2%&#x27;,
            &#x27;padding&#x27;: &#x27;2%&#x27;
        });
        selectExhibition.append(selectText);
        //LADS.Util.fitText(selectText, .8); //josh

        //descriptiontext 
        var descriptiontext = $(document.createElement(&#x27;div&#x27;));
        descriptiontext.addClass(&#x27;description-text&#x27;);
        descriptiontext.attr(&#x27;id&#x27;, &#x27;description-text&#x27;);

        descriptiontext.css({
            &quot;line-height&quot;: &quot;90%&quot;,
            &quot;height&quot;: &quot;100%&quot;,
            &quot;width&quot;: &quot;100%&quot;,
            &#x27;font-size&#x27;: &#x27;1.6em&#x27;,
            &#x27;color&#x27;: &#x27;black&#x27;,
            &#x27;white-space&#x27;: &#x27;normal&#x27;,
            &#x27;text-overflow&#x27;: &#x27;ellipsis&#x27;,
        });
        //create the text fadeout effect for the top
        var topfadeout = $(document.createElement(&#x27;div&#x27;));
        topfadeout.addClass(&#x27;topfadeout&#x27;);
        topfadeout.css({
            &#x27;position&#x27;: &#x27;absolute&#x27;,
            &#x27;display&#x27;: &#x27;none&#x27;,
            &#x27;top&#x27;: &#x27;0%&#x27;,
            &#x27;left&#x27;: &#x27;0px&#x27;,
            &#x27;width&#x27;: &#x27;98%&#x27;,
            &#x27;height&#x27;: &#x27;5%&#x27;,
            &#x27;background&#x27;: &#x27;-ms-linear-gradient(top,  rgba(237, 237, 237,1) 0%,rgba(237, 237, 237,0) 52%,rgba(237, 237, 237,0) 100%)&#x27;
        });
        descContainer.append(topfadeout);
        //create the text fadeout effect for the bottom
        var bottomfadeout = $(document.createElement(&#x27;div&#x27;));
        bottomfadeout.addClass(&#x27;Exhibitionbottomfadeout&#x27;);
        bottomfadeout.css({
            &#x27;position&#x27;: &#x27;absolute&#x27;,
            &#x27;top&#x27;: &#x27;55%&#x27;,
            &#x27;left&#x27;: &#x27;0px&#x27;,
            &#x27;width&#x27;: &#x27;98%&#x27;,
            &#x27;height&#x27;: &#x27;5%&#x27;,
            &#x27;background&#x27;: &#x27;-ms-linear-gradient(top,  rgba(237, 237, 237,0) 0%,rgba(237, 237, 237,0) 52%,rgba(237, 237, 237,1) 100%)&#x27;
        });
        descContainer.append(bottomfadeout);
        //check the scroll state to make fadeout effect divs appear and disappear.
        descContainer.bind(&#x27;scroll&#x27;, function () {
            //if it reaches the bottom, hide the bottom fadeout effect. Otherwise, show it
            if (descContainer.scrollTop() + descContainer.innerHeight() &gt;= descContainer[0].scrollHeight) {
                bottomfadeout.css({ &#x27;display&#x27;: &#x27;none&#x27; });
            }
            else {
                bottomfadeout.css({ &#x27;display&#x27;: &#x27;block&#x27; });
            }
            //if the scroller is not at the top, show the top fadeout effect. Otherwise, hide it.
            if (descContainer.scrollTop() &gt; 0) {
                topfadeout.css({ &#x27;display&#x27;: &#x27;block&#x27; });
            }
            else {
                topfadeout.css({ &#x27;display&#x27;: &#x27;none&#x27; });
            }
        });
        var str;
        if (exhibition.Metadata.Description)
            str = exhibition.Metadata.Description.replace(/\n\r?/g, &#x27;&lt;br&gt;&#x27;);
        else
            str = &quot;&quot;;
        descriptiontext.html(str);
        //LADS.Util.fitText(descriptiontext, 2.5);
        descContainer.append(descriptiontext);

        //this is the area that contains a list of atours.
        var tourBar = $(document.createElement(&#x27;div&#x27;));
        tourBar.addClass(&#x27;tourBar&#x27;);
        tourBar.css({
            position: &#x27;absolute&#x27;,
            width: &#x27;100%&#x27;,
            bottom: &#x27;5%&#x27;,
            height: &#x27;30%&#x27;,

        });
        var text = $(document.createElement(&#x27;div&#x27;));
        text.html(&quot;&lt;b&gt;Interactive Tours in this Exhibition&lt;/b&gt;&quot;);
        text.css({
            bottom: &#x27;100%&#x27;,
            color: &#x27;black&#x27;,
            &#x27;font-size&#x27;: &#x27;120%&#x27;,
        });
        tourBar.append(text);
        var artworkContent = $(document.createElement(&#x27;div&#x27;));
        artworkContent.addClass(&#x27;artworkContent&#x27;);
        artworkContent.css({
            height: &#x27;92%&#x27;,
            &#x27;padding-bottom&#x27;: &#x27;2%&#x27;,
            &#x27;overflow-x&#x27;: &#x27;auto&#x27;,
            &#x27;overflow-y&#x27;: &#x27;hidden&#x27;,
            &#x27;white-space&#x27;: &#x27;nowrap&#x27;
        });
        tourBar.append(artworkContent);
        contentdiv.append(tourBar);

        //create left fadeout for tourbar
        var leftfadeout = $(document.createElement(&#x27;div&#x27;));
        leftfadeout.addClass(&#x27;leftfadeout&#x27;);
        leftfadeout.css({
            &#x27;position&#x27;: &#x27;absolute&#x27;,
            &#x27;display&#x27;: &#x27;none&#x27;,
            &#x27;left&#x27;: &#x27;0px&#x27;,
            &#x27;width&#x27;: &#x27;5%&#x27;,
            &#x27;height&#x27;: &#x27;100%&#x27;,
            &#x27;background&#x27;: &#x27;-ms-linear-gradient(left,  rgba(237, 237, 237,1) 0%,rgba(237, 237, 237,0) 52%,rgba(237, 237, 237,0) 100%)&#x27;
        });
        artworkContent.append(leftfadeout);
        //create the right fadeout for tourBar
        var rightfadeout = $(document.createElement(&#x27;div&#x27;));
        rightfadeout.addClass(&#x27;rightfadeout&#x27;);
        rightfadeout.css({
            &#x27;position&#x27;: &#x27;absolute&#x27;,
            &#x27;right&#x27;: &#x27;0px&#x27;,
            &#x27;width&#x27;: &#x27;5%&#x27;,
            &#x27;height&#x27;: &#x27;100%&#x27;,
            &#x27;background&#x27;: &#x27;-ms-linear-gradient(left,  rgba(237, 237, 237,0) 0%,rgba(237, 237, 237,0) 52%,rgba(237, 237, 237,1) 100%)&#x27;
        });
        artworkContent.append(rightfadeout);
        //check the scroll state to make fadeout effect divs appear and disappear.
        artworkContent.bind(&#x27;scroll&#x27;, function () {
            //if it reaches the bottom, hide the bottom fadeout effect. Otherwise, show it
            if (artworkContent.scrollLeft() + artworkContent.innerWidth() &gt;= artworkContent[0].scrollWidth) {
                rightfadeout.css({ &#x27;display&#x27;: &#x27;none&#x27; });
            }
            else {
                rightfadeout.css({ &#x27;display&#x27;: &#x27;block&#x27; });
            }
            //if div scrolls to the left, show the top fadeout effect. Otherwise, hide it.
            if (artworkContent.scrollLeft() &gt; 0) {
                leftfadeout.css({ &#x27;display&#x27;: &#x27;block&#x27; });
            }
            else {
                leftfadeout.css({ &#x27;display&#x27;: &#x27;none&#x27; });
            }
        });


        LADS.Util.showLoading(overlayOnRoot, &#x27;8%&#x27;, &#x27;60%&#x27;, &#x27;60%&#x27;);
        overlayOnRoot.show();

        //get all the tours that are related
        LADS.Worktop.Database.getTours(tourHelper, null, tourHelper);

        function tourHelper(tourInfo) {
            numberOfTours = 0;
            relatedTours = [];

            function exhibArtworksHelper(exhibition_artworks) {
                if (exhibition_artworks &amp;&amp; exhibition_artworks[0]) {
                    for (var i = 0; i &lt; tourInfo.length; i++) {
                        if (tourInfo[i].Metadata.Private !== &quot;true&quot; &amp;&amp; tourInfo[i].Metadata.RelatedArtworks) {
                            var relatedarts = JSON.parse(tourInfo[i].Metadata.RelatedArtworks);
                            for (var j = 0; j &lt; relatedarts.length; j++) {
                                for (var k = 0; k &lt; exhibition_artworks.length; k++) {
                                    if (exhibition_artworks[k].Identifier === relatedarts[j]) {
                                        // Add tour to viewer
                                        var tour = tourInfo[i];
                                        if (relatedTours.indexOf(tour) &lt; 0) {
                                            artworkContent.append(makeTour(tour));
                                            relatedTours.push(tour);
                                            numberOfTours++;
                                        }
                                    }
                                }
                            }
                        }
                    }
                }


                if (numberOfTours === 0) {
                    //hide tour bar and show more text
                    text.css(&#x27;visibility&#x27;, &#x27;hidden&#x27;);
                    descContainer.css({ height: &#x27;100%&#x27; });
                    img1.css({ height: &#x27;39%&#x27; });
                    //img2.css({ height: &#x27;39%&#x27; }); //only one at present
                    //selectExhibition.css({ height: &#x27;8.5%&#x27; });
                    //hide bottomfadeout so it doesn&#x27;t block the text
                    $(&#x27;.Exhibitionbottomfadeout&#x27;).css({ &#x27;top&#x27;: &#x27;95%&#x27; });
                    tourBar.hide();
                }

                else {
                    //adjusts size specific stuff only when it is loaded
                    text.css(&#x27;visibility&#x27;, &#x27;visible&#x27;);
                    tourBar.ready(function () {
                        tourBar.on(&quot;load&quot;, function () {
                            $(&#x27;.tour&#x27;).outerWidth(tourBar.outerWidth() / 4);
                            artworkContent.outerWidth($(&#x27;.tour&#x27;).outerWidth() * (1 + numberOfTours));
                        });
                    });
                }
            }
            if (tourInfo.length &gt; 0) {
                LADS.Worktop.Database.getArtworksIn(exhibition.Identifier, exhibArtworksHelper, null, exhibArtworksHelper);
            }
            else {
                //no tour at all

                //hide tour bar and show more text
                text.css(&#x27;visibility&#x27;, &#x27;hidden&#x27;);
                descContainer.css({ height: &#x27;100%&#x27; });
                img1.css({ height: &#x27;39%&#x27; });
                //img2.css({ height: &#x27;39%&#x27; });
                //selectExhibition.css({ height: &#x27;8.5%&#x27; });
            }

            overlayOnRoot.fadeOut();

            // hackish fix for overlay not fading out.
            setTimeout(function () {
                overlayOnRoot.fadeOut();
            }, 50);
        }
        if (!privateExhib)
            $(this).css({ &#x27;background-color&#x27;: &#x27;rgb(255,255,255)&#x27;, &#x27;color&#x27;: &#x27;black&#x27; });

        currentExhElements.displayareasub = displayareasub;

        changeOrientation();

        $(document).ready(function () {
            displayareasub.css({ &#x27;width&#x27;: &#x27;60%&#x27;, &#x27;height&#x27;: &#x27;60%&#x27; });
            setTimeout(function () {
                displayareasub.animate({
                    &#x27;width&#x27;: &#x27;100%&#x27;, &#x27;height&#x27;: &#x27;100%&#x27;, &#x27;left&#x27;: &#x27;0%&#x27;
                }, 500);
            });
        });
    }

    /**
     * When a tour is selected in sidebar,
     * this function creates description to display in main display area
     * -David C.
     */
    function loadTour(tour, allTours) {
        if (this.data(&quot;selected&quot;)) { return; }//if the tour is already selected, do nothing

        this.data(&quot;selected&quot;, true);
        // Start loading artwork now in background
        var d;
        // Remove current contents of display area
        if (firstLoad) {
            d = currentExhElements.displayareasub;
            d.animate({ &#x27;opacity&#x27;: 0 }, 100, function () {
                d.remove();
            });
            firstLoad = false;
        }
        else if (currentExhElements) {
            currentExhElements.block.remove();
            d = currentExhElements.displayareasub;
            d.css(&#x27;z-index&#x27;, 1000);
            d.animate({
                &#x27;left&#x27;: &#x27;20%&#x27;,
                top: &#x27;20%&#x27;,
                width: &#x27;150%&#x27;,
                height: &#x27;150%&#x27;,
                opacity: 0,
            },
            500, function () {
                d.remove();
            });
        }

        var displayareasub = $(document.createElement(&#x27;div&#x27;));
        displayareasub.addClass(&#x27;displayareasub&#x27;);
        displayareasub.css({ &#x27;width&#x27;: &#x27;100%&#x27;, &#x27;height&#x27;: &#x27;100%&#x27;, &#x27;position&#x27;: &#x27;absolute&#x27; });
        displayarea.append(displayareasub);

        currentExhElements = {};
        currentExhElements.block = $(document.createElement(&#x27;div&#x27;));
        currentExhElements.block.css({
            &quot;top&quot;: this.position().top, &quot;left&quot;: &quot;100%&quot;, &quot;height&quot;: this.css(&#x27;height&#x27;),
            &quot;width&quot;: &quot;4%&quot;, &quot;font-size&quot;: &quot;1.5em&quot;, &#x27;position&#x27;: &#x27;absolute&#x27;,
            &#x27;border&#x27;: &#x27;solid transparent&#x27;, &#x27;border-width&#x27;: &#x27;5px 0px 5px 0px&#x27;,
            &#x27;background-color&#x27;: &#x27;rgba(255,255,255,0)&#x27;, &#x27;z-index&#x27;: &#x27;50&#x27;
        });

        // Make titles
        // fixed to work at small widths (in splitscreen and in portrait mode)
        titlediv = $(document.createElement(&#x27;div&#x27;));
        titlediv.attr(&#x27;id&#x27;, &#x27;tour-title&#x27;);

        titlediv.addClass(&#x27;tour-title&#x27;);
        titlediv.css({
            &#x27;width&#x27;: &#x27;85%&#x27;,
            &#x27;margin-left&#x27;: &quot;10%&quot;, &#x27;margin-top&#x27;: &quot;2%&quot;, &quot;margin-right&quot;: &quot;4%&quot;,
            &#x27;font-size&#x27;: &#x27;2.7em&#x27;,
            &#x27;text-align&#x27;: &#x27;left&#x27;,
            &#x27;z-index&#x27;: &#x27;40&#x27;,
            &#x27;white-space&#x27;: &#x27;nowrap&#x27;,
            &#x27;overflow&#x27;: &#x27;hidden&#x27;,
            &#x27;text-overflow&#x27;: &#x27;ellipsis&#x27;,
            &#x27;height&#x27;: &#x27;25%&#x27;,
        });
        titlediv.html(tour.Name);
        // LADS.Util.fitText(titlediv, 1); //prev 0.7
        displayareasub.append(titlediv);
        currentExhElements.title = titlediv;

        /*****************************
        This is where the setting of the heading and the subheadin begin.*/

        sub1 = $(document.createElement(&#x27;div&#x27;));
        sub1.addClass(&#x27;tour-subtitle-1&#x27;);
        sub1.attr(&#x27;id&#x27;, &#x27;tour-subtitle-1&#x27;);

        sub1.css({
            &#x27;width&#x27;: &#x27;90%&#x27;,
            &#x27;margin-left&#x27;: &quot;10%&quot;,
            &#x27;font-size&#x27;: &#x27;4em&#x27;,
            &#x27;text-align&#x27;: &#x27;left&#x27;,
            &#x27;z-index&#x27;: &#x27;40&#x27;,
            &#x27;white-space&#x27;: &#x27;nowrap&#x27;
        });
        sub1.html(tour.Metadata.Subheading1);
        //LADS.Util.fitText(sub1, 1.5);
        displayareasub.append(sub1);
        currentExhElements.sub1 = sub1;

        sub2 = $(document.createElement(&#x27;div&#x27;));
        sub2.addClass(&#x27;tour-subtitle-2&#x27;);
        sub2.attr(&#x27;id&#x27;, &#x27;tour-subtitle-2&#x27;);

        sub2.css({
            &#x27;width&#x27;: &#x27;90%&#x27;,
            &#x27;margin-left&#x27;: &quot;10%&quot;,
            &#x27;font-size&#x27;: &#x27;3em&#x27;,
            &#x27;text-align&#x27;: &#x27;left&#x27;,
            &#x27;z-index&#x27;: &#x27;40&#x27;,
            &#x27;white-space&#x27;: &#x27;nowrap&#x27;
        });
        sub2.html(tour.Metadata.Subheading2);
        //LADS.Util.fitText(sub2, 2);
        displayareasub.append(sub2);
        currentExhElements.sub2 = sub2;
        /****************************************************************/


        // Display contains description, thumbnails and view button
        var display = $(document.createElement(&#x27;div&#x27;));
        display.addClass(&#x27;tour-info&#x27;);

        // Might need to push this down farther (make top larger)
        display.css({
            &#x27;top&#x27;: &#x27;30%&#x27;,
            &#x27;left&#x27;: &#x27;10%&#x27;,
            &quot;background-color&quot;: &quot;rgba(255,255,255,0.9)&quot;,
            &#x27;position&#x27;: &#x27;absolute&#x27;,
            &quot;height&quot;: &quot;65%&quot;, &quot;width&quot;: &quot;83%&quot;,
            &#x27;border-style&#x27;: &#x27;solid&#x27;,
            &#x27;border-width&#x27;: &#x27;1.3em&#x27;,
            &#x27;border-color&#x27;: &#x27;rgba(16,14,12,0.92)&#x27;,
        });

        displayareasub.append(display);

        currentExhElements.display = display;

        // Contains text
        var contentdiv = $(document.createElement(&#x27;div&#x27;));
        contentdiv.addClass(&#x27;contentdiv&#x27;);
        contentdiv.css({
            &#x27;width&#x27;: &#x27;94%&#x27;, &#x27;height&#x27;: &#x27;96%&#x27;,
            &#x27;position&#x27;: &#x27;relative&#x27;,
            &#x27;top&#x27;: &#x27;2%&#x27;, &#x27;left&#x27;: &#x27;3%&#x27;,
            &#x27;overflow&#x27;: &#x27;hidden&#x27;,
            &#x27;text-overflow&#x27;: &#x27;ellipsis&#x27;,
        });
        display.append(contentdiv);

        // Tour description container
        var descContainer = $(document.createElement(&#x27;div&#x27;));
        descContainer.addClass(&#x27;description-container&#x27;);
        descContainer.css({
            width: &#x27;100%&#x27;,
            height: &#x27;60%&#x27;,
            overflow: &#x27;auto&#x27;,
            &#x27;padding-right&#x27;: &#x27;2%&#x27;
        });
        contentdiv.append(descContainer);


        // Thumbnails
        var imgwrapper = $(document.createElement(&#x27;div&#x27;));
        imgwrapper.addClass(&quot;imgwrapper&quot;);
        imgwrapper.css({ &#x27;width&#x27;: &#x27;40%&#x27;, &#x27;float&#x27;: &#x27;right&#x27;, &#x27;height&#x27;: &#x27;60%&#x27;, &#x27;margin-left&#x27;: &#x27;2%&#x27;, &#x27;background-repeat&#x27;: &#x27;no-repeat&#x27; });
        var img1 = $(document.createElement(&#x27;img&#x27;));
        img1.attr(&#x27;src&#x27;, LADS.Worktop.Database.fixPath(tour.Metadata.Thumbnail));
        img1.css({ &quot;width&quot;: &quot;auto&quot;, &quot;height&quot;: &quot;100%&quot;, &quot;float&quot;: &quot;right&quot;, &#x27;margin-bottom&#x27;: &#x27;2px&#x27;, &#x27;margin-left&#x27;: &#x27;2%&#x27; }); //max : 49
        img1.attr(&#x27;id&#x27;, &#x27;img1&#x27;);
        imgwrapper.append(img1);
        descContainer.append(imgwrapper);

        /*******************************************
                I comment out all the images
                var img2 = $(document.createElement(&#x27;img&#x27;));
                img2.attr(&#x27;src&#x27;, tour.Metadata.DescriptionImage2);
                img2.css({ &quot;width&quot;: &quot;auto&quot;, &quot;height&quot;: &quot;60%&quot;, &quot;float&quot;: &quot;right&quot;, &#x27;margin-right&#x27;: &#x27;5px&#x27;, &#x27;margin-left&#x27;: &#x27;1%&#x27;, &#x27;margin-bottom&#x27;: &#x27;1px&#x27; }); //height 73
                img2.attr(&#x27;id&#x27;, &#x27;img2&#x27;);
                contentdiv.append(img2);        contentdiv.append(img1); //append img1 second to preserve order
        
                descContainer.append(img2);
                **********************************************/

        // View button
        var selectTour = $(document.createElement(&#x27;div&#x27;));
        selectTour.addClass(&#x27;selectTour&#x27;);
        selectTour.css({
            &#x27;margin-top&#x27;: &#x27;1%&#x27;,
            &#x27;margin-bottom&#x27;: &#x27;5%&#x27;,
            width: &#x27;21%&#x27;,
            &#x27;margin-right&#x27;: &#x27;5%&#x27;,
            height: &#x27;9.9%&#x27;,
            float: &#x27;right&#x27;,
            clear: &#x27;right&#x27;,
            &#x27;border&#x27;: &#x27;3px solid black&#x27;,
            &#x27;overflow&#x27;: &#x27;hidden&#x27;,
        });

        descContainer.append(selectTour);

        var selectButton = $(document.createElement(&#x27;img&#x27;));
        selectButton.addClass(&#x27;selectButton&#x27;);
        selectButton.attr(&#x27;src&#x27;, &#x27;images/icons/Play.svg&#x27;);

        selectButton.css({
            &#x27;padding-top&#x27;: &#x27;2px&#x27;,
            &#x27;padding-left&#x27;: &#x27;3px&#x27;,
            &#x27;z-index&#x27;: 50,
            &#x27;vertical-align&#x27;: &#x27;middle&#x27;,
            &#x27;float&#x27;: &#x27;left&#x27;,
            &#x27;width&#x27;: &#x27;auto&#x27;,
            &#x27;height&#x27;: &#x27;90%&#x27;,
        });

        bgimage.css(&#x27;background-image&#x27;, &quot;url(&quot; + LADS.Worktop.Database.fixPath(tour.Metadata.Thumbnail) + &quot;)&quot;);

        selectTour.off(&#x27;mousedown&#x27;);
        selectTour.on(&#x27;mousedown&#x27;, function () {
            LADS.Util.UI.cgBackColor(&quot;forwardButton&quot;, selectTour);
            selectText.css({ &#x27;color&#x27;: &#x27;white&#x27; });
        });
        selectTour.off(&#x27;mouseleave&#x27;);
        selectTour.on(&#x27;mouseleave&#x27;, function () {
            selectTour.css({ &#x27;color&#x27;: &#x27;white&#x27;, &#x27;background-color&#x27;: &#x27;transparent&#x27; });
            selectText.css(&#x27;color&#x27;, &#x27;black&#x27;);
        });
        selectTour.off(&#x27;click&#x27;);
        selectTour.on(&#x27;click&#x27;, function () {
            switchPageTour(tour);
        });

        selectTour.append(selectButton);

        selectText = $(document.createElement(&#x27;div&#x27;));
        selectText.addClass(&#x27;select-text&#x27;);
        selectText.attr(&#x27;id&#x27;, &#x27;toue-select-text&#x27;);

        selectText.text(&quot;Begin Tour&quot;);
        selectText.css({
            &#x27;font-size&#x27;: LADS.Util.getMaxFontSizeEM(&quot;Begin Tour&quot;, 1, 1000, $(window).height() * 0.03),
            &#x27;color&#x27;: &#x27;black&#x27;,
            &#x27;display&#x27;: &#x27;block&#x27;,
            &#x27;position&#x27;: &#x27;relative&#x27;,
            &#x27;left&#x27;: &#x27;5%&#x27;,
            &#x27;top&#x27;: &#x27;5%&#x27;,
        });
        selectTour.append(selectText);
        //LADS.Util.fitText(selectText, .5);

        var descriptiontext = $(document.createElement(&#x27;div&#x27;));
        descriptiontext.addClass(&#x27;description-text&#x27;);
        descriptiontext.attr(&#x27;id&#x27;, &#x27;description-text&#x27;);

        descriptiontext.css({
            &quot;line-height&quot;: &quot;90%&quot;,
            &quot;height&quot;: &quot;90%&quot;,
            &quot;width&quot;: &quot;100%&quot;,
            &#x27;font-size&#x27;: &#x27;1.6em&#x27;,
            &#x27;color&#x27;: &#x27;black&#x27;,
            &#x27;white-space&#x27;: &#x27;normal&#x27;,
            &#x27;text-overflow&#x27;: &#x27;ellipsis&#x27;,
        });
        var string = &#x27;&#x27;;
        if (tour.Metadata.Description) {
            string = tour.Metadata.Description.replace(/\n\r?/g, &#x27;&lt;br&gt;&#x27;);
        }
        descriptiontext.html(string);
        //LADS.Util.fitText(descriptiontext, 2.5);
        descContainer.append(descriptiontext);

        //**************************************************************************
        //This is the part that varies from the artworks example.
        //It creates the &quot;related artworks container&quot;
        //If you want to comment it out comment out the following text until the next comments.
        //create the text fadeout effect for the top
        var topfadeout = $(document.createElement(&#x27;div&#x27;));
        topfadeout.addClass(&#x27;topfadeout&#x27;);
        topfadeout.css({
            &#x27;position&#x27;: &#x27;absolute&#x27;,
            &#x27;display&#x27;: &#x27;none&#x27;,
            &#x27;top&#x27;: &#x27;0%&#x27;,
            &#x27;left&#x27;: &#x27;0px&#x27;,
            &#x27;width&#x27;: &#x27;98%&#x27;,
            &#x27;height&#x27;: &#x27;5%&#x27;,
            &#x27;background&#x27;: &#x27;-ms-linear-gradient(top,  rgba(237, 237, 237,1) 0%,rgba(237, 237, 237,0) 52%,rgba(237, 237, 237,0) 100%)&#x27;
        });
        descriptiontext.append(topfadeout);
        //create the text fadeout effect for the bottom
        var bottomfadeout = $(document.createElement(&#x27;div&#x27;));
        bottomfadeout.addClass(&#x27;bottomfadeout&#x27;);
        bottomfadeout.css({
            &#x27;position&#x27;: &#x27;absolute&#x27;,
            &#x27;top&#x27;: &#x27;55%&#x27;,
            &#x27;left&#x27;: &#x27;0px&#x27;,
            &#x27;width&#x27;: &#x27;98%&#x27;,
            &#x27;height&#x27;: &#x27;5%&#x27;,
            &#x27;background&#x27;: &#x27;-ms-linear-gradient(top,  rgba(237, 237, 237,0) 0%,rgba(237, 237, 237,0) 52%,rgba(237, 237, 237,1) 100%)&#x27;
        });
        descriptiontext.append(bottomfadeout);
        //check the scroll state to make fadeout effect divs appear and disappear.
        descContainer.bind(&#x27;scroll&#x27;, function () {
            //if it reaches the bottom, hide the bottom fadeout effect. Otherwise, show it
            if (descContainer.scrollTop() + descContainer.innerHeight() &gt;= descContainer[0].scrollHeight) {
                bottomfadeout.css({ &#x27;display&#x27;: &#x27;none&#x27; });
            }
            else {
                bottomfadeout.css({ &#x27;display&#x27;: &#x27;block&#x27; });
            }
            //if the scroller is not at the top, show the top fadeout effect. Otherwise, hide it.
            if (descContainer.scrollTop() &gt; 0) {
                topfadeout.css({ &#x27;display&#x27;: &#x27;block&#x27; });
            }
            else {
                topfadeout.css({ &#x27;display&#x27;: &#x27;none&#x27; });
            }
        });
        var artworksBar = $(document.createElement(&#x27;div&#x27;));
        artworksBar.addClass(&#x27;artworksBar&#x27;);
        artworksBar.css({
            position: &#x27;absolute&#x27;,
            width: &#x27;100%&#x27;,
            bottom: &#x27;5%&#x27;,
            height: &#x27;30%&#x27;,
        });

        var artworkContent = $(document.createElement(&#x27;div&#x27;));
        artworkContent.addClass(&#x27;artworkContent&#x27;);
        artworkContent.css({
            height: &#x27;92%&#x27;,
            &#x27;padding-bottom&#x27;: &#x27;2%&#x27;,
            &#x27;overflow-x&#x27;: &#x27;auto&#x27;,
            &#x27;overflow-y&#x27;: &#x27;hidden&#x27;,
            &#x27;white-space&#x27;: &#x27;nowrap&#x27;
        });
        var text = $(document.createElement(&#x27;div&#x27;));
        text.html(&quot;&lt;b&gt;Artworks in this Interactive Tour&lt;/b&gt;&quot;);
        text.css({
            bottom: &#x27;100%&#x27;,
            color: &#x27;black&#x27;,
            &#x27;font-size&#x27;: &#x27;120%&#x27;,
        });
        artworksBar.append(text);
        artworksBar.append(artworkContent);

        //create left fadeout for tourbar
        var leftfadeout = $(document.createElement(&#x27;div&#x27;));
        leftfadeout.addClass(&#x27;leftfadeout&#x27;);
        leftfadeout.css({
            &#x27;position&#x27;: &#x27;absolute&#x27;,
            &#x27;display&#x27;: &#x27;none&#x27;,
            &#x27;left&#x27;: &#x27;0px&#x27;,
            &#x27;width&#x27;: &#x27;5%&#x27;,
            &#x27;height&#x27;: &#x27;100%&#x27;,
            &#x27;background&#x27;: &#x27;-ms-linear-gradient(left,  rgba(237, 237, 237,1) 0%,rgba(237, 237, 237,0) 52%,rgba(237, 237, 237,0) 100%)&#x27;
        });
        artworkContent.append(leftfadeout);
        //create the right fadeout for tourBar
        var rightfadeout = $(document.createElement(&#x27;div&#x27;));
        rightfadeout.addClass(&#x27;rightfadeout&#x27;);
        rightfadeout.css({
            &#x27;position&#x27;: &#x27;absolute&#x27;,
            &#x27;right&#x27;: &#x27;0px&#x27;,
            &#x27;width&#x27;: &#x27;5%&#x27;,
            &#x27;height&#x27;: &#x27;100%&#x27;,
            &#x27;background&#x27;: &#x27;-ms-linear-gradient(left,  rgba(237, 237, 237,0) 0%,rgba(237, 237, 237,0) 52%,rgba(237, 237, 237,1) 100%)&#x27;
        });
        artworkContent.append(rightfadeout);

        //check the scroll state to make fadeout effect divs appear and disappear.
        artworkContent.bind(&#x27;scroll&#x27;, function () {
            //if it reaches the bottom, hide the bottom fadeout effect. Otherwise, show it
            if (artworkContent.scrollLeft() + artworkContent.innerWidth() &gt;= artworkContent[0].scrollWidth) {
                rightfadeout.css({ &#x27;display&#x27;: &#x27;none&#x27; });
            }
            else {
                rightfadeout.css({ &#x27;display&#x27;: &#x27;block&#x27; });
            }
            //if div scrolls to the left, show the top fadeout effect. Otherwise, hide it.
            if (artworkContent.scrollLeft() &gt; 0) {
                leftfadeout.css({ &#x27;display&#x27;: &#x27;block&#x27; });
            }
            else {
                leftfadeout.css({ &#x27;display&#x27;: &#x27;none&#x27; });
            }
        });

        contentdiv.append(artworksBar);
        //****************************************************** END of artworks

        var relatedArts = JSON.parse(tour.Metadata.RelatedArtworks);

        var displayLoading = $(document.createElement(&#x27;div&#x27;));
        displayLoading.addClass(&#x27;tourLoading&#x27;);
        displayLoading.css({
            &#x27;top&#x27;: &#x27;30%&#x27;,
            &#x27;left&#x27;: &#x27;10%&#x27;,
            &quot;background-color&quot;: &quot;rgba(0,0,0,0.5)&quot;,
            &#x27;position&#x27;: &#x27;absolute&#x27;,
            &quot;height&quot;: &quot;65%&quot;, &quot;width&quot;: &quot;83%&quot;,
            &#x27;border-style&#x27;: &#x27;solid&#x27;,
            &#x27;border-width&#x27;: &#x27;1.3em&#x27;,
            &#x27;border-color&#x27;: &#x27;rgba(16,14,12,0.92)&#x27;
        });

        displayareasub.append(displayLoading);

        var overlayOnRoot = $(document.createElement(&#x27;div&#x27;));
        overlayOnRoot.attr(&#x27;id&#x27;, &#x27;overlay2&#x27;);
        overlayOnRoot.css({
            position: &#x27;absolute&#x27;,
            top: 0,
            left: 0,
            width: &#x27;100%&#x27;,
            height: &#x27;100%&#x27;,
            &#x27;background-color&#x27;: &#x27;rgba(0,0,0,0.6)&#x27;,
        });
        root.append(overlayOnRoot);
        LADS.Util.showLoading(displayLoading);
        //get all related artwork
        var artsAdded = {};

        function relatedArtHelperWrapper(i) {
            return function (nextArt) {
                relatedArtHelper(nextArt, i);
            }
        }

        function relatedArtHelper(nextArt, flag) {
            var _relatedTours = [];
            if (artsAdded[nextArt.Identifier]) return;
            artsAdded[nextArt.Identifier] = true;

            //if (allTours) {
            //    for (var k = 0; k &lt; allTours.length; k++) {
            //        var currentTour = allTours[k];
            //        var privateState;
            //        if (currentTour.Metadata.Private) {
            //            privateState = (/^true$/i).test(currentTour.Metadata.Private);
            //        } else {
            //            privateState = false;
            //        }
            //        if (currentTour.Metadata.RelatedArtworks &amp;&amp; !privateState) {
            //            var relatedarts = JSON.parse(currentTour.Metadata.RelatedArtworks);
            //            for (var j = 0; j &lt; relatedarts.length; j++) {
            //                if (nextArt.Identifier === relatedarts[j]) {
            //                    // Add tour to viewer
            //                    if (_relatedTours.indexOf(currentTour) &lt; 0) {
            //                        _relatedTours.push(currentTour);
            //                    }
            //                }
            //            }
            //        }
            //    }
            //}
            artworkContent.append(makeRelatedArt(nextArt, tour, _relatedTours));
            if (flag == relatedArts.length - 1) {
                overlayOnRoot.fadeOut();
                displayLoading.fadeOut();
            }
        }

        for (var i = 0; i &lt; relatedArts.length; i++) {
            LADS.Worktop.Database.getDoq(relatedArts[i], relatedArtHelperWrapper(i));

        }

        if (relatedArts.length !== 0) {
            text.css(&#x27;visibility&#x27;, &#x27;visible&#x27;);
            descContainer.css({ height: &quot;60%&quot; });
            selectTour.css({ height: &quot;12.3%&quot; });
            artworksBar.ready(function () {
                artworksBar.on(&quot;load&quot;, function () {
                    $(&#x27;.tour&#x27;).outerWidth(artworksBar.outerWidth() / 4);
                    artworkContent.outerWidth($(&#x27;.tour&#x27;).outerWidth() * (1 + relatedArts.length));
                });
            });
        } else {
            overlayOnRoot.fadeOut();
            displayLoading.fadeOut();
            text.css(&#x27;visibility&#x27;, &#x27;hidden&#x27;);
        }

        this.css({ &#x27;background-color&#x27;: &#x27;rgb(255,255,255)&#x27;, &#x27;color&#x27;: &#x27;black&#x27; });

        currentExhElements.displayareasub = displayareasub;

        changeOrientation();

        $(document).ready(function () {
            displayareasub.css({ &#x27;width&#x27;: &#x27;60%&#x27;, &#x27;height&#x27;: &#x27;60%&#x27; });
            setTimeout(function () {
                overlayOnRoot.fadeOut();
                displayLoading.fadeOut();
                displayareasub.animate({
                    &#x27;width&#x27;: &#x27;100%&#x27;, &#x27;height&#x27;: &#x27;100%&#x27;, &#x27;left&#x27;: &#x27;0%&#x27;
                }, 500);
            });
        });

    }

    /**
    * Function to add a related art to a tour at the bottom of the tour information section.  Takes the name of the tour to allow
    * the user to return to the appropriate tour when exiting artmode after entering it from the related art.
    *@return: related artworks
    */
    function makeRelatedArt(artInfo, tour, relatedTours) {
        //var xml = LADS.Worktop.Database.getDoqXML(artInfo.Identifier);
        //var parser = new DOMParser();
        //var artworkXML = parser.parseFromString(xml, &#x27;text/xml&#x27;);
        if (artInfo.Folders.length &lt;= 1) {//if the artwork is not in any exhibition, don&#x27;t show.
            return;
        }
        var art = $(document.createElement(&#x27;div&#x27;));
        art.addClass(&#x27;tour&#x27;);
        art.css({
            display: &#x27;inline-block&#x27;,
            width: &#x27;30%&#x27;,
            height: &#x27;100%&#x27;,
            &#x27;margin-right&#x27;: &#x27;1%&#x27;,
            &#x27;background-color&#x27;: &#x27;black&#x27;,
            &#x27;background-image&#x27;: &#x27;url(&#x27; + LADS.Worktop.Database.fixPath(artInfo.Metadata.Thumbnail) + &#x27;)&#x27;,
            &#x27;background-size&#x27;: &#x27;contain&#x27;,
            &#x27;background-repeat&#x27;: &#x27;no-repeat&#x27;,
            &#x27;background-position&#x27;: &#x27;center center&#x27;,
            overflow: &#x27;hidden&#x27;,
        });


        var artName = $(document.createElement(&#x27;div&#x27;));
        artName.addClass(&#x27;tourName&#x27;);
        artName.css({
            width: &#x27;100%&#x27;,
            height: &#x27;20%&#x27;,
            padding: &#x27;3px 10px&#x27;,
            &#x27;font-size&#x27;: &#x27;150%&#x27;,
            background: &#x27;rgba(0,0,0,.6)&#x27;,
        });

        var artTextName = artInfo.Name;

        if (artInfo.Name.length &gt; 16) {
            artTextName = artTextName.substr(0, 16) + &#x27;...&#x27;;
        }

        artName.text(artTextName);

        art.append(artName);
        //go to selected artwork mode when clicked
        art.click(function () {
            /* nbowditch _editted 2/13/2014 : added prevInfo */
            var prevInfo = { prevPage: &quot;exhibitions&quot;, prevScroll: 0 };
            var curOpts = { catalogState: null, doq: artInfo, split: null };
            curOpts.split = &#x27;L&#x27;;
            var deepZoom = new LADS.Layout.Artmode(prevInfo, curOpts, tour);
            /* end nbowditch edit */
            root.css({ &#x27;overflow-x&#x27;: &#x27;hidden&#x27; });
            LADS.Util.UI.slidePageLeftSplit(root, deepZoom.getRoot());
        });

        return art;
    }

    /**
    *add related tours to an exhibition in the exhibition information section. 
    *@param: tourInfo 
    *@return: interactive tours to this exhibition
    */
    function makeTour(tourInfo) {
        var tour = $(document.createElement(&#x27;div&#x27;));
        tour.addClass(&#x27;tour&#x27;);
        tour.css({
            display: &#x27;inline-block&#x27;,
            width: &#x27;30%&#x27;,
            height: &#x27;100%&#x27;,
            &#x27;margin-right&#x27;: &#x27;1%&#x27;,
            &#x27;background-color&#x27;: &#x27;black&#x27;,
            &#x27;background-image&#x27;: &#x27;url(&#x27; + LADS.Worktop.Database.fixPath(tourInfo.Metadata.Thumbnail) + &#x27;)&#x27;,
            &#x27;background-size&#x27;: &#x27;contain&#x27;,
            &#x27;background-repeat&#x27;: &#x27;no-repeat&#x27;,
            &#x27;background-position&#x27;: &#x27;center center&#x27;,
            overflow: &#x27;hidden&#x27;,
        });


        var tourName = $(document.createElement(&#x27;div&#x27;));
        tourName.addClass(&#x27;tourName&#x27;);
        tourName.css({
            width: &#x27;100%&#x27;,
            height: &#x27;20%&#x27;,
            padding: &#x27;3px 10px&#x27;,
            &#x27;font-size&#x27;: &#x27;150%&#x27;,
            background: &#x27;rgba(0,0,0,.6)&#x27;,
        });

        var tourTextName = tourInfo.Name;

        if (tourInfo.Name.length &gt; 18) {
            tourTextName = tourTextName.substr(0, 18) + &#x27;...&#x27;;
        }
        tourName.text(tourTextName);

        tour.append(tourName);

        tour.click(function () {
            switchPageTour(tourInfo);
        });

        return tour;
    }

    /**
    *switch the exhibition page to catalog/artmode
    */
    function switchPage(exhibition) {
        if (!switching) {
            switching = true;
            var catalog = new LADS.Layout.Catalog(exhibition);

            LADS.Util.UI.slidePageLeftSplit(root, catalog.getRoot(), function () {
                catalog.loadInteraction();
            });
        }
    }

    /**
    *switch player when currently in a tour page in exhibition
    */
    function switchPageTour(tour) {
        var rinData, rinPlayer;
        if (!switching) {
            switching = true;
            rinData = JSON.parse(unescape(tour.Metadata.Content));
            if (!rinData || !rinData.data) {
                var messageBox = $(LADS.Util.UI.popUpMessage(null, &quot;Cannot play empty tour.&quot;, null));
                messageBox.css(&#x27;z-index&#x27;, LADS.TourAuthoring.Constants.aboveRinZIndex + 7);
                root.append(messageBox);
                messageBox.fadeIn(500);
                switching = false;
                return;
            }
            rinPlayer = new LADS.Layout.TourPlayer(rinData, tour);

            if (LADS.Util.Splitscreen.on()) {//if the splitscreen is on, exit it.
                var parentid = root.parent().attr(&#x27;id&#x27;);
                LADS.Util.Splitscreen.exit(parentid[parentid.length - 1]);
            }

            LADS.Util.UI.slidePageLeftSplit(root, rinPlayer.getRoot(), rinPlayer.startPlayback);
        }
    }

    /**
     * Function for reflowing page based on orientation / for splitscreen
     */
    function changeOrientation() {
        if (LADS.Util.Splitscreen.on()) { // Splitscreen and portrait mode
            leftbarHeader.css({
                height: &#x27;5%&#x27;,
                width: &#x27;100%&#x27;
            });
            exhibitionLabel.css({
                width: &#x27;45%&#x27;,
            });
            toursLabel.css({
                width: &#x27;45%&#x27;,
            });
            if (selectText !== undefined) {
                selectText.css({
                    &#x27;font-size&#x27;: &#x27;1em&#x27;,
                    &#x27;letter-spacing&#x27;: &#x27;0em&#x27;,
                });
                titlediv.css({
                    &#x27;font-size&#x27;: &#x27;3em&#x27;,
                    &#x27;letter-spacing&#x27;: &#x27;0em&#x27;,
                });
                sub1.css({
                    &#x27;font-size&#x27;: &#x27;1.5em&#x27;,
                    &#x27;letter-spacing&#x27;: &#x27;0em&#x27;,
                });
                sub2.css({
                    &#x27;font-size&#x27;: &#x27;1em&#x27;,
                    &#x27;letter-spacing&#x27;: &#x27;0em&#x27;,
                });
            }
        } else { // Default
            leftbarHeader.css({
                height: &#x27;5%&#x27;,
                width: &#x27;100%&#x27;
            });
            exhibitionLabel.css({
                width: &#x27;45%&#x27;,
            });
            toursLabel.css({
                width: &#x27;45%&#x27;,
            });
            if (selectText !== undefined) {
                selectText.css({
                    &#x27;font-size&#x27;: LADS.Util.getMaxFontSizeEM(&quot;Begin Tour&quot;, 1, 1000, $(window).height() * 0.03),
                    &#x27;letter-spacing&#x27;: &#x27;inherit&#x27;,
                });
                titlediv.css({
                    //&#x27;font-size&#x27;: ,
                    &#x27;letter-spacing&#x27;: &#x27;inherit&#x27;,
                });
                if (sub1) {
                    sub1.css({
                        &#x27;font-size&#x27;: &#x27;3em&#x27;,
                        &#x27;letter-spacing&#x27;: &#x27;inherit&#x27;,
                    });
                }
                if (sub2) {
                    sub2.css({
                        &#x27;font-size&#x27;: &#x27;2em&#x27;,
                        &#x27;letter-spacing&#x27;: &#x27;inherit&#x27;,
                    });
                }
            }
        }
    }

    function getRoot() {
        return root;
    }

};

LADS.Layout.Exhibitions.default_options = {};
    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
