<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>LADS/TAG-embed.js - Touch Art Gallery web application</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../../LADS/images/WideLogo.scale-100.png" title="Touch Art Gallery web application"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 1.0.0</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/CryptoJS.html">CryptoJS</a></li>
            
                <li><a href="../classes/LADS.Layout.Artmode.html">LADS.Layout.Artmode</a></li>
            
                <li><a href="../classes/LADS.Layout.InternetFailurePage.js.html">LADS.Layout.InternetFailurePage.js</a></li>
            
                <li><a href="../classes/LADS.Layout.StartPage.html">LADS.Layout.StartPage</a></li>
            
                <li><a href="../classes/Telemetry.html">Telemetry</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: LADS/TAG-embed.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
var TAG_embed = function(tagInput) {
    /**
     * Embed TAG as an iframe in your site, using the demo.html file as the source.
     * The tagPath argument is ignored here, but it is included for consistency
     * with the TAG function.
     * @param tagInput     object with the following properties:
     *                       path          relative path from your html file to the TAG directory
     *                                        (e.g., &#x27;./a/b/TAG&#x27;)
     *                       containerId   the id of the div in which you want to embed TAG
     *                       serverIp      the ip adress of the server to which you want to connect
     *                       width         the desired width of TAG
     *                       height        the desired height of TAG
     *                       allowServerChange   should a button be shown on the splash screen that allows server change?
     *                       hiddenCollections   a list of collection IDs for published collections to be hidden
     */

    // embed iframe in $(&#x27;#&#x27;+tagContainerId)
    var tagPath = tagInput.path,
        tagContainerId = tagInput.containerId,
        ip = tagInput.serverIp,
        hiddenCollections = tagInput.hiddenCollections || [],
        allowServerChange = tagInput.allowServerChange,
        width = tagInput.width,
        height = tagInput.height,
        container,
        frame,
        frameDoc,
        htmlStr,
        tempImage,
        frameContainer,
        frameInnerContainer;
    
    if (typeof tagPath !== &#x27;string&#x27;) {
        console.log(&#x27;specify a string path to the directory containing TAG&#x27;);
        return;
    } else if (!tagContainerId || typeof tagContainerId !== &#x27;string&#x27;) {
        console.log(&#x27;tagContainerId must be a valid string&#x27;);
        return;
    }

    container = document.getElementById(tagContainerId);
    if(!tagContainerId || !container) {
        console.log(&#x27;no tagContainerId argument specified or no element with matching id&#x27;);
        return;
    }

    localStorage.invisibleCollectionsTAG = JSON.stringify(tagInput.hiddenCollections);

    // fix input paths without trailing &#x27;/&#x27;
    if(tagPath &amp;&amp; tagPath[tagPath.length - 1] !== &#x27;/&#x27;) {
        tagPath += &#x27;/&#x27;;
    }

    ip = ip || &#x27;browntagserver.com&#x27;;
    width = parseFloat(width || container.style.width || &#x27;740&#x27;);
    height = parseFloat(height || container.style.height || &#x27;460&#x27;);

    frameContainer = document.createElement(&#x27;div&#x27;);
    frameContainer.style.width = width + &#x27;px&#x27;;
    frameContainer.style.height = height + &#x27;px&#x27;;
    frameContainer.style.position = &#x27;relative&#x27;;
    frameContainer.id = &#x27;frameContainer&#x27;;
    container.appendChild(frameContainer);

    frameInnerContainer = document.createElement(&#x27;div&#x27;);
    frameInnerContainer.id = &#x27;frameInnerContainer&#x27;;
    frameContainer.appendChild(frameInnerContainer);

    frame = document.createElement(&#x27;iframe&#x27;);
    frame.setAttribute(&#x27;allowfullscreen&#x27;, &#x27;true&#x27;);
	frame.style.width = width + &#x27;px&#x27;;
	frame.style.height = height + &#x27;px&#x27;;
	frame.style.position = &#x27;relative&#x27;;
	frame.style.border = &#x27;0px&#x27;;
	frameInnerContainer.appendChild(frame);

    // tempImage = document.createElement(&#x27;img&#x27;);
    // tempImage.src = tagPath+&#x27;images/splash.jpg&#x27;;
    // tempImage.style.width = &#x27;100%&#x27;;
    // tempImage.style.height= &#x27;100%&#x27;;
    // tempImage.style.position = &#x27;absolute&#x27;;
    // frameInnerContainer.appendChild(tempImage);
    
    // write out html of iframe document
    // ideally, we could just put demo.html as the src of the iframe, but
    // we need TAG to load with the correct width/height, so the developer would
    // need to edit demo.html anytime the width changes

    htmlStr =  &#x27;&lt;!DOCTYPE html&gt; \
                &lt;html&gt; \
                &lt;head&gt; \
                    &lt;meta charset=&quot;utf-8&quot; /&gt; \
                    &lt;title&gt;Touch Art Gallery&lt;/title&gt; \
                    &lt;script src=&quot;&#x27;+tagPath+&#x27;TAG.js&quot;&gt;&lt;/script&gt; \
                    &lt;script&gt; \
                        window.onload = function() { \
                            TAG({ \
                                path:&quot;&#x27;+tagPath+&#x27;&quot;, \
                                containerId:&quot;tagContainer&quot;, \
                                serverIp:&quot;&#x27;+ip+&#x27;&quot;, \
                                allowServerChange:&#x27;+allowServerChange+&#x27; \
                            }); \
                        }; \
                    &lt;/script&gt; \
                    &lt;style&gt; \
                        * { \
                            margin: 0px; \
                            padding: 0px; \
                        } \
                    &lt;/style&gt; \
                &lt;/head&gt; \
                &lt;body&gt; \
                    &lt;div id=&quot;tagContainer&quot; style=&quot;background:#222222;margin-left:16px;  width:&#x27;+(width-32)+&#x27;px; height:&#x27;+(height-18)+&#x27;px;&quot;&gt; \
                    &lt;/div&gt; \
                &lt;/body&gt; \
                &lt;/html&gt;&#x27;;

    frameDoc = frame.contentWindow.document;
    frameDoc.open();
    frameDoc.write(htmlStr);
    frameDoc.close();

    /* nbowditch _editted 2/23/2014 : stopped scrolling when over tag*/
    /* NOTE: had to do this in 2 places for cross-browser support.
       for FF and IE, propogation had to be stopped inside the iframe.
       For chrome, it had to be stopped outside iframe.
    */

    var frameDiv = document.getElementById(&#x27;frameInnerContainer&#x27;);

    $frameDiv = $(frameDiv);

    $frameDiv.on(&#x27;mouseenter&#x27;, function() {
        $frameDiv.off(&#x27;mouseleave&#x27;);
        // console.log(&#x27;in frame div&#x27;);
        // $(&#x27;*&#x27;).on(&#x27;scroll.a mousewheel.a DOMMouseScroll.a MozMousePixelScroll.a&#x27;, function(e) {
        //     console.log(&#x27;in body scroll&#x27;);
        //     e.stopPropagation();
        //     e.cancelBubble = true;
        //     return false;
        // });
        $(&#x27;body&#x27;).css(&#x27;position&#x27;, &#x27;fixed&#x27;);

        $frameDiv.on(&#x27;mouseleave&#x27;, function() {
            //console.log(&#x27;leaving frame div&#x27;);
            //$(&#x27;*&#x27;).off(&#x27;scroll.a mousewheel.a DOMMouseScroll.a MozMousePixelScroll.a&#x27;);
            $(&#x27;body&#x27;).css(&#x27;position&#x27;, &#x27;static&#x27;);
        });
    });


    // frameDiv.addEventListener(&#x27;mousewheel&#x27;, function (evt) {
    //     evt.stopPropagation();
    //     evt.preventDefault();
    //     return false;
    // });
    // frameDiv.addEventListener(&#x27;DOMMouseScroll&#x27;, function (evt) {
    //     evt.stopPropagation();
    //     evt.preventDefault();
    //     return false;
    // });
    // frameDiv.addEventListener(&#x27;MozMousePixelScroll&#x27;, function (evt) {
    //     evt.stopPropagation();
    //     evt.preventDefault();
    //     return false;
    // });

    /* end nbowditch edit */
};
    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
